import{j as e,m as c,A as R}from"./ui-DXG44aSJ.js";import{u as q,r as n}from"./router-DFnE1L-t.js";import{u as V}from"./index.esm-B0I9BSpA.js";import{o as E,c as z,a as b,b as T,d as m,e as Y}from"./index.esm-kU_tS0bV.js";import{z as d}from"./index-B-R1b6bD.js";import{a as B}from"./api-CuAKXfO4.js";import{O as D}from"./OrganizationLogo-CFxbrXK6.js";import{F as O}from"./AcademicCapIcon-DzrCHr5U.js";import{F as j}from"./EyeSlashIcon-DScm6DLE.js";import{F as N}from"./EyeIcon-Bt_hkgUK.js";import"./redux-DEMpy3iB.js";import"./vendor-gH-7aFTg.js";import"./utils-DC-dt1nQ.js";const I=z().shape({fullName:m().required("Full name is required").min(2,"Name must be at least 2 characters").max(100,"Name must be less than 100 characters"),email:m().required("Email is required").email("Please enter a valid email address").lowercase(),password:m().required("Password is required").min(8,"Password must be at least 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,"Password must contain uppercase, lowercase, number, and special character"),confirmPassword:m().required("Please confirm your password").oneOf([Y("password")],"Passwords do not match"),batch:T().required("Batch passout year is required").min(1950,"Please enter a valid batch passout year").max(new Date().getFullYear()+10,"Batch passout year seems too far in the future"),acceptTerms:b().oneOf([!0],"You must accept the terms and conditions"),acceptPrivacy:b().oneOf([!0],"You must accept the privacy policy")}),ie=()=>{const h=q(),[x,w]=n.useState(!1),[u,v]=n.useState(!1),[i,p]=n.useState(1),[W,Z]=n.useState([]),[g,y]=n.useState(!1),{register:r,handleSubmit:k,formState:{errors:t,isValid:P},watch:S,setValue:G,trigger:$}=V({resolver:E(I),mode:"onChange"}),f=S(),C=a=>{if(!a)return{score:0,text:"",color:"bg-gray-200"};let s=0;return s=[a.length>=8,/[a-z]/.test(a),/[A-Z]/.test(a),/\d/.test(a),/[@$!%*?&]/.test(a)].filter(Boolean).length,{score:s,...{0:{text:"Very Weak",color:"bg-red-500"},1:{text:"Very Weak",color:"bg-red-500"},2:{text:"Weak",color:"bg-orange-500"},3:{text:"Fair",color:"bg-yellow-500"},4:{text:"Good",color:"bg-blue-500"},5:{text:"Strong",color:"bg-green-500"}}[s]}},F=async a=>{y(!0);try{const s={email:a.email,password:a.password,fullName:a.fullName,batch:parseInt(a.batch)};console.log("Sending registration payload:",s);const o=await B.post("/auth/register",s);if(console.log("Registration response:",o.data),o.data.success)d.success(o.data.message||"Registration successful! Your account is pending alumni verification."),h("/auth/verify-email",{state:{email:s.email,verificationPending:!0}});else throw new Error(o.data.message||"Registration failed")}catch(s){console.error("Registration error:",s),s.response?.data?.message?d.error(s.response.data.message):s.message?d.error(s.message):d.error("Registration failed. Please try again.")}finally{y(!1)}},A=async()=>{await $(i===1?["fullName","email"]:["password","confirmPassword","batch"])&&p(2)},l=C(f.password||"");return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-blue-900 dark:to-indigo-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(c.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex justify-center mb-4",children:e.jsx(D,{size:"2xl",className:"flex-shrink-0"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Join Alumni Portal"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Alumni Network Registration"}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ${i>=1?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}`,children:"1"}),e.jsx("div",{className:`w-12 h-1 rounded ${i>=2?"bg-blue-500":"bg-gray-200"}`}),e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ${i>=2?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}`,children:"2"})]})})]}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card p-8",children:e.jsx("form",{onSubmit:k(F),className:"space-y-6",children:e.jsxs(R,{mode:"wait",children:[i===1&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name *"}),e.jsx("div",{className:"relative",children:e.jsx("input",{...r("fullName"),type:"text",placeholder:"Enter your full name",className:`form-input pl-10 ${t.fullName?"border-red-500":""}`})}),t.fullName&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.fullName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address *"}),e.jsx("div",{className:"relative",children:e.jsx("input",{...r("email"),type:"email",placeholder:"Enter your email",className:`form-input pl-10 ${t.email?"border-red-500":""}`})}),t.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.email.message})]}),e.jsx("button",{type:"button",onClick:A,className:"w-full btn-guild",children:"Continue to Academic Details"})]},"step1"),i===2&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Your Batch Passout Year *"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{...r("batch"),type:"number",placeholder:"2022",min:"1950",max:new Date().getFullYear()+10,className:`form-input pl-10 ${t.batch?"border-red-500":""}`})]}),t.batch&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.batch.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the year you passed out from your institution"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...r("password"),type:x?"text":"password",placeholder:"Create a strong password",className:`form-input pr-10 ${t.password?"border-red-500":""}`}),e.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?e.jsx(j,{className:"h-5 w-5"}):e.jsx(N,{className:"h-5 w-5"})})]}),f.password&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Password strength"}),e.jsx("span",{className:`text-xs font-medium ${l.score>=4?"text-green-500":l.score>=3?"text-yellow-500":"text-red-500"}`,children:l.text})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${l.color}`,style:{width:`${l.score/5*100}%`}})})]}),t.password&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...r("confirmPassword"),type:u?"text":"password",placeholder:"Confirm your password",className:`form-input pr-10 ${t.confirmPassword?"border-red-500":""}`}),e.jsx("button",{type:"button",onClick:()=>v(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?e.jsx(j,{className:"h-5 w-5"}):e.jsx(N,{className:"h-5 w-5"})})]}),t.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.confirmPassword.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{...r("acceptTerms"),type:"checkbox",className:"mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("label",{className:"ml-2 text-sm text-gray-600 dark:text-gray-300",children:["I accept the"," ",e.jsx("span",{className:"text-blue-600 hover:text-blue-800 underline cursor-pointer",children:"Terms and Conditions"})]})]}),t.acceptTerms&&e.jsx("p",{className:"text-sm text-red-500",children:t.acceptTerms.message}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{...r("acceptPrivacy"),type:"checkbox",className:"mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("label",{className:"ml-2 text-sm text-gray-600 dark:text-gray-300",children:["I accept the"," ",e.jsx("span",{className:"text-blue-600 hover:text-blue-800 underline cursor-pointer",children:"Privacy Policy"})]})]}),t.acceptPrivacy&&e.jsx("p",{className:"text-sm text-red-500",children:t.acceptPrivacy.message})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>p(1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back"}),e.jsx("button",{type:"submit",disabled:g||!P,className:"flex-1 btn-guild disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Account..."]}):"Create Account"})]})]},"step2")]})})}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-center mt-6",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",e.jsx("button",{onClick:()=>h("/auth/login"),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Sign in here"})]})})]})})};export{ie as default};
//# sourceMappingURL=RegisterPage-rYhOWoc3.js.map
