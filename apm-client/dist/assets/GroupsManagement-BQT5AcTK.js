import{j as e,a as A,L as S,b as le,q as de,z as ie,m as oe}from"./ui-BlmhFX_F.js";import{r as i,R as P}from"./router-DFnE1L-t.js";import{c as ne,d as ce,e as me,f as xe,g as ue,b as ge,h as be,a as he}from"./groupsApi-u1QIlJYh.js";import{z as R,c as D,u as pe}from"./index-DLsoxDpQ.js";import{F as M}from"./UserGroupIcon-CnvKPj6V.js";import{F as T}from"./UsersIcon-Ct2fUG5g.js";import{F as ye}from"./CogIcon-DfBHaluj.js";import{F as Y}from"./EyeIcon-Bt_hkgUK.js";import{L as $}from"./LoadingSpinner-BR8iBbEe.js";import{F as G}from"./ChartBarIcon-CLsU3hA-.js";import{u as U}from"./index.esm-B0I9BSpA.js";import{F as O}from"./XMarkIcon-D1c1wIzV.js";import{F as K}from"./InformationCircleIcon-DNiszcBI.js";import{a as fe}from"./alumniApi-CU8Q3rXc.js";import{F as Q}from"./MagnifyingGlassIcon-C2UCCqkW.js";import{F as V}from"./TrashIcon-mpSEd7uz.js";import{F as z}from"./ExclamationTriangleIcon-DCwPn2ZM.js";import{F as je}from"./EnvelopeIcon-BhdVQxlI.js";import{F as J}from"./PlusIcon-B6tiF6Nj.js";import"./redux-VN59sPcb.js";import"./vendor-gH-7aFTg.js";function ve({title:t,titleId:l,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},r),t?i.createElement("title",{id:l},t):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const Ne=i.forwardRef(ve);function ke({title:t,titleId:l,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},r),t?i.createElement("title",{id:l},t):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const _=i.forwardRef(ke),we={CONVENER:{label:"Convener",colorClass:"bg-purple-100 text-purple-800 border-purple-200",priority:1},CO_CONVENER:{label:"Co-Convener",colorClass:"bg-purple-50 text-purple-700 border-purple-150",priority:2},STAKE_HOLDER:{label:"Stake Holder",colorClass:"bg-indigo-100 text-indigo-800 border-indigo-200",priority:3},PRESIDENT:{label:"President",colorClass:"bg-blue-100 text-blue-800 border-blue-200",priority:1},VICE_PRESIDENT:{label:"Vice President",colorClass:"bg-blue-50 text-blue-700 border-blue-150",priority:2},SECRETARY:{label:"Secretary",colorClass:"bg-green-100 text-green-800 border-green-200",priority:3},JOINT_SECRETARY:{label:"Joint Secretary",colorClass:"bg-green-50 text-green-700 border-green-150",priority:4},TREASURER:{label:"Treasurer",colorClass:"bg-orange-100 text-orange-800 border-orange-200",priority:5},JOINT_TREASURER:{label:"Joint Treasurer",colorClass:"bg-orange-50 text-orange-700 border-orange-150",priority:6},CHIEF_ADVISOR:{label:"Chief Advisor",colorClass:"bg-gray-100 text-gray-800 border-gray-200",priority:1},JOINT_ADVISOR:{label:"Joint Advisor",colorClass:"bg-gray-50 text-gray-700 border-gray-150",priority:2}},q={sm:"text-xs px-2 py-1 rounded-md",md:"text-sm px-3 py-1.5 rounded-lg",lg:"text-base px-4 py-2 rounded-lg"},F=t=>({CELL:["CONVENER","CO_CONVENER","STAKE_HOLDER"],COMMITTEE:["CONVENER","CO_CONVENER","STAKE_HOLDER"],OFFICE_BEARERS:["PRESIDENT","VICE_PRESIDENT","SECRETARY","JOINT_SECRETARY","TREASURER","JOINT_TREASURER"],ADVISORS:["CHIEF_ADVISOR","JOINT_ADVISOR"]})[t],Ce=(t,l)=>F(l).includes(t),Ee=({role:t,groupType:l,size:r="md",className:a=""})=>{const c=we[t];if(!c)return e.jsx("span",{className:`inline-flex items-center font-medium bg-gray-100 text-gray-800 border border-gray-200 ${q[r]} ${a}`,children:t.replace(/_/g," ").toLowerCase().replace(/\b\w/g,h=>h.toUpperCase())});const d=!l||Ce(t,l),y=d?c.colorClass:"bg-red-100 text-red-800 border-red-200";return e.jsxs("span",{className:`inline-flex items-center font-medium border ${y} ${q[r]} ${a}`,title:d?c.label:`Invalid role for ${l} group`,children:[c.label,!d&&e.jsx("span",{className:"ml-1 text-xs",children:"⚠️"})]})},H={CELL:{label:"Cell",description:"Specialized working groups",colorClass:"bg-purple-100 text-purple-800 border-purple-200",iconColor:"text-purple-600"},COMMITTEE:{label:"Committee",description:"Advisory and decision-making bodies",colorClass:"bg-blue-100 text-blue-800 border-blue-200",iconColor:"text-blue-600"},OFFICE_BEARERS:{label:"Office Bearers",description:"Executive leadership team",colorClass:"bg-green-100 text-green-800 border-green-200",iconColor:"text-green-600"},ADVISORS:{label:"Advisors",description:"Experienced guidance providers",colorClass:"bg-orange-100 text-orange-800 border-orange-200",iconColor:"text-orange-600"}},Re=({group:t,showActions:l=!1,onEdit:r,onView:a,onAddMembers:c,onViewMembers:d,className:y="",isPublic:h=!1,showViewButton:n=!0})=>{const m=H[t.type]||H.CELL,x=F(t.type);return e.jsxs("div",{className:`group bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-all duration-200 ${y}`,children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${m.colorClass.replace("text-","bg-").replace("-800","-100")} ${m.colorClass.replace("bg-","text-").replace("-100","-600")}`,children:e.jsx(M,{className:`w-6 h-6 ${m.iconColor}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t.name}),e.jsx("div",{className:`w-2 h-2 rounded-full ${t.isActive?"bg-green-400":"bg-gray-400"}`,title:t.isActive?"Active":"Inactive"})]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${m.colorClass}`,children:m.label})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[e.jsx(T,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.membersCount})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.membersCount===1?"Member":"Members"})]})]}),t.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-4 leading-relaxed",children:t.description})]}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Available Roles:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(v=>e.jsx(Ee,{role:v,groupType:t.type,size:"sm"},v))})]})}),(l||!h)&&e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4",children:e.jsxs("div",{className:"space-y-3",children:[l&&c&&e.jsxs("button",{onClick:()=>c(t),className:"w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-lg transition-colors border border-blue-200 dark:border-blue-700",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Add Members"]}),e.jsxs("div",{className:"flex space-x-3",children:[d&&t.membersCount>0&&e.jsxs("button",{onClick:()=>d(t),className:"flex-1 flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors border border-gray-200 dark:border-gray-600",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"View Members"]}),l&&r&&e.jsxs("button",{onClick:()=>r(t),className:"flex-1 flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Manage"]}),n&&a&&!l&&e.jsxs("button",{onClick:()=>a(t),className:"flex-1 flex items-center justify-center px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-lg transition-colors border border-blue-200 dark:border-blue-700",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})})]})},Se={CELL:{label:"Cells",color:"purple",description:"Specialized working groups"},COMMITTEE:{label:"Committees",color:"blue",description:"Advisory and decision bodies"},OFFICE_BEARERS:{label:"Office Bearers",color:"green",description:"Executive leadership team"},ADVISORS:{label:"Advisors",color:"orange",description:"Advisory and guidance council"}},Ae=({className:t="",showTitle:l=!0,compact:r=!1})=>{const{data:a,isLoading:c,isError:d,error:y}=ne();if(c)return e.jsx("div",{className:`${t} flex items-center justify-center p-8`,children:e.jsx($,{size:"lg"})});if(d||!a)return e.jsxs("div",{className:`${t} text-center p-8`,children:[e.jsx(G,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:y?.data?.message||"Failed to load group statistics"})]});const h=a.totalGroups>0?Math.round(a.activeGroups/a.totalGroups*100):0;return e.jsxs("div",{className:t,children:[l&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(G,{className:"w-7 h-7 mr-3 text-blue-600"}),"Group Statistics"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Overview of organization groups and membership"})]}),e.jsxs("div",{className:`grid gap-6 mb-8 ${r?"grid-cols-2 lg:grid-cols-4":"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"}`,children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(M,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Groups"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.totalGroups})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(Ne,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Groups"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.activeGroups}),e.jsxs("p",{className:"text-sm text-green-600",children:[h,"% active"]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(T,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Members"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.totalMembers})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(G,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Avg Members"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.activeGroups>0?Math.round(a.totalMembers/a.activeGroups):0}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"per group"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Groups by Type"}),e.jsx("div",{className:"space-y-4",children:a.groupsByType.map(n=>{const m=Se[n.type];if(!m)return null;const x=a.totalGroups>0?Math.round(n.count/a.totalGroups*100):0,v=n.count>0?Math.round(n.activeCount/n.count*100):0;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`inline-block w-3 h-3 rounded-full mr-3 bg-${m.color}-500`}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:m.label}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:m.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-gray-900 dark:text-white",children:[n.activeCount,"/",n.count]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[v,"% active"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full bg-${m.color}-500`,style:{width:`${x}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[x,"% of total groups"]})]},n.type)})})]}),!r&&e.jsxs("div",{className:"mt-8 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{className:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-400 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/40 rounded-lg border border-blue-200 dark:border-blue-700 transition-colors",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"View All Groups"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-400 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/40 rounded-lg border border-blue-200 dark:border-blue-700 transition-colors",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Member Reports"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-400 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/40 rounded-lg border border-blue-200 dark:border-blue-700 transition-colors",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Export Statistics"]})]})]})]})},Ie=({isOpen:t,onClose:l})=>{const[r,{isLoading:a}]=ce(),{register:c,handleSubmit:d,watch:y,reset:h,formState:{errors:n}}=U({defaultValues:{name:"",type:"COMMITTEE",description:"",displayOrder:0}}),m=y("type"),x=F(m),v=[{value:"COMMITTEE",label:"Committee",description:"Advisory and decision-making bodies"},{value:"CELL",label:"Cell",description:"Specialized working groups"},{value:"OFFICE_BEARERS",label:"Office Bearers",description:"Executive leadership team"},{value:"ADVISORS",label:"Advisors",description:"Advisory and guidance council"}],g=()=>{h(),l()},w=async u=>{try{await r({name:u.name.trim(),type:u.type,description:u.description.trim(),displayOrder:u.displayOrder||void 0}).unwrap(),R.success("Group created successfully!"),g()}catch(j){console.error("Create group error:",j),R.error(j?.data?.message||"Failed to create group")}};return e.jsx(A,{appear:!0,show:t,as:i.Fragment,children:e.jsxs(S,{as:"div",className:"relative z-50",onClose:g,children:[e.jsx(A.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(A.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(S.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-6 w-6 text-blue-600 mr-3"}),e.jsx(S.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:"Create New Group"})]}),e.jsx("button",{onClick:g,className:"rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.jsx(O,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:d(w),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Name *"}),e.jsx("input",{type:"text",...c("name",{required:"Group name is required",minLength:{value:2,message:"Group name must be at least 2 characters"},maxLength:{value:100,message:"Group name cannot exceed 100 characters"}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter group name"}),n.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Type *"}),e.jsx("select",{...c("type",{required:"Group type is required"}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:v.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))}),n.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.type.message}),e.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(K,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:v.find(u=>u.value===m)?.description}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Available Roles:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:x.map(u=>e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded",children:u.replace(/_/g," ")},u))})]})]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,...c("description",{maxLength:{value:1e3,message:"Description cannot exceed 1000 characters"}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Enter group description (optional)"}),n.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.description.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",min:"0",...c("displayOrder",{min:{value:0,message:"Display order must be a non-negative number"},valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"}),n.displayOrder&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.displayOrder.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Lower numbers appear first in listings"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 rounded-lg transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):"Create Group"})]})]})]})})})})]})})},Me=({isOpen:t,onClose:l,group:r})=>{const[a,c]=i.useState(""),[d,y]=i.useState(null),[h,{isLoading:n}]=me(),{register:m,handleSubmit:x,watch:v,reset:g,setValue:w,formState:{errors:u}}=U({defaultValues:{userId:"",role:F(r.type)[0]}}),{data:j,isLoading:I}=fe({search:a,limit:20,sortBy:"fullName",sortOrder:"asc"},{skip:a.length<2}),C=F(r.type),o=v("role");i.useEffect(()=>{t||(g(),c(""),y(null))},[t,g]);const b=s=>{y(s),w("userId",s.id),c(s.fullName)},k=async s=>{try{console.log("Adding member with data:",{groupId:r.id,groupIdLength:r.id.length,groupIdType:typeof r.id,isValidUUID:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r.id),data:{userId:s.userId,userIdLength:s.userId.length,userIdType:typeof s.userId,isValidUserUUID:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s.userId),role:s.role}});const f=await h({groupId:r.id,data:{userId:s.userId,role:s.role}}).unwrap();console.log("Add member success:",f),R.success(`${d?.fullName} added to ${r.name}`),l()}catch(f){console.error("Add member error:",f),console.error("Full error object:",JSON.stringify(f,null,2)),console.error("Error status:",f?.status),console.error("Error data:",f?.data);const N=f?.data?.message||f?.message||"Failed to add member";R.error(N)}},E=C.map(s=>({value:s,label:s.replace(/_/g," ").replace(/\b\w/g,f=>f.toUpperCase()),description:Te(s,r.type)}));return e.jsx(A,{appear:!0,show:t,as:i.Fragment,children:e.jsxs(S,{as:"div",className:"relative z-50",onClose:l,children:[e.jsx(A.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(A.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(S.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"h-6 w-6 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsxs(S.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:["Add Member to ",r.name]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.type.replace(/_/g," ").toLowerCase()})]})]}),e.jsx("button",{onClick:l,className:"rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.jsx(O,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:x(k),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Alumni *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:a,onChange:s=>{c(s.target.value),s.target.value!==d?.fullName&&(y(null),w("userId",""))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Type to search alumni..."})]}),a.length>=2&&!d&&e.jsx("div",{className:"mt-2 max-h-60 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:I?e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"Searching..."}):j?.data?.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No alumni found"}):j?.data?.map(s=>e.jsx("button",{type:"button",onClick:()=>b(s),className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-600 border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-shrink-0",children:[s.profileImage?e.jsx("img",{src:D(`/api/users/profile-picture/${s.id}`),alt:s.fullName,className:"w-10 h-10 rounded-full object-cover",onError:f=>{const N=f.target;N.style.display="none";const L=N.parentElement?.querySelector(".fallback-avatar");L&&(L.style.display="flex")}}):null,e.jsx("div",{className:`fallback-avatar w-10 h-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center ${s.profileImage?"hidden":""}`,style:{display:s.profileImage?"none":"flex"},children:e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:s.fullName.charAt(0)})})]}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.fullName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Batch ",s.batch," ",s.email&&`• ${s.email}`]})]})]})},s.id))}),d&&e.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-shrink-0",children:[d.profileImage?e.jsx("img",{src:D(`/api/users/profile-picture/${d.id}`),alt:d.fullName,className:"w-10 h-10 rounded-full object-cover",onError:s=>{const f=s.target;f.style.display="none";const N=f.parentElement?.querySelector(".fallback-avatar");N&&(N.style.display="flex")}}):null,e.jsx("div",{className:`fallback-avatar w-10 h-10 rounded-full bg-blue-200 dark:bg-blue-800 flex items-center justify-center ${d.profileImage?"hidden":""}`,style:{display:d.profileImage?"none":"flex"},children:e.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:d.fullName.charAt(0)})})]}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:d.fullName}),e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["Batch ",d.batch," ",d.email&&`• ${d.email}`]})]}),e.jsx("button",{type:"button",onClick:()=>{y(null),w("userId",""),c("")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200",children:e.jsx(O,{className:"h-5 w-5"})})]})}),u.userId&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"Please select a user"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assign Role *"}),e.jsx("select",{...m("role",{required:"Please select a role"}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:E.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(K,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:E.find(s=>s.value===o)?.description})})]})}),u.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.role.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n||!d,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 rounded-lg transition-colors flex items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Add Member"]})})]})]})]})})})})]})})};function Te(t,l){return{CONVENER:"Leads the group and coordinates activities",CO_CONVENER:"Assists the convener and acts as deputy",STAKE_HOLDER:"Key contributor with significant involvement",PRESIDENT:"Chief executive officer of the organization",VICE_PRESIDENT:"Deputy to the president",SECRETARY:"Maintains records and handles correspondence",JOINT_SECRETARY:"Assists the secretary",TREASURER:"Manages finances and treasury",JOINT_TREASURER:"Assists the treasurer",CHIEF_ADVISOR:"Senior advisor providing strategic guidance",JOINT_ADVISOR:"Supporting advisor role"}[t]||"Group member role"}const Fe=({isOpen:t,onClose:l,group:r})=>{const[a,c]=i.useState(!1),[d,{isLoading:y}]=xe(),[h,{isLoading:n}]=ue(),{register:m,handleSubmit:x,reset:v,formState:{errors:g,isDirty:w}}=U({defaultValues:{name:"",description:"",isActive:!0,displayOrder:0}});i.useEffect(()=>{r&&v({name:r.name,description:r.description||"",isActive:r.isActive,displayOrder:r.displayOrder})},[r,v]);const u=r?F(r.type):[],j=()=>{v(),c(!1),l()},I=async o=>{if(r)try{await d({groupId:r.id,data:{name:o.name.trim(),description:o.description.trim()||void 0,isActive:o.isActive,displayOrder:o.displayOrder}}).unwrap(),R.success("Group updated successfully!"),j()}catch(b){console.error("Update group error:",b),R.error(b?.data?.message||"Failed to update group")}},C=async()=>{if(r)try{await h(r.id).unwrap(),R.success("Group deleted successfully!"),j()}catch(o){console.error("Delete group error:",o),R.error(o?.data?.message||"Failed to delete group")}};return r?e.jsx(A,{appear:!0,show:t,as:i.Fragment,children:e.jsxs(S,{as:"div",className:"relative z-50",onClose:j,children:[e.jsx(A.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(A.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(S.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-6 w-6 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsxs(S.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:["Manage Group: ",r.name]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.type.replace(/_/g," ").toLowerCase()," • ",r.membersCount," members"]})]})]}),e.jsx("button",{onClick:j,className:"rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.jsx(O,{className:"h-6 w-6"})})]}),a?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center",children:e.jsx(z,{className:"w-8 h-8 text-red-600 dark:text-red-400"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Delete Group"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to delete "',e.jsx("strong",{children:r.name}),'"?']}),e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:["This action cannot be undone. All ",r.membersCount," group members will be removed."]})]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:C,disabled:n,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:bg-red-400 rounded-lg transition-colors flex items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Delete Group"]})})]})]}):e.jsxs("form",{onSubmit:x(I),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Name *"}),e.jsx("input",{type:"text",...m("name",{required:"Group name is required",minLength:{value:2,message:"Group name must be at least 2 characters"},maxLength:{value:100,message:"Group name cannot exceed 100 characters"}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter group name"}),g.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Type"}),e.jsx("div",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:r.type.replace(/_/g," ")}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Group type cannot be changed after creation"}),e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Available Roles for this group type:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:u.map(o=>e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded",children:o.replace(/_/g," ")},o))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,...m("description",{maxLength:{value:1e3,message:"Description cannot exceed 1000 characters"}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Enter group description (optional)"}),g.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.description.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",min:"0",...m("displayOrder",{min:{value:0,message:"Display order must be a non-negative number"},valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),g.displayOrder&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.displayOrder.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Lower numbers appear first in listings"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"isActive",...m("isActive"),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active Group"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Inactive groups are hidden from public view"})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsxs("button",{type:"button",onClick:()=>c(!0),className:"px-4 py-2 text-sm font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 rounded-lg transition-colors flex items-center",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Delete Group"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y||!w,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 rounded-lg transition-colors flex items-center",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):"Save Changes"})]})]})]})]})})})})]})}):null},Ge=({isOpen:t,onClose:l,group:r,showRemoveButton:a=!1})=>{const[c,d]=i.useState(null),[y,h]=i.useState(new Set),[n,m]=i.useState(!1),{data:x,isLoading:v,isError:g,refetch:w}=ge({groupId:r?.id||"",includeMembers:!0},{skip:!r?.id||!t}),[u]=be(),j=(x?.members||[]).filter(o=>!y.has(o.user.id));P.useEffect(()=>{t&&r?.id?(h(new Set),(!x||x.id!==r.id)&&m(!0)):t||m(!1)},[t,r?.id,x]),P.useEffect(()=>{(x&&x.id===r?.id||g)&&m(!1)},[x,g,r?.id]);const I=async(o,b)=>{if(!(!r||!confirm(`Are you sure you want to remove ${b} from ${r.name}?`))){d(o);try{h(k=>new Set(k).add(o)),await u({groupId:r.id,userId:o}).unwrap(),R.success(`${b} removed from ${r.name}`)}catch(k){h(E=>{const s=new Set(E);return s.delete(o),s}),console.error("Remove member error:",k),R.error(k?.data?.message||"Failed to remove member")}finally{d(null)}}},C=({member:o})=>{const{user:b}=o,k=c===b.id;return e.jsx(oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative group",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-all duration-300 overflow-hidden border-b-4 border-b-blue-500 dark:border-b-blue-400",children:[e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:o.role.replace(/_/g," ")})}),a&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx("button",{onClick:()=>I(b.id,b.fullName),disabled:k,className:"p-2 rounded-full bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",title:"Remove member",children:k?e.jsx("div",{className:"w-4 h-4",children:e.jsx($,{size:"sm"})}):e.jsx(V,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"p-4 text-center h-64 flex flex-col justify-center",children:[e.jsx("div",{className:"flex justify-center mb-3",children:b.profileImage?e.jsx("img",{src:D(`/api/users/profile-picture/${b.id}`),alt:b.fullName,className:"h-16 w-16 rounded-full object-cover border-2 border-gray-100 dark:border-gray-700",onError:E=>{const s=E.target;s.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(b.fullName)}&background=3B82F6&color=fff&size=64`}}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-lg font-bold border-2 border-gray-100 dark:border-gray-700",children:b.fullName.split(" ").map(E=>E[0]).join("").slice(0,2).toUpperCase()})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate mb-1",children:b.fullName}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-4",children:["Batch ",b.batch]}),e.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:e.jsx("a",{href:`mailto:${b.email||""}`,className:"p-2 rounded-full bg-gray-50 dark:bg-gray-900/20 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors",title:"Email",children:e.jsx(je,{className:"h-4 w-4"})})})]})]})})};return r?e.jsxs(S,{open:t,onClose:l,className:"relative z-50",children:[e.jsx(le,{transition:!0,className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity data-[closed]:opacity-0 data-[enter]:duration-300 data-[leave]:duration-200 data-[enter]:ease-out data-[leave]:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsxs(de,{transition:!0,className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all data-[closed]:translate-y-4 data-[closed]:opacity-0 data-[enter]:duration-300 data-[leave]:duration-200 data-[enter]:ease-out data-[leave]:ease-in sm:my-8 sm:w-full sm:max-w-6xl sm:p-6 data-[closed]:sm:translate-y-0 data-[closed]:sm:scale-95",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsxs(ie,{as:"h3",className:"text-lg font-semibold leading-6 text-gray-900 dark:text-white",children:[r.name," Members"]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[j.length," ",j.length===1?"member":"members"]})]})]}),e.jsxs("button",{type:"button",className:"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:l,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(O,{className:"h-6 w-6","aria-hidden":"true"})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:v||n||!x&&t||x&&x.id!==r?.id?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx($,{size:"md"})}):g?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Failed to Load Members"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Unable to load the member list for this group."})]}):j.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:j.map(o=>e.jsx(C,{member:o},o.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(T,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Members"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This group doesn't have any members yet."})]})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{type:"button",className:"rounded-md bg-white dark:bg-gray-700 px-4 py-2 text-sm font-medium text-gray-900 dark:text-gray-300 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600",onClick:l,children:"Close"})})]})})})]}):null},tr=()=>{const{user:t}=pe(),[l,r]=i.useState(""),[a,c]=i.useState("ALL"),[d,y]=i.useState(!1),[h,n]=i.useState("groups"),[m,x]=i.useState(!1),[v,g]=i.useState(!1),[w,u]=i.useState(!1),[j,I]=i.useState(!1),[C,o]=i.useState(null),{data:b,isLoading:k,isError:E,error:s}=he({search:l,type:a==="ALL"?void 0:a,isActive:d?void 0:!0,limit:50}),f=b?.groups||[],N=t?.role==="SUPER_ADMIN",L=[{value:"ALL",label:"All Groups"},{value:"CELL",label:"Cells"},{value:"COMMITTEE",label:"Committees"},{value:"OFFICE_BEARERS",label:"Office Bearers"},{value:"ADVISORS",label:"Advisors"}],W=p=>{console.log("View group details:",p)},Z=p=>{o(p),u(!0)},B=()=>{x(!0)},X=p=>{o(p),g(!0)},ee=p=>{o(p),I(!0)},re=()=>{x(!1)},te=()=>{g(!1),o(null)},se=()=>{u(!1),o(null)},ae=()=>{I(!1),o(null)};return k?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx($,{size:"lg"})}):E?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Failed to Load Groups"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s?.data?.message||"Something went wrong"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(M,{className:"w-8 h-8 mr-3 text-blue-600"}),"Groups Management"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage organization groups, committees, and member assignments"})]}),N&&e.jsxs("button",{onClick:B,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors shadow-sm",children:[e.jsx(J,{className:"w-5 h-5 mr-2"}),"Create Group"]})]})}),e.jsx("div",{className:"mb-8",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>n("groups"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${h==="groups"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-5 h-5 mr-2"}),"Groups (",f.length,")"]})}),e.jsx("button",{onClick:()=>n("statistics"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${h==="statistics"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"w-5 h-5 mr-2"}),"Statistics"]})})]})}),h==="groups"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search groups...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:l,onChange:p=>r(p.target.value)})]})}),e.jsx("div",{className:"sm:w-48",children:e.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:a,onChange:p=>c(p.target.value),children:L.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"showInactive",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:d,onChange:p=>y(p.target.checked)}),e.jsx("label",{htmlFor:"showInactive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Show inactive"})]})]})}),f.length>0?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",style:{gridAutoRows:"auto"},children:f.map(p=>e.jsx(Re,{group:p,onView:W,onEdit:N?Z:void 0,onAddMembers:N?X:void 0,onViewMembers:ee,showActions:N,showViewButton:!N},p.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(M,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"No Groups Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:l||a!=="ALL"||d?"Try adjusting your search or filters":"No groups are currently available"}),N&&!l&&a==="ALL"&&e.jsxs("button",{onClick:B,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-lg transition-colors",children:[e.jsx(J,{className:"w-5 h-5 mr-2"}),"Create Your First Group"]})]})]}),h==="statistics"&&e.jsx(Ae,{}),e.jsx(Ie,{isOpen:m,onClose:re}),e.jsx(Fe,{isOpen:w,onClose:se,group:C}),C&&e.jsx(Me,{isOpen:v,onClose:te,group:C}),e.jsx(Ge,{isOpen:j,onClose:ae,group:C,showRemoveButton:N})]})};export{tr as default};
//# sourceMappingURL=GroupsManagement-BQT5AcTK.js.map
