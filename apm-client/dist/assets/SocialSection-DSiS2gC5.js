import{r as u,R as v}from"./router-BgvBx64T.js";import{j as e,m as c,A as w}from"./ui-DhYQrQWF.js";import{F as C}from"./ChevronUpIcon-BjTUVWAQ.js";import{d as G,q as Q,v as H,w as J,z as L}from"./index-CZ6-uofb.js";import{F as z}from"./SparklesIcon-DncUtMSz.js";import{F as M}from"./CalendarIcon-D1CEt3gK.js";import{F as Z}from"./ChevronRightIcon-DBNDVvZT.js";import{F as Y}from"./XMarkIcon-B58Eb0hU.js";import{C as _}from"./redux-CfKcOgfB.js";import{u as W}from"./PostImageDisplay-BLTVOls9.js";import{P as K}from"./PostCard-tgtijsOJ.js";import{F as q}from"./ChevronDownIcon-Cbf4tdh_.js";import{F as X}from"./DocumentTextIcon-CP6_YxxS.js";import{F as P}from"./ChartBarIcon-xItc45cH.js";import{F as ee}from"./UserGroupIcon-DpuBUa9P.js";import{F as te}from"./ClockIcon-53QLE2kZ.js";import{F as U}from"./CheckCircleIcon-CON4vt6K.js";import{a as I}from"./utils-CXyNmL__.js";function ae({title:n,titleId:t,...m},y){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:y,"aria-labelledby":t},m),n?u.createElement("title",{id:t},n):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8.25v-1.5m0 1.5c-1.355 0-2.697.056-4.024.166C6.845 8.51 6 9.473 6 10.608v2.513m6-4.871c1.355 0 2.697.056 4.024.166C17.155 8.51 18 9.473 18 10.608v2.513M15 8.25v-1.5m-6 1.5v-1.5m12 9.75-1.5.75a3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0L3 16.5m15-3.379a48.474 48.474 0 0 0-6-.371c-2.032 0-4.034.126-6 .371m12 0c.39.049.777.102 1.163.16 1.07.16 1.837 1.094 1.837 2.175v5.169c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 0 1 3 20.625v-5.17c0-1.08.768-2.014 1.837-2.174A47.78 47.78 0 0 1 6 13.12M12.265 3.11a.375.375 0 1 1-.53 0L12 2.845l.265.265Zm-3 0a.375.375 0 1 1-.53 0L9 2.845l.265.265Zm6 0a.375.375 0 1 1-.53 0L15 2.845l.265.265Z"}))}const O=u.forwardRef(ae);function se({title:n,titleId:t,...m},y){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:y,"aria-labelledby":t},m),n?u.createElement("title",{id:t},n):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const Te=u.forwardRef(se),re=G.injectEndpoints({endpoints:n=>({getTodaysBirthdays:n.query({query:()=>"/celebrations/birthdays/today",transformResponse:t=>t.data,providesTags:["Celebrations","Birthdays"]}),getUpcomingBirthdays:n.query({query:(t={})=>({url:"/celebrations/birthdays/upcoming",params:t}),transformResponse:t=>t.data,providesTags:["Celebrations","Birthdays"]}),getTodaysFestivals:n.query({query:()=>"/celebrations/festivals/today",transformResponse:t=>t.data,providesTags:["Celebrations","Festivals"]}),getUpcomingFestivals:n.query({query:(t={})=>({url:"/celebrations/festivals/upcoming",params:t}),transformResponse:t=>t.data,providesTags:["Celebrations","Festivals"]}),getTodaysCelebrations:n.query({query:()=>"/celebrations/today",transformResponse:t=>t.data,providesTags:["Celebrations","Birthdays","Festivals"]}),searchFestivals:n.query({query:(t={})=>({url:"/celebrations/festivals/search",params:t}),transformResponse:t=>t.data,providesTags:["Celebrations","Festivals"]}),getFestivalCalendar:n.query({query:(t={})=>({url:"/celebrations/festivals/calendar",params:t}),transformResponse:t=>t.data,providesTags:["Celebrations","Festivals"]}),getBirthdayStats:n.query({query:()=>"/celebrations/admin/birthdays/stats",transformResponse:t=>t.data,providesTags:["Admin","Celebrations","Birthdays"]}),getFestivalStats:n.query({query:()=>"/celebrations/admin/festivals/stats",transformResponse:t=>t.data,providesTags:["Admin","Celebrations","Festivals"]}),getCelebrationSummary:n.query({query:()=>"/celebrations/admin/summary",transformResponse:t=>t.data,providesTags:["Admin","Celebrations"]}),getBirthdayDistribution:n.query({query:()=>"/celebrations/admin/birthdays/distribution",transformResponse:t=>t.data,providesTags:["Admin","Celebrations","Birthdays"]}),getBirthdaysInMonth:n.query({query:({month:t,year:m})=>({url:`/celebrations/admin/birthdays/month/${t}`,params:m?{year:m}:{}}),transformResponse:t=>t.data,providesTags:["Admin","Celebrations","Birthdays"]}),triggerFestivalSync:n.mutation({query:()=>({url:"/celebrations/admin/festivals/sync",method:"POST"}),invalidatesTags:["Celebrations","Festivals"]}),triggerBirthdayNotifications:n.mutation({query:()=>({url:"/celebrations/admin/birthdays/trigger",method:"POST"}),invalidatesTags:["Celebrations","Birthdays"]}),toggleFestivalNotifications:n.mutation({query:({festivalId:t,enabled:m})=>({url:`/celebrations/admin/festivals/${t}/notifications`,method:"PUT",body:{enabled:m}}),invalidatesTags:["Celebrations","Festivals"]})}),overrideExisting:!1}),{useGetTodaysBirthdaysQuery:ie,useGetUpcomingBirthdaysQuery:ne,useGetTodaysFestivalsQuery:oe,useGetUpcomingFestivalsQuery:de,useGetFestivalCalendarQuery:le}=re,ce=()=>{const n=[{emoji:"ðŸŽ‰",top:"10%",right:"15%",opacity:.6},{emoji:"âœ¨",top:"5%",right:"25%",opacity:.4},{emoji:"ðŸŽŠ",top:"15%",right:"8%",opacity:.5},{emoji:"â­",top:"20%",right:"20%",opacity:.3},{emoji:"ðŸŽˆ",top:"8%",right:"30%",opacity:.4},{emoji:"ðŸŒŸ",top:"25%",right:"12%",opacity:.3}];return e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:n.map((t,m)=>e.jsx("div",{className:"absolute text-lg",style:{top:t.top,right:t.right,opacity:t.opacity,transform:`rotate(${Math.random()*30-15}deg)`},children:t.emoji},m))})},$e=()=>{const{data:n,isLoading:t,refetch:m}=ie(void 0,{refetchOnMountOrArgChange:!0}),{data:y,isLoading:b,refetch:F}=ne({days:7},{refetchOnMountOrArgChange:!0}),[A,T]=v.useState(!0);v.useEffect(()=>{m(),F()},[m,F]);const p=n?.birthdays?.length||0,k=y?.upcomingBirthdays?.reduce((i,s)=>i+s.birthdays.length,0)||0,$=v.useMemo(()=>{if(!y?.upcomingBirthdays)return[];const i=[];return y.upcomingBirthdays.forEach(s=>{s.birthdays.forEach(g=>{i.push({...g,dayName:s.dayName,daysFromToday:s.daysFromToday})})}),i.slice(0,12)},[y]);return t&&b?e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-32"}),e.jsx("div",{className:"flex space-x-4",children:[...Array(3)].map((i,s)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-8"})]},s))}),e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((i,s)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-16"})]})]},s))})]})}):e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("button",{onClick:()=>T(!A),className:"w-full px-6 py-4 flex items-center justify-between text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"h-5 w-5 text-pink-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Birthdays"})]})}),e.jsx(c.div,{animate:{rotate:A?180:0},transition:{duration:.2},children:e.jsx(C,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx(w,{initial:!1,children:A&&e.jsxs(c.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 relative overflow-hidden",children:[p>0&&e.jsx(ce,{}),e.jsxs("div",{className:"p-6 space-y-6 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Birthdays today"}),e.jsx("span",{className:"bg-pink-100 dark:bg-pink-900/30 text-pink-800 dark:text-pink-300 px-2 py-1 rounded-full text-xs font-medium",children:p})]}),p===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx(O,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:"No birthdays today."})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:n?.birthdays?.map(i=>e.jsxs(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center group",children:[e.jsxs("div",{className:"w-16 h-16 mx-auto mb-3 relative",children:[e.jsx(c.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,repeatDelay:Math.random()*3+2},children:i.profileImage?e.jsx("img",{src:`http://localhost:3000/api/users/profile-picture/${i.id}`,alt:i.fullName,className:"w-16 h-16 rounded-full object-cover border-2 border-pink-400 shadow-lg",onError:s=>{const g=s.target;g.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(i.fullName)}&background=EC4899&color=fff&size=64`}}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-400 to-pink-600 flex items-center justify-center text-white text-sm font-bold border-2 border-pink-300 shadow-lg",children:i.fullName.split(" ").map(s=>s[0]).join("").slice(0,2).toUpperCase()})}),e.jsx("div",{className:"absolute -top-2 -right-1 text-xl animate-bounce",children:"ðŸŽ‚"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate mb-1",children:i.fullName.split(" ")[0]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Batch ",i.batch]})]},i.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Upcoming Birthdays (7 days)"}),e.jsx("span",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-2 py-1 rounded-full text-xs font-medium",children:k})]}),$.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"No upcoming birthdays this week."}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:$.map(i=>e.jsxs(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx("div",{className:"w-14 h-14 mx-auto mb-2 relative",children:i.profileImage?e.jsx("img",{src:`http://localhost:3000/api/users/profile-picture/${i.id}`,alt:i.fullName,className:"w-14 h-14 rounded-full object-cover border border-blue-300 dark:border-blue-600",onError:s=>{const g=s.target;g.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(i.fullName)}&background=3B82F6&color=fff&size=56`}}):e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white text-sm font-bold border border-blue-300",children:i.fullName.split(" ").map(s=>s[0]).join("").slice(0,2).toUpperCase()})}),e.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white truncate mb-1",children:i.fullName.split(" ")[0]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:["Batch ",i.batch]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:i.daysFromToday===1?"Tomorrow":i.daysFromToday<7?new Date(Date.now()+i.daysFromToday*24*60*60*1e3).toLocaleDateString("en-US",{day:"2-digit",month:"short"}):`${i.daysFromToday} days`})]},`${i.id}-${i.daysFromToday}`))})]})]})]})})]})},Ee=()=>{const{data:n,isLoading:t}=oe(),{data:m,isLoading:y}=de({days:90}),{data:b,isLoading:F,error:A}=le({year:new Date().getFullYear()}),[T,p]=v.useState(!1),[k,$]=v.useState(new Date().getMonth()),[i,s]=v.useState(!0),[g,E]=v.useState(new Set([new Date().getMonth()])),j=n?.festivals?.length||0,f=m?.upcomingFestivals?.reduce((r,l)=>r+l.festivals.length,0)||0,d=v.useMemo(()=>{if(!m?.upcomingFestivals?.length)return null;const r=m.upcomingFestivals[0],l=r?.festivals[0];return l?{...l,date:r.date,daysUntil:r.daysUntil,dayName:r.dayName}:null},[m]),S=["January","February","March","April","May","June","July","August","September","October","November","December"],N=v.useCallback(r=>b?b.calendar?b.calendar.find(a=>a.month===r+1)?.festivals||[]:b.months?b.months.find(a=>a.monthNumber===r+1)?.festivals||[]:[]:[],[b]),B=r=>{const l=new Set(g);l.has(r)?l.delete(r):l.add(r),E(l)};return t&&y?e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("button",{onClick:()=>s(!i),className:"w-full px-6 py-4 flex items-center justify-between text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-5 w-5 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Festivals & Holidays"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:r=>{r.stopPropagation(),p(!0)},className:"flex items-center space-x-2 px-3 py-1.5 text-sm font-medium text-orange-700 dark:text-orange-300 bg-orange-100 dark:bg-orange-900/30 rounded-lg hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{children:"View Calendar"}),e.jsx(Z,{className:"h-3 w-3"})]}),e.jsx(c.div,{animate:{rotate:i?180:0},transition:{duration:.2},children:e.jsx(C,{className:"h-5 w-5 text-gray-400"})})]})]}),e.jsx(w,{initial:!1,children:i&&e.jsx(c.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"p-6",children:[j>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸŽŠ"}),"Celebrating Today"]}),e.jsx("div",{className:"space-y-3",children:n?.festivals?.slice(0,2).map(r=>e.jsxs(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors bg-white dark:bg-gray-800",children:[e.jsx("div",{className:"flex-shrink-0 mr-4",children:e.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center shadow-sm",style:{backgroundColor:r.styling?.backgroundColor||"#f8f9fa"},children:r.styling?.vectorImage?e.jsx("img",{src:r.styling.vectorImage,alt:r.name,className:"w-8 h-8 object-contain",onError:l=>{const a=l.target;a.style.display="none";const h=a.parentElement;h&&(h.innerHTML=`<span style="color: ${r.styling?.textColor||"#333"}; font-size: 20px; font-weight: bold;">${r.name.charAt(0)}</span>`)}}):e.jsx("span",{className:"text-xl font-bold",style:{color:r.styling?.textColor||"#333"},children:r.name.charAt(0)})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1 truncate",children:r.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(M,{className:"h-4 w-4 mr-1.5 flex-shrink-0"}),e.jsxs("span",{children:["Today, ",new Date().toLocaleDateString("en-US",{weekday:"short",day:"2-digit",month:"short",year:"numeric"})]})]})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx("button",{className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm font-medium",children:"View All"})})]},r.id))})]}),d&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸ“…"}),"Coming Next"]}),e.jsxs(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors bg-white dark:bg-gray-800",children:[e.jsx("div",{className:"flex-shrink-0 mr-4",children:e.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center shadow-sm",style:{backgroundColor:d.styling?.backgroundColor||d.backgroundColor||"#f8f9fa"},children:d.styling?.vectorImage||d.vectorImage?e.jsx("img",{src:d.name==="Gandhi Jayanti"?"/icons/festivals/Archie-Mahatma-Gandhi.svg":d.styling?.vectorImage||d.vectorImage,alt:d.name,className:"w-12 h-12 object-contain",onError:r=>{const l=r.target;l.style.display="none";const a=l.parentElement;a&&(a.innerHTML=`<span style="color: ${d.styling?.textColor||d.textColor||"#333"}; font-size: 24px; font-weight: bold;">${d.name.charAt(0)}</span>`)}}):e.jsx("span",{className:"text-2xl font-bold",style:{color:d.styling?.textColor||d.textColor||"#333"},children:d.name.charAt(0)})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1 truncate",children:d.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(M,{className:"h-4 w-4 mr-1.5 flex-shrink-0"}),e.jsx("span",{children:new Date(d.date?.iso||d.date).toLocaleDateString("en-US",{weekday:"short",day:"2-digit",month:"short",year:"numeric"})})]})]}),e.jsxs("div",{className:"flex-shrink-0 ml-4 text-right",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:d.daysUntil||"Soon"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"days to go"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("div",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:f}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Upcoming Festivals"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:b?.totalFestivals||0}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"This Year"})]})]})]})})})]}),e.jsx(w,{children:T&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>p(!1),children:e.jsxs(c.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Festivals & Holidays ",new Date().getFullYear()]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Celebrate traditions throughout the year"})]}),e.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-white/50 dark:hover:bg-gray-700/50 rounded-lg transition-colors",children:e.jsx(Y,{className:"h-5 w-5 text-gray-500"})})]}),e.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:F?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(12)].map((r,l)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-3"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]},l))}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"space-y-3",children:S.slice(0,6).map((r,l)=>{const a=N(l),h=g.has(l);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("button",{onClick:()=>B(l),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:r}),a.length>0&&e.jsx("span",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 text-xs font-medium px-2 py-1 rounded-full",children:a.length})]}),e.jsx(c.div,{animate:{rotate:h?180:0},transition:{duration:.2},children:e.jsx(C,{className:"h-4 w-4 text-gray-400"})})]}),e.jsx(w,{initial:!1,children:h&&e.jsx(c.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 dark:border-gray-600",children:e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50",children:a.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-2",children:"No festivals this month"}):e.jsx("div",{className:"space-y-3",children:a.map(o=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center shadow-sm",style:{backgroundColor:o.styling?.backgroundColor||o.backgroundColor||"#f8f9fa"},children:o.styling?.vectorImage||o.vectorImage?e.jsx("img",{src:o.styling?.vectorImage||o.vectorImage,alt:o.name,className:"w-6 h-6 object-contain",onError:x=>{const D=x.target;D.style.display="none";const R=D.parentElement;R&&(R.innerHTML=`<span style="color: ${o.styling?.textColor||o.textColor||"#333"}; font-size: 14px; font-weight: bold;">${o.name.charAt(0)}</span>`)}}):e.jsx("span",{className:"text-sm font-bold",style:{color:o.styling?.textColor||o.textColor||"#333"},children:o.name.charAt(0)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:o.name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:new Date(o.date).toLocaleDateString("en-US",{day:"numeric",month:"short"})}),o.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:o.description})]})]},o.id))})})})})]},r)})}),e.jsx("div",{className:"space-y-3",children:S.slice(6).map((r,l)=>{const a=l+6,h=N(a),o=g.has(a);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("button",{onClick:()=>B(a),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:r}),h.length>0&&e.jsx("span",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 text-xs font-medium px-2 py-1 rounded-full",children:h.length})]}),e.jsx(c.div,{animate:{rotate:o?180:0},transition:{duration:.2},children:e.jsx(C,{className:"h-4 w-4 text-gray-400"})})]}),e.jsx(w,{initial:!1,children:o&&e.jsx(c.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 dark:border-gray-600",children:e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50",children:h.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-2",children:"No festivals this month"}):e.jsx("div",{className:"space-y-3",children:h.map(x=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center shadow-sm",style:{backgroundColor:x.styling?.backgroundColor||x.backgroundColor||"#f8f9fa"},children:x.styling?.vectorImage||x.vectorImage?e.jsx("img",{src:x.styling?.vectorImage||x.vectorImage,alt:x.name,className:"w-6 h-6 object-contain",onError:D=>{const R=D.target;R.style.display="none";const V=R.parentElement;V&&(V.innerHTML=`<span style="color: ${x.styling?.textColor||x.textColor||"#333"}; font-size: 14px; font-weight: bold;">${x.name.charAt(0)}</span>`)}}):e.jsx("span",{className:"text-sm font-bold",style:{color:x.styling?.textColor||x.textColor||"#333"},children:x.name.charAt(0)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:x.name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:new Date(x.date).toLocaleDateString("en-US",{day:"numeric",month:"short"})}),x.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:x.description})]})]},x.id))})})})})]},r)})})]})})]})})})]})},Re=()=>{const[n,t]=u.useState(!0),[m,y]=u.useState("post"),{user:b}=_(s=>s.auth),{data:F}=W({page:1,limit:1,isPublished:!0,isArchived:!1,sortBy:"createdAt",sortOrder:"desc"}),{data:A}=Q(),[T]=H(),p=F?.posts?.[0],k=A?.activePolls?.[0],$=async(s,g,E,j)=>{let f;E?j.includes(g)?f=j.filter(d=>d!==g):f=[...j,g]:j.includes(g)?f=[]:f=[g];try{await T({pollId:s,data:{optionIds:f}}).unwrap(),f.length===0?L.success("All votes removed successfully!"):L.success("Vote updated successfully!")}catch(d){console.error("Vote error:",d),L.error("Failed to update vote")}},i=({poll:s})=>{const[g,E]=u.useState(!1),[j,f]=u.useState(null),d=s.expiresAt&&new Date>new Date(s.expiresAt),S=s.isActive&&!d&&b,{data:N,isLoading:B}=J(s.id,{skip:!g}),r=a=>a>=60?"bg-green-200 border-green-400 text-green-900":a>=40?"bg-yellow-200 border-yellow-400 text-yellow-900":a>=20?"bg-orange-200 border-orange-400 text-orange-900":"bg-red-200 border-red-400 text-red-900",l=a=>{f(j===a?null:a)};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:s.title}),s.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.totalVotes," votes"]})]}),s.expiresAt&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{children:d?"Expired":`Expires ${I(new Date(s.expiresAt))} from now`})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s.hasVoted&&e.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:"Voted"})]}),e.jsxs("button",{onClick:()=>E(!g),className:"flex items-center space-x-1 px-2 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:"Stats"}),g?e.jsx(C,{className:"h-3 w-3"}):e.jsx(q,{className:"h-3 w-3"})]})]})]})]}),e.jsx("div",{className:"space-y-3 mb-4",children:s.options.map(a=>{const h=s.userVote?.includes(a.id),o=s.hasVoted||!s.isActive||d,x=o?r(a.percentage):"";return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>S&&$(s.id,a.id,s.allowMultiple,s.userVote||[]),disabled:!S,className:`w-full p-3 rounded-lg border text-left transition-all relative overflow-hidden ${h?"border-green-300 bg-green-50 text-green-800":S?"border-gray-300 hover:border-blue-400 hover:bg-blue-50":o?x:"border-gray-200"}`,children:[o&&e.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`linear-gradient(to right, currentColor ${a.percentage}%, transparent ${a.percentage}%)`}}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:a.text}),h&&e.jsx(U,{className:"h-4 w-4 text-green-600"})]}),o&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsxs("span",{children:[a.voteCount," votes"]}),e.jsxs("span",{className:"font-semibold",children:[a.percentage,"%"]})]})]})]})},a.id)})}),e.jsx(w,{children:g&&e.jsx(c.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"border-t border-gray-200 dark:border-gray-700 pt-4 overflow-hidden",children:B?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"})}):N?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N.totalVotes}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Votes"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.totalVoters}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Voters"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Vote Breakdown"]}),N.options.map(a=>e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:a.text}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm",children:[a.voteCount," votes"]}),e.jsxs("span",{className:"font-bold",children:[a.percentage,"%"]})]})]}),!N.poll.isAnonymous&&a.voters.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("button",{onClick:()=>l(a.id),className:"flex items-center justify-between w-full text-sm p-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-600 dark:hover:bg-gray-500 rounded border border-gray-300 dark:border-gray-500 transition-colors",children:[e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:["Voted by (",a.voters.length,")"]}),j===a.id?e.jsx(C,{className:"h-4 w-4 text-gray-600 dark:text-gray-300"}):e.jsx(q,{className:"h-4 w-4 text-gray-600 dark:text-gray-300"})]}),e.jsx(w,{children:j===a.id&&e.jsx(c.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"mt-2 overflow-hidden",children:e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:a.voters.map(h=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-white dark:bg-gray-600 border border-gray-200 dark:border-gray-500 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-6 w-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-xs",children:h.fullName.split(" ").map(o=>o.charAt(0)).join("").slice(0,2).toUpperCase()}),e.jsx("span",{className:"font-medium",children:h.fullName}),h.batch&&e.jsxs("span",{className:"text-gray-500",children:["(",h.batch,")"]})]}),e.jsxs("span",{className:"text-gray-400",children:[I(new Date(h.votedAt))," ago"]})]},h.id))})})})]})]})},a.id))]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Failed to load stats"})})})]})};return!p&&!k?null:e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>t(!n),className:"w-full px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500",children:e.jsx(z,{className:"h-5 w-5 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Social"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:n?"Collapse":"Expand"}),n?e.jsx(C,{className:"h-5 w-5 text-gray-400"}):e.jsx(q,{className:"h-5 w-5 text-gray-400"})]})]}),e.jsx(w,{children:n&&e.jsx(c.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[p&&e.jsxs("button",{onClick:()=>y("post"),className:`flex-1 flex items-center justify-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${m==="post"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:"Post"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Latest"})]}),k&&e.jsxs("button",{onClick:()=>y("poll"),className:`flex-1 flex items-center justify-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${m==="poll"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:"Poll"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Active"})]})]}),e.jsxs("div",{className:"min-h-[200px]",children:[m==="post"&&p&&e.jsx(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2},children:e.jsx(K,{post:p,showActions:!1})}),m==="poll"&&k&&e.jsx(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.2},children:e.jsx(i,{poll:k})})]})]})})})]})};export{$e as B,Te as F,Re as S,Ee as a};
//# sourceMappingURL=SocialSection-DSiS2gC5.js.map
