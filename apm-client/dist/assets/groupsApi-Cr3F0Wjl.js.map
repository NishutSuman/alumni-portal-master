{"version":3,"file":"groupsApi-Cr3F0Wjl.js","sources":["../../src/store/api/groupsApi.ts"],"sourcesContent":["// src/store/api/groupsApi.ts\nimport { apiSlice } from './apiSlice'\n\n// Group types based on backend schema\nexport type GroupType = 'CELL' | 'COMMITTEE' | 'OFFICE_BEARERS' | 'ADVISORS'\n\nexport type GroupMemberRole = \n  | 'CONVENER' | 'CO_CONVENER' | 'STAKE_HOLDER'\n  | 'PRESIDENT' | 'VICE_PRESIDENT' | 'SECRETARY' | 'JOINT_SECRETARY' \n  | 'TREASURER' | 'JOINT_TREASURER'\n  | 'CHIEF_ADVISOR' | 'JOINT_ADVISOR'\n\nexport interface User {\n  id: string\n  firstName: string\n  lastName: string\n  fullName: string\n  profileImage?: string\n  batch: number\n  batchYear: number\n  email: string\n}\n\nexport interface GroupMember {\n  id: string\n  role: GroupMemberRole\n  isActive: boolean\n  addedAt: string\n  user: User\n}\n\nexport interface Group {\n  id: string\n  name: string\n  type: GroupType\n  description?: string\n  isActive: boolean\n  displayOrder: number\n  membersCount: number\n  allowedRoles: GroupMemberRole[]\n  members?: GroupMember[]\n  createdAt: string\n  updatedAt: string\n}\n\nexport interface GroupStatistics {\n  totalGroups: number\n  activeGroups: number\n  totalMembers: number\n  groupsByType: {\n    type: GroupType\n    count: number\n    activeCount: number\n  }[]\n}\n\nexport interface GetGroupsParams {\n  type?: GroupType\n  isActive?: boolean\n  page?: number\n  limit?: number\n  search?: string\n  sortBy?: string\n  sortOrder?: 'asc' | 'desc'\n}\n\nexport interface GetGroupMembersParams {\n  groupId: string\n  isActive?: boolean\n  role?: GroupMemberRole\n  page?: number\n  limit?: number\n  sortBy?: string\n  sortOrder?: 'asc' | 'desc'\n}\n\nexport interface CreateGroupData {\n  name: string\n  type: GroupType\n  description?: string\n  displayOrder?: number\n}\n\nexport interface UpdateGroupData {\n  name?: string\n  description?: string\n  isActive?: boolean\n  displayOrder?: number\n}\n\nexport interface AddMemberData {\n  userId: string\n  role: GroupMemberRole\n}\n\nexport interface UpdateMemberData {\n  role: GroupMemberRole\n  isActive?: boolean\n}\n\nexport interface BulkMembersData {\n  action: 'add' | 'remove' | 'update'\n  members: {\n    userId: string\n    role?: GroupMemberRole\n  }[]\n}\n\nexport interface ReorderGroupsData {\n  groups: {\n    id: string\n    displayOrder: number\n  }[]\n}\n\n// Groups API slice\nexport const groupsApi = apiSlice.injectEndpoints({\n  endpoints: (builder) => ({\n    // Public endpoints\n    getPublicGroups: builder.query<Group[], void>({\n      query: () => '/groups/public',\n      transformResponse: (response: any) => response.data.groups,\n      providesTags: ['Group'],\n    }),\n\n    // Protected endpoints (USER and ADMIN)\n    getGroups: builder.query<{\n      groups: Group[]\n      pagination: {\n        total: number\n        pages: number\n        page: number\n        limit: number\n      }\n    }, GetGroupsParams>({\n      query: (params) => ({\n        url: '/groups',\n        params,\n      }),\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Group'],\n    }),\n\n    getGroup: builder.query<Group, { \n      groupId: string \n      includeMembers?: boolean \n    }>({\n      query: ({ groupId, includeMembers = true }) => ({\n        url: `/groups/${groupId}`,\n        params: { includeMembers },\n      }),\n      transformResponse: (response: any) => response.data,\n      providesTags: (result, error, { groupId }) => [\n        { type: 'Group', id: groupId },\n        'GroupMember',\n      ],\n    }),\n\n    getGroupMembers: builder.query<{\n      members: GroupMember[]\n      pagination: {\n        total: number\n        pages: number\n        page: number\n        limit: number\n      }\n    }, GetGroupMembersParams>({\n      query: ({ groupId, ...params }) => ({\n        url: `/groups/${groupId}/members`,\n        params,\n      }),\n      transformResponse: (response: any) => response.data,\n      providesTags: (result, error, { groupId }) => [\n        { type: 'GroupMember', id: groupId },\n      ],\n    }),\n\n    getGroupStatistics: builder.query<GroupStatistics, void>({\n      query: () => '/groups/statistics',\n      transformResponse: (response: any) => response.data.statistics,\n      providesTags: ['GroupStats'],\n    }),\n\n    // SUPER_ADMIN only endpoints\n    createGroup: builder.mutation<Group, CreateGroupData>({\n      query: (data) => ({\n        url: '/groups',\n        method: 'POST',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data.group,\n      invalidatesTags: ['Group', 'GroupStats'],\n    }),\n\n    updateGroup: builder.mutation<Group, { \n      groupId: string \n      data: UpdateGroupData \n    }>({\n      query: ({ groupId, data }) => ({\n        url: `/groups/${groupId}`,\n        method: 'PUT',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data.group,\n      invalidatesTags: (result, error, { groupId }) => [\n        { type: 'Group', id: groupId },\n        'Group',\n        'GroupStats',\n      ],\n    }),\n\n    deleteGroup: builder.mutation<{ message: string }, string>({\n      query: (groupId) => ({\n        url: `/groups/${groupId}`,\n        method: 'DELETE',\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Group', 'GroupStats'],\n    }),\n\n    reorderGroups: builder.mutation<{ message: string }, ReorderGroupsData>({\n      query: (data) => ({\n        url: '/groups/reorder',\n        method: 'POST',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Group'],\n    }),\n\n    // Group member management (SUPER_ADMIN only)\n    addGroupMember: builder.mutation<GroupMember, { \n      groupId: string \n      data: AddMemberData \n    }>({\n      query: ({ groupId, data }) => ({\n        url: `/groups/${groupId}/members`,\n        method: 'POST',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data.member,\n      invalidatesTags: (result, error, { groupId }) => [\n        { type: 'Group', id: groupId },\n        { type: 'GroupMember', id: groupId },\n        'Group', // Invalidate general group list\n        'GroupStats',\n      ],\n    }),\n\n    updateGroupMember: builder.mutation<GroupMember, { \n      groupId: string \n      userId: string \n      data: UpdateMemberData \n    }>({\n      query: ({ groupId, userId, data }) => ({\n        url: `/groups/${groupId}/members/${userId}`,\n        method: 'PUT',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data.member,\n      invalidatesTags: (result, error, { groupId }) => [\n        { type: 'Group', id: groupId },\n        { type: 'GroupMember', id: groupId },\n        'Group', // Invalidate general group list\n        'GroupStats',\n      ],\n    }),\n\n    removeGroupMember: builder.mutation<{ message: string }, { \n      groupId: string \n      userId: string \n    }>({\n      query: ({ groupId, userId }) => ({\n        url: `/groups/${groupId}/members/${userId}/remove`,\n        method: 'PUT',\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: (result, error, { groupId }) => [\n        { type: 'Group', id: groupId },\n        { type: 'GroupMember', id: groupId },\n        'Group', // Invalidate general group list\n        'GroupStats',\n      ],\n    }),\n\n    bulkMemberOperations: builder.mutation<{ \n      message: string \n      results: any[] \n    }, { \n      groupId: string \n      data: BulkMembersData \n    }>({\n      query: ({ groupId, data }) => ({\n        url: `/groups/${groupId}/members/bulk`,\n        method: 'POST',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: (result, error, { groupId }) => [\n        { type: 'Group', id: groupId },\n        { type: 'GroupMember', id: groupId },\n        'Group', // Invalidate general group list\n        'GroupStats',\n      ],\n    }),\n  }),\n  overrideExisting: false,\n})\n\n// Export hooks\nexport const {\n  // Public\n  useGetPublicGroupsQuery,\n  \n  // Protected\n  useGetGroupsQuery,\n  useGetGroupQuery,\n  useGetGroupMembersQuery,\n  useGetGroupStatisticsQuery,\n  \n  // Mutations (SUPER_ADMIN only)\n  useCreateGroupMutation,\n  useUpdateGroupMutation,\n  useDeleteGroupMutation,\n  useReorderGroupsMutation,\n  \n  // Member management (SUPER_ADMIN only)\n  useAddGroupMemberMutation,\n  useUpdateGroupMemberMutation,\n  useRemoveGroupMemberMutation,\n  useBulkMemberOperationsMutation,\n} = groupsApi"],"names":["groupsApi","apiSlice","builder","response","params","groupId","includeMembers","result","error","data","userId","useGetGroupsQuery","useGetGroupQuery","useGetGroupStatisticsQuery","useCreateGroupMutation","useUpdateGroupMutation","useDeleteGroupMutation","useAddGroupMemberMutation","useRemoveGroupMemberMutation"],"mappings":"wCAoHO,MAAMA,EAAYC,EAAS,gBAAgB,CAChD,UAAYC,IAAa,CAEvB,gBAAiBA,EAAQ,MAAqB,CAC5C,MAAO,IAAM,iBACb,kBAAoBC,GAAkBA,EAAS,KAAK,OACpD,aAAc,CAAC,OAAO,CAAA,CACvB,EAGD,UAAWD,EAAQ,MAQC,CAClB,MAAQE,IAAY,CAClB,IAAK,UACL,OAAAA,CAAA,GAEF,kBAAoBD,GAAkBA,EAAS,KAC/C,aAAc,CAAC,OAAO,CAAA,CACvB,EAED,SAAUD,EAAQ,MAGf,CACD,MAAO,CAAC,CAAE,QAAAG,EAAS,eAAAC,EAAiB,OAAY,CAC9C,IAAK,WAAWD,CAAO,GACvB,OAAQ,CAAE,eAAAC,CAAA,CAAe,GAE3B,kBAAoBH,GAAkBA,EAAS,KAC/C,aAAc,CAACI,EAAQC,EAAO,CAAE,QAAAH,KAAc,CAC5C,CAAE,KAAM,QAAS,GAAIA,CAAA,EACrB,aAAA,CACF,CACD,EAED,gBAAiBH,EAAQ,MAQC,CACxB,MAAO,CAAC,CAAE,QAAAG,EAAS,GAAGD,MAAc,CAClC,IAAK,WAAWC,CAAO,WACvB,OAAAD,CAAA,GAEF,kBAAoBD,GAAkBA,EAAS,KAC/C,aAAc,CAACI,EAAQC,EAAO,CAAE,QAAAH,KAAc,CAC5C,CAAE,KAAM,cAAe,GAAIA,CAAA,CAAQ,CACrC,CACD,EAED,mBAAoBH,EAAQ,MAA6B,CACvD,MAAO,IAAM,qBACb,kBAAoBC,GAAkBA,EAAS,KAAK,WACpD,aAAc,CAAC,YAAY,CAAA,CAC5B,EAGD,YAAaD,EAAQ,SAAiC,CACpD,MAAQO,IAAU,CAChB,IAAK,UACL,OAAQ,OACR,KAAMA,CAAA,GAER,kBAAoBN,GAAkBA,EAAS,KAAK,MACpD,gBAAiB,CAAC,QAAS,YAAY,CAAA,CACxC,EAED,YAAaD,EAAQ,SAGlB,CACD,MAAO,CAAC,CAAE,QAAAG,EAAS,KAAAI,MAAY,CAC7B,IAAK,WAAWJ,CAAO,GACvB,OAAQ,MACR,KAAMI,CAAA,GAER,kBAAoBN,GAAkBA,EAAS,KAAK,MACpD,gBAAiB,CAACI,EAAQC,EAAO,CAAE,QAAAH,KAAc,CAC/C,CAAE,KAAM,QAAS,GAAIA,CAAA,EACrB,QACA,YAAA,CACF,CACD,EAED,YAAaH,EAAQ,SAAsC,CACzD,MAAQG,IAAa,CACnB,IAAK,WAAWA,CAAO,GACvB,OAAQ,QAAA,GAEV,kBAAoBF,GAAkBA,EAAS,KAC/C,gBAAiB,CAAC,QAAS,YAAY,CAAA,CACxC,EAED,cAAeD,EAAQ,SAAiD,CACtE,MAAQO,IAAU,CAChB,IAAK,kBACL,OAAQ,OACR,KAAMA,CAAA,GAER,kBAAoBN,GAAkBA,EAAS,KAC/C,gBAAiB,CAAC,OAAO,CAAA,CAC1B,EAGD,eAAgBD,EAAQ,SAGrB,CACD,MAAO,CAAC,CAAE,QAAAG,EAAS,KAAAI,MAAY,CAC7B,IAAK,WAAWJ,CAAO,WACvB,OAAQ,OACR,KAAMI,CAAA,GAER,kBAAoBN,GAAkBA,EAAS,KAAK,OACpD,gBAAiB,CAACI,EAAQC,EAAO,CAAE,QAAAH,KAAc,CAC/C,CAAE,KAAM,QAAS,GAAIA,CAAA,EACrB,CAAE,KAAM,cAAe,GAAIA,CAAA,EAC3B,QACA,YAAA,CACF,CACD,EAED,kBAAmBH,EAAQ,SAIxB,CACD,MAAO,CAAC,CAAE,QAAAG,EAAS,OAAAK,EAAQ,KAAAD,MAAY,CACrC,IAAK,WAAWJ,CAAO,YAAYK,CAAM,GACzC,OAAQ,MACR,KAAMD,CAAA,GAER,kBAAoBN,GAAkBA,EAAS,KAAK,OACpD,gBAAiB,CAACI,EAAQC,EAAO,CAAE,QAAAH,KAAc,CAC/C,CAAE,KAAM,QAAS,GAAIA,CAAA,EACrB,CAAE,KAAM,cAAe,GAAIA,CAAA,EAC3B,QACA,YAAA,CACF,CACD,EAED,kBAAmBH,EAAQ,SAGxB,CACD,MAAO,CAAC,CAAE,QAAAG,EAAS,OAAAK,MAAc,CAC/B,IAAK,WAAWL,CAAO,YAAYK,CAAM,UACzC,OAAQ,KAAA,GAEV,kBAAoBP,GAAkBA,EAAS,KAC/C,gBAAiB,CAACI,EAAQC,EAAO,CAAE,QAAAH,KAAc,CAC/C,CAAE,KAAM,QAAS,GAAIA,CAAA,EACrB,CAAE,KAAM,cAAe,GAAIA,CAAA,EAC3B,QACA,YAAA,CACF,CACD,EAED,qBAAsBH,EAAQ,SAM3B,CACD,MAAO,CAAC,CAAE,QAAAG,EAAS,KAAAI,MAAY,CAC7B,IAAK,WAAWJ,CAAO,gBACvB,OAAQ,OACR,KAAMI,CAAA,GAER,kBAAoBN,GAAkBA,EAAS,KAC/C,gBAAiB,CAACI,EAAQC,EAAO,CAAE,QAAAH,KAAc,CAC/C,CAAE,KAAM,QAAS,GAAIA,CAAA,EACrB,CAAE,KAAM,cAAe,GAAIA,CAAA,EAC3B,QACA,YAAA,CACF,CACD,CAAA,GAEH,iBAAkB,EACpB,CAAC,EAGY,CAKX,kBAAAM,EACA,iBAAAC,EAEA,2BAAAC,EAGA,uBAAAC,EACA,uBAAAC,EACA,uBAAAC,EAIA,0BAAAC,EAEA,6BAAAC,CAEF,EAAIlB"}