import{j as e,A as U,L,b as F,q as P,z as E,m as f}from"./ui-BlmhFX_F.js";import{r as l,R as ye}from"./router-DFnE1L-t.js";import{u as Y}from"./index.esm-B0I9BSpA.js";import{x as fe,z as M,h as je,c as Ne}from"./index-DHymdRDT.js";import{L as O}from"./LoadingSpinner-BR8iBbEe.js";import{F as _}from"./XMarkIcon-D1c1wIzV.js";import{F as W}from"./InformationCircleIcon-DNiszcBI.js";import{F as V}from"./HeartIcon-EqIDsd1l.js";import{F as ee}from"./CheckCircleIcon-DCBCeWMH.js";import{F as le}from"./ExclamationTriangleIcon-DCwPn2ZM.js";import{F as ve}from"./ClockIcon-DZUckIFe.js";import{F as de}from"./PlusIcon-B6tiF6Nj.js";import{F as ne}from"./UserGroupIcon-CnvKPj6V.js";import{F as ke}from"./MagnifyingGlassIcon-C2UCCqkW.js";import{F as we}from"./FunnelIcon-CMHiB3uy.js";import{F as Be}from"./ChartBarIcon-CLsU3hA-.js";import{F as De}from"./ChevronDownIcon-qIBcN2qV.js";import{F as Se}from"./PhoneIcon-Cn5tUlUu.js";import{f as se}from"./utils-CXyNmL__.js";import{F as Re}from"./BellIcon-BvkOfwNi.js";import"./redux-VN59sPcb.js";import"./vendor-gH-7aFTg.js";function Ae({title:r,titleId:s,...a},t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),r?l.createElement("title",{id:s},r):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const oe=l.forwardRef(Ae);function qe({title:r,titleId:s,...a},t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),r?l.createElement("title",{id:s},r):null,l.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const T=l.forwardRef(qe),Ce=fe.injectEndpoints({endpoints:r=>({getLifeLinkDashboard:r.query({query:s=>({url:"/lifelink/dashboard",params:s}),transformResponse:s=>s.data,providesTags:["LifeLink"],keepUnusedDataFor:600}),getBloodGroupStats:r.query({query:()=>"/lifelink/stats/bloodgroups",transformResponse:s=>s.data,providesTags:["LifeLink"],keepUnusedDataFor:3600}),getBloodProfile:r.query({query:()=>"/lifelink/profile/blood",transformResponse:s=>s.data,providesTags:["LifeLink","Profile"],keepUnusedDataFor:1800}),updateBloodProfile:r.mutation({query:s=>({url:"/lifelink/profile/blood",method:"PUT",body:s}),transformResponse:s=>s.data,invalidatesTags:["LifeLink","Profile","User"]}),getMyDonations:r.query({query:s=>({url:"/lifelink/my-donations",params:s}),transformResponse:s=>s.data,providesTags:s=>["Donation",...s?.donations?.map(({id:a})=>({type:"Donation",id:a}))??[]],keepUnusedDataFor:900}),addDonation:r.mutation({query:s=>({url:"/lifelink/donations",method:"POST",body:s}),transformResponse:s=>s.data,invalidatesTags:["Donation","LifeLink","Profile"]}),getDonationStatus:r.query({query:()=>"/lifelink/donation-status",transformResponse:s=>s.data,providesTags:["LifeLink"],keepUnusedDataFor:300}),createRequisition:r.mutation({query:s=>({url:"/lifelink/requisitions",method:"POST",body:s}),transformResponse:s=>s.data,invalidatesTags:["BloodRequisition","LifeLink"]}),getMyRequisitions:r.query({query:s=>({url:"/lifelink/my-requisitions",params:s}),transformResponse:s=>s.data,providesTags:s=>["BloodRequisition",...s?.requisitions?.map(({id:a})=>({type:"BloodRequisition",id:a}))??[]],keepUnusedDataFor:600}),getRequisition:r.query({query:s=>`/lifelink/requisitions/${s}`,transformResponse:s=>s.data,providesTags:(s,a,t)=>[{type:"BloodRequisition",id:t}],keepUnusedDataFor:300}),updateRequisitionStatus:r.mutation({query:({requisitionId:s,...a})=>({url:`/lifelink/requisitions/${s}/status`,method:"PUT",body:a}),transformResponse:s=>s.data,invalidatesTags:(s,a,{requisitionId:t})=>[{type:"BloodRequisition",id:t},"BloodRequisition","LifeLink"]}),reuseRequisition:r.mutation({query:s=>({url:`/lifelink/requisitions/${s}/reuse`,method:"PUT"}),transformResponse:s=>s.data,invalidatesTags:(s,a,t)=>[{type:"BloodRequisition",id:t},"BloodRequisition","LifeLink"]}),discoverRequisitions:r.query({query:s=>({url:"/lifelink/discover-requisitions",params:s}),transformResponse:s=>s.data,providesTags:["BloodRequisition"],keepUnusedDataFor:180}),searchDonors:r.mutation({query:s=>({url:"/lifelink/search-donors",method:"POST",body:s}),transformResponse:s=>s.data}),getWillingDonors:r.query({query:s=>`/lifelink/willing-donors/${s}`,transformResponse:s=>s.data,providesTags:(s,a,t)=>[{type:"BloodRequisition",id:t}],keepUnusedDataFor:180}),notifySelectedDonors:r.mutation({query:s=>({url:"/lifelink/notify-selected",method:"POST",body:s}),transformResponse:s=>s.data,invalidatesTags:["BloodRequisition","LifeLink"]}),notifyAllDonors:r.mutation({query:s=>({url:"/lifelink/notify-all",method:"POST",body:s}),transformResponse:s=>s.data,invalidatesTags:["BloodRequisition","LifeLink"]}),getMyNotifications:r.query({query:s=>({url:"/lifelink/notifications",params:s}),transformResponse:s=>({data:s.data,pagination:s.pagination}),providesTags:["Notification"],keepUnusedDataFor:120}),markNotificationRead:r.mutation({query:s=>({url:`/lifelink/notifications/${s}/read`,method:"PUT"}),transformResponse:s=>s.data,invalidatesTags:["Notification"]}),respondToNotification:r.mutation({query:({notificationId:s,response:a})=>({url:`/lifelink/notifications/${s}/respond`,method:"POST",body:a}),transformResponse:s=>s.data,invalidatesTags:["Notification","BloodRequisition"]}),respondToRequisition:r.mutation({query:({requisitionId:s,response:a})=>({url:`/lifelink/requisitions/${s}/respond`,method:"POST",body:a}),transformResponse:s=>s.data,invalidatesTags:(s,a,{requisitionId:t})=>[{type:"BloodRequisition",id:t},"BloodRequisition"]}),getAdminRequisitions:r.query({query:s=>({url:"/lifelink/admin/requisitions",params:s}),transformResponse:s=>({data:s.data,pagination:s.pagination}),providesTags:["BloodRequisition"]}),getLifeLinkAnalytics:r.query({query:s=>({url:"/lifelink/admin/analytics",params:s}),transformResponse:s=>s.data,providesTags:["Analytics"],keepUnusedDataFor:1800}),getRequisitionAnalytics:r.query({query:s=>`/lifelink/admin/requisitions/${s}/analytics`,transformResponse:s=>s.data,providesTags:(s,a,t)=>[{type:"BloodRequisition",id:t},"Analytics"]})}),overrideExisting:!1}),{useGetLifeLinkDashboardQuery:Te,useGetBloodGroupStatsQuery:Oe,useGetBloodProfileQuery:ce,useUpdateBloodProfileMutation:Ge,useGetMyDonationsQuery:Le,useAddDonationMutation:Fe,useGetDonationStatusQuery:me,useCreateRequisitionMutation:Pe,useGetMyRequisitionsQuery:Ee,useDiscoverRequisitionsQuery:Ie,useSearchDonorsMutation:$e,useNotifyAllDonorsMutation:Ue,useRespondToRequisitionMutation:Me}=Ce,ie=[{value:"O_NEGATIVE",label:"Oâˆ’",color:"red",description:"Universal donor - can donate to all blood types"},{value:"O_POSITIVE",label:"O+",color:"orange",description:"Most common blood type - can donate to all positive types"},{value:"A_NEGATIVE",label:"Aâˆ’",color:"blue",description:"Can donate to A and AB types"},{value:"A_POSITIVE",label:"A+",color:"indigo",description:"Can donate to A+ and AB+ types"},{value:"B_NEGATIVE",label:"Bâˆ’",color:"green",description:"Can donate to B and AB types"},{value:"B_POSITIVE",label:"B+",color:"emerald",description:"Can donate to B+ and AB+ types"},{value:"AB_NEGATIVE",label:"ABâˆ’",color:"purple",description:"Universal plasma donor"},{value:"AB_POSITIVE",label:"AB+",color:"pink",description:"Universal plasma donor - can receive from all types"}],Ve=({isOpen:r,onClose:s,onSuccess:a})=>{const[t,x]=l.useState("bloodGroup"),[d,y]=l.useState(null),{data:b,isLoading:v}=ce(void 0,{skip:!r}),[D,{isLoading:k}]=Ge(),{register:w,handleSubmit:g,setValue:N,watch:B,formState:{errors:h}}=Y({defaultValues:{bloodGroup:"",isBloodDonor:!1}}),j=B();l.useEffect(()=>{b&&r&&(b.bloodGroup&&(N("bloodGroup",b.bloodGroup),y(b.bloodGroup),x("donorStatus")),N("isBloodDonor",b.isBloodDonor))},[b,r,N]),l.useEffect(()=>{r||(x("bloodGroup"),y(null))},[r]);const R=c=>{y(c),N("bloodGroup",c),x("donorStatus")},m=c=>{N("isBloodDonor",c),x("confirmation")},u=async c=>{try{const S={bloodGroup:c.bloodGroup,isBloodDonor:c.isBloodDonor};await D(S).unwrap(),M.success("Blood profile updated successfully!"),a?.(),s()}catch(S){console.error("Update profile error:",S),M.error(S?.data?.message||"Failed to update blood profile")}},o=()=>{t==="donorStatus"?x("bloodGroup"):t==="confirmation"&&x("donorStatus")},A=()=>{switch(t){case"bloodGroup":return"What's your blood group?";case"donorStatus":return"Are you willing to be a blood donor?";case"confirmation":return"Confirm your blood profile";default:return""}},n=()=>ie.find(c=>c.value===d);return e.jsx(U,{children:r&&e.jsxs(L,{open:r,onClose:s,className:"relative z-50",children:[e.jsx(F,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(P,{className:"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-xl shadow-xl max-h-[90vh] overflow-hidden",children:e.jsxs("form",{onSubmit:g(u),className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 p-2 rounded-full",children:e.jsx(T,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(E,{className:"text-lg font-semibold text-gray-900 dark:text-white",children:A()}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Step ",t==="bloodGroup"?1:t==="donorStatus"?2:3," of 3"]})]})]}),e.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:e.jsx(_,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"px-6 py-2",children:e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx(f.div,{className:"bg-gradient-to-r from-red-500 to-pink-500 h-2 rounded-full",initial:{width:"33%"},animate:{width:t==="bloodGroup"?"33%":t==="donorStatus"?"66%":"100%"},transition:{duration:.3}})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:v?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(O,{})}):e.jsxs(U,{mode:"wait",children:[t==="bloodGroup"&&e.jsxs(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ©¸"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Select your blood group. This information helps us connect you with compatible recipients."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:ie.map(c=>e.jsxs(f.button,{type:"button",onClick:()=>R(c.value),className:`p-4 rounded-lg border-2 transition-all duration-200 text-center ${d===c.value?`border-${c.color}-500 bg-${c.color}-50 dark:bg-${c.color}-900/20`:"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full mb-2 bg-${c.color}-100 text-${c.color}-800 dark:bg-${c.color}-900 dark:text-${c.color}-300 font-bold text-lg`,children:c.label}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[c.label," Blood"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:c.description})]},c.value))}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(W,{className:"h-5 w-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"Don't know your blood group?"}),e.jsx("p",{children:"You can get it tested at any nearby clinic or hospital. It's a simple blood test that takes just a few minutes."})]})]})})]},"bloodGroup"),t==="donorStatus"&&e.jsxs(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(T,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Would you like to be part of our blood donor network? You can change this anytime."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(f.button,{type:"button",onClick:()=>m(!0),className:`w-full p-6 rounded-lg border-2 text-left transition-all duration-200 ${j.isBloodDonor?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,whileHover:{scale:1.01},whileTap:{scale:.99},children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-3 rounded-full",children:e.jsx(T,{className:"h-6 w-6 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Yes, I want to be a blood donor"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:"Join our network and help save lives. You'll receive notifications for emergency blood requests that match your blood group."}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"âœ“ Get notified for emergency requests"}),e.jsx("p",{children:"âœ“ Track your donation history"}),e.jsx("p",{children:"âœ“ Help your alumni community"})]})]})]})}),e.jsx(f.button,{type:"button",onClick:()=>m(!1),className:`w-full p-6 rounded-lg border-2 text-left transition-all duration-200 ${j.isBloodDonor?"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500":"border-gray-500 bg-gray-50 dark:bg-gray-700/20"}`,whileHover:{scale:1.01},whileTap:{scale:.99},children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded-full",children:e.jsx(V,{className:"h-6 w-6 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Not right now"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:"You can still browse the donor directory and create emergency requests if needed."}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"âœ“ Browse donor directory"}),e.jsx("p",{children:"âœ“ Create emergency requests"}),e.jsx("p",{children:"âœ“ Can opt-in later anytime"})]})]})]})})]})]},"donorStatus"),t==="confirmation"&&e.jsxs(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(ee,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Please review and confirm your blood profile information."})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Blood Group:"}),e.jsx("div",{className:"flex items-center space-x-2",children:d&&e.jsx(e.Fragment,{children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-${n()?.color}-100 text-${n()?.color}-800 dark:bg-${n()?.color}-900 dark:text-${n()?.color}-300`,children:["ðŸ©¸",n()?.label]})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Donor Status:"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${j.isBloodDonor?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:[j.isBloodDonor?e.jsx(T,{className:"h-4 w-4 mr-1"}):e.jsx(V,{className:"h-4 w-4 mr-1"}),j.isBloodDonor?"Active Donor":"Not a Donor"]})})]})]}),j.isBloodDonor&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(le,{className:"h-5 w-5 text-yellow-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"Important Notes:"}),e.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"You must be 18-65 years old and weigh at least 50kg"}),e.jsx("li",{children:"Wait at least 3 months between donations"}),e.jsx("li",{children:"You can opt out of the donor network anytime"})]})]})]})})]},"confirmation")]})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:t==="bloodGroup"?s:o,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:t==="bloodGroup"?"Cancel":"Back"}),t==="confirmation"?e.jsx("button",{type:"submit",disabled:k,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:k?e.jsxs(e.Fragment,{children:[e.jsx(O,{size:"small",className:"mr-2"}),"Saving..."]}):"Save Profile"}):e.jsx("button",{type:"button",onClick:()=>{t==="bloodGroup"&&d?x("donorStatus"):t==="donorStatus"&&x("confirmation")},disabled:t==="bloodGroup"&&!d,className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:"Continue"})]})]})})})]})})},_e=({isOpen:r,onClose:s})=>{const a=[{donor:"Oâˆ’",recipients:["Oâˆ’","O+","Aâˆ’","A+","Bâˆ’","B+","ABâˆ’","AB+"],color:"red",title:"Universal Donor",description:"Can donate to all blood types"},{donor:"O+",recipients:["O+","A+","B+","AB+"],color:"orange",title:"Common Donor",description:"Can donate to all positive blood types"},{donor:"Aâˆ’",recipients:["Aâˆ’","A+","ABâˆ’","AB+"],color:"blue",title:"A Negative",description:"Can donate to A and AB types"},{donor:"A+",recipients:["A+","AB+"],color:"indigo",title:"A Positive",description:"Can donate to A+ and AB+"},{donor:"Bâˆ’",recipients:["Bâˆ’","B+","ABâˆ’","AB+"],color:"green",title:"B Negative",description:"Can donate to B and AB types"},{donor:"B+",recipients:["B+","AB+"],color:"emerald",title:"B Positive",description:"Can donate to B+ and AB+"},{donor:"ABâˆ’",recipients:["ABâˆ’","AB+"],color:"purple",title:"AB Negative",description:"Can donate to AB types only"},{donor:"AB+",recipients:["AB+"],color:"pink",title:"Universal Recipient",description:"Can only donate to AB+ but can receive from all"}],t=[{recipient:"Oâˆ’",canReceiveFrom:["Oâˆ’"],color:"red",title:"Universal Donor Blood Type",description:"Can only receive from Oâˆ’"},{recipient:"O+",canReceiveFrom:["Oâˆ’","O+"],color:"orange",title:"O Positive",description:"Can receive from Oâˆ’ and O+"},{recipient:"Aâˆ’",canReceiveFrom:["Oâˆ’","Aâˆ’"],color:"blue",title:"A Negative",description:"Can receive from Oâˆ’ and Aâˆ’"},{recipient:"A+",canReceiveFrom:["Oâˆ’","O+","Aâˆ’","A+"],color:"indigo",title:"A Positive",description:"Can receive from O and A types"},{recipient:"Bâˆ’",canReceiveFrom:["Oâˆ’","Bâˆ’"],color:"green",title:"B Negative",description:"Can receive from Oâˆ’ and Bâˆ’"},{recipient:"B+",canReceiveFrom:["Oâˆ’","O+","Bâˆ’","B+"],color:"emerald",title:"B Positive",description:"Can receive from O and B types"},{recipient:"ABâˆ’",canReceiveFrom:["Oâˆ’","Aâˆ’","Bâˆ’","ABâˆ’"],color:"purple",title:"AB Negative",description:"Can receive from all negative types"},{recipient:"AB+",canReceiveFrom:["Oâˆ’","O+","Aâˆ’","A+","Bâˆ’","B+","ABâˆ’","AB+"],color:"pink",title:"Universal Recipient",description:"Can receive from all blood types"}],x={red:"bg-red-100 text-red-800 border-red-300 dark:bg-red-900/30 dark:text-red-300 dark:border-red-700",orange:"bg-orange-100 text-orange-800 border-orange-300 dark:bg-orange-900/30 dark:text-orange-300 dark:border-orange-700",blue:"bg-blue-100 text-blue-800 border-blue-300 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-700",indigo:"bg-indigo-100 text-indigo-800 border-indigo-300 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-700",green:"bg-green-100 text-green-800 border-green-300 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700",emerald:"bg-emerald-100 text-emerald-800 border-emerald-300 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-700",purple:"bg-purple-100 text-purple-800 border-purple-300 dark:bg-purple-900/30 dark:text-purple-300 dark:border-purple-700",pink:"bg-pink-100 text-pink-800 border-pink-300 dark:bg-pink-900/30 dark:text-pink-300 dark:border-pink-700"};return e.jsxs(L,{open:r,onClose:s,className:"relative z-50",children:[e.jsx(F,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(P,{className:"w-full max-w-5xl bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-red-600 to-pink-600 dark:from-red-700 dark:to-pink-700 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"h-6 w-6 text-white"}),e.jsx(E,{className:"text-xl font-bold text-white",children:"Blood Compatibility Guide"})]}),e.jsx("button",{onClick:s,className:"p-1 rounded-full hover:bg-white/20 transition-colors",children:e.jsx(_,{className:"h-6 w-6 text-white"})})]}),e.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)] p-6",children:[e.jsx("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(W,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-300 mb-1",children:"Understanding Blood Compatibility"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-400",children:"Blood type compatibility is crucial for safe transfusions. Donors can give blood to specific recipients based on their blood group. This guide shows who you can help based on your blood type."})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-red-600"}),"As a Donor: Who Can I Help?"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(d=>e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 border-2 rounded-xl bg-white dark:bg-gray-700/50 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:`px-3 py-1 rounded-lg font-bold border-2 ${x[d.color]}`,children:d.donor}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:d.title}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:d.description})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Can donate to:"}),d.recipients.map(y=>e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border border-green-300 dark:border-green-700",children:y},y))]})]},d.donor))})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-blue-600 rotate-180"}),"As a Recipient: Who Can Help Me?"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(d=>e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 border-2 rounded-xl bg-white dark:bg-gray-700/50 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:`px-3 py-1 rounded-lg font-bold border-2 ${x[d.color]}`,children:d.recipient}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:d.title}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:d.description})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Can receive from:"}),d.canReceiveFrom.map(y=>e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 border border-blue-300 dark:border-blue-700",children:y},y))]})]},d.recipient))})]}),e.jsxs("div",{className:"mt-8 p-5 bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 rounded-xl border border-red-200 dark:border-red-800",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-red-600"}),"Key Facts About Blood Donation"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Oâˆ’ (Universal Donor):"})," Can save anyone in emergencies - most valuable blood type"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-pink-600 dark:text-pink-400",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"AB+ (Universal Recipient):"})," Can receive from all types but can only help AB+"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Waiting Period:"})," Must wait 90 days (3 months) between blood donations for health safety"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"One Donation:"})," Can save up to 3 lives by separating blood components (red cells, platelets, plasma)"]})]})]})]})]})]})})]})},$=[{value:"",label:"All Blood Groups",color:"gray"},{value:"O_NEGATIVE",label:"Oâˆ’",color:"red"},{value:"O_POSITIVE",label:"O+",color:"orange"},{value:"A_NEGATIVE",label:"Aâˆ’",color:"blue"},{value:"A_POSITIVE",label:"A+",color:"indigo"},{value:"B_NEGATIVE",label:"Bâˆ’",color:"green"},{value:"B_POSITIVE",label:"B+",color:"emerald"},{value:"AB_NEGATIVE",label:"ABâˆ’",color:"purple"},{value:"AB_POSITIVE",label:"AB+",color:"pink"}],He=[{value:"HIGH",label:"High Priority",description:"Emergency surgery, critical condition",color:"border-red-500 bg-red-50 dark:bg-red-900/20"},{value:"MEDIUM",label:"Medium Priority",description:"Planned surgery, stable condition",color:"border-orange-500 bg-orange-50 dark:bg-orange-900/20"},{value:"LOW",label:"Low Priority",description:"Scheduled procedure, non-urgent",color:"border-green-500 bg-green-50 dark:bg-green-900/20"}],ze=({isOpen:r,onClose:s})=>{const[a,t]=l.useState(1),[x,d]=l.useState(!1),[y,{isLoading:b}]=Fe(),{data:v,isLoading:D,refetch:k}=Le({page:a,limit:5}),{data:w}=me(),{register:g,handleSubmit:N,reset:B,formState:{errors:h}}=Y({defaultValues:{donationDate:new Date().toISOString().split("T")[0],location:"",units:1,notes:""}}),j=async u=>{try{await y(u).unwrap(),k(),d(!1),B()}catch(o){console.error("Failed to add donation:",o)}},R=v?.donations||[],m=v?.summary;return e.jsxs(L,{open:r,onClose:s,className:"relative z-50",children:[e.jsx(F,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(P,{className:"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-xl shadow-xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(E,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"My Blood Donations"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),"Add Donation"]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-6 w-6"})})]})]}),w&&e.jsxs("div",{className:`p-4 rounded-lg mb-6 ${w.eligibility.isEligible?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800"}`,children:[e.jsx("h3",{className:`font-semibold ${w.eligibility.isEligible?"text-green-800 dark:text-green-200":"text-orange-800 dark:text-orange-200"}`,children:w.eligibility.isEligible?"âœ… Eligible to Donate":"â³ Not Eligible Yet"}),e.jsx("p",{className:"text-sm mt-1",children:w.eligibility.message})]}),m&&e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-500",children:m.totalDonations||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Donations"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:m.totalUnits||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Units Donated"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:"Last Donation"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:m.lastDonationDate?se(new Date(m.lastDonationDate),"MMM dd, yyyy"):"None"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-500",children:["~",(m.totalUnits||0)*3]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Lives Impacted"})]})]}),x&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg mb-6",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Add New Donation"}),e.jsxs("form",{onSubmit:N(j),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Donation Date"}),e.jsx("input",{...g("donationDate",{required:!0}),type:"date",max:new Date().toISOString().split("T")[0],className:"w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Units"}),e.jsx("select",{...g("units"),className:"w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500",children:[1,2,3,4,5].map(u=>e.jsxs("option",{value:u,children:[u," unit",u>1?"s":""]},u))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),e.jsx("input",{...g("location",{required:!0}),placeholder:"e.g., Red Cross Center, AIIMS Hospital",className:"w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{...g("notes"),rows:2,className:"w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50",children:b?e.jsx(O,{size:"sm"}):"Add Donation"}),e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"})]})]})]}),D?e.jsx(O,{}):R.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ©¸"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No donations recorded yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Start your life-saving journey!"}),e.jsx("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Add Your First Donation"})]}):e.jsx("div",{className:"space-y-4",children:R.map(u=>e.jsx("div",{className:"border rounded-lg p-4 dark:border-gray-600",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:u.location}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:se(new Date(u.donationDate),"PPP")}),u.notes&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:u.notes})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-lg font-semibold text-red-500",children:[u.units," unit",u.units>1?"s":""]})})]})},u.id))})]})})})]})},We=({isOpen:r,onClose:s})=>{const[a,t]=l.useState("discover"),[x,d]=l.useState(null),[y,b]=l.useState(!1),{data:v,isLoading:D}=Ie({page:1,limit:10}),{data:k,isLoading:w}=Ee({page:1,limit:10}),[g,{isLoading:N}]=Me(),B=a==="discover"?D:w,h=a==="discover"?v?.requisitions||[]:k?.requisitions||[],{register:j,handleSubmit:R,reset:m}=Y({defaultValues:{response:"WILLING",message:""}}),u=async o=>{if(x)try{await g({requisitionId:x.id,response:o}).unwrap(),b(!1),d(null),m()}catch(A){console.error("Failed to respond:",A)}};return e.jsxs(L,{open:r,onClose:s,className:"relative z-50",children:[e.jsx(F,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(P,{className:"mx-auto max-w-5xl w-full bg-white dark:bg-gray-800 rounded-xl shadow-xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(E,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Emergency Blood Requests"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg mb-6",children:[e.jsx("button",{onClick:()=>t("discover"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${a==="discover"?"bg-white dark:bg-gray-600 text-red-600 dark:text-red-400 shadow-sm":"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,children:"ðŸ†˜ Help Others"}),e.jsx("button",{onClick:()=>t("my-requests"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${a==="my-requests"?"bg-white dark:bg-gray-600 text-red-600 dark:text-red-400 shadow-sm":"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,children:"ðŸ“‹ My Requests"})]}),B?e.jsx(O,{}):h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:a==="discover"?"ðŸ”":"ðŸ“‹"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:a==="discover"?"No emergency requests found":"No requests created yet"})]}):e.jsx("div",{className:"space-y-4",children:h.map(o=>e.jsx("div",{className:"border rounded-lg p-4 dark:border-gray-600",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold",children:["Patient: ",o.patientName]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.hospitalName," â€¢ ",o.location]}),e.jsxs("p",{className:"text-sm",children:["Needs: ",o.unitsNeeded," unit",o.unitsNeeded>1?"s":""," of ",o.requiredBloodGroup.replace("_"," ")]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Required by: ",se(new Date(o.requiredByDate),"PPP")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${o.urgencyLevel==="HIGH"?"bg-red-100 text-red-800":o.urgencyLevel==="MEDIUM"?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:[o.urgencyLevel," PRIORITY"]}),a==="discover"&&o.status==="ACTIVE"&&e.jsx("button",{onClick:()=>{d(o),b(!0)},className:"block mt-2 px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600",children:"ðŸ¤ I Can Help"})]})]})},o.id))}),y&&x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-10",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Respond to Request"}),e.jsxs("form",{onSubmit:R(u),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your Response"}),e.jsxs("select",{...j("response"),className:"w-full p-2 border rounded-lg dark:bg-gray-700",children:[e.jsx("option",{value:"WILLING",children:"I can help!"}),e.jsx("option",{value:"NOT_AVAILABLE",children:"Not available now"}),e.jsx("option",{value:"NOT_SUITABLE",children:"Cannot donate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message (Optional)"}),e.jsx("textarea",{...j("message"),rows:3,className:"w-full p-2 border rounded-lg dark:bg-gray-700",placeholder:"Any message for the requester..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:N,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50",children:N?e.jsx(O,{size:"sm"}):"Send Response"}),e.jsx("button",{type:"button",onClick:()=>b(!1),className:"flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"})]})]})]})})]})})})]})},Ye=({isOpen:r,onClose:s})=>{const[a,t]=l.useState(1),[x,d]=l.useState(null),[y,b]=l.useState(!1),[v,{isLoading:D}]=Pe(),[k]=$e(),[w]=Ue(),{register:g,handleSubmit:N,watch:B,formState:{errors:h,isValid:j},reset:R}=Y({mode:"onChange",defaultValues:{unitsNeeded:1,urgencyLevel:"HIGH",allowContactReveal:!0,requiredByDate:new Date(Date.now()+1440*60*1e3).toISOString().split("T")[0]}}),m=B();l.useEffect(()=>{const c=setTimeout(async()=>{if(m.requiredBloodGroup&&m.location&&m.location.length>2){b(!0);try{const S=await k({requiredBloodGroup:m.requiredBloodGroup,location:m.location,limit:100}).unwrap();d(S.totalFound||0)}catch{d(0)}finally{b(!1)}}else d(null)},500);return()=>clearTimeout(c)},[m.requiredBloodGroup,m.location,k]);const u=async n=>{try{const c=await v({...n,requiredByDate:new Date(n.requiredByDate).toISOString()}).unwrap();try{await w({requisitionId:c.id}).unwrap(),M.success(`Emergency request created and ${x} donors notified!`)}catch(S){console.error("Failed to notify donors:",S),M.error("Request created but failed to notify donors")}s(),R(),t(1)}catch(c){console.error("Failed to create requisition:",c),M.error("Failed to create emergency request")}},o=()=>t(a+1),A=()=>t(a-1);return e.jsxs(L,{open:r,onClose:s,className:"relative z-50",children:[e.jsx(F,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(P,{className:"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-xl shadow-xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(E,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Emergency Blood Request"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3].map(n=>e.jsxs(ye.Fragment,{children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ${a>=n?"bg-red-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:n}),n<3&&e.jsx("div",{className:`w-12 h-1 mx-2 ${a>n?"bg-red-500":"bg-gray-200 dark:bg-gray-700"}`})]},n))}),e.jsxs("form",{onSubmit:N(u),className:"space-y-6",children:[a===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Patient & Hospital Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Patient Name *"}),e.jsx("input",{...g("patientName",{required:"Required"}),className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"Enter patient's full name"}),h.patientName&&e.jsx("p",{className:"text-red-500 text-xs",children:h.patientName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hospital Name *"}),e.jsx("input",{...g("hospitalName",{required:"Required"}),className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"e.g., AIIMS Hospital"}),h.hospitalName&&e.jsx("p",{className:"text-red-500 text-xs",children:h.hospitalName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Contact Number *"}),e.jsx("input",{...g("contactNumber",{required:"Required",pattern:{value:/^[6-9]\d{9}$/,message:"Invalid number"}}),className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"10-digit mobile number"}),h.contactNumber&&e.jsx("p",{className:"text-red-500 text-xs",children:h.contactNumber.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alternate Number"}),e.jsx("input",{...g("alternateNumber"),className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"Alternative contact"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:o,disabled:!m.patientName||!m.hospitalName||!m.contactNumber,className:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50",children:"Next â†’"})})]}),a===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Blood Requirements"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Required Blood Group *"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:$.slice(1).map(n=>e.jsxs("label",{className:`flex items-center justify-center p-2 border-2 rounded-lg cursor-pointer transition-colors ${m.requiredBloodGroup===n.value?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,children:[e.jsx("input",{...g("requiredBloodGroup",{required:!0}),type:"radio",value:n.value,className:"sr-only"}),e.jsx("span",{className:"font-medium",children:n.label})]},n.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hospital Location/Area *"}),e.jsx("input",{...g("location",{required:"Required"}),className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"e.g., Sector 14, Gurgaon, Haryana"}),h.location&&e.jsx("p",{className:"text-red-500 text-xs",children:h.location.message})]}),(x!==null||y)&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"h-5 w-5 text-blue-600"}),y?e.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Searching for donors..."}):e.jsxs("span",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:x})," potential donor",x!==1?"s":""," found in this area"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Units Needed *"}),e.jsx("select",{...g("unitsNeeded"),className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[1,2,3,4,5,6,7,8,9,10].map(n=>e.jsxs("option",{value:n,children:[n," unit",n>1?"s":""]},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Required By Date *"}),e.jsx("input",{...g("requiredByDate",{required:!0}),type:"date",min:new Date().toISOString().split("T")[0],className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Urgency Level *"}),e.jsx("div",{className:"space-y-2",children:He.map(n=>e.jsxs("label",{className:`flex items-start p-3 border-2 rounded-lg cursor-pointer transition-colors ${m.urgencyLevel===n.value?n.color:"border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,children:[e.jsx("input",{...g("urgencyLevel"),type:"radio",value:n.value,className:"mt-1 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n.label}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n.description})]})]},n.value))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:A,className:"px-6 py-2 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"â† Previous"}),e.jsx("button",{type:"button",onClick:o,disabled:!m.requiredBloodGroup||!m.location,className:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50",children:"Next â†’"})]})]}),a===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Additional Details"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Medical Condition (Optional)"}),e.jsx("textarea",{...g("medicalCondition"),rows:3,className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"Brief description of the medical condition..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Additional Notes (Optional)"}),e.jsx("textarea",{...g("additionalNotes"),rows:2,className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"Any additional information..."})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...g("allowContactReveal"),type:"checkbox",className:"text-red-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Allow Contact Information Sharing"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Willing donors will see your contact information"})]})]})}),x!==null&&x>0&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Re,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Alert Notification Ready"})]}),e.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["When you submit this request, all ",x," potential donors in the area will be immediately notified via push notification about this emergency."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:A,className:"px-6 py-2 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"â† Previous"}),e.jsx("button",{type:"submit",disabled:D||!j,className:"px-8 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 flex items-center space-x-2",children:D?e.jsxs(e.Fragment,{children:[e.jsx(O,{size:"sm"}),e.jsx("span",{children:"Creating & Alerting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"ðŸ†˜"}),e.jsx("span",{children:"Create & Alert Donors"})]})})]})]})]})]})})})]})},Ns=()=>{const[r,s]=l.useState(!1),[a,t]=l.useState(!1),[x,d]=l.useState(!1),[y,b]=l.useState(!1),[v,D]=l.useState(""),[k,w]=l.useState("false"),[g,N]=l.useState(""),[B,h]=l.useState(1),[j,R]=l.useState(!1),[m,u]=l.useState(!0),[o,A]=l.useState(null),[n,c]=l.useState(!1),S=12,[Q,xe]=l.useState("");l.useEffect(()=>{const i=setTimeout(()=>{xe(g),h(1)},500);return()=>clearTimeout(i)},[g]);const{data:re}=je(),{data:p,isLoading:Qe}=ce(),{data:G,isLoading:Je}=me(void 0,{skip:!p?.isBloodDonor}),{data:ge,isLoading:Ke}=Oe(),{data:J,isLoading:ue,isFetching:Ze,refetch:be}=Te({bloodGroup:v||void 0,eligibleOnly:k,page:B,limit:S,city:Q||void 0}),H=J?.donors||[],I=J?.pagination,te=J?.stats,ae=ge?.stats;l.useEffect(()=>{p&&!p.bloodGroup&&c(!0)},[p]);const z=i=>$.find(C=>C.value===i)?.color||"gray",K=i=>$.find(C=>C.value===i)?.label||i,he=()=>{D(""),w("false"),N(""),h(1)},Z=[v,k==="true"?"eligible":null,Q].filter(Boolean).length,X=i=>{h(i),window.scrollTo({top:0,behavior:"smooth"})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-pink-50 to-rose-50 dark:from-gray-900 dark:via-red-900/20 dark:to-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(f.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},className:"bg-gradient-to-r from-red-500 to-pink-500 p-2 sm:p-2.5 rounded-full mr-3 sm:mr-4",children:e.jsx(T,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-red-600 to-pink-600 bg-clip-text text-transparent",children:"LifeLink Network"})]}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Connect with blood donors in our alumni community. Every donation can save up to three lives."}),re&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[re.name," Blood Donation Network"]})]}),p&&e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1",children:[e.jsx("div",{className:`p-2 sm:p-3 rounded-full flex-shrink-0 ${p.isBloodDonor?"bg-gradient-to-r from-red-500 to-pink-500":"bg-gray-100 dark:bg-gray-700"}`,children:p.isBloodDonor?e.jsx(T,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"}):e.jsx(V,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm sm:text-lg font-semibold text-gray-900 dark:text-white",children:p.isBloodDonor?"Registered Blood Donor":"Not a Blood Donor"}),p.bloodGroup?e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-1 sm:mt-2 flex-wrap",children:[e.jsxs("span",{className:"inline-flex items-center px-2 sm:px-4 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm font-bold bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-200 border-2 border-red-200 dark:border-red-800",children:["ðŸ©¸ ",K(p.bloodGroup)]}),(p.totalUnitsDonated>0||p.totalBloodDonations>0)&&e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 px-2 sm:px-3 py-1 rounded-lg whitespace-nowrap",children:[p.totalUnitsDonated||p.totalBloodDonations," ",(p.totalUnitsDonated||p.totalBloodDonations)===1?"unit":"units"," donated"]})]}):e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Complete your blood profile to join the network"})]})]}),p.isBloodDonor&&G&&e.jsxs("div",{className:"sm:text-right flex-shrink-0",children:[e.jsxs("div",{className:`inline-flex items-center px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium ${G.eligibility.isEligible?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}`,children:[G.eligibility.isEligible?e.jsx(ee,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}):e.jsx(ve,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:G.eligibility.isEligible?"Eligible to Donate":"Not Eligible Yet"}),e.jsx("span",{className:"sm:hidden",children:G.eligibility.isEligible?"Eligible":"Not Eligible"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:G.eligibility.message})]})]}),e.jsxs("div",{className:"mt-3 sm:mt-4 flex flex-wrap gap-1.5 sm:gap-2",children:[!p.bloodGroup&&e.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-2.5 sm:px-3 py-1.5 sm:py-2 border border-transparent text-xs sm:text-sm leading-4 font-medium rounded-md text-white bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(de,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Complete Blood Profile"}),e.jsx("span",{className:"sm:hidden",children:"Complete Profile"})]}),p.isBloodDonor&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center px-2.5 sm:px-3 py-1.5 sm:py-2 border border-gray-300 dark:border-gray-600 text-xs sm:text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:["ðŸ©¸ ",e.jsx("span",{className:"hidden sm:inline ml-1",children:"View My Donations"}),e.jsx("span",{className:"sm:hidden ml-1",children:"Donations"})]}),e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center px-2.5 sm:px-3 py-1.5 sm:py-2 border border-gray-300 dark:border-gray-600 text-xs sm:text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:["ðŸ†˜ ",e.jsx("span",{className:"hidden sm:inline ml-1",children:"Emergency Requests"}),e.jsx("span",{className:"sm:hidden ml-1",children:"Requests"})]})]}),e.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center px-2.5 sm:px-3 py-1.5 sm:py-2 border border-red-300 text-xs sm:text-sm leading-4 font-medium rounded-md text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(le,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Create Emergency Request"}),e.jsx("span",{className:"sm:hidden",children:"Create Request"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"inline-flex items-center px-2.5 sm:px-3 py-1.5 sm:py-2 border border-gray-300 dark:border-gray-600 text-xs sm:text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(W,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Blood Compatibility Guide"}),e.jsx("span",{className:"sm:hidden",children:"Compatibility"})]})]})]})}),e.jsx(U,{children:m&&e.jsx(f.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6 sm:mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-10 gap-3 sm:gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-3 sm:p-4 rounded-xl shadow-lg lg:col-span-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ne,{className:"h-6 w-6 sm:h-8 sm:w-8 text-red-500 mx-auto mb-1.5 sm:mb-2"}),e.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 mb-0.5 sm:mb-1",children:"Total Donors"}),e.jsx("dd",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:te?.totalDonors||0})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-3 sm:p-4 rounded-xl shadow-lg lg:col-span-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ee,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 mx-auto mb-1.5 sm:mb-2"}),e.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 mb-0.5 sm:mb-1",children:"Available Donors"}),e.jsx("dd",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:te?.eligibleDonors||0})]})}),e.jsx("div",{className:"lg:col-span-6 grid grid-cols-4 gap-2 sm:gap-3",children:ae?$.slice(1).map(i=>e.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 sm:p-3 rounded-xl shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-sm sm:text-lg font-bold mb-0.5 sm:mb-1",children:i.label}),e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:ae[i.value]||0})]})},i.value)):e.jsx("div",{className:"col-span-4 text-center py-3 sm:py-4",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"No data available"})})})]})})}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:g,onChange:i=>N(i.target.value),placeholder:"Search by city (e.g., Mumbai, Delhi, Bangalore)...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>R(!j),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Filters",Z>0&&e.jsx("span",{className:"ml-2 inline-flex items-center justify-center h-5 w-5 rounded-full bg-red-600 text-white text-xs",children:Z})]}),e.jsxs("button",{onClick:()=>u(!m),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(Be,{className:"h-4 w-4 mr-1"}),m?"Hide":"Show"," Stats"]})]})]}),e.jsx(U,{children:j&&e.jsx(f.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:v,onChange:i=>{D(i.target.value),h(1)},className:"appearance-none bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",children:$.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))}),e.jsx(De,{className:"h-4 w-4 text-gray-400 absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:k==="true",onChange:i=>{w(i.target.checked?"true":"false"),h(1)},className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Eligible to donate only"})]}),Z>0&&e.jsx("button",{onClick:he,className:"text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:"Clear all filters"})]})})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Available Donors"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[H.length," donor",H.length!==1?"s":""," found"]})]}),ue?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-4",children:[...Array(6)].map((i,q)=>e.jsxs("div",{className:"animate-pulse bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm h-32 sm:h-36",children:[e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-gray-200 dark:bg-gray-700 rounded-full mx-auto mb-2"}),e.jsx("div",{className:"h-3 sm:h-3.5 bg-gray-200 dark:bg-gray-700 rounded mb-1.5"}),e.jsx("div",{className:"h-2.5 sm:h-3 bg-gray-200 dark:bg-gray-700 rounded mb-1.5"}),e.jsx("div",{className:"h-2.5 sm:h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mx-auto"})]},q))}):H.length===0?e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx("div",{className:"h-16 w-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:"ðŸ©¸"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No donors found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:v||Q?"Try adjusting your filters":"No donors are currently available"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:H.map((i,q)=>e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:q*.05},className:"bg-gray-800 rounded-lg p-4 border border-red-500 hover:border-red-400 transition-colors cursor-pointer",onClick:()=>A(i),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-600 flex items-center justify-center",children:i.profileImage?e.jsx("img",{src:Ne(`/api/users/profile-picture/${i.id}`),alt:i.fullName,className:"h-10 w-10 rounded-full object-cover",onError:C=>{const pe=C.target;pe.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(i.fullName)}&background=6B7280&color=fff&size=40`}}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-600 flex items-center justify-center text-white text-sm font-medium",children:i.fullName.split(" ").map(C=>C[0]).join("").slice(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-orange-400 font-medium text-sm",children:i.fullName}),e.jsx("p",{className:"text-gray-400 text-xs",children:i.email})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-red-400 text-lg font-bold",children:K(i.bloodGroup)})})]})},i.id))})]}),I&&I.totalPages>1&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>X(B-1),disabled:!I.hasPrev,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700",children:"Previous"}),Array.from({length:I.totalPages},(i,q)=>q+1).map(i=>e.jsx("button",{onClick:()=>X(i),className:`px-3 py-2 text-sm font-medium rounded-md ${i===B?"text-white bg-gradient-to-r from-red-500 to-pink-500":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:i},i)),e.jsx("button",{onClick:()=>X(B+1),disabled:!I.hasNext,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700",children:"Next"})]})}),e.jsx(U,{children:o&&e.jsxs(L,{open:!!o,onClose:()=>A(null),className:"relative z-50",children:[e.jsx(F,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(P,{className:"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsx(E,{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Donor Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[o.firstName," ",o.lastName]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:o.addresses[0]?`${o.addresses[0].city}, ${o.addresses[0].state}`:"Location not specified"})]}),o.bloodGroup&&e.jsx("div",{children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-${z(o.bloodGroup)}-100 text-${z(o.bloodGroup)}-800 dark:bg-${z(o.bloodGroup)}-900 dark:text-${z(o.bloodGroup)}-300`,children:["ðŸ©¸",K(o.bloodGroup)," Blood Group"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(T,{className:"h-4 w-4 text-red-500 mr-2"}),o.totalBloodDonations," total donations"]}),o.showPhone&&o.phone?e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),o.phone]}):e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Contact details not shared"]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Close"})})]})})})]})}),e.jsx(Ve,{isOpen:n,onClose:()=>c(!1),onSuccess:()=>{c(!1),be()}}),e.jsx(ze,{isOpen:r,onClose:()=>s(!1)}),e.jsx(We,{isOpen:a,onClose:()=>t(!1)}),e.jsx(Ye,{isOpen:x,onClose:()=>d(!1)}),e.jsx(_e,{isOpen:y,onClose:()=>b(!1)})]})})};export{Ns as default};
//# sourceMappingURL=LifeLink-CU1iuy33.js.map
