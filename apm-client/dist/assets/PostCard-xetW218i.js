import{j as e,a as K,L as J,A as X,m as M,i as U}from"./ui-BlmhFX_F.js";import{r as a,L as me,R as we}from"./router-DFnE1L-t.js";import{C as Ce}from"./redux-VN59sPcb.js";import{e as Le,f as Re,g as Ae,h as Ee,i as Se,j as $e,k as Fe,l as Ie,m as Pe,n as Te,F as ue,P as Me}from"./PostImageDisplay-Fz7qO6qV.js";import{c as _,u as Oe,z as ie}from"./index-DHymdRDT.js";import{F as be}from"./XMarkIcon-D1c1wIzV.js";import{a as oe}from"./utils-CXyNmL__.js";import{F as ye}from"./PencilIcon-DAEDOf0J.js";import{F as pe}from"./TrashIcon-mpSEd7uz.js";import{F as De}from"./EllipsisVerticalIcon-CJAxHUn0.js";import{F as Be}from"./CheckCircleIcon-DCBCeWMH.js";import{F as He}from"./XCircleIcon-CvFATmWB.js";import{F as We}from"./ClockIcon-DZUckIFe.js";function Ue({title:t,titleId:h,...n},x){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":h},n),t?a.createElement("title",{id:h},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const _e=a.forwardRef(Ue);function ze({title:t,titleId:h,...n},x){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":h},n),t?a.createElement("title",{id:h},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const Ge=a.forwardRef(ze);function Ye({title:t,titleId:h,...n},x){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":h},n),t?a.createElement("title",{id:h},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const Ke=a.forwardRef(Ye),ge={LIKE:{emoji:"ðŸ‘",label:"Like",color:"text-blue-600 dark:text-blue-400"},LOVE:{emoji:"â¤ï¸",label:"Love",color:"text-red-600 dark:text-red-400"},CELEBRATE:{emoji:"ðŸŽ‰",label:"Celebrate",color:"text-yellow-600 dark:text-yellow-400"},SUPPORT:{emoji:"ðŸ™Œ",label:"Support",color:"text-green-600 dark:text-green-400"},FUNNY:{emoji:"ðŸ˜‚",label:"Funny",color:"text-orange-600 dark:text-orange-400"},WOW:{emoji:"ðŸ˜®",label:"Wow",color:"text-purple-600 dark:text-purple-400"},ANGRY:{emoji:"ðŸ˜ ",label:"Angry",color:"text-red-700 dark:text-red-300"},SAD:{emoji:"ðŸ˜¢",label:"Sad",color:"text-blue-700 dark:text-blue-300"}},Ve=({isOpen:t,onClose:h,postId:n})=>{const[x,A]=a.useState("ALL"),[w,b]=a.useState(1),{data:m,isLoading:u,error:j}=Le({postId:n,reactionType:x==="ALL"?void 0:x,page:w,limit:20},{skip:!t}),E=s=>s.split(" ").map(k=>k.charAt(0)).join("").slice(0,2).toUpperCase(),C=m?.reactionCounts?Object.entries(m.reactionCounts).filter(([s,k])=>k>0).sort(([s,k],[l,p])=>s==="ALL"?-1:l==="ALL"?1:p-k):[];return e.jsx(K,{appear:!0,show:t,as:a.Fragment,children:e.jsxs(J,{as:"div",className:"relative z-50",onClose:h,children:[e.jsx(K.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(K.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(J.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(J.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:"Reactions"}),e.jsx("button",{onClick:h,className:"rounded-md p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(be,{className:"h-6 w-6"})})]}),C.length>0&&e.jsx("div",{className:"flex space-x-1 mb-4 overflow-x-auto",children:C.map(([s,k])=>e.jsxs("button",{onClick:()=>{A(s),b(1)},className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${x===s?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s!=="ALL"&&e.jsx("span",{className:"text-base",children:ge[s]?.emoji}),s==="ALL"&&e.jsx("span",{children:"All"}),e.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-2 py-0.5 rounded-full text-xs",children:k})]},s))}),e.jsx("div",{className:"h-96 overflow-y-auto",children:u?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):j?e.jsx("div",{className:"text-center py-8 text-red-600 dark:text-red-400",children:"Failed to load reactions"}):m?.reactions?.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No reactions found"}):e.jsx("div",{className:"space-y-3",children:e.jsx(X,{mode:"popLayout",children:m?.reactions?.map((s,k)=>e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:k*.05},className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsxs("div",{className:"relative",children:[s.user.profileImage?e.jsx("img",{src:_(`/api/users/profile-picture/${s.user.id}`),alt:s.user.fullName,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm",children:E(s.user.fullName)}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 bg-white dark:bg-gray-800 rounded-full p-0.5 border border-gray-200 dark:border-gray-600 w-5 h-5 flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:ge[s.reactionType]?.emoji})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(me,{to:`/alumni/${s.user.id}`,className:"block hover:text-blue-600 dark:hover:text-blue-400",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:s.user.fullName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:s.user.currentPosition&&s.user.currentCompany?`${s.user.currentPosition} at ${s.user.currentCompany}`:s.user.currentPosition||s.user.currentCompany||s.user.batch&&`Batch ${s.user.batch}`||"Alumni"})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:oe(new Date(s.createdAt),{addSuffix:!0})})]})]},s.id))})})}),m?.pagination&&m.pagination.pages>1&&e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>b(s=>Math.max(1,s-1)),disabled:!m.pagination.hasPrev,className:"px-3 py-1 text-sm rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",m.pagination.page," of ",m.pagination.pages]}),e.jsx("button",{onClick:()=>b(s=>s+1),disabled:!m.pagination.hasNext,className:"px-3 py-1 text-sm rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})})})]})})},re={LIKE:{emoji:"ðŸ‘",label:"Like",color:"text-blue-600 dark:text-blue-400"},LOVE:{emoji:"â¤ï¸",label:"Love",color:"text-red-600 dark:text-red-400"},CELEBRATE:{emoji:"ðŸŽ‰",label:"Celebrate",color:"text-yellow-600 dark:text-yellow-400"},SUPPORT:{emoji:"ðŸ™Œ",label:"Support",color:"text-green-600 dark:text-green-400"},FUNNY:{emoji:"ðŸ˜‚",label:"Funny",color:"text-orange-600 dark:text-orange-400"},WOW:{emoji:"ðŸ˜®",label:"Wow",color:"text-purple-600 dark:text-purple-400"},ANGRY:{emoji:"ðŸ˜ ",label:"Angry",color:"text-red-700 dark:text-red-300"},SAD:{emoji:"ðŸ˜¢",label:"Sad",color:"text-blue-700 dark:text-blue-300"}},Ze=({postId:t,reactions:h,userReactions:n,totalReactions:x,recentReactions:A=[],onReact:w,onCommentClick:b,onShareClick:m,commentCount:u=0,disabled:j=!1,className:E=""})=>{const[C,s]=a.useState(!1),[k,l]=a.useState(!1),[p,P]=a.useState(!1),S=n?.[0],$=!!S,D=Object.entries(h||{}).filter(([i,v])=>v>0).sort(([,i],[,v])=>v-i).slice(0,3).map(([i])=>i),z=i=>{w(i),s(!1)},V=()=>{w($?S:"LIKE")};a.useEffect(()=>{let i;return k&&!j&&(i=setTimeout(()=>{s(!0)},500)),()=>{i&&clearTimeout(i)}},[k,j]);const B=()=>{if(x===0||!x)return null;const i=Array.from(new Map(A.map(v=>[v.userId,v])).values());return i.length===0?`${x}`:i.length===1?x===1?i[0].user.fullName:`${i[0].user.fullName} and ${x-1} others`:i.length===2?x===2?`${i[0].user.fullName} and ${i[1].user.fullName}`:`${i[0].user.fullName}, ${i[1].user.fullName} and ${x-2} others`:`${i[0].user.fullName}, ${i[1].user.fullName} and ${x-2} others`};return e.jsxs("div",{className:`space-y-3 ${E}`,children:[(x>0||u>0)&&e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[x>0?e.jsxs("button",{onClick:()=>P(!0),className:"flex items-center space-x-2 hover:text-gray-700 dark:hover:text-gray-300 hover:underline cursor-pointer",children:[e.jsx("div",{className:"flex -space-x-1",children:D.map((i,v)=>e.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs border-2 border-white dark:border-gray-800",style:{zIndex:D.length-v},children:re[i].emoji},i))}),e.jsx("span",{className:"ml-1",children:B()})]}):e.jsx("div",{}),u>0&&e.jsx("button",{onClick:b,className:"hover:text-gray-700 dark:hover:text-gray-300 hover:underline",children:u===1?"1 comment":`${u} comments`})]}),e.jsx("div",{className:"flex items-center justify-between border-t border-gray-100 dark:border-gray-700 pt-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:V,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),disabled:j,className:`flex items-center space-x-2 px-4 py-2 rounded-md transition-all duration-200 ${$?`${re[S]?.color} bg-blue-50 dark:bg-blue-900/20 font-medium`:"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-700"} ${j?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[e.jsx("span",{className:"text-lg",children:$?re[S]?.emoji:"ðŸ‘"}),e.jsx("span",{className:"text-sm font-medium",children:$?re[S]?.label:"Like"})]}),e.jsx(X,{children:C&&e.jsx(M.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},className:"absolute bottom-full left-0 mb-2 z-50",onMouseEnter:()=>l(!0),onMouseLeave:()=>{l(!1),s(!1)},children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-full shadow-xl border border-gray-200 dark:border-gray-700 p-2 flex space-x-1",children:Object.entries(re).map(([i,v])=>{const G=S===i,T=h?.[i]||0;return e.jsxs(M.button,{whileHover:{scale:1.3,y:-4},whileTap:{scale:.9},onClick:()=>z(i),className:`relative p-2 rounded-full transition-all duration-200 ${G?"bg-blue-100 dark:bg-blue-900 scale-110 shadow-lg":"hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer"}`,title:`${v.label}${T>0?` (${T})`:""}`,children:[e.jsx("span",{className:"text-xl",children:v.emoji}),T>0&&e.jsx(M.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full min-w-[16px] h-4 flex items-center justify-center px-1",children:T})]},i)})})})})]}),e.jsxs("button",{onClick:b,className:"flex items-center space-x-2 px-4 py-2 rounded-md text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(_e,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Comment"})]}),e.jsxs("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 rounded-md text-gray-600 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(Ke,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Share"})]})]})}),C&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),e.jsx(Ve,{isOpen:p,onClose:()=>P(!1),postId:t})]})},he={LIKE:{emoji:"ðŸ‘",label:"Like",color:"text-blue-600 dark:text-blue-400"},LOVE:{emoji:"â¤ï¸",label:"Love",color:"text-red-600 dark:text-red-400"},CELEBRATE:{emoji:"ðŸŽ‰",label:"Celebrate",color:"text-yellow-600 dark:text-yellow-400"},SUPPORT:{emoji:"ðŸ™Œ",label:"Support",color:"text-green-600 dark:text-green-400"},FUNNY:{emoji:"ðŸ˜‚",label:"Funny",color:"text-orange-600 dark:text-orange-400"},WOW:{emoji:"ðŸ˜®",label:"Wow",color:"text-purple-600 dark:text-purple-400"},ANGRY:{emoji:"ðŸ˜ ",label:"Angry",color:"text-red-700 dark:text-red-300"},SAD:{emoji:"ðŸ˜¢",label:"Sad",color:"text-blue-700 dark:text-blue-300"}},qe=({isOpen:t,onClose:h,postId:n,commentId:x})=>{const[A,w]=a.useState("ALL"),[b,m]=a.useState(1),{data:u,isLoading:j,error:E}=Re({postId:n,commentId:x,reactionType:A==="ALL"?void 0:A,page:b,limit:20},{skip:!t}),C=l=>l.split(" ").map(p=>p.charAt(0)).join("").slice(0,2).toUpperCase(),s=u?.reactionCounts?Object.entries(u.reactionCounts).filter(([l,p])=>p>0).sort(([l,p],[P,S])=>l==="ALL"?-1:P==="ALL"?1:S-p):[],k=s.reduce((l,[p,P])=>l+P,0);return e.jsx(K,{appear:!0,show:t,as:a.Fragment,children:e.jsxs(J,{as:"div",className:"relative z-50",onClose:h,children:[e.jsx(K.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(K.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(J.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(J.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:"Reactions"}),e.jsx("button",{onClick:h,className:"rounded-md p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(be,{className:"h-6 w-6"})})]}),s.length>0&&e.jsxs("div",{className:"flex space-x-1 mb-4 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>{w("ALL"),m(1)},className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${A==="ALL"?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"All"}),e.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-2 py-0.5 rounded-full text-xs",children:k})]}),s.map(([l,p])=>e.jsxs("button",{onClick:()=>{w(l),m(1)},className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${A===l?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-base",children:he[l]?.emoji}),e.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-2 py-0.5 rounded-full text-xs",children:p})]},l))]}),e.jsx("div",{className:"h-96 overflow-y-auto",children:j?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):E?e.jsx("div",{className:"text-center py-8 text-red-600 dark:text-red-400",children:"Failed to load reactions"}):u?.reactions?.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No reactions found"}):e.jsx("div",{className:"space-y-3",children:e.jsx(X,{mode:"popLayout",children:u?.reactions?.map((l,p)=>e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:p*.05},className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsxs("div",{className:"relative",children:[l.user.profileImage?e.jsx("img",{src:_(`/api/users/profile-picture/${l.user.id}`),alt:l.user.fullName,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm",children:C(l.user.fullName)}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 bg-white dark:bg-gray-800 rounded-full p-0.5 border border-gray-200 dark:border-gray-600 w-5 h-5 flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:he[l.reactionType]?.emoji})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(me,{to:`/alumni/${l.user.id}`,className:"block hover:text-blue-600 dark:hover:text-blue-400",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:l.user.fullName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:l.user.workHistory&&l.user.workHistory.length>0?`${l.user.workHistory[0].jobRole} at ${l.user.workHistory[0].companyName}`:l.user.batch&&`Batch ${l.user.batch}`||"Alumni"})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:oe(new Date(l.createdAt),{addSuffix:!0})})]})]},l.id))})})}),u?.pagination&&u.pagination.pages>1&&e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>m(l=>Math.max(1,l-1)),disabled:!u.pagination.hasPrev,className:"px-3 py-1 text-sm rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",u.pagination.page," of ",u.pagination.pages]}),e.jsx("button",{onClick:()=>m(l=>l+1),disabled:!u.pagination.hasNext,className:"px-3 py-1 text-sm rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})})})]})})},xe={LIKE:{emoji:"ðŸ‘",label:"Like",color:"text-blue-600 dark:text-blue-400"},LOVE:{emoji:"â¤ï¸",label:"Love",color:"text-red-600 dark:text-red-400"},CELEBRATE:{emoji:"ðŸŽ‰",label:"Celebrate",color:"text-yellow-600 dark:text-yellow-400"},SUPPORT:{emoji:"ðŸ™Œ",label:"Support",color:"text-green-600 dark:text-green-400"},FUNNY:{emoji:"ðŸ˜‚",label:"Funny",color:"text-orange-600 dark:text-orange-400"},WOW:{emoji:"ðŸ˜®",label:"Wow",color:"text-purple-600 dark:text-purple-400"},ANGRY:{emoji:"ðŸ˜ ",label:"Angry",color:"text-red-700 dark:text-red-300"},SAD:{emoji:"ðŸ˜¢",label:"Sad",color:"text-blue-700 dark:text-blue-300"}},Qe=({postId:t,allowComments:h})=>{const{user:n}=Oe(),[x,A]=a.useState("desc"),[w,b]=a.useState(null),[m,u]=a.useState(2),{data:j,isLoading:E,error:C}=Ae({postId:t,page:1,limit:m,sortOrder:x}),[s,{isLoading:k}]=Ee(),[l,{isLoading:p}]=Se(),[P]=$e(),[S,{isLoading:$}]=Fe(),[D]=Ie(),[z,V]=a.useState(new Set),B=r=>r.split(" ").map(o=>o.charAt(0)).join("").slice(0,2).toUpperCase(),i=r=>{const o=["from-blue-500 to-purple-600","from-green-500 to-teal-600","from-pink-500 to-red-600","from-yellow-500 to-orange-600","from-indigo-500 to-blue-600","from-purple-500 to-pink-600","from-teal-500 to-green-600","from-orange-500 to-red-600"],g=r.split("").reduce((y,L)=>y+L.charCodeAt(0),0)%o.length;return o[g]},v=(r,o)=>{const g=o.target;g.naturalWidth>50&&g.naturalHeight>50&&V(y=>new Set(y).add(r))},G=async(r,o)=>{if(n)try{await P({postId:t,commentId:r,reactionType:o}).unwrap(),b(null)}catch(g){console.error("Failed to toggle reaction:",g)}},T=async r=>{if(!(!n||!window.confirm("Are you sure you want to delete this comment?")))try{await D({postId:t,commentId:r}).unwrap()}catch(o){console.error("Failed to delete comment:",o)}},ae=({placeholder:r,onSubmit:o,isLoading:g,buttonText:y,autoFocus:L=!1})=>{const[R,q]=a.useState(""),[Q,O]=a.useState(!1),H=a.useRef(null),W=a.useCallback(async()=>{if(R.trim())try{await o(R.trim()),q(""),O(!1),H.current&&(H.current.style.height="36px")}catch(F){console.error("Failed to submit:",F)}},[R,o]),se=a.useCallback(F=>{q(F.target.value);const I=F.target;I.style.height="36px",I.style.height=Math.min(I.scrollHeight,120)+"px"},[]),le=a.useCallback(F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),W())},[W]),de=a.useCallback(()=>{O(!0)},[]),ee=a.useCallback(()=>{R.trim()||O(!1)},[R]);return e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:H,value:R,onChange:se,onKeyPress:le,onFocus:de,onBlur:ee,placeholder:r,autoFocus:L,className:`w-full resize-none focus:outline-none text-sm dark:text-white placeholder-gray-500 dark:placeholder-gray-400 border rounded-lg px-3 py-2 transition-colors ${Q?"border-blue-500 bg-white dark:bg-gray-700":"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 hover:bg-white dark:hover:bg-gray-700"}`,rows:1,style:{minHeight:"40px",maxHeight:"120px",lineHeight:"18px"}}),(Q||R.trim())&&e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("button",{onClick:()=>{q(""),O(!1)},className:"px-4 py-1 bg-gray-500 text-white rounded-lg text-sm font-medium hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:W,disabled:!R.trim()||g,className:"px-4 py-1 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Posting...":y})]})]})},Z=we.memo(({comment:r,isReply:o=!1,level:g=0})=>{const[y,L]=a.useState(!1),[R,q]=a.useState(!1),[Q,O]=a.useState(null),[H,W]=a.useState(!1),[se,le]=a.useState(!1),de=r.author.id===n?.id,ee=r.userReaction,F=r.replies&&r.replies.length>0,I=r.replies?r.replies.length:0,fe=async d=>{await l({postId:t,commentId:r.id,content:d,mentions:[]}).unwrap(),L(!1)},je=d=>{G(r.id,d),q(!1)},ke=()=>{O({id:r.id,content:r.content}),W(!1)},ve=async d=>{if(!(!n||!d.trim()))try{await S({postId:t,commentId:r.id,content:d}).unwrap(),O(null)}catch(N){console.error("Failed to update comment:",N)}},Ne=a.useCallback(d=>{O(N=>N?{...N,content:d}:null)},[]),ce=a.useRef(null);return a.useEffect(()=>{const d=N=>{ce.current&&!ce.current.contains(N.target)&&W(!1)};if(H)return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[H]),e.jsx(M.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${o?"ml-10 mt-2":"mb-3"}`,children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:z.has(r.author.id)?e.jsx("img",{src:_(`/api/users/profile-picture/${r.author.id}`),alt:r.author.fullName,className:"h-8 w-8 rounded-full object-cover"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:_(`/api/users/profile-picture/${r.author.id}`),alt:r.author.fullName,className:"h-8 w-8 rounded-full object-cover opacity-0 absolute",onLoad:d=>v(r.author.id,d)}),e.jsx("div",{className:`h-8 w-8 rounded-full bg-gradient-to-br ${i(r.author.id)} flex items-center justify-center text-white font-semibold text-xs`,children:B(r.author.fullName)})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"py-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900 dark:text-white",children:r.author.fullName}),de&&e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:"Author"})]}),r.author.batch&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Batch ",r.author.batch]})]}),n&&n.id===r.createdBy&&e.jsxs("div",{className:"relative",ref:ce,children:[e.jsx("button",{onClick:()=>W(!H),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:e.jsx(Ge,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"})}),e.jsx(X,{children:H&&e.jsx(M.div,{initial:{opacity:0,scale:.8,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},className:"absolute right-0 mt-2 w-32 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-md shadow-lg z-20",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:ke,className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>{T(r.id),W(!1)},className:"flex items-center w-full px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})})]})]}),Q?.id===r.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:Q.content,onChange:d=>Ne(d.target.value),className:"w-full text-sm bg-transparent border border-gray-300 dark:border-gray-600 rounded px-2 py-1 focus:outline-none focus:border-blue-500",rows:2,autoFocus:!0}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ve(Q.content),disabled:$,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:$?"Saving...":"Save"}),e.jsx("button",{onClick:()=>O(null),className:"px-3 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 leading-normal",children:r.content}),r.isEdited&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:"edited"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1 ml-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>q(!R),className:`flex items-center space-x-1 px-2 py-1 rounded text-xs font-medium transition-colors ${ee?"text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"Like"}),ee&&e.jsx("span",{className:"text-sm",children:xe[ee].emoji})]}),e.jsx(X,{children:R&&e.jsx(M.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},className:"absolute bottom-full left-0 mb-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-lg px-2 py-1 flex space-x-1 z-10",children:Object.entries(xe).map(([d,N])=>e.jsx("button",{onClick:()=>je(d),className:"hover:scale-125 transition-transform p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",title:N.label,children:e.jsx("span",{className:"text-xl",children:N.emoji})},d))})})]}),r.totalReactions>0&&e.jsxs("button",{onClick:()=>b({commentId:r.id,isOpen:!0}),className:"flex items-center space-x-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 text-xs font-medium",children:[e.jsx("span",{className:"text-sm",children:r.reactions&&Object.entries(r.reactions).filter(([,d])=>d>0).slice(0,3).map(([d])=>xe[d]?.emoji).join("")}),e.jsxs("span",{children:["(",r.totalReactions,")"]})]}),e.jsxs("button",{onClick:()=>L(!y),className:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 text-xs font-medium",children:["Reply",I>0&&` Â· ${I} ${I===1?"reply":"replies"}`]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:oe(new Date(r.createdAt),{addSuffix:!0})})]}),y&&e.jsx(M.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 ml-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("img",{src:_(`/api/users/profile-picture/${n?.id}`),alt:n?.fullName||"",className:"h-6 w-6 rounded-full object-cover",onLoad:d=>{const N=d.target;if(N.naturalWidth<=50||N.naturalHeight<=50){const te=N.parentElement;te&&(te.innerHTML=`<div class="h-6 w-6 rounded-full bg-gradient-to-br ${i(n?.id||"")} flex items-center justify-center text-white font-semibold text-xs">${B(n?.fullName||"")}</div>`)}},onError:d=>{const te=d.target.parentElement;te&&(te.innerHTML=`<div class="h-6 w-6 rounded-full bg-gradient-to-br ${i(n?.id||"")} flex items-center justify-center text-white font-semibold text-xs">${B(n?.fullName||"")}</div>`)}})}),e.jsx("div",{className:"flex-1",children:e.jsx(ae,{placeholder:"Write a reply...",onSubmit:fe,isLoading:p,buttonText:"Reply",autoFocus:!0})})]})}),F&&!o&&e.jsx("div",{className:"mt-3 ml-6",children:I>1&&!se?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>le(!0),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium mb-3 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"See previous ",I-1," ",I-1===1?"reply":"replies"]}),e.jsx(Z,{comment:r.replies[r.replies.length-1],isReply:!0,level:g+1},r.replies[r.replies.length-1].id)]}):e.jsx("div",{children:r.replies.map((d,N)=>e.jsxs("div",{className:"mb-3",children:[I>1&&se&&N===0&&e.jsxs("button",{onClick:()=>le(!1),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium mb-3 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Hide previous replies"]}),e.jsx(Z,{comment:d,isReply:!0,level:g+1})]},d.id))})}),F&&o&&e.jsx("div",{className:"mt-3 ml-6",children:r.replies.map(d=>e.jsx(Z,{comment:d,isReply:!0,level:g+1},d.id))})]})]})})}),ne=async r=>{await s({postId:t,content:r,mentions:[]}).unwrap()},c=()=>{A(r=>r==="desc"?"asc":"desc"),u(2)},f=()=>{u(r=>r+5)},Y=j?.pagination&&j.pagination.hasNext;return h?e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[j?.pagination.totalAllComments||j?.pagination.total||0," comments"]}),e.jsx("button",{onClick:c,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors font-medium",children:x==="desc"?"Oldest first":"Newest first"})]}),n&&e.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:z.has(n.id)?e.jsx("img",{src:_(`/api/users/profile-picture/${n.id}`),alt:n.fullName,className:"h-8 w-8 rounded-full object-cover"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:_(`/api/users/profile-picture/${n.id}`),alt:n.fullName,className:"h-8 w-8 rounded-full object-cover opacity-0 absolute",onLoad:r=>v(n.id,r)}),e.jsx("div",{className:`h-8 w-8 rounded-full bg-gradient-to-br ${i(n.id)} flex items-center justify-center text-white font-semibold text-xs`,children:B(n.fullName)})]})}),e.jsx("div",{className:"flex-1",children:e.jsx(ae,{placeholder:"Add a comment...",onSubmit:ne,isLoading:k,buttonText:"Comment"})})]}),e.jsx("div",{className:"space-y-3",children:E?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):C?e.jsx("div",{className:"text-center py-8 text-red-600 dark:text-red-400",children:"Failed to load comments"}):j?.comments?.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No comments yet. Be the first to comment!"}):e.jsx(X,{children:j?.comments?.map(r=>e.jsx(Z,{comment:r},r.id))})}),Y&&e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("button",{onClick:f,disabled:E,className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium text-sm transition-colors disabled:opacity-50",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),e.jsx("span",{children:E?"Loading...":"Load more comments"})]})}),w&&e.jsx(qe,{isOpen:w.isOpen,onClose:()=>b(null),commentId:w.commentId,postId:t})]}):null},xt=({post:t,showActions:h=!0,onEdit:n,onDelete:x,onArchive:A,onApprove:w})=>{const{user:b}=Ce(c=>c.auth),[m,u]=a.useState(!1),[j,E]=a.useState(!1),[C,s]=a.useState(!1),[k,{isLoading:l}]=Pe(),[p,{isLoading:P}]=Te(),$={reactions:{...{LIKE:0,LOVE:0,CELEBRATE:0,SUPPORT:0,FUNNY:0,WOW:0,ANGRY:0,SAD:0},...t.reactionCounts},userReactions:t.userReactions||[],totalReactions:t.totalReactions||0},D=b?.id===t.createdBy||b?.role==="SUPER_ADMIN",z=b?.id===t.createdBy||b?.role==="SUPER_ADMIN",V=b?.role==="SUPER_ADMIN"&&!t.isPublished,B=D,i=async c=>{if(!b){ie.error("Please login to react to posts");return}try{await p({postId:t.id,reactionType:c}).unwrap()}catch(f){console.error("Failed to toggle reaction:",f);const Y=f?.data?.message||"Failed to update reaction";ie.error(Y)}},v=c=>c.split(" ").map(f=>f.charAt(0)).join("").slice(0,2).toUpperCase(),G=c=>{const f=document.createElement("div");return f.innerHTML=c,f.textContent||f.innerText||""},T=c=>{const f=document.createElement("div");return f.innerHTML=c,f.querySelectorAll("a").forEach(o=>{if(o.hasAttribute("data-user-id")||o.classList.contains("mention")||o.textContent?.startsWith("@")){const y=document.createElement("span");y.className="mention bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 px-1 rounded font-medium",y.textContent=o.textContent||"",o.hasAttribute("data-user-id")&&y.setAttribute("data-user-id",o.getAttribute("data-user-id")||""),o.parentNode?.replaceChild(y,o)}else{const y=document.createTextNode(o.textContent||"");o.parentNode?.replaceChild(y,o)}}),f.querySelectorAll("*").forEach(o=>{o.removeAttribute("href"),o.removeAttribute("data-discover");const g=o.getAttribute("style");if(g){const y=["color: rgb(96, 165, 250)","--tw-text-opacity: 1"];let L=g;y.forEach(R=>{L=L.replace(new RegExp(R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"),"")}),L=L.replace(/;+/g,";").replace(/;\s*$/,"").trim(),L?o.setAttribute("style",L):o.removeAttribute("style")}}),f.innerHTML},ae=(c,f)=>{const Y=T(c),r=G(Y);if(r.length<=f)return Y;const o=r.split(" ");let g="";for(const y of o){if((g+" "+y).length>f)break;g+=(g?" ":"")+y}return g},Z=async()=>{if(navigator.share)try{await navigator.share({title:t.title,text:G(T(t.body)).substring(0,100)+"...",url:`${window.location.origin}/posts/${t.id}`})}catch(c){console.error("Error sharing:",c)}else try{await navigator.clipboard.writeText(`${window.location.origin}/posts/${t.id}`),ie.success("Link copied to clipboard!")}catch{ie.error("Failed to copy link")}},ne=()=>t.isArchived?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-300",children:[e.jsx(ue,{className:"h-3 w-3 mr-1"}),"Archived"]}):t.isPublished?null:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-300",children:[e.jsx(We,{className:"h-3 w-3 mr-1"}),"Pending Review"]});return e.jsxs(M.article,{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-200",whileHover:{y:-2},layout:!0,children:[e.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[j?e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm",children:v(t.author.fullName)}):e.jsx("img",{src:_(`/api/users/profile-picture/${t.author.id}`),alt:t.author.fullName,className:"h-10 w-10 rounded-full object-cover",onError:()=>E(!0)}),e.jsxs("div",{children:[e.jsx(me,{to:`/alumni/${t.author.id}`,className:"font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400",children:t.author.fullName}),t.author.batch&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Batch ",t.author.batch]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("time",{children:oe(new Date(t.createdAt),{addSuffix:!0})}),t.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 px-2 py-1 rounded-full",children:t.category})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[ne(),h&&(D||z||V)&&e.jsxs(U,{as:"div",className:"relative",children:[e.jsx(U.Button,{className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(De,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})}),e.jsx(K,{as:a.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx(U.Items,{className:"absolute right-0 mt-2 w-48 origin-top-right bg-white dark:bg-gray-800 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 dark:ring-gray-600 focus:outline-none z-10",children:e.jsxs("div",{className:"py-1",children:[V&&e.jsxs(e.Fragment,{children:[e.jsx(U.Item,{children:({active:c})=>e.jsxs("button",{onClick:()=>w?.(t.id,!0),className:`${c?"bg-gray-100 dark:bg-gray-700":""} group flex items-center px-4 py-2 text-sm text-green-700 dark:text-green-400 w-full text-left`,children:[e.jsx(Be,{className:"h-4 w-4 mr-3"}),"Approve Post"]})}),e.jsx(U.Item,{children:({active:c})=>e.jsxs("button",{onClick:()=>w?.(t.id,!1),className:`${c?"bg-gray-100 dark:bg-gray-700":""} group flex items-center px-4 py-2 text-sm text-red-700 dark:text-red-400 w-full text-left`,children:[e.jsx(He,{className:"h-4 w-4 mr-3"}),"Reject Post"]})})]}),D&&e.jsx(U.Item,{children:({active:c})=>e.jsxs("button",{onClick:()=>n?.(t),className:`${c?"bg-gray-100 dark:bg-gray-700":""} group flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 w-full text-left`,children:[e.jsx(ye,{className:"h-4 w-4 mr-3"}),"Edit Post"]})}),B&&e.jsx(U.Item,{children:({active:c})=>e.jsxs("button",{onClick:()=>A?.(t.id),className:`${c?"bg-gray-100 dark:bg-gray-700":""} group flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 w-full text-left`,children:[e.jsx(ue,{className:"h-4 w-4 mr-3"}),"Archive Post"]})}),z&&e.jsx(U.Item,{children:({active:c})=>e.jsxs("button",{onClick:()=>x?.(t.id),className:`${c?"bg-gray-100 dark:bg-gray-700":""} group flex items-center px-4 py-2 text-sm text-red-700 dark:text-red-400 w-full text-left`,children:[e.jsx(pe,{className:"h-4 w-4 mr-3"}),"Delete Post"]})})]})})})]})]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:t.title}),e.jsxs("div",{className:"text-gray-700 dark:text-gray-300 mb-3 leading-relaxed",children:[e.jsx("div",{className:"prose dark:prose-invert max-w-none prose-sm",dangerouslySetInnerHTML:{__html:C?T(t.body):ae(t.body,200)}}),G(t.body).length>200&&e.jsx("button",{onClick:()=>s(!C),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm font-medium mt-1 inline-block",children:C?"Read less":"Read more"})]})]}),(t.heroImage||t.images&&t.images.length>0)&&e.jsx(Me,{postId:t.id,heroImage:t.heroImage,images:t.images||[],title:t.title}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.map(c=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 cursor-pointer",children:["#",c]},c))})]}),e.jsx("div",{className:"px-4 py-3",children:e.jsx(Ze,{postId:t.id,reactions:$.reactions,userReactions:$.userReactions,totalReactions:$.totalReactions,recentReactions:t.recentReactions,onReact:i,onCommentClick:()=>u(!m),onShareClick:Z,commentCount:t._count?.comments||0,disabled:P||!b})}),m&&e.jsx(Qe,{postId:t.id,allowComments:t.allowComments})]})};export{xt as P};
//# sourceMappingURL=PostCard-xetW218i.js.map
