import{j as e,A as R,m as n}from"./ui-BlmhFX_F.js";import{r as s,b as T}from"./router-DFnE1L-t.js";import L from"./Posts-BddUmKKV.js";import{P as D}from"./Polls-BjYNAagq.js";import{b as P,c as M,d as E,e as H}from"./announcementApi-CKX1qLbd.js";import{F as u}from"./MegaphoneIcon-Bqqxldpp.js";import{F as z}from"./CheckCircleIcon-DCBCeWMH.js";import{F as B}from"./ExclamationCircleIcon-CMY_Vi7v.js";import{F as I}from"./ClockIcon-DZUckIFe.js";import{F as O}from"./EyeSlashIcon-DScm6DLE.js";import{F as W}from"./EyeIcon-Bt_hkgUK.js";import{F as U}from"./TrashIcon-mpSEd7uz.js";import{F as V}from"./ChatBubbleLeftRightIcon-sTRCG82n.js";import{F as G}from"./ChartBarIcon-CLsU3hA-.js";import"./redux-VN59sPcb.js";import"./vendor-gH-7aFTg.js";import"./PostImageDisplay-Fz7qO6qV.js";import"./index-DHymdRDT.js";import"./PhotoIcon-n1eOvNeY.js";import"./XMarkIcon-D1c1wIzV.js";import"./ChevronLeftIcon-D6giPwF6.js";import"./ChevronRightIcon-CdFql2QB.js";import"./CreatePostModal-CClIB8FO.js";import"./index.esm-B0I9BSpA.js";import"./index.esm-kU_tS0bV.js";import"./LoadingSpinner-BR8iBbEe.js";import"./userApi-D_lJxXui.js";import"./PlusIcon-B6tiF6Nj.js";import"./PostCard-xetW218i.js";import"./utils-CXyNmL__.js";import"./PencilIcon-DAEDOf0J.js";import"./EllipsisVerticalIcon-CJAxHUn0.js";import"./XCircleIcon-CvFATmWB.js";import"./MagnifyingGlassIcon-C2UCCqkW.js";import"./UserGroupIcon-CnvKPj6V.js";import"./ChevronUpIcon-De_BqJq8.js";import"./ChevronDownIcon-qIBcN2qV.js";function Q({title:r,titleId:a,...d},c){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":a},d),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const X=s.forwardRef(Q),w=100,Z=()=>{const[r,a]=s.useState(""),[d,c]=s.useState(!1),[i,o]=s.useState("all"),[h,{isLoading:l}]=P(),[v,{isLoading:j}]=M(),[f,{isLoading:k}]=E(),{data:N,isLoading:A}=H({page:1,limit:50,...i!=="all"&&{status:i}}),b=r.trim().split(/\s+/).filter(Boolean).length,x=b>w,m=r.trim().length>0&&!x&&!l,F=async()=>{if(m)try{await h({message:r.trim()}).unwrap(),a(""),c(!0),setTimeout(()=>c(!1),3e3)}catch(t){console.error("Failed to create announcement:",t)}},S=async t=>{try{await v(t).unwrap()}catch(g){console.error("Failed to toggle announcement:",g)}},$=async t=>{if(confirm("Are you sure you want to delete this announcement?"))try{await f(t).unwrap()}catch(g){console.error("Failed to delete announcement:",g)}},C=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),p=N?.announcements||[],y=p.filter(t=>t.isActive).length;return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(u,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Announcements"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Send and manage organization announcements"})]})]}),y>0&&e.jsxs("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-sm font-medium rounded-full",children:[y," active"]})]}),e.jsx(R,{children:d&&e.jsxs(n.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-2 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx(z,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-green-800 dark:text-green-300",children:"Announcement created and sent to all members!"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"New Announcement"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("textarea",{value:r,onChange:t=>a(t.target.value),placeholder:"Type your announcement here...",rows:3,className:`w-full px-4 py-3 border rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${x?"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/10":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"} text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500`})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm ${x?"text-red-600 dark:text-red-400 font-medium":"text-gray-500 dark:text-gray-400"}`,children:[b,"/",w," words"]}),x&&e.jsx(B,{className:"h-4 w-4 text-red-500"})]}),e.jsx(n.button,{onClick:F,disabled:!m,className:`flex items-center space-x-2 px-5 py-2.5 rounded-lg font-medium transition-all ${m?"bg-blue-600 hover:bg-blue-700 text-white shadow-sm hover:shadow":"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed"}`,whileHover:m?{scale:1.02}:{},whileTap:m?{scale:.98}:{},children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:"Send to All"})]})})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"All Announcements"}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:["all","active","inactive"].map(t=>e.jsx("button",{onClick:()=>o(t),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${i===t?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:A?e.jsx("div",{className:"p-6 text-center",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})}):p.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(u,{className:"h-10 w-10 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:i==="all"?"No announcements yet":`No ${i} announcements`})]}):p.map(t=>e.jsx(n.div,{initial:{opacity:0},animate:{opacity:1},className:`p-4 sm:px-6 transition-colors ${t.isActive?"":"bg-gray-50 dark:bg-gray-800/50"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-2",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${t.isActive?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:t.isActive?"Active":"Inactive"})}),e.jsx("p",{className:`text-sm mb-2 ${t.isActive?"text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400"}`,children:t.message}),e.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(I,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:C(t.createdAt)})]}),e.jsxs("span",{children:["by ",t.createdBy.fullName]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n.button,{onClick:()=>S(t.id),disabled:j,className:`p-2 rounded-lg transition-colors ${t.isActive?"text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20":"text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20"}`,whileHover:{scale:1.05},whileTap:{scale:.95},title:t.isActive?"Deactivate":"Activate",children:t.isActive?e.jsx(O,{className:"h-5 w-5"}):e.jsx(W,{className:"h-5 w-5"})}),e.jsx(n.button,{onClick:()=>$(t.id),disabled:k,className:"p-2 rounded-lg text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Delete",children:e.jsx(U,{className:"h-5 w-5"})})]})]})},t.id))})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Active announcements"})," are visible on the dashboard for all members."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Inactive announcements"})," are hidden but can be reactivated anytime."]})]})})]})})},Le=()=>{const r=T(),[a,d]=s.useState("posts");s.useEffect(()=>{r.state?.tab==="announcements"&&(d("announcements"),window.history.replaceState({},document.title))},[r.state]);const c=[{id:"posts",name:"Posts",icon:V,description:"View and interact with community posts"},{id:"polls",name:"Polls",icon:G,description:"Create and manage community polls"},{id:"announcements",name:"Announcements",icon:u,description:"Create and manage important announcements"}],i=()=>{switch(a){case"posts":return e.jsx(L,{});case"polls":return e.jsx(D,{});case"announcements":return e.jsx(Z,{});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex space-x-8 overflow-x-auto",children:c.map(o=>{const h=o.icon,l=a===o.id;return e.jsxs(n.button,{onClick:()=>d(o.id),className:`relative flex items-center space-x-2 py-4 px-1 font-medium text-sm whitespace-nowrap transition-colors ${l?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,whileHover:{y:-1},whileTap:{y:0},children:[e.jsx(h,{className:"h-5 w-5"}),e.jsx("span",{children:o.name}),l&&e.jsx(n.div,{layoutId:"adminActiveTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500"})]},o.id)})})})}),e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:i()},a)]})};export{Le as default};
//# sourceMappingURL=Social-C4kTofda.js.map
