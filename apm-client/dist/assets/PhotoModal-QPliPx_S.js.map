{"version":3,"file":"PhotoModal-QPliPx_S.js","sources":["../../src/components/common/UI/AlbumCard.tsx","../../src/components/common/UI/PhotoCard.tsx","../../src/components/common/UI/PhotoModal.tsx"],"sourcesContent":["import { FC, useState, useEffect, useRef } from 'react';\nimport { PhotoIcon, CalendarIcon, UserIcon, UserCircleIcon } from '@heroicons/react/24/outline';\nimport type { Album } from '../../../types/gallery';\nimport { getApiUrl } from '@/utils/helpers';\n\ninterface AlbumCardProps {\n  album: Album;\n  onClick?: () => void;\n  onAction?: (action: 'edit' | 'delete' | 'archive' | 'view') => void;\n  showActions?: boolean;\n}\n\nconst AlbumCard: FC<AlbumCardProps> = ({ album, onClick, onAction, showActions = false }) => {\n  const [imageError, setImageError] = useState(false);\n  const [coverImageLoaded, setCoverImageLoaded] = useState(false);\n  const [profileImageLoaded, setProfileImageLoaded] = useState(false);\n  const [isVisible, setIsVisible] = useState(false);\n  const cardRef = useRef<HTMLDivElement>(null);\n\n  // Intersection Observer for lazy loading\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            setIsVisible(true);\n            observer.disconnect();\n          }\n        });\n      },\n      {\n        rootMargin: '100px', // Start loading 100px before entering viewport\n        threshold: 0.01,\n      }\n    );\n\n    if (cardRef.current) {\n      observer.observe(cardRef.current);\n    }\n\n    return () => {\n      observer.disconnect();\n    };\n  }, []);\n  const photoCount = album._count?.photos || 0;\n  const totalSize = album.totalSize || 0;\n  const formattedSize = totalSize > 0 ? `${(totalSize / (1024 * 1024)).toFixed(2)} MB` : '0 MB';\n\n  // Generate proxy URL for album cover with cache-busting timestamp\n  const coverImageUrl = album.coverImage\n    ? getApiUrl(`/api/albums/cover/${album.id}?t=${new Date(album.updatedAt).getTime()}`)\n    : null;\n\n  // Generate proxy URL for creator profile picture\n  const creatorProfilePictureUrl = album.creator?.id\n    ? getApiUrl(`/api/users/profile-picture/${album.creator.id}`)\n    : null;\n\n  return (\n    <div\n      ref={cardRef}\n      className=\"group relative bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden cursor-pointer border border-gray-200 dark:border-gray-700\"\n      onClick={onClick}\n    >\n      {/* Cover Image */}\n      <div className=\"relative h-48 sm:h-56 bg-gradient-to-br from-guild-500/20 to-guild-600/20 dark:from-guild-400/10 dark:to-guild-500/10 overflow-hidden\">\n        {!isVisible ? (\n          // Skeleton loader before entering viewport\n          <div className=\"w-full h-full bg-gray-200 dark:bg-gray-700 animate-pulse relative overflow-hidden\">\n            <div className=\"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-shimmer\"></div>\n          </div>\n        ) : coverImageUrl ? (\n          <>\n            {/* Loading skeleton while image loads */}\n            {!coverImageLoaded && (\n              <div className=\"absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse\">\n                <div className=\"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-shimmer\"></div>\n              </div>\n            )}\n            <img\n              src={coverImageUrl}\n              alt={album.name}\n              className={`w-full h-full object-cover group-hover:scale-110 transition-all duration-500 ${\n                coverImageLoaded ? 'opacity-100' : 'opacity-0'\n              }`}\n              onLoad={() => setCoverImageLoaded(true)}\n              onError={() => setCoverImageLoaded(true)} // Still mark as loaded to show fallback\n            />\n          </>\n        ) : (\n          <div className=\"w-full h-full flex items-center justify-center\">\n            <PhotoIcon className=\"w-20 h-20 text-gray-300 dark:text-gray-600\" />\n          </div>\n        )}\n\n        {/* Archive Badge */}\n        {album.isArchived && (\n          <div className=\"absolute top-3 right-3 bg-yellow-500 text-white px-3 py-1 rounded-full text-xs font-medium\">\n            Archived\n          </div>\n        )}\n\n        {/* Photo Count Badge */}\n        <div className=\"absolute bottom-3 right-3 bg-black/60 backdrop-blur-sm text-white px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1\">\n          <PhotoIcon className=\"w-4 h-4\" />\n          {photoCount}\n        </div>\n      </div>\n\n      {/* Album Info */}\n      <div className=\"p-4 sm:p-5\">\n        <h3 className=\"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-2 truncate group-hover:text-guild-600 dark:group-hover:text-guild-400 transition-colors\">\n          {album.name}\n        </h3>\n\n        {album.description && (\n          <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2\">\n            {album.description}\n          </p>\n        )}\n\n        <div className=\"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400\">\n          <div className=\"flex items-center gap-2\">\n            {!imageError && creatorProfilePictureUrl && isVisible ? (\n              <>\n                {/* Skeleton for profile picture */}\n                {!profileImageLoaded && (\n                  <div className=\"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse\"></div>\n                )}\n                <img\n                  src={creatorProfilePictureUrl}\n                  alt={album.creator.fullName}\n                  className={`w-6 h-6 rounded-full object-cover border border-gray-200 dark:border-gray-600 ${\n                    profileImageLoaded ? 'opacity-100' : 'opacity-0'\n                  }`}\n                  onLoad={() => setProfileImageLoaded(true)}\n                  onError={() => {\n                    setImageError(true);\n                    setProfileImageLoaded(true);\n                  }}\n                  style={{ display: profileImageLoaded ? 'block' : 'none' }}\n                />\n              </>\n            ) : (\n              <UserCircleIcon className=\"w-6 h-6 text-gray-400\" />\n            )}\n            <span className=\"truncate max-w-[120px]\">{album.creator.fullName}</span>\n          </div>\n\n          <div className=\"flex items-center gap-1\">\n            <CalendarIcon className=\"w-4 h-4\" />\n            <span>{new Date(album.createdAt).toLocaleDateString()}</span>\n          </div>\n        </div>\n\n        {/* Size Info */}\n        {totalSize > 0 && (\n          <div className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">\n            Total size: {formattedSize}\n          </div>\n        )}\n\n        {/* Action Buttons (Admin Only) */}\n        {showActions && onAction && (\n          <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-2\">\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                onAction('edit');\n              }}\n              className=\"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors\"\n            >\n              Edit\n            </button>\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                onAction('archive');\n              }}\n              className=\"flex-1 px-3 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg text-sm font-medium transition-colors\"\n            >\n              {album.isArchived ? 'Unarchive' : 'Archive'}\n            </button>\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                onAction('delete');\n              }}\n              className=\"flex-1 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors\"\n            >\n              Delete\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AlbumCard;\n","import { FC, useState, useEffect, useRef } from 'react';\nimport { UserIcon, CalendarIcon, ChatBubbleLeftIcon, CheckCircleIcon } from '@heroicons/react/24/outline';\nimport type { Photo } from '../../../types/gallery';\nimport { getApiUrl } from '@/utils/helpers';\n\ninterface PhotoCardProps {\n  photo: Photo;\n  onClick?: () => void;\n  onAction?: (action: 'edit' | 'delete') => void;\n  showActions?: boolean;\n  selectionMode?: boolean;\n  isSelected?: boolean;\n  onToggleSelect?: () => void;\n}\n\nconst PhotoCard: FC<PhotoCardProps> = ({\n  photo,\n  onClick,\n  onAction,\n  showActions = false,\n  selectionMode = false,\n  isSelected = false,\n  onToggleSelect,\n}) => {\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const [imageError, setImageError] = useState(false);\n  const [isVisible, setIsVisible] = useState(false);\n  const cardRef = useRef<HTMLDivElement>(null);\n\n  // Intersection Observer for lazy loading\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            setIsVisible(true);\n            observer.disconnect();\n          }\n        });\n      },\n      {\n        rootMargin: '100px', // Start loading 100px before entering viewport\n        threshold: 0.01,\n      }\n    );\n\n    if (cardRef.current) {\n      observer.observe(cardRef.current);\n    }\n\n    return () => {\n      observer.disconnect();\n    };\n  }, []);\n\n  // Generate proxy URL for photo (same pattern as profile pictures and album covers)\n  const getPhotoProxyUrl = (url: string): string => {\n    // If URL is a full R2 URL, extract filename and use proxy\n    if (url.startsWith('http://') || url.startsWith('https://')) {\n      const filename = url.split('/').pop();\n      return getApiUrl(`/api/albums/photo/${filename}`);\n    }\n    // If it's already a filename, use proxy\n    return getApiUrl(`/api/albums/photo/${url}`);\n  };\n\n  const photoUrl = getPhotoProxyUrl(photo.url);\n\n  return (\n    <div\n      ref={cardRef}\n      className=\"group relative bg-gray-100 dark:bg-gray-700 rounded-lg shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden cursor-pointer border border-gray-200 dark:border-gray-700\"\n      onClick={selectionMode ? onToggleSelect : onClick}\n    >\n      {/* Photo Image - Full size without info section */}\n      <div className=\"relative aspect-square bg-gray-100 dark:bg-gray-700 overflow-hidden\">\n        {!isVisible ? (\n          // Skeleton loader before image enters viewport\n          <div className=\"w-full h-full bg-gray-200 dark:bg-gray-700 animate-pulse relative overflow-hidden\">\n            <div className=\"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-shimmer\"></div>\n          </div>\n        ) : (\n          <>\n            {/* Loading spinner while image is loading */}\n            {!imageLoaded && !imageError && (\n              <div className=\"absolute inset-0 flex items-center justify-center bg-gray-200 dark:bg-gray-700\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-guild-600\"></div>\n              </div>\n            )}\n\n            {imageError ? (\n              <div className=\"absolute inset-0 flex items-center justify-center text-gray-400\">\n                <div className=\"text-center\">\n                  <PhotoIcon className=\"w-12 h-12 mx-auto mb-2\" />\n                  <p className=\"text-xs\">Failed to load</p>\n                </div>\n              </div>\n            ) : (\n              <img\n                src={photoUrl}\n                alt={photo.caption || 'Photo'}\n                className={`w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ${\n                  imageLoaded ? 'opacity-100' : 'opacity-0'\n                }`}\n                onLoad={() => setImageLoaded(true)}\n                onError={() => setImageError(true)}\n              />\n            )}\n          </>\n        )}\n\n        {/* Selection Checkbox */}\n        {selectionMode && (\n          <div\n            className=\"absolute top-2 left-2 z-10\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onToggleSelect?.();\n            }}\n          >\n            <div\n              className={`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all ${\n                isSelected\n                  ? 'bg-guild-600 border-guild-600'\n                  : 'bg-white/80 backdrop-blur-sm border-gray-300'\n              }`}\n            >\n              {isSelected && <CheckCircleIcon className=\"w-5 h-5 text-white\" />}\n            </div>\n          </div>\n        )}\n\n        {/* Caption Overlay - Only show on hover if caption exists */}\n        {photo.caption && !selectionMode && (\n          <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity\">\n            <p className=\"text-white text-sm line-clamp-2\">{photo.caption}</p>\n          </div>\n        )}\n\n        {/* Action Buttons (Admin Only) - Positioned in corners on hover */}\n        {showActions && onAction && !selectionMode && (\n          <>\n            {/* Delete Button - Top Right */}\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                onAction('delete');\n              }}\n              className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg text-xs font-medium shadow-lg z-10\"\n            >\n              Delete\n            </button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Photo Icon placeholder\nconst PhotoIcon: FC<{ className?: string }> = ({ className }) => (\n  <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n  </svg>\n);\n\nexport default PhotoCard;\n","import { FC, Fragment, useEffect, useState } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport {\n  XMarkIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  ArrowDownTrayIcon,\n} from '@heroicons/react/24/outline';\nimport type { Photo } from '../../../types/gallery';\nimport { getApiUrl } from '@/utils/helpers';\n\ninterface PhotoModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  photo: Photo | null;\n  onPrevious?: () => void;\n  onNext?: () => void;\n  hasPrevious?: boolean;\n  hasNext?: boolean;\n}\n\nconst PhotoModal: FC<PhotoModalProps> = ({\n  isOpen,\n  onClose,\n  photo,\n  onPrevious,\n  onNext,\n  hasPrevious = false,\n  hasNext = false,\n}) => {\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n\n  // Reset image loaded state when photo changes\n  useEffect(() => {\n    if (photo) {\n      setImageLoaded(false);\n      setIsTransitioning(true);\n      const timer = setTimeout(() => setIsTransitioning(false), 300);\n      return () => clearTimeout(timer);\n    }\n  }, [photo?.id]);\n\n  // Generate proxy URL for photo\n  const getPhotoProxyUrl = (url: string): string => {\n    if (url.startsWith('http://') || url.startsWith('https://')) {\n      const filename = url.split('/').pop();\n      return getApiUrl(`/api/albums/photo/${filename}`);\n    }\n    return getApiUrl(`/api/albums/photo/${url}`);\n  };\n\n  // Handle keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!isOpen) return;\n\n      switch (e.key) {\n        case 'Escape':\n          onClose();\n          break;\n        case 'ArrowLeft':\n          if (hasPrevious && onPrevious) onPrevious();\n          break;\n        case 'ArrowRight':\n          if (hasNext && onNext) onNext();\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, hasPrevious, hasNext, onPrevious, onNext, onClose]);\n\n  if (!photo) return null;\n\n  const photoUrl = getPhotoProxyUrl(photo.url);\n\n  return (\n    <Transition appear show={isOpen} as={Fragment}>\n      <Dialog as=\"div\" className=\"relative z-50\" onClose={onClose}>\n        {/* Backdrop */}\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black/90 backdrop-blur-sm\" />\n        </Transition.Child>\n\n        <div className=\"fixed inset-0 overflow-hidden\">\n          <div className=\"flex min-h-full items-center justify-center p-4\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <Dialog.Panel className=\"relative w-full max-w-7xl transform transition-all\">\n                {/* Close Button */}\n                <button\n                  onClick={onClose}\n                  className=\"absolute -top-12 right-0 sm:top-0 sm:-right-12 p-2 text-white hover:text-gray-300 transition-colors z-10\"\n                  aria-label=\"Close\"\n                >\n                  <XMarkIcon className=\"w-8 h-8\" />\n                </button>\n\n                {/* Navigation Buttons */}\n                {hasPrevious && onPrevious && (\n                  <button\n                    onClick={onPrevious}\n                    disabled={isTransitioning}\n                    className=\"absolute left-2 sm:-left-16 top-1/2 -translate-y-1/2 p-3 text-white hover:text-gray-300 transition-all bg-black/60 hover:bg-black/80 sm:bg-black/40 sm:hover:bg-black/60 rounded-full backdrop-blur-sm disabled:opacity-50 disabled:cursor-not-allowed group\"\n                    aria-label=\"Previous photo\"\n                  >\n                    <ChevronLeftIcon className=\"w-6 h-6 sm:w-8 sm:h-8 group-hover:scale-110 transition-transform\" />\n                  </button>\n                )}\n\n                {hasNext && onNext && (\n                  <button\n                    onClick={onNext}\n                    disabled={isTransitioning}\n                    className=\"absolute right-2 sm:-right-16 top-1/2 -translate-y-1/2 p-3 text-white hover:text-gray-300 transition-all bg-black/60 hover:bg-black/80 sm:bg-black/40 sm:hover:bg-black/60 rounded-full backdrop-blur-sm disabled:opacity-50 disabled:cursor-not-allowed group\"\n                    aria-label=\"Next photo\"\n                  >\n                    <ChevronRightIcon className=\"w-6 h-6 sm:w-8 sm:h-8 group-hover:scale-110 transition-transform\" />\n                  </button>\n                )}\n\n                {/* Photo Container */}\n                <div className=\"flex flex-col gap-4\">\n                  {/* Main Photo */}\n                  <div className=\"relative bg-black rounded-lg overflow-hidden\">\n                    {/* Loading Spinner */}\n                    {!imageLoaded && (\n                      <div className=\"absolute inset-0 flex items-center justify-center\">\n                        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-white\"></div>\n                      </div>\n                    )}\n\n                    <img\n                      src={photoUrl}\n                      alt={photo.caption || 'Photo'}\n                      className={`w-full max-h-[70vh] sm:max-h-[80vh] object-contain transition-opacity duration-300 ${\n                        imageLoaded ? 'opacity-100' : 'opacity-0'\n                      }`}\n                      onLoad={() => setImageLoaded(true)}\n                    />\n\n                    {/* Image Counter */}\n                    <div className=\"absolute top-4 left-4 bg-black/70 backdrop-blur-sm text-white px-3 py-1.5 rounded-full text-sm font-medium\">\n                      {photo.album?.name || 'Photo'}\n                    </div>\n                  </div>\n\n                  {/* Photo Details */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6\">\n                    <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n                      {/* Left: Caption */}\n                      <div className=\"flex-1\">\n                        {photo.caption && (\n                          <p className=\"text-lg text-gray-900 dark:text-white\">{photo.caption}</p>\n                        )}\n                      </div>\n\n                      {/* Right: File Size & Download */}\n                      <div className=\"flex items-center gap-4\">\n                        {/* File Size */}\n                        {photo.metadata?.sizeFormatted && (\n                          <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                            {photo.metadata.sizeFormatted}\n                          </div>\n                        )}\n\n                        {/* Download Button */}\n                        <a\n                          href={photoUrl}\n                          download={photo.metadata?.originalName || 'photo.jpg'}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"inline-flex items-center gap-2 px-4 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors text-sm font-medium whitespace-nowrap\"\n                        >\n                          <ArrowDownTrayIcon className=\"w-4 h-4\" />\n                          Download\n                        </a>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Navigation Hint */}\n                {(hasPrevious || hasNext) && (\n                  <div className=\"text-center mt-4 text-white/60 text-sm flex items-center justify-center gap-4\">\n                    <span className=\"hidden sm:inline\">Use arrow keys to navigate</span>\n                    <span className=\"hidden sm:inline\">•</span>\n                    <span>ESC to close</span>\n                    {(hasPrevious || hasNext) && (\n                      <>\n                        <span>•</span>\n                        <span className=\"flex items-center gap-2\">\n                          {hasPrevious && <span>← Prev</span>}\n                          {hasPrevious && hasNext && <span>|</span>}\n                          {hasNext && <span>Next →</span>}\n                        </span>\n                      </>\n                    )}\n                  </div>\n                )}\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </div>\n      </Dialog>\n    </Transition>\n  );\n};\n\nexport default PhotoModal;\n"],"names":["AlbumCard","album","onClick","onAction","showActions","imageError","setImageError","useState","coverImageLoaded","setCoverImageLoaded","profileImageLoaded","setProfileImageLoaded","isVisible","setIsVisible","cardRef","useRef","useEffect","observer","entries","entry","photoCount","totalSize","formattedSize","coverImageUrl","getApiUrl","creatorProfilePictureUrl","jsxs","Fragment","jsx","PhotoIcon","UserCircleIcon","CalendarIcon","e","PhotoCard","photo","selectionMode","isSelected","onToggleSelect","imageLoaded","setImageLoaded","photoUrl","url","filename","CheckCircleIcon","className","PhotoModal","isOpen","onClose","onPrevious","onNext","hasPrevious","hasNext","isTransitioning","setIsTransitioning","timer","getPhotoProxyUrl","handleKeyDown","Transition","Dialog","XMarkIcon","ChevronLeftIcon","ChevronRightIcon","ArrowDownTrayIcon"],"mappings":"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"}