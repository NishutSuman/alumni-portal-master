{"version":3,"file":"adminApi-yGkl_75B.js","sources":["../../src/store/api/adminApi.ts"],"sourcesContent":["// src/store/api/adminApi.ts\nimport { apiSlice } from './apiSlice';\n\n// Types for admin API responses\nexport interface DashboardOverview {\n  userStats: {\n    totalUsers: number;\n    verifiedUsers: number;\n    pendingVerifications: number;\n    rejectedUsers: number;\n    activeUsers: number;\n  };\n  adminStats: {\n    totalAdmins: number;\n    batchAdmins: number;\n    superAdmins: number;\n  };\n  recentActivity: {\n    registrations: number;\n    verifications: number;\n    events: number;\n  };\n  systemHealth: {\n    status: 'healthy' | 'warning' | 'error';\n    uptime: number;\n    lastBackup?: string;\n  };\n}\n\nexport interface VerificationStats {\n  pending: {\n    total: number;\n    byBatch: Array<{\n      batch: number;\n      count: number;\n    }>;\n  };\n  processed: {\n    approved: number;\n    rejected: number;\n    total: number;\n  };\n  recentActivity: Array<{\n    id: string;\n    action: 'approved' | 'rejected' | 'pending';\n    userName: string;\n    userEmail: string;\n    batch: number;\n    timestamp: string;\n    adminName?: string;\n  }>;\n}\n\nexport interface PendingUser {\n  id: string;\n  fullName: string;\n  email: string;\n  batch: number;\n  registeredAt: string;\n  lastLoginAt?: string;\n  profileCompleteness: number;\n}\n\nexport interface OrganizationDetails {\n  id: string;\n  name: string;\n  shortName?: string;\n  foundationYear?: number;\n  logoUrl?: string;\n  websiteUrl?: string;\n  officialEmail: string;\n  officialContactNumber?: string;\n  officeAddress?: string;\n  description?: string;\n  socialLinks: {\n    facebook?: string;\n    instagram?: string;\n    twitter?: string;\n    linkedin?: string;\n    youtube?: string;\n  };\n  isConfigured: boolean;\n  serialCounterCurrent: number;\n}\n\n// Inject admin endpoints into the main API slice\nexport const adminApi = apiSlice.injectEndpoints({\n  endpoints: (builder) => ({\n    // Dashboard Overview\n    getDashboardOverview: builder.query<DashboardOverview, void>({\n      query: () => '/admin/dashboard/overview',\n      providesTags: ['Admin', 'Dashboard'],\n    }),\n\n    // User Management\n    getAllUsers: builder.query<{\n      users: Array<PendingUser & {\n        role: 'USER' | 'BATCH_ADMIN' | 'SUPER_ADMIN';\n        userStatus: 'email_pending' | 'email_verified' | 'alumni_verified' | 'rejected';\n        isEmailVerified: boolean;\n        serialId?: string;\n        profileImage?: string;\n      }>;\n      pagination: {\n        page: number;\n        limit: number;\n        total: number;\n        totalPages: number;\n      };\n    }, {\n      page?: number;\n      limit?: number;\n      search?: string;\n      batch?: number;\n      status?: 'email_pending' | 'email_verified' | 'alumni_verified' | 'rejected';\n      role?: 'USER' | 'BATCH_ADMIN' | 'SUPER_ADMIN';\n    }>({\n      query: (params = {}) => ({\n        url: '/admin/users',\n        params,\n      }),\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Admin', 'Users'],\n    }),\n\n    updateUserRole: builder.mutation<\n      { success: boolean; message: string },\n      { userId: string; role: 'USER' | 'BATCH_ADMIN' | 'SUPER_ADMIN' }\n    >({\n      query: ({ userId, role }) => ({\n        url: `/admin/users/${userId}/role`,\n        method: 'PUT',\n        body: { role },\n      }),\n      invalidatesTags: ['Admin', 'Users', 'Dashboard'],\n    }),\n\n    // Verification Management\n    getVerificationStats: builder.query<VerificationStats, { timeframe?: number }>({\n      query: (params = {}) => ({\n        url: '/admin/verification/stats',\n        params,\n      }),\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Admin', 'Verification'],\n    }),\n\n    getPendingVerifications: builder.query<{\n      users: PendingUser[];\n      pagination: {\n        page: number;\n        limit: number;\n        total: number;\n        totalPages: number;\n      };\n    }, {\n      page?: number;\n      limit?: number;\n      batch?: number;\n      search?: string;\n    }>({\n      query: (params = {}) => ({\n        url: '/admin/verification/pending',\n        params,\n      }),\n      providesTags: ['Admin', 'Verification', 'Users'],\n    }),\n\n    getVerificationDetails: builder.query<{\n      user: PendingUser & {\n        profileImage?: string;\n        bio?: string;\n        currentLocation?: string;\n        whatsappNumber?: string;\n        employmentStatus?: string;\n      };\n      verificationHistory: Array<{\n        action: string;\n        timestamp: string;\n        adminName: string;\n        notes?: string;\n      }>;\n    }, string>({\n      query: (userId) => `/admin/verification/users/${userId}`,\n      providesTags: ['Admin', 'Verification', 'Users'],\n    }),\n\n    verifyUser: builder.mutation<\n      { success: boolean; message: string },\n      { userId: string; notes?: string }\n    >({\n      query: ({ userId, notes }) => ({\n        url: `/admin/verification/users/${userId}/verify`,\n        method: 'POST',\n        body: { notes },\n      }),\n      invalidatesTags: ['Admin', 'Verification', 'Users', 'Dashboard'],\n    }),\n\n    rejectUser: builder.mutation<\n      { success: boolean; message: string },\n      { userId: string; reason: string }\n    >({\n      query: ({ userId, reason }) => ({\n        url: `/admin/verification/users/${userId}/reject`,\n        method: 'POST',\n        body: { reason },\n      }),\n      invalidatesTags: ['Admin', 'Verification', 'Users', 'Dashboard'],\n    }),\n\n    bulkVerifyUsers: builder.mutation<\n      { success: boolean; verifiedCount: number; message: string },\n      { userIds: string[]; notes?: string }\n    >({\n      query: (data) => ({\n        url: '/admin/verification/bulk-verify',\n        method: 'POST',\n        body: data,\n      }),\n      invalidatesTags: ['Admin', 'Verification', 'Users', 'Dashboard'],\n    }),\n\n    // Organization Management\n    getOrganizationAdmin: builder.query<{\n      organization: {\n        id: string;\n        name: string;\n        shortName: string;\n        foundationYear: number;\n        officialEmail: string;\n        officialContactNumber?: string;\n        officeAddress?: string;\n        logoUrl?: string;\n        websiteUrl?: string;\n        facebookUrl?: string;\n        instagramUrl?: string;\n        twitterUrl?: string;\n        linkedinUrl?: string;\n        youtubeUrl?: string;\n        foundingMembers?: any[];\n        createdAt: string;\n        updatedAt: string;\n        lastUpdatedAdmin?: {\n          fullName: string;\n          role: string;\n        };\n      };\n      statistics: {\n        totalUsers: number;\n        totalVerified: number;\n        totalBatches: number;\n        currentSerialCounter: number;\n        verificationRate: string;\n      };\n    }, void>({\n      query: () => '/admin/organization/admin',\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Admin', 'Organization'],\n    }),\n\n    getOrganizationStats: builder.query<{\n      organization: {\n        name: string;\n        shortName: string;\n        foundationYear: number;\n        age: number;\n        currentSerialCounter: number;\n      };\n      userStatistics: {\n        total: number;\n        verified: number;\n        pending: number;\n        rejected: number;\n        verificationRate: string;\n      };\n      batchStatistics: {\n        totalBatches: number;\n        activeBatches: number;\n        batchRange: {\n          oldest: { year: number; name: string } | null;\n          newest: { year: number; name: string } | null;\n          span: number;\n        };\n      };\n      recentActivity: {\n        newRegistrationsLast30Days: number;\n        averageRegistrationsPerDay: string;\n      };\n    }, void>({\n      query: () => '/admin/organization/admin/stats',\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Admin', 'Organization'],\n    }),\n\n    initializeOrganization: builder.mutation<{\n      message: string;\n      organization: {\n        id: string;\n        name: string;\n        shortName: string;\n        foundationYear: number;\n        officialEmail: string;\n        serialCounter: number;\n      };\n      nextSteps: string[];\n    }, {\n      name?: string;\n      shortName?: string;\n      foundationYear?: number;\n      officialEmail: string;\n      officialContactNumber?: string;\n      officeAddress?: string;\n    }>({\n      query: (data) => ({\n        url: '/admin/organization/admin/initialize',\n        method: 'POST',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Admin', 'Organization'],\n    }),\n\n    upsertOrganization: builder.mutation<{\n      message: string;\n      organization: {\n        id: string;\n        name: string;\n        shortName: string;\n        foundationYear: number;\n        officialEmail: string;\n        updatedAt: string;\n      };\n      action: {\n        type: 'UPDATE' | 'CREATE';\n        performedBy: string;\n        performedAt: string;\n      };\n    }, {\n      name: string;\n      shortName: string;\n      foundationYear: number;\n      officialEmail: string;\n      officialContactNumber?: string;\n      officeAddress?: string;\n      logoUrl?: string;\n      bylawDocumentUrl?: string;\n      registrationCertUrl?: string;\n      websiteUrl?: string;\n      instagramUrl?: string;\n      facebookUrl?: string;\n      youtubeUrl?: string;\n      twitterUrl?: string;\n      linkedinUrl?: string;\n      foundingMembers?: any[];\n    }>({\n      query: (data) => ({\n        url: '/admin/organization/admin',\n        method: 'PUT',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Admin', 'Organization'],\n    }),\n\n    updateSocialLinks: builder.mutation<{\n      message: string;\n      socialLinks: {\n        websiteUrl?: string;\n        instagramUrl?: string;\n        facebookUrl?: string;\n        youtubeUrl?: string;\n        twitterUrl?: string;\n        linkedinUrl?: string;\n      };\n    }, {\n      websiteUrl?: string;\n      instagramUrl?: string;\n      facebookUrl?: string;\n      youtubeUrl?: string;\n      twitterUrl?: string;\n      linkedinUrl?: string;\n    }>({\n      query: (data) => ({\n        url: '/admin/organization/admin/social-links',\n        method: 'PUT',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Admin', 'Organization'],\n    }),\n\n    uploadOrganizationLogo: builder.mutation<{\n      message: string;\n      logoUrl: string;\n      organization: {\n        id: string;\n        name: string;\n        logoUrl: string;\n      };\n    }, FormData>({\n      query: (formData) => ({\n        url: '/admin/organization/admin/upload/logo',\n        method: 'POST',\n        body: formData,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Admin', 'Organization'],\n    }),\n\n    uploadOrganizationFiles: builder.mutation<{\n      message: string;\n      uploadedFiles: {\n        logo?: {\n          url: string;\n          filename: string;\n          size: number;\n        };\n        bylaw?: {\n          url: string;\n          filename: string;\n          size: number;\n        };\n        certificate?: {\n          url: string;\n          filename: string;\n          size: number;\n        };\n      };\n      organization: {\n        id: string;\n        logoUrl?: string;\n        bylawDocumentUrl?: string;\n        registrationCertUrl?: string;\n        updatedAt: string;\n      };\n    }, FormData>({\n      query: (formData) => ({\n        url: '/admin/organization/admin/upload/files',\n        method: 'POST',\n        body: formData,\n        formData: true, // This ensures RTK Query treats it as FormData\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Admin', 'Organization'],\n    }),\n\n    // Analytics endpoints\n    getUnifiedPaymentAnalytics: builder.query<{\n      totalRevenue: number;\n      monthlyRevenue: number;\n      paymentBreakdown: Array<{\n        type: string;\n        amount: number;\n        count: number;\n      }>;\n      trends: Array<{\n        month: string;\n        revenue: number;\n      }>;\n    }, { fromDate?: string; toDate?: string }>({\n      query: (params = {}) => ({\n        url: '/admin/dashboard/unified-payments',\n        params,\n      }),\n      providesTags: ['Admin', 'Analytics'],\n    }),\n\n    getAnalyticsHealth: builder.query<{\n      status: string;\n      services: Record<string, string>;\n      uptime: number;\n      version: string;\n    }, void>({\n      query: () => '/admin/dashboard/analytics-health',\n      providesTags: ['Admin', 'Health'],\n    }),\n\n    // Cache management\n    getCacheStats: builder.query<{\n      totalKeys: number;\n      memoryUsage: string;\n      hitRate: number;\n      uptime: number;\n    }, void>({\n      query: () => '/admin/cache/stats',\n      providesTags: ['Admin', 'Cache'],\n    }),\n\n    clearCache: builder.mutation<\n      { success: boolean; message: string },\n      { cacheType?: string }\n    >({\n      query: (data = {}) => ({\n        url: '/admin/cache/clear',\n        method: 'POST',\n        body: data,\n      }),\n      invalidatesTags: ['Admin', 'Cache'],\n    }),\n\n    refreshAnalyticsCache: builder.mutation<\n      { success: boolean; message: string },\n      void\n    >({\n      query: () => ({\n        url: '/admin/dashboard/refresh-analytics',\n        method: 'POST',\n      }),\n      invalidatesTags: ['Admin', 'Analytics', 'Dashboard'],\n    }),\n\n    // Event Analytics\n    getEventRegistrationsAdmin: builder.query<{\n      registrations: Array<{\n        id: string;\n        user: {\n          id: string;\n          fullName: string;\n          batch: number | null;\n          profileImage?: string;\n          email: string;\n        };\n        event: {\n          id: string;\n          title: string;\n          eventDate: string;\n        };\n        totalGuests: number;\n        donationAmount: number;\n        totalAmount: number;\n        registrationDate: string;\n        status: string;\n      }>;\n      pagination: {\n        currentPage: number;\n        totalPages: number;\n        totalItems: number;\n        itemsPerPage: number;\n      };\n    }, {\n      eventId?: string;\n      batch?: string;\n      status?: string;\n      page?: number;\n      limit?: number;\n    }>({\n      query: (params = {}) => {\n        const { eventId, ...queryParams } = params;\n        return {\n          url: eventId ? `/events/${eventId}/registrations/admin` : '/admin/event-registrations',\n          params: queryParams,\n        };\n      },\n      transformResponse: (response: any) => {\n        return response.data || response;\n      },\n      providesTags: ['Admin', 'EventRegistrations'],\n    }),\n\n    getUserBatches: builder.query<number[], void>({\n      query: () => '/admin/users/batches',\n      transformResponse: (response: any) => {\n        return response.data || response;\n      },\n      providesTags: ['Admin', 'UserBatches'],\n    }),\n  }),\n  overrideExisting: false,\n});\n\n// Export hooks for use in components\nexport const {\n  // Dashboard\n  useGetDashboardOverviewQuery,\n  \n  // User Management\n  useGetAllUsersQuery,\n  useUpdateUserRoleMutation,\n  \n  // Verification\n  useGetVerificationStatsQuery,\n  useGetPendingVerificationsQuery,\n  useGetVerificationDetailsQuery,\n  useVerifyUserMutation,\n  useRejectUserMutation,\n  useBulkVerifyUsersMutation,\n  \n  // Organization\n  useGetOrganizationAdminQuery,\n  useGetOrganizationStatsQuery,\n  useInitializeOrganizationMutation,\n  useUpsertOrganizationMutation,\n  useUpdateSocialLinksMutation,\n  useUploadOrganizationLogoMutation,\n  useUploadOrganizationFilesMutation,\n  \n  // Analytics\n  useGetUnifiedPaymentAnalyticsQuery,\n  useGetAnalyticsHealthQuery,\n  \n  // Cache\n  useGetCacheStatsQuery,\n  useClearCacheMutation,\n  useRefreshAnalyticsCacheMutation,\n  \n  // Event Analytics\n  useGetEventRegistrationsAdminQuery,\n  useGetUserBatchesQuery,\n} = adminApi;\n\nexport default adminApi;"],"names":["adminApi","apiSlice","builder","params","response","userId","role","notes","reason","data","formData","eventId","queryParams","useGetAllUsersQuery","useUpdateUserRoleMutation","useGetVerificationStatsQuery","useVerifyUserMutation","useRejectUserMutation","useBulkVerifyUsersMutation","useGetOrganizationAdminQuery","useInitializeOrganizationMutation","useUpsertOrganizationMutation","useUpdateSocialLinksMutation","useUploadOrganizationFilesMutation","useGetEventRegistrationsAdminQuery","useGetUserBatchesQuery"],"mappings":"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"}