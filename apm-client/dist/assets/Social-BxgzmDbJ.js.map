{"version":3,"file":"Social-BxgzmDbJ.js","sources":["../../src/pages/user/Announcements.tsx","../../src/pages/user/Social.tsx"],"sourcesContent":["import React from 'react';\nimport { motion } from 'framer-motion';\nimport { MegaphoneIcon, ClockIcon } from '@heroicons/react/24/outline';\nimport { useGetUserAnnouncementsQuery } from '../../store/api/announcementApi';\n\nconst UserAnnouncements: React.FC = () => {\n  const { data: announcementsData, isLoading } = useGetUserAnnouncementsQuery({\n    page: 1,\n    limit: 20,\n  });\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins}m ago`;\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n\n    return date.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined,\n    });\n  };\n\n  const announcements = announcementsData?.announcements || [];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 p-4 sm:p-6\">\n      <div className=\"max-w-2xl mx-auto space-y-4\">\n        {/* Header */}\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\n            <MegaphoneIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n          </div>\n          <div>\n            <h1 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n              Announcements\n            </h1>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n              Important updates from your organization\n            </p>\n          </div>\n        </div>\n\n        {/* Announcements List */}\n        <div className=\"space-y-3\">\n          {isLoading ? (\n            // Loading skeleton\n            Array.from({ length: 3 }).map((_, i) => (\n              <div\n                key={i}\n                className=\"bg-white dark:bg-gray-800 rounded-xl p-4 animate-pulse\"\n              >\n                <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-3\" />\n                <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-2\" />\n                <div className=\"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/4\" />\n              </div>\n            ))\n          ) : announcements.length === 0 ? (\n            // Empty state\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8 text-center\">\n              <MegaphoneIcon className=\"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n                No Announcements\n              </h3>\n              <p className=\"text-gray-500 dark:text-gray-400\">\n                You're all caught up! Check back later for updates.\n              </p>\n            </div>\n          ) : (\n            // Announcements\n            announcements.map((announcement, index) => (\n              <motion.div\n                key={announcement.id}\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: index * 0.05 }}\n                className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 sm:p-5 hover:shadow-md transition-shadow\"\n              >\n                {/* Message */}\n                <p className=\"text-gray-900 dark:text-white text-base mb-3\">\n                  {announcement.message}\n                </p>\n\n                {/* Footer */}\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-1.5 text-xs text-gray-500 dark:text-gray-400\">\n                    <ClockIcon className=\"h-3.5 w-3.5\" />\n                    <span>{formatDate(announcement.createdAt)}</span>\n                  </div>\n                  <span className=\"text-xs text-gray-400 dark:text-gray-500\">\n                    by {announcement.createdBy.fullName}\n                  </span>\n                </div>\n              </motion.div>\n            ))\n          )}\n        </div>\n\n        {/* Pagination info */}\n        {announcementsData && announcementsData.pagination?.total > 0 && (\n          <div className=\"text-center text-sm text-gray-500 dark:text-gray-400 pt-4\">\n            Showing {announcements.length} of {announcementsData.pagination.total} announcements\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default UserAnnouncements;\n","import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { useLocation } from 'react-router-dom';\nimport {\n  ChatBubbleLeftRightIcon,\n  ChartBarIcon,\n  MegaphoneIcon,\n} from '@heroicons/react/24/outline';\nimport Posts from './Posts';\nimport Polls from './Polls';\nimport UserAnnouncements from './Announcements';\n\nconst Social: React.FC = () => {\n  const location = useLocation();\n  const [activeTab, setActiveTab] = useState<'posts' | 'polls' | 'announcements'>('posts');\n\n  // Handle navigation state to open specific tab\n  useEffect(() => {\n    if (location.state?.tab === 'announcements') {\n      setActiveTab('announcements');\n      // Clear the state to prevent reopening on refresh\n      window.history.replaceState({}, document.title);\n    }\n  }, [location.state]);\n\n  const tabs = [\n    {\n      id: 'posts' as const,\n      name: 'Posts',\n      icon: ChatBubbleLeftRightIcon,\n      description: 'Share and discover posts from the community',\n    },\n    {\n      id: 'polls' as const,\n      name: 'Polls',\n      icon: ChartBarIcon,\n      description: 'Create and participate in community polls',\n    },\n    {\n      id: 'announcements' as const,\n      name: 'Announcements',\n      icon: MegaphoneIcon,\n      description: 'Important updates and announcements',\n    },\n  ];\n\n  const renderTabContent = () => {\n    switch (activeTab) {\n      case 'posts':\n        return <Posts />;\n      case 'polls':\n        return <Polls />;\n      case 'announcements':\n        return <UserAnnouncements />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"h-screen flex flex-col bg-gray-50 dark:bg-gray-900\">\n      {/* Tab Navigation - Fixed */}\n      <div className=\"flex-shrink-0 bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"flex space-x-8 overflow-x-auto\">\n            {tabs.map((tab) => {\n              const Icon = tab.icon;\n              const isActive = activeTab === tab.id;\n              \n              return (\n                <motion.button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`relative flex items-center space-x-2 py-4 px-1 font-medium text-sm whitespace-nowrap transition-colors ${\n                    isActive\n                      ? 'text-blue-600 dark:text-blue-400'\n                      : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                  }`}\n                  whileHover={{ y: -1 }}\n                  whileTap={{ y: 0 }}\n                >\n                  <Icon className=\"h-5 w-5\" />\n                  <span>{tab.name}</span>\n                  {tab.comingSoon && (\n                    <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-300\">\n                      Soon\n                    </span>\n                  )}\n\n                  {isActive && (\n                    <motion.div\n                      layoutId=\"activeTab\"\n                      className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500\"\n                    />\n                  )}\n                </motion.button>\n              );\n            })}\n            </div>\n        </div>\n      </div>\n\n      {/* Tab Content - Scrollable */}\n      <div className=\"flex-1 overflow-hidden\">\n        <motion.div\n          key={activeTab}\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: -20 }}\n          transition={{ duration: 0.2 }}\n          className=\"h-full\"\n        >\n          {renderTabContent()}\n        </motion.div>\n      </div>\n    </div>\n  );\n};\n\nexport default Social;"],"names":["UserAnnouncements","announcementsData","isLoading","useGetUserAnnouncementsQuery","formatDate","dateString","date","now","diffMs","diffMins","diffHours","diffDays","announcements","jsxs","jsx","MegaphoneIcon","_","i","announcement","index","motion","ClockIcon","Social","location","useLocation","activeTab","setActiveTab","useState","useEffect","tabs","ChatBubbleLeftRightIcon","ChartBarIcon","renderTabContent","Posts","Polls","tab","Icon","isActive"],"mappings":"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"}