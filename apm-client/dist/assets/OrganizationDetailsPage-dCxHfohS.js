import{j as e}from"./ui-BlmhFX_F.js";import{r as l,f as he,u as ye}from"./router-DFnE1L-t.js";import{$ as n,c as J,u as X}from"./index-DHymdRDT.js";import{e as pe,f as fe,g as ke,c as je,d as Ne,h as ve,i as we,j as Se,k as Ce,l as Ae,m as Ee,n as Me}from"./developerApi-BvKqSZbQ.js";import{L as Fe}from"./LoadingSpinner-BR8iBbEe.js";import{F as le}from"./BuildingOffice2Icon-DJ0Rj8rD.js";import{F as te}from"./ArrowLeftIcon-qMHYicG6.js";import{F as ee}from"./XMarkIcon-D1c1wIzV.js";import{F as V}from"./CheckIcon-BVDXZInn.js";import{F as ae}from"./PencilIcon-DAEDOf0J.js";import{F as Z}from"./InformationCircleIcon-DNiszcBI.js";import{F as K}from"./UsersIcon-Ct2fUG5g.js";import{F as De}from"./ChartBarIcon-CLsU3hA-.js";import{F as Ue}from"./ClockIcon-DZUckIFe.js";import{F as re}from"./EnvelopeIcon-BhdVQxlI.js";import{F as ie}from"./Cog6ToothIcon-boBm2kak.js";import{F as q}from"./EyeIcon-Bt_hkgUK.js";import{F as Pe}from"./CalendarDaysIcon-BeQLJOHn.js";import{F as O}from"./DocumentTextIcon-ImcgzK9h.js";import{F as _}from"./PhotoIcon-n1eOvNeY.js";import{F as Re}from"./UserGroupIcon-CnvKPj6V.js";import{F as ne}from"./ChatBubbleLeftRightIcon-sTRCG82n.js";import{F as Q}from"./ChevronDownIcon-qIBcN2qV.js";import{F as oe}from"./TrashIcon-mpSEd7uz.js";import{F as $e}from"./WrenchScrewdriverIcon-Dg4nqSXX.js";import{F as se}from"./ArrowUpTrayIcon-Ck5JRvNs.js";import{F as Te}from"./PhoneIcon-Cn5tUlUu.js";import{F as Le}from"./CalendarIcon-CroBm0p_.js";import{F as Ie}from"./MapPinIcon-l_KjTaem.js";import{F as ze}from"./DocumentIcon-CUwL3jkm.js";import{F as Ye}from"./ChevronUpIcon-De_BqJq8.js";import"./redux-VN59sPcb.js";import"./vendor-gH-7aFTg.js";function Oe({title:a,titleId:i,...m},u){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":i},m),a?l.createElement("title",{id:i},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const de=l.forwardRef(Oe);function Be({title:a,titleId:i,...m},u){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":i},m),a?l.createElement("title",{id:i},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const Ve=l.forwardRef(Be);function He({title:a,titleId:i,...m},u){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":i},m),a?l.createElement("title",{id:i},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 8.25H9m6 3H9m3 6-3-3h1.5a3 3 0 1 0 0-6M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const _e=l.forwardRef(He);function Ke({title:a,titleId:i,...m},u){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":i},m),a?l.createElement("title",{id:i},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"}))}const Ge=l.forwardRef(Ke),W={TRIAL:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",ACTIVE:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",EXPIRED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",SUSPENDED:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"},Qe=[{id:"basic",name:"Basic Info",icon:Z},{id:"subscription",name:"Subscription",icon:Ve},{id:"users",name:"Users",icon:K},{id:"statistics",name:"Statistics",icon:De},{id:"activity",name:"Activity Log",icon:Ue},{id:"email",name:"Email Config",icon:re},{id:"settings",name:"Settings",icon:ie}],ce=(a,i)=>J(`/api/organizations/${a}/files/${i}`);function $a(){const{orgId:a}=he(),i=ye(),[m,u]=l.useState("basic"),[h,N]=l.useState(!1),[t,p]=l.useState({name:"",shortName:"",officialEmail:"",officialContactNumber:"",officeAddress:"",foundationYear:new Date().getFullYear(),description:"",mission:"",vision:"",maxUsers:500,storageQuotaMB:5e3}),{data:s,isLoading:E,error:v,refetch:f}=pe(a,{skip:!a}),{data:d}=fe(a,{skip:!a}),[$,{isLoading:S}]=ke(),[T,{isLoading:M}]=je(),[c,{isLoading:y}]=Ne();l.useEffect(()=>{s&&p({name:s.name||"",shortName:s.shortName||"",officialEmail:s.officialEmail||"",officialContactNumber:s.officialContactNumber||"",officeAddress:s.officeAddress||"",foundationYear:s.foundationYear||new Date().getFullYear(),description:s.description||"",mission:s.mission||"",vision:s.vision||"",maxUsers:s.maxUsers||500,storageQuotaMB:s.storageQuotaMB||5e3})},[s]);const P=o=>{const{name:j,value:F,type:R}=o.target;p(x=>({...x,[j]:R==="number"?parseInt(F)||0:F}))},Y=async()=>{if(a)try{await $({orgId:a,data:t}).unwrap(),n.success("Organization updated successfully!"),N(!1)}catch(o){n.error(o?.data?.message||"Failed to update organization")}},L=()=>{s&&p({name:s.name||"",shortName:s.shortName||"",officialEmail:s.officialEmail||"",officialContactNumber:s.officialContactNumber||"",officeAddress:s.officeAddress||"",foundationYear:s.foundationYear||new Date().getFullYear(),description:s.description||"",mission:s.mission||"",vision:s.vision||"",maxUsers:s.maxUsers||500,storageQuotaMB:s.storageQuotaMB||5e3}),N(!1)},g=async()=>{if(!(!a||!s))try{await T({orgId:a,isMaintenanceMode:!s.isMaintenanceMode}).unwrap(),n.success(s.isMaintenanceMode?"Maintenance mode disabled":"Maintenance mode enabled")}catch(o){n.error(o?.data?.message||"Failed to toggle maintenance mode")}},I=async o=>{if(a)try{await c({orgId:a,subscriptionDays:o,subscriptionStatus:"ACTIVE"}).unwrap(),n.success(`Subscription extended by ${o} days`)}catch(j){n.error(j?.data?.message||"Failed to extend subscription")}},w=async o=>{if(a)try{await c({orgId:a,subscriptionStatus:o}).unwrap(),n.success(`Status changed to ${o}`)}catch(j){n.error(j?.data?.message||"Failed to change status")}};if(E)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(Fe,{})});if(v||!s)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-12 text-center",children:[e.jsx(le,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Organization not found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"The organization you're looking for doesn't exist or you don't have access to it."}),e.jsxs("button",{onClick:()=>i("/developer/organizations"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(te,{className:"h-5 w-5 mr-2"}),"Back to Organizations"]})]})})});const k=()=>{switch(m){case"basic":return e.jsx(Je,{org:s,refetch:f});case"subscription":return e.jsx(Ze,{org:s,handleExtendSubscription:I,handleChangeStatus:w,handleToggleMaintenance:g,updatingSubscription:y,togglingMaintenance:M});case"users":return e.jsx(qe,{org:s});case"statistics":return e.jsx(We,{org:s,stats:d});case"activity":return e.jsx(Xe,{org:s});case"email":return e.jsx(ea,{orgId:s.id,orgName:s.name});case"settings":return e.jsx(aa,{org:s,formData:t,isEditing:h,handleInputChange:P});default:return null}};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20",children:[e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i("/developer/organizations"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:e.jsx(te,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.logoUrl?e.jsx("img",{className:"h-12 w-12 rounded-xl object-cover shadow-sm",src:ce(s.id,"logo"),alt:s.name}):e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-lg font-bold text-white",children:s.shortName.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s.name}),e.jsx("code",{className:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded font-mono text-gray-600 dark:text-gray-400",children:s.tenantCode})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${W[s.subscriptionStatus]}`,children:s.subscriptionStatus}),s.isMaintenanceMode&&e.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200 rounded-full text-xs font-medium",children:"Maintenance"}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s._count?.users||0," users"]})]})]})]})]}),e.jsx("div",{className:"flex gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:L,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(ee,{className:"h-4 w-4 mr-1.5"}),"Cancel"]}),e.jsxs("button",{onClick:Y,disabled:S,className:"inline-flex items-center px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:[e.jsx(V,{className:"h-4 w-4 mr-1.5"}),S?"Saving...":"Save"]})]}):e.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ae,{className:"h-4 w-4 mr-1.5"}),"Edit"]})})]})}),e.jsx("div",{className:"px-6",children:e.jsx("nav",{className:"flex space-x-2 overflow-x-auto pb-px","aria-label":"Tabs",children:Qe.map(o=>{const j=o.icon;return e.jsxs("button",{onClick:()=>u(o.id),className:`flex items-center gap-2.5 px-5 py-3 text-base font-medium whitespace-nowrap border-b-2 transition-colors ${m===o.id?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(j,{className:"h-5 w-5"}),o.name]},o.id)})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:k()})})]})}function Je({org:a,refetch:i}){const{auth:m}=X(),[u,h]=l.useState(null),[N,t]=l.useState(!1),[p,s]=l.useState(!1),[E,v]=l.useState(!1),[f,d]=l.useState({name:a?.name||"",shortName:a?.shortName||"",officialEmail:a?.officialEmail||"",officialContactNumber:a?.officialContactNumber||"",foundationYear:a?.foundationYear||new Date().getFullYear(),officeAddress:a?.officeAddress||""});l.useEffect(()=>{a&&d({name:a.name||"",shortName:a.shortName||"",officialEmail:a.officialEmail||"",officialContactNumber:a.officialContactNumber||"",foundationYear:a.foundationYear||new Date().getFullYear(),officeAddress:a.officeAddress||""})},[a]);const $=async()=>{v(!0);try{const c=await fetch(`/api/developer/organizations/${a.id}`,{method:"PUT",headers:{Authorization:`Bearer ${m?.token}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),y=await c.json();if(!c.ok)throw new Error(y.message||"Update failed");i&&await i(),s(!1),n.success("Organization details updated successfully!")}catch(c){n.error(c?.message||"Failed to update organization details")}finally{v(!1)}},S=()=>{d({name:a?.name||"",shortName:a?.shortName||"",officialEmail:a?.officialEmail||"",officialContactNumber:a?.officialContactNumber||"",foundationYear:a?.foundationYear||new Date().getFullYear(),officeAddress:a?.officeAddress||""}),s(!1)},T=async()=>{if(!u)return;if(!a?.id){n.error("Organization ID not available");return}t(!0);const c=J(`/api/developer/organizations/${a.id}/upload`);try{const y=new FormData;y.append("logoFile",u);const P=await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${m?.token}`},body:y}),Y=await P.json();if(!P.ok)throw new Error(Y.message||"Upload failed");h(null),i&&await i(),n.success("Logo uploaded successfully!")}catch(y){n.error(y?.message||"Failed to upload logo")}finally{t(!1)}},M=async()=>{if(confirm("Are you sure you want to delete the logo? This action cannot be undone.")){t(!0);try{const c=await fetch(J(`/api/developer/organizations/${a.id}/files/logo`),{method:"DELETE",headers:{Authorization:`Bearer ${m?.token}`}}),y=await c.json();if(!c.ok)throw new Error(y.message||"Delete failed");i&&await i(),n.success("Logo deleted successfully!")}catch(c){n.error(c?.message||"Failed to delete logo")}finally{t(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Z,{className:"h-5 w-5 text-blue-500 mt-0.5 flex-shrink-0"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:"As a Developer, you can edit the organization logo and basic details (name, contact info, etc.). About section, messages, and documents are managed by the organization's Super Admin."})})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-blue-500"}),"Organization Logo & Details",e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded",children:"Editable"})]}),p?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:S,disabled:E,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(ee,{className:"h-4 w-4"}),"Cancel"]}),e.jsx("button",{onClick:$,disabled:E,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:opacity-50",children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-4 w-4"}),"Save Changes"]})})]}):e.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:[e.jsx(ae,{className:"h-4 w-4"}),"Edit Details"]})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:["Organization Logo",e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded",children:"Editable"})]}),e.jsxs("div",{className:"w-48 h-48 relative",children:[a.logoUrl?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:ce(a.id,"logo"),alt:a.name,className:"w-48 h-48 object-cover rounded-xl border-2 border-gray-200 dark:border-gray-600 shadow-sm",onError:c=>{c.currentTarget.src=`data:image/svg+xml;base64,${btoa(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect width="100" height="100" fill="#f3f4f6"/><text x="50" y="50" text-anchor="middle" dy=".3em" fill="#6b7280" font-family="system-ui" font-size="24">${a.shortName?.charAt(0)||"O"}</text></svg>`)}`}}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsxs("label",{className:"p-2 bg-white rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx(se,{className:"h-5 w-5 text-gray-700"}),e.jsx("input",{type:"file",accept:"image/*",onChange:c=>{const y=c.target.files?.[0];y&&h(y)},className:"hidden"})]}),e.jsx("button",{onClick:M,disabled:N,className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50",children:e.jsx(oe,{className:"h-5 w-5"})})]})]}):e.jsxs("label",{className:"w-48 h-48 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[e.jsx(_,{className:"h-12 w-12 text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload Logo"}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG up to 5MB"}),e.jsx("input",{type:"file",accept:"image/*",onChange:c=>{const y=c.target.files?.[0];y&&h(y)},className:"hidden"})]}),u&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:u.name}),e.jsx("button",{onClick:T,disabled:N,className:"w-full px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-4 w-4"}),"Upload Logo"]})})]})]})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5",children:"Organization Name"}),p?e.jsx("input",{type:"text",value:f.name,onChange:c=>d({...f,name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 dark:text-white py-2.5 px-1 font-medium",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5",children:"Short Name"}),p?e.jsx("input",{type:"text",value:f.shortName,onChange:c=>d({...f,shortName:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 dark:text-white py-2.5 px-1 font-medium",children:a.shortName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5 flex items-center gap-1.5",children:[e.jsx(re,{className:"h-4 w-4"}),"Official Email"]}),p?e.jsx("input",{type:"email",value:f.officialEmail,onChange:c=>d({...f,officialEmail:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 dark:text-white py-2.5 px-1",children:a.officialEmail})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5 flex items-center gap-1.5",children:[e.jsx(Te,{className:"h-4 w-4"}),"Contact Number"]}),p?e.jsx("input",{type:"tel",value:f.officialContactNumber,onChange:c=>d({...f,officialContactNumber:c.target.value}),placeholder:"Enter contact number",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 dark:text-white py-2.5 px-1",children:a.officialContactNumber||e.jsx("span",{className:"text-gray-400 italic",children:"Not set"})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5 flex items-center gap-1.5",children:[e.jsx(Le,{className:"h-4 w-4"}),"Foundation Year"]}),p?e.jsx("input",{type:"number",value:f.foundationYear,onChange:c=>d({...f,foundationYear:parseInt(c.target.value)||new Date().getFullYear()}),min:"1800",max:new Date().getFullYear(),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 dark:text-white py-2.5 px-1 font-medium",children:a.foundationYear})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5",children:["Tenant Code",e.jsx("span",{className:"ml-2 text-xs text-gray-400",children:"(read-only)"})]}),e.jsx("p",{className:"text-gray-900 dark:text-white py-2.5 font-mono text-sm bg-gray-50 dark:bg-gray-700/50 rounded-lg px-3",children:a.tenantCode})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5 flex items-center gap-1.5",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Office Address"]}),p?e.jsx("textarea",{value:f.officeAddress,onChange:c=>d({...f,officeAddress:c.target.value}),placeholder:"Enter office address",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 dark:text-white py-2.5 px-1",children:a.officeAddress||e.jsx("span",{className:"text-gray-400 italic",children:"Not set"})})]})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-purple-500"}),"About Organization"]})}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5",children:"Description"}),e.jsx("p",{className:"text-gray-900 dark:text-white py-2 leading-relaxed bg-gray-50 dark:bg-gray-700/30 rounded-lg p-3",children:a.description||e.jsx("span",{className:"text-gray-400 italic",children:"No description set by admin"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5",children:"Vision"}),e.jsx("p",{className:"text-gray-900 dark:text-white py-2 leading-relaxed bg-gray-50 dark:bg-gray-700/30 rounded-lg p-3 min-h-[80px]",children:a.vision||e.jsx("span",{className:"text-gray-400 italic",children:"No vision set by admin"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5",children:"Mission"}),e.jsx("p",{className:"text-gray-900 dark:text-white py-2 leading-relaxed bg-gray-50 dark:bg-gray-700/30 rounded-lg p-3 min-h-[80px]",children:a.mission||e.jsx("span",{className:"text-gray-400 italic",children:"No mission set by admin"})})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-green-500"}),"Messages from Office Bearers"]})}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/20 dark:to-transparent rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:"President's Message"}),e.jsx("p",{className:"text-gray-900 dark:text-white leading-relaxed",children:a.presidentMessage||e.jsx("span",{className:"text-gray-400 italic",children:"No message from President"})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-transparent dark:from-green-900/20 dark:to-transparent rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:"Secretary's Message"}),e.jsx("p",{className:"text-gray-900 dark:text-white leading-relaxed",children:a.secretaryMessage||e.jsx("span",{className:"text-gray-400 italic",children:"No message from Secretary"})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-transparent dark:from-purple-900/20 dark:to-transparent rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:"Treasurer's Message"}),e.jsx("p",{className:"text-gray-900 dark:text-white leading-relaxed",children:a.treasurerMessage||e.jsx("span",{className:"text-gray-400 italic",children:"No message from Treasurer"})})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-orange-500"}),"Organization Documents"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Documents uploaded by organization admin (read-only)"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(O,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Registration Certificate"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"PDF or Image format"})]})]}),a.registrationCertUrl?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx(V,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:"Certificate uploaded"})]}),e.jsxs("a",{href:a.registrationCertUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-4 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors text-sm font-medium",children:[e.jsx(q,{className:"h-4 w-4"}),"View Certificate"]})]}):e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg text-center",children:[e.jsx(O,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No certificate uploaded"})]})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(O,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Bylaw Document"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"PDF or DOC format"})]})]}),a.bylawDocumentUrl?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx(V,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:"Bylaw uploaded"})]}),e.jsxs("a",{href:a.bylawDocumentUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors text-sm font-medium",children:[e.jsx(q,{className:"h-4 w-4"}),"View Bylaw"]})]}):e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg text-center",children:[e.jsx(O,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No bylaw uploaded"})]})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-5",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Created"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Updated"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:new Date(a.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tenant Code"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium font-mono mt-1",children:a.tenantCode})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Organization ID"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium font-mono text-xs mt-1 truncate",title:a.id,children:a.id})]})]})})]})}function Ze({org:a,handleExtendSubscription:i,handleChangeStatus:m,handleToggleMaintenance:u,updatingSubscription:h,togglingMaintenance:N}){return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Subscription Status"})}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Current Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${W[a.subscriptionStatus]}`,children:a.subscriptionStatus})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Started"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:a.subscriptionStartAt?new Date(a.subscriptionStartAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Expires"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:a.subscriptionEndsAt?new Date(a.subscriptionEndsAt).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"No expiry date"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Change Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["TRIAL","ACTIVE","EXPIRED","SUSPENDED"].map(t=>e.jsx("button",{onClick:()=>m(t),disabled:h||a.subscriptionStatus===t,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 ${a.subscriptionStatus===t?W[t]:"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"}`,children:t},t))})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Extend Subscription"})}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Extend the subscription period for this organization. The expiry date will be extended from the current expiry date."}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("button",{onClick:()=>i(30),disabled:h,className:"px-4 py-3 bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-200 dark:hover:bg-blue-900 rounded-lg font-medium transition-colors disabled:opacity-50",children:"+30 Days"}),e.jsx("button",{onClick:()=>i(90),disabled:h,className:"px-4 py-3 bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-200 dark:hover:bg-blue-900 rounded-lg font-medium transition-colors disabled:opacity-50",children:"+90 Days"}),e.jsx("button",{onClick:()=>i(365),disabled:h,className:"px-4 py-3 bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-200 dark:hover:bg-blue-900 rounded-lg font-medium transition-colors disabled:opacity-50",children:"+1 Year"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5"}),"Maintenance Mode"]})}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:a.isMaintenanceMode?"Maintenance Mode Enabled":"Maintenance Mode Disabled"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.isMaintenanceMode?"Users cannot access the organization":"Organization is accessible to users"})]}),e.jsx("span",{className:`px-3 py-1 rounded text-sm font-medium ${a.isMaintenanceMode?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:a.isMaintenanceMode?"ON":"OFF"})]}),e.jsx("button",{onClick:u,disabled:N,className:`w-full px-4 py-2.5 rounded-lg font-medium transition-colors disabled:opacity-50 ${a.isMaintenanceMode?"bg-green-600 text-white hover:bg-green-700":"bg-orange-600 text-white hover:bg-orange-700"}`,children:N?"Processing...":a.isMaintenanceMode?"Disable Maintenance Mode":"Enable Maintenance Mode"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Resource Limits"})}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Maximum Users"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[a._count?.users||0," / ",a.maxUsers]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min((a._count?.users||0)/a.maxUsers*100,100)}%`}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Storage Quota"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[a.storageQuotaMB," MB"]})]})]})]})]})}function qe({org:a}){const{auth:i}=X(),[m,u]=l.useState([]),[h,N]=l.useState(!0),[t,p]=l.useState({page:1,limit:20,total:0,totalPages:0}),[s,E]=l.useState({total:0,byRole:{}}),[v,f]=l.useState(""),[d,$]=l.useState(""),[S,T]=l.useState(""),[M,c]=l.useState("createdAt"),[y,P]=l.useState("desc"),[Y,L]=l.useState(!1),[g,I]=l.useState(!1),[w,k]=l.useState(!1),[o,j]=l.useState(null),[F,R]=l.useState(!1),[x,C]=l.useState({email:"",password:"",fullName:"",role:"USER",batch:new Date().getFullYear(),admissionYear:new Date().getFullYear()-7,passoutYear:new Date().getFullYear(),isAlumniVerified:!1,teacherSubject:"",teacherJoinYear:new Date().getFullYear(),isRetired:!1,teacherLeavingYear:null}),[b,D]=l.useState(""),z=async()=>{N(!0);try{const r=new URLSearchParams({page:t.page.toString(),limit:t.limit.toString(),sortBy:M,sortOrder:y,...v&&{search:v},...d&&{role:d},...S&&{status:S}}),U=await(await fetch(`/api/developer/organizations/${a.id}/users?${r}`,{headers:{Authorization:`Bearer ${i?.token}`}})).json();U.success&&(u(U.data.users),p(U.data.pagination),E(U.data.stats))}catch{n.error("Failed to load users")}finally{N(!1)}};l.useEffect(()=>{a?.id&&z()},[a?.id,t.page,v,d,S,M,y]);const B=r=>{M===r?P(y==="asc"?"desc":"asc"):(c(r),P("desc"))},H=({column:r})=>e.jsxs("span",{className:"ml-1 inline-flex flex-col",children:[e.jsx(Ye,{className:`h-3 w-3 ${M===r&&y==="asc"?"text-blue-500":"text-gray-400"}`}),e.jsx(Q,{className:`h-3 w-3 -mt-1 ${M===r&&y==="desc"?"text-blue-500":"text-gray-400"}`})]}),G=async()=>{if(!x.email||!x.password||!x.fullName){n.error("Please fill all required fields");return}R(!0);try{const A=await(await fetch(`/api/developer/organizations/${a.id}/users`,{method:"POST",headers:{Authorization:`Bearer ${i?.token}`,"Content-Type":"application/json"},body:JSON.stringify(x)})).json();A.success?(n.success(`User created successfully${A.data?.serialId?` (ID: ${A.data.serialId})`:""}`),L(!1),C({email:"",password:"",fullName:"",role:"USER",batch:new Date().getFullYear(),admissionYear:new Date().getFullYear()-7,passoutYear:new Date().getFullYear(),isAlumniVerified:!1,teacherSubject:"",teacherJoinYear:new Date().getFullYear(),isRetired:!1,teacherLeavingYear:null}),z()):n.error(A.message||"Failed to create user")}catch{n.error("Failed to create user")}finally{R(!1)}},xe=async()=>{if(o){R(!0);try{const A=await(await fetch(`/api/developer/organizations/${a.id}/users/${o.id}`,{method:"PUT",headers:{Authorization:`Bearer ${i?.token}`,"Content-Type":"application/json"},body:JSON.stringify({fullName:o.fullName,email:o.email,role:o.role,batch:o.batch,isAlumniVerified:o.isAlumniVerified})})).json();A.success?(n.success("User updated successfully"),I(!1),j(null),z()):n.error(A.message||"Failed to update user")}catch{n.error("Failed to update user")}finally{R(!1)}}},ge=async()=>{if(!o||b.length<8){n.error("Password must be at least 8 characters");return}R(!0);try{const A=await(await fetch(`/api/developer/organizations/${a.id}/users/${o.id}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${i?.token}`,"Content-Type":"application/json"},body:JSON.stringify({newPassword:b})})).json();A.success?(n.success("Password reset successfully"),k(!1),j(null),D("")):n.error(A.message||"Failed to reset password")}catch{n.error("Failed to reset password")}finally{R(!1)}},me=async r=>{if(confirm(`${r.isActive?"Block":"Unblock"} user ${r.fullName}?`))try{const U=await(await fetch(`/api/developer/organizations/${a.id}/users/${r.id}/toggle-status`,{method:"POST",headers:{Authorization:`Bearer ${i?.token}`}})).json();U.success?(n.success(U.message),z()):n.error(U.message||"Failed to toggle status")}catch{n.error("Failed to toggle status")}},be=async r=>{if(confirm(`Delete user ${r.fullName}? This action cannot be undone.`))try{const U=await(await fetch(`/api/developer/organizations/${a.id}/users/${r.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${i?.token}`}})).json();U.success?(n.success("User deleted successfully"),z()):n.error(U.message||"Failed to delete user")}catch{n.error("Failed to delete user")}},ue={SUPER_ADMIN:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",ADMIN:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",USER:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",TEACHER:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.total})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Super Admins"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:s.byRole?.SUPER_ADMIN||0})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Admins"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:s.byRole?.ADMIN||0})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Alumni"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:s.byRole?.USER||0})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Teachers"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:s.byRole?.TEACHER||0})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 relative z-20",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-3",children:[e.jsx("input",{type:"text",placeholder:"Search users...",value:v,onChange:r=>f(r.target.value),className:"flex-1 min-w-[200px] max-w-xs px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:d,onChange:r=>$(r.target.value),className:"appearance-none px-4 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm cursor-pointer min-w-[130px]",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"SUPER_ADMIN",children:"Super Admin"}),e.jsx("option",{value:"BATCH_ADMIN",children:"Batch Admin"}),e.jsx("option",{value:"USER",children:"Alumni"}),e.jsx("option",{value:"TEACHER",children:"Teacher"})]}),e.jsx(Q,{className:"h-4 w-4 absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:S,onChange:r=>T(r.target.value),className:"appearance-none px-4 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm cursor-pointer min-w-[130px]",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Blocked"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Unverified"})]}),e.jsx(Q,{className:"h-4 w-4 absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),e.jsxs("button",{onClick:()=>L(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap text-sm font-medium",children:[e.jsx(K,{className:"h-4 w-4"}),"Add User"]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[900px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Serial ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>B("batch"),children:e.jsxs("span",{className:"flex items-center",children:["Batch",e.jsx(H,{column:"batch"})]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>B("createdAt"),children:e.jsxs("span",{className:"flex items-center",children:["Joined",e.jsx(H,{column:"createdAt"})]})}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:h?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):m.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:"No users found"})}):m.map(r=>e.jsxs("tr",{className:`${r.isActive?"":"bg-red-50 dark:bg-red-900/10"}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[r.avatarUrl?e.jsx("img",{src:r.avatarUrl,alt:"",className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 dark:text-gray-300 font-medium",children:r.fullName?.charAt(0)||"?"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r.fullName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]})]})}),e.jsx("td",{className:"px-4 py-3",children:r.serialId?e.jsx("span",{className:"font-mono text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-gray-700 dark:text-gray-300",children:r.serialId}):e.jsx("span",{className:"text-gray-400 text-xs italic",children:"N/A"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ue[r.role]||"bg-gray-100 text-gray-800"}`,children:r.role==="USER"?"Alumni":r.role==="TEACHER"?"Teacher":r.role})}),e.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-300",children:r.role==="TEACHER"?e.jsx("span",{className:"text-sm",children:r.teacherJoinYear||r.batch}):r.batch}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full w-fit ${r.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:r.isActive?"Active":"Blocked"}),r.isAlumniVerified&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full w-fit bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:"Verified"})]})}),e.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-300 text-sm",children:new Date(r.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{j(r),I(!0)},className:"p-1.5 text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400",title:"Edit",children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{j(r),k(!0)},className:"p-1.5 text-gray-500 hover:text-purple-600 dark:text-gray-400 dark:hover:text-purple-400",title:"Reset Password",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>me(r),className:`p-1.5 ${r.isActive?"text-gray-500 hover:text-orange-600":"text-orange-500 hover:text-green-600"}`,title:r.isActive?"Block User":"Unblock User",children:r.isActive?e.jsx(ee,{className:"h-4 w-4"}):e.jsx(V,{className:"h-4 w-4"})}),r.role!=="SUPER_ADMIN"&&e.jsx("button",{onClick:()=>be(r),className:"p-1.5 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400",title:"Delete",children:e.jsx(oe,{className:"h-4 w-4"})})]})})]},r.id))})]})}),t.totalPages>1&&e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",t.page," of ",t.totalPages," (",t.total," users)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p(r=>({...r,page:r.page-1})),disabled:t.page<=1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>p(r=>({...r,page:r.page+1})),disabled:t.page>=t.totalPages,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm disabled:opacity-50",children:"Next"})]})]})]}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 my-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Create New User"}),e.jsxs("div",{className:"space-y-4 max-h-[65vh] overflow-y-auto pr-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",value:x.fullName,onChange:r=>C({...x,fullName:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:x.email,onChange:r=>C({...x,email:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password *"}),e.jsx("input",{type:"password",value:x.password,onChange:r=>C({...x,password:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),e.jsxs("select",{value:x.role,onChange:r=>C({...x,role:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"USER",children:"Alumni"}),e.jsx("option",{value:"TEACHER",children:"Teacher"}),e.jsx("option",{value:"BATCH_ADMIN",children:"Batch Admin"}),e.jsx("option",{value:"SUPER_ADMIN",children:"Super Admin"})]})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-gray-50 dark:bg-gray-700/30 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Academic Information (Required for Serial ID)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Batch *"}),e.jsx("input",{type:"number",value:x.batch,onChange:r=>C({...x,batch:parseInt(r.target.value),passoutYear:parseInt(r.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Admission Year *"}),e.jsx("input",{type:"number",value:x.admissionYear,onChange:r=>C({...x,admissionYear:parseInt(r.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Passout Year *"}),e.jsx("input",{type:"number",value:x.passoutYear,onChange:r=>C({...x,passoutYear:parseInt(r.target.value),batch:parseInt(r.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),x.role==="USER"&&e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.isAlumniVerified,onChange:r=>C({...x,isAlumniVerified:r.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Mark as Verified Alumni"})]}),x.role==="TEACHER"&&e.jsxs("div",{className:"space-y-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-green-700 dark:text-green-400 uppercase tracking-wide",children:"Teacher Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject/Department"}),e.jsx("input",{type:"text",value:x.teacherSubject,onChange:r=>C({...x,teacherSubject:r.target.value}),placeholder:"e.g., Mathematics, Physics",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Joining Year *"}),e.jsx("input",{type:"number",value:x.teacherJoinYear,onChange:r=>C({...x,teacherJoinYear:parseInt(r.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.isRetired,onChange:r=>C({...x,isRetired:r.target.checked,teacherLeavingYear:r.target.checked?x.teacherLeavingYear:null}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Has Left/Retired?"})]}),!x.isRetired&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 dark:bg-green-800 dark:text-green-300 text-xs rounded-full",children:"Currently Serving"})]}),x.isRetired&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Leaving/Retirement Year *"}),e.jsx("input",{type:"number",value:x.teacherLeavingYear||"",onChange:r=>C({...x,teacherLeavingYear:r.target.value?parseInt(r.target.value):null}),placeholder:"Year of leaving",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"A unique Serial ID will be automatically generated for all users based on their academic information."})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:G,disabled:F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:F?"Creating...":"Create User"})]})]})}),g&&o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Edit User"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:o.fullName,onChange:r=>j({...o,fullName:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:o.email,onChange:r=>j({...o,email:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),e.jsxs("select",{value:o.role,onChange:r=>j({...o,role:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"USER",children:"Alumni"}),e.jsx("option",{value:"TEACHER",children:"Teacher"}),e.jsx("option",{value:"BATCH_ADMIN",children:"Batch Admin"}),e.jsx("option",{value:"SUPER_ADMIN",children:"Super Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Batch"}),e.jsx("input",{type:"number",value:o.batch,onChange:r=>j({...o,batch:parseInt(r.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),o.serialId&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Serial ID"}),e.jsx("p",{className:"font-mono text-sm bg-gray-100 dark:bg-gray-700 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-300",children:o.serialId})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o.isAlumniVerified,onChange:r=>j({...o,isAlumniVerified:r.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Verified Alumni"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{I(!1),j(null)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:xe,disabled:F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:F?"Saving...":"Save Changes"})]})]})}),w&&o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-sm w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Reset Password"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Reset password for ",o.fullName]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:"password",value:b,onChange:r=>D(r.target.value),placeholder:"Minimum 8 characters",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{k(!1),j(null),D("")},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:ge,disabled:F,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:F?"Resetting...":"Reset Password"})]})]})})]})}function We({org:a,stats:i}){const m=[{label:"Users",value:a._count?.users||0,icon:K,color:"blue"},{label:"Events",value:a._count?.events||0,icon:Pe,color:"green"},{label:"Posts",value:a._count?.posts||0,icon:O,color:"purple"},{label:"Albums",value:a._count?.albums||0,icon:_,color:"pink"},{label:"Photos",value:a._count?.photos||0,icon:_,color:"indigo"},{label:"Groups",value:a._count?.groups||0,icon:Re,color:"orange"},{label:"Polls",value:a._count?.polls||0,icon:ne,color:"cyan"},{label:"Tickets",value:a._count?.tickets||0,icon:Ge,color:"red"},{label:"Transactions",value:a._count?.transactions||0,icon:_e,color:"yellow"},{label:"Sponsors",value:a._count?.sponsors||0,icon:le,color:"teal"},{label:"Notifications",value:a._count?.notifications||0,icon:O,color:"gray"}],u={blue:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400",green:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400",purple:"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400",pink:"bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-400",indigo:"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400",orange:"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400",cyan:"bg-cyan-50 dark:bg-cyan-900/20 text-cyan-600 dark:text-cyan-400",red:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400",yellow:"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400",teal:"bg-teal-50 dark:bg-teal-900/20 text-teal-600 dark:text-teal-400",gray:"bg-gray-50 dark:bg-gray-700/50 text-gray-600 dark:text-gray-400"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Organization Statistics"})}),e.jsx("div",{className:"p-5",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:m.map(h=>{const N=h.icon;return e.jsxs("div",{className:`p-4 rounded-xl ${u[h.color]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(N,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:h.label})]}),e.jsx("p",{className:"text-2xl font-bold",children:h.value})]},h.label)})})})]}),i?.content&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Content Overview"})}),e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i.content.posts}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Posts"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i.content.events}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Events"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i.content.albums}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Albums"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i.content.photos}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Photos"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i.content.polls}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Polls"})]})]})})]})]})}function Xe({org:a}){const{auth:i}=X(),[m,u]=l.useState([]),[h,N]=l.useState(!0),[t,p]=l.useState({page:1,limit:50,total:0,totalPages:0}),[s,E]=l.useState(""),v=async()=>{N(!0);try{const d=new URLSearchParams({page:t.page.toString(),limit:t.limit.toString(),...s&&{action:s}}),S=await(await fetch(`/api/developer/organizations/${a.id}/activity-logs?${d}`,{headers:{Authorization:`Bearer ${i?.token}`}})).json();S.success&&(u(S.data.logs),p(S.data.pagination))}catch{n.error("Failed to load activity logs")}finally{N(!1)}};l.useEffect(()=>{a?.id&&v()},[a?.id,t.page,s]);const f=d=>d.includes("create")||d.includes("register")?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":d.includes("update")||d.includes("edit")?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":d.includes("delete")||d.includes("remove")?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":d.includes("login")||d.includes("logout")?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[e.jsx("input",{type:"text",placeholder:"Filter by action...",value:s,onChange:d=>E(d.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white w-full sm:w-64"}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-blue-500"}),"Activity Logs",e.jsxs("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",t.total," records)"]})]})}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:h?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):m.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(de,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No activity logs found"})]}):m.map(d=>e.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:d.user?.avatarUrl?e.jsx("img",{src:d.user.avatarUrl,alt:"",className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 dark:text-gray-300 font-medium",children:d.user?.fullName?.charAt(0)||"?"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:d.user?.fullName||"Unknown User"}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full w-fit ${f(d.action)}`,children:d.action})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[d.user?.email,d.user?.role&&e.jsx("span",{className:"ml-2 px-1.5 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 rounded",children:d.user.role})]}),d.details&&e.jsx("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-gray-700/50 rounded text-xs text-gray-600 dark:text-gray-400 font-mono overflow-x-auto",children:typeof d.details=="object"?JSON.stringify(d.details,null,2):d.details}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:new Date(d.createdAt).toLocaleString()}),d.ipAddress&&e.jsxs("span",{children:["IP: ",d.ipAddress]})]})]})]})},d.id))}),t.totalPages>1&&e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",t.page," of ",t.totalPages]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p(d=>({...d,page:d.page-1})),disabled:t.page<=1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>p(d=>({...d,page:d.page+1})),disabled:t.page>=t.totalPages,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm disabled:opacity-50",children:"Next"})]})]})]})]})}function ea({orgId:a,orgName:i}){const[m,u]=l.useState(!1),[h,N]=l.useState(""),[t,p]=l.useState({provider:"SMTP",smtpHost:"",smtpPort:587,smtpSecure:!1,smtpUser:"",smtpPassword:"",sendgridApiKey:"",resendApiKey:"",mailgunApiKey:"",mailgunDomain:"",mailersendApiKey:"",fromEmail:"",fromName:i,replyTo:"",dailyEmailLimit:1e3,monthlyEmailLimit:25e3}),{data:s,isLoading:E,refetch:v}=ve(a),{data:f}=we(a),[d,{isLoading:$}]=Se(),[S,{isLoading:T}]=Ce(),[M,{isLoading:c}]=Ae(),[y,{isLoading:P}]=Ee(),[Y,{isLoading:L}]=Me(),g=s?.config,I=s?.dnsRecords,w=f?.stats;l.useEffect(()=>{g&&p({provider:g.provider||"SMTP",smtpHost:g.smtpHost||"",smtpPort:g.smtpPort||587,smtpSecure:g.smtpSecure||!1,smtpUser:g.smtpUser||"",smtpPassword:"",sendgridApiKey:"",resendApiKey:"",mailgunApiKey:"",mailgunDomain:g.mailgunDomain||"",mailersendApiKey:"",fromEmail:g.fromEmail||"",fromName:g.fromName||i,replyTo:g.replyTo||"",dailyEmailLimit:g.dailyEmailLimit||1e3,monthlyEmailLimit:g.monthlyEmailLimit||25e3})},[g,i]);const k=b=>{const{name:D,value:z,type:B}=b.target,H=b.target.checked;p(G=>({...G,[D]:B==="checkbox"?H:B==="number"?parseInt(z)||0:z}))},o=async()=>{try{await d({orgId:a,data:t}).unwrap(),n.success("Email configuration saved! Test and activate to enable."),v()}catch(b){n.error(b?.data?.message||"Failed to save email configuration")}},j=async()=>{try{const b=await S({orgId:a,testEmail:h||void 0}).unwrap();b.success?(n.success(b.testEmailSent?"Connection verified and test email sent!":"Connection verified!"),v()):n.error(b.error||"Test failed")}catch(b){n.error(b?.data?.message||"Failed to test email configuration")}},F=async()=>{try{await M(a).unwrap(),n.success("Email configuration activated!"),v()}catch(b){n.error(b?.data?.message||"Failed to activate email configuration")}},R=async()=>{try{await y(a).unwrap(),n.success("Email configuration deactivated. Using default system emails."),v()}catch(b){n.error(b?.data?.message||"Failed to deactivate email configuration")}},x=async()=>{if(confirm("Are you sure you want to delete the email configuration? This cannot be undone."))try{await Y(a).unwrap(),n.success("Email configuration deleted"),v()}catch(b){n.error(b?.data?.message||"Failed to delete email configuration")}},C=[{value:"SMTP",label:"Custom SMTP",description:"Use your own SMTP server"},{value:"GMAIL",label:"Gmail",description:"Gmail with App Password"},{value:"SENDGRID",label:"SendGrid",description:"SendGrid email API"},{value:"RESEND",label:"Resend",description:"Resend email API"},{value:"MAILGUN",label:"Mailgun",description:"Mailgun email API"},{value:"MAILERSEND",label:"MailerSend",description:"MailerSend email API"}];return E?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[g&&e.jsx("div",{className:`p-4 rounded-lg ${g.isActive?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":g.isVerified?"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800":"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${g.isActive?"bg-green-100 dark:bg-green-800":"bg-gray-100 dark:bg-gray-700"}`,children:e.jsx(re,{className:`h-5 w-5 ${g.isActive?"text-green-600 dark:text-green-400":"text-gray-500"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:g.isActive?"Custom Email Active":g.isVerified?"Ready to Activate":"Not Configured"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:g.isActive?`Sending from ${g.fromEmail}`:g.isVerified?"Configuration verified. Click Activate to enable.":"Configure and test your email settings below."})]})]}),e.jsx("div",{className:"flex gap-2",children:g.isActive?e.jsx("button",{onClick:R,disabled:P,className:"px-3 py-1.5 text-sm border border-orange-300 text-orange-600 hover:bg-orange-50 dark:border-orange-700 dark:text-orange-400 rounded-lg",children:P?"Deactivating...":"Deactivate"}):g.isVerified?e.jsx("button",{onClick:F,disabled:c,className:"px-3 py-1.5 text-sm bg-green-600 text-white hover:bg-green-700 rounded-lg",children:c?"Activating...":"Activate"}):null})]})}),w&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Email Usage"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Daily Usage"}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsxs("span",{children:[w.dailyEmailsSent," / ",w.dailyEmailLimit]}),e.jsxs("span",{children:[w.dailyUsagePercent,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${w.dailyUsagePercent>80?"bg-red-500":w.dailyUsagePercent>50?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(w.dailyUsagePercent,100)}%`}})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monthly Usage"}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsxs("span",{children:[w.monthlyEmailsSent," / ",w.monthlyEmailLimit]}),e.jsxs("span",{children:[w.monthlyUsagePercent,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${w.monthlyUsagePercent>80?"bg-red-500":w.monthlyUsagePercent>50?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(w.monthlyUsagePercent,100)}%`}})})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Email Provider"})}),e.jsx("div",{className:"p-5",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:C.map(b=>e.jsxs("button",{onClick:()=>p(D=>({...D,provider:b.value})),className:`p-4 rounded-lg border-2 text-left transition-all ${t.provider===b.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:b.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:b.description})]},b.value))})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.provider==="SMTP"?"SMTP Settings":`${t.provider} Configuration`})}),e.jsxs("div",{className:"p-5 space-y-4",children:[(t.provider==="SMTP"||t.provider==="GMAIL")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["SMTP Host ",t.provider==="GMAIL"&&e.jsx("span",{className:"text-gray-400",children:"(smtp.gmail.com)"})]}),e.jsx("input",{type:"text",name:"smtpHost",value:t.smtpHost,onChange:k,placeholder:t.provider==="GMAIL"?"smtp.gmail.com":"smtp.example.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Port"}),e.jsx("input",{type:"number",name:"smtpPort",value:t.smtpPort,onChange:k,placeholder:"587",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username / Email"}),e.jsx("input",{type:"text",name:"smtpUser",value:t.smtpUser,onChange:k,placeholder:"your@email.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Password ",t.provider==="GMAIL"&&e.jsx("span",{className:"text-gray-400",children:"(App Password)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",name:"smtpPassword",value:t.smtpPassword,onChange:k,placeholder:g?.smtpPassword?"":"Enter password",className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("button",{type:"button",onClick:()=>u(!m),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(q,{className:"h-5 w-5"})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"smtpSecure",checked:t.smtpSecure,onChange:k,id:"smtpSecure",className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("label",{htmlFor:"smtpSecure",className:"text-sm text-gray-700 dark:text-gray-300",children:"Use SSL/TLS (Port 465)"})]})]}),t.provider==="SENDGRID"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SendGrid API Key"}),e.jsx("input",{type:m?"text":"password",name:"sendgridApiKey",value:t.sendgridApiKey,onChange:k,placeholder:g?.sendgridApiKey?"":"SG.xxxxx...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),t.provider==="RESEND"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Resend API Key"}),e.jsx("input",{type:m?"text":"password",name:"resendApiKey",value:t.resendApiKey,onChange:k,placeholder:g?.resendApiKey?"":"re_xxxxx...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),t.provider==="MAILGUN"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mailgun API Key"}),e.jsx("input",{type:m?"text":"password",name:"mailgunApiKey",value:t.mailgunApiKey,onChange:k,placeholder:g?.mailgunApiKey?"":"key-xxxxx...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mailgun Domain"}),e.jsx("input",{type:"text",name:"mailgunDomain",value:t.mailgunDomain,onChange:k,placeholder:"mg.yourdomain.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),t.provider==="MAILERSEND"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"MailerSend API Key"}),e.jsx("input",{type:m?"text":"password",name:"mailersendApiKey",value:t.mailersendApiKey,onChange:k,placeholder:g?.mailersendApiKey?"":"mlsn.xxxxx...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Get your API key from MailerSend dashboard  Email  Domains  API Tokens"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Sender Details"})}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Email *"}),e.jsx("input",{type:"email",name:"fromEmail",value:t.fromEmail,onChange:k,placeholder:"noreply@yourdomain.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Name *"}),e.jsx("input",{type:"text",name:"fromName",value:t.fromName,onChange:k,placeholder:"Alumni Portal",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reply-To Email (optional)"}),e.jsx("input",{type:"email",name:"replyTo",value:t.replyTo,onChange:k,placeholder:"support@yourdomain.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Rate Limits"})}),e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Daily Email Limit"}),e.jsx("input",{type:"number",name:"dailyEmailLimit",value:t.dailyEmailLimit,onChange:k,min:100,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Monthly Email Limit"}),e.jsx("input",{type:"number",name:"monthlyEmailLimit",value:t.monthlyEmailLimit,onChange:k,min:1e3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})})]}),I&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"DNS Records (For Domain Verification)"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Add these records to your domain's DNS settings for better deliverability."})]}),e.jsx("div",{className:"p-5 space-y-4",children:Object.entries(I).map(([b,D])=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:b}),e.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:D.type})]}),e.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 break-all",children:D.name}),e.jsx("p",{className:"text-xs font-mono text-gray-500 dark:text-gray-400 mt-1 break-all",children:D.value})]},b))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Test Configuration"})}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Send Test Email To (optional)"}),e.jsx("input",{type:"email",value:h,onChange:b=>N(b.target.value),placeholder:"test@example.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to only verify connection without sending a test email."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:o,disabled:$||!t.fromEmail||!t.fromName,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:$?"Saving...":"Save Configuration"}),e.jsx("button",{onClick:j,disabled:T||!g,className:"px-4 py-2 border border-green-500 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg disabled:opacity-50 transition-colors",children:T?"Testing...":"Test Connection"}),g&&e.jsx("button",{onClick:x,disabled:L,className:"px-4 py-2 border border-red-300 text-red-600 hover:bg-red-50 dark:border-red-700 dark:hover:bg-red-900/20 rounded-lg disabled:opacity-50 transition-colors ml-auto",children:L?"Deleting...":"Delete Config"})]})]})]})]})}function aa({org:a,formData:i,isEditing:m,handleInputChange:u}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Resource Limits"})}),e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(K,{className:"h-4 w-4 inline mr-1"}),"Maximum Users"]}),m?e.jsx("input",{type:"number",name:"maxUsers",value:i.maxUsers,onChange:u,min:1,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"}):e.jsxs("p",{className:"text-gray-900 dark:text-white py-2",children:[e.jsx("span",{className:"font-medium",children:a._count?.users||0}),e.jsxs("span",{className:"text-gray-400",children:[" / ",a.maxUsers]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Storage Quota (MB)"}),m?e.jsx("input",{type:"number",name:"storageQuotaMB",value:i.storageQuotaMB,onChange:u,min:100,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"}):e.jsxs("p",{className:"text-gray-900 dark:text-white py-2",children:[a.storageQuotaMB," MB"]})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-red-200 dark:border-red-900",children:[e.jsx("div",{className:"p-5 border-b border-red-200 dark:border-red-900 bg-red-50 dark:bg-red-900/20 rounded-t-xl",children:e.jsx("h2",{className:"text-lg font-semibold text-red-700 dark:text-red-400",children:"Danger Zone"})}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Deactivate Organization"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Temporarily disable this organization. Users will not be able to access it."})]}),e.jsx("button",{className:"px-4 py-2 border border-orange-300 text-orange-600 hover:bg-orange-50 dark:border-orange-700 dark:text-orange-400 dark:hover:bg-orange-900/20 rounded-lg font-medium transition-colors",children:"Deactivate"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Delete Organization"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Permanently delete this organization and all its data. This action cannot be undone."})]}),e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg font-medium transition-colors",children:"Delete"})]})]})]})]})}export{$a as default};
//# sourceMappingURL=OrganizationDetailsPage-dCxHfohS.js.map
