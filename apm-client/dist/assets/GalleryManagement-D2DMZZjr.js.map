{"version":3,"file":"GalleryManagement-D2DMZZjr.js","sources":["../../node_modules/@heroicons/react/24/outline/esm/ArrowsRightLeftIcon.js","../../node_modules/@heroicons/react/24/outline/esm/CloudArrowUpIcon.js","../../src/components/common/UI/ImageUploader.tsx","../../src/components/admin/Gallery/CreateAlbumModal.tsx","../../src/components/admin/Gallery/EditAlbumModal.tsx","../../src/components/admin/Gallery/EditPhotoModal.tsx","../../src/components/admin/Gallery/MovePhotosModal.tsx","../../src/components/admin/Gallery/UploadPhotosModal.tsx","../../src/components/admin/Gallery/AlbumPhotosView.tsx","../../src/pages/admin/GalleryManagement.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction ArrowsRightLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowsRightLeftIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CloudArrowUpIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CloudArrowUpIcon);\nexport default ForwardRef;","import { FC, useCallback, useState, DragEvent, ChangeEvent } from 'react';\nimport { CloudArrowUpIcon, XMarkIcon, PhotoIcon } from '@heroicons/react/24/outline';\n\ninterface ImageUploaderProps {\n  onFilesSelected: (files: File[]) => void;\n  maxFiles?: number;\n  maxSize?: number; // in MB\n  accept?: string;\n  multiple?: boolean;\n  selectedFiles?: File[];\n  onRemoveFile?: (index: number) => void;\n}\n\nconst ImageUploader: FC<ImageUploaderProps> = ({\n  onFilesSelected,\n  maxFiles = 20,\n  maxSize = 5,\n  accept = 'image/jpeg,image/jpg,image/png,image/webp,image/gif',\n  multiple = true,\n  selectedFiles = [],\n  onRemoveFile,\n}) => {\n  const [isDragging, setIsDragging] = useState(false);\n  const [errors, setErrors] = useState<string[]>([]);\n\n  const validateFiles = (files: FileList | File[]): File[] => {\n    const validFiles: File[] = [];\n    const newErrors: string[] = [];\n    const fileArray = Array.from(files);\n\n    // Check total count\n    if (selectedFiles.length + fileArray.length > maxFiles) {\n      newErrors.push(`Maximum ${maxFiles} files allowed`);\n      setErrors(newErrors);\n      return validFiles;\n    }\n\n    fileArray.forEach((file) => {\n      // Check file type\n      if (!accept.split(',').some(type => file.type.match(type.replace('*', '.*')))) {\n        newErrors.push(`${file.name}: Invalid file type`);\n        return;\n      }\n\n      // Check file size\n      const sizeMB = file.size / (1024 * 1024);\n      if (sizeMB > maxSize) {\n        newErrors.push(`${file.name}: File too large (max ${maxSize}MB)`);\n        return;\n      }\n\n      validFiles.push(file);\n    });\n\n    setErrors(newErrors);\n    return validFiles;\n  };\n\n  const handleDragOver = useCallback((e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragging(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragging(false);\n  }, []);\n\n  const handleDrop = useCallback(\n    (e: DragEvent<HTMLDivElement>) => {\n      e.preventDefault();\n      setIsDragging(false);\n\n      const files = e.dataTransfer.files;\n      if (files.length > 0) {\n        const validFiles = validateFiles(files);\n        if (validFiles.length > 0) {\n          onFilesSelected(validFiles);\n        }\n      }\n    },\n    [onFilesSelected, validateFiles]\n  );\n\n  const handleFileInput = useCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      const files = e.target.files;\n      if (files && files.length > 0) {\n        const validFiles = validateFiles(files);\n        if (validFiles.length > 0) {\n          onFilesSelected(validFiles);\n        }\n      }\n      // Reset input\n      e.target.value = '';\n    },\n    [onFilesSelected, validateFiles]\n  );\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n  };\n\n  return (\n    <div className=\"w-full\">\n      {/* Drop Zone */}\n      <div\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n        className={`relative border-2 border-dashed rounded-lg p-8 sm:p-12 text-center transition-all ${\n          isDragging\n            ? 'border-guild-600 bg-guild-50 dark:bg-guild-900/20'\n            : 'border-gray-300 dark:border-gray-600 hover:border-guild-500 dark:hover:border-guild-500'\n        }`}\n      >\n        <input\n          type=\"file\"\n          id=\"file-upload\"\n          className=\"hidden\"\n          accept={accept}\n          multiple={multiple}\n          onChange={handleFileInput}\n        />\n\n        <label\n          htmlFor=\"file-upload\"\n          className=\"cursor-pointer flex flex-col items-center justify-center\"\n        >\n          <CloudArrowUpIcon\n            className={`w-16 h-16 sm:w-20 sm:h-20 mb-4 transition-colors ${\n              isDragging\n                ? 'text-guild-600 dark:text-guild-400'\n                : 'text-gray-400 dark:text-gray-500'\n            }`}\n          />\n\n          <p className=\"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n            {isDragging ? 'Drop files here' : 'Drag & drop photos here'}\n          </p>\n\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-4\">\n            or click to browse\n          </p>\n\n          <p className=\"text-xs text-gray-400 dark:text-gray-500\">\n            {multiple ? `Max ${maxFiles} files` : '1 file'} • {maxSize}MB per file • JPG, PNG, WebP, GIF\n          </p>\n        </label>\n      </div>\n\n      {/* Error Messages */}\n      {errors.length > 0 && (\n        <div className=\"mt-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3\">\n          <ul className=\"text-sm text-red-600 dark:text-red-400 space-y-1\">\n            {errors.map((error, index) => (\n              <li key={index}>• {error}</li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      {/* Selected Files Preview */}\n      {selectedFiles.length > 0 && (\n        <div className=\"mt-6\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h4 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300\">\n              Selected Files ({selectedFiles.length})\n            </h4>\n            <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n              Total: {formatFileSize(selectedFiles.reduce((acc, file) => acc + file.size, 0))}\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\">\n            {selectedFiles.map((file, index) => (\n              <div\n                key={index}\n                className=\"relative group bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden\"\n              >\n                {/* Preview Image */}\n                <div className=\"aspect-square bg-gray-100 dark:bg-gray-700 overflow-hidden\">\n                  <img\n                    src={URL.createObjectURL(file)}\n                    alt={file.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                </div>\n\n                {/* File Info */}\n                <div className=\"p-2\">\n                  <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300 truncate\">\n                    {file.name}\n                  </p>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                    {formatFileSize(file.size)}\n                  </p>\n                </div>\n\n                {/* Remove Button */}\n                {onRemoveFile && (\n                  <button\n                    onClick={() => onRemoveFile(index)}\n                    className=\"absolute top-2 right-2 p-1 bg-red-600 hover:bg-red-700 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                    aria-label=\"Remove file\"\n                  >\n                    <XMarkIcon className=\"w-4 h-4\" />\n                  </button>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ImageUploader;\n","import { FC, Fragment, useState } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { toast } from 'react-hot-toast';\nimport { useCreateAlbumMutation } from '../../../store/api/galleryApi';\nimport ImageUploader from '../../common/UI/ImageUploader';\n\ninterface CreateAlbumModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nconst CreateAlbumModal: FC<CreateAlbumModalProps> = ({ isOpen, onClose, onSuccess }) => {\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [coverImage, setCoverImage] = useState<File | null>(null);\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n\n  const [createAlbum, { isLoading }] = useCreateAlbumMutation();\n\n  const validate = (): boolean => {\n    const newErrors: { [key: string]: string } = {};\n\n    if (!name.trim()) {\n      newErrors.name = 'Album name is required';\n    } else if (name.trim().length < 2) {\n      newErrors.name = 'Album name must be at least 2 characters';\n    } else if (name.trim().length > 100) {\n      newErrors.name = 'Album name must be less than 100 characters';\n    }\n\n    if (description && description.length > 500) {\n      newErrors.description = 'Description must be less than 500 characters';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validate()) return;\n\n    try {\n      await createAlbum({\n        name: name.trim(),\n        description: description.trim() || undefined,\n        coverImage: coverImage || undefined,\n      }).unwrap();\n\n      toast.success('Album created successfully');\n      handleClose();\n      onSuccess?.();\n    } catch (error: any) {\n      toast.error(error?.data?.message || 'Failed to create album');\n    }\n  };\n\n  const handleClose = () => {\n    setName('');\n    setDescription('');\n    setCoverImage(null);\n    setErrors({});\n    onClose();\n  };\n\n  const handleFilesSelected = (files: File[]) => {\n    if (files.length > 0) {\n      setCoverImage(files[0]);\n    }\n  };\n\n  const handleRemoveFile = () => {\n    setCoverImage(null);\n  };\n\n  return (\n    <Transition appear show={isOpen} as={Fragment}>\n      <Dialog as=\"div\" className=\"relative z-50\" onClose={handleClose}>\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm\" />\n        </Transition.Child>\n\n        <div className=\"fixed inset-0 overflow-y-auto\">\n          <div className=\"flex min-h-full items-center justify-center p-4\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <Dialog.Panel className=\"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-xl transition-all\">\n                {/* Header */}\n                <div className=\"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4\">\n                  <Dialog.Title className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                    Create Album\n                  </Dialog.Title>\n                  <button\n                    onClick={handleClose}\n                    className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors\"\n                  >\n                    <XMarkIcon className=\"w-6 h-6\" />\n                  </button>\n                </div>\n\n                {/* Form */}\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n                  {/* Album Name */}\n                  <div>\n                    <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Album Name <span className=\"text-red-500\">*</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      id=\"name\"\n                      value={name}\n                      onChange={(e) => setName(e.target.value)}\n                      className={`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${\n                        errors.name\n                          ? 'border-red-500 focus:ring-red-500'\n                          : 'border-gray-300 dark:border-gray-600 focus:ring-guild-500'\n                      } rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500`}\n                      placeholder=\"e.g., Graduation 2024\"\n                      maxLength={100}\n                    />\n                    {errors.name && <p className=\"mt-1 text-sm text-red-500\">{errors.name}</p>}\n                    <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                      {name.length}/100 characters\n                    </p>\n                  </div>\n\n                  {/* Description */}\n                  <div>\n                    <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Description\n                    </label>\n                    <textarea\n                      id=\"description\"\n                      value={description}\n                      onChange={(e) => setDescription(e.target.value)}\n                      rows={4}\n                      className={`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${\n                        errors.description\n                          ? 'border-red-500 focus:ring-red-500'\n                          : 'border-gray-300 dark:border-gray-600 focus:ring-guild-500'\n                      } rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 resize-none`}\n                      placeholder=\"Optional description for this album...\"\n                      maxLength={500}\n                    />\n                    {errors.description && <p className=\"mt-1 text-sm text-red-500\">{errors.description}</p>}\n                    <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                      {description.length}/500 characters\n                    </p>\n                  </div>\n\n                  {/* Cover Image */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Cover Image\n                    </label>\n                    <ImageUploader\n                      onFilesSelected={handleFilesSelected}\n                      maxFiles={1}\n                      maxSize={3}\n                      accept=\"image/jpeg,image/jpg,image/png,image/webp\"\n                      multiple={false}\n                      selectedFiles={coverImage ? [coverImage] : []}\n                      onRemoveFile={handleRemoveFile}\n                    />\n                    <p className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">\n                      Max 3MB • JPG, PNG, WebP\n                    </p>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                    <button\n                      type=\"button\"\n                      onClick={handleClose}\n                      className=\"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium\"\n                      disabled={isLoading}\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={isLoading}\n                      className=\"px-6 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                    >\n                      {isLoading ? (\n                        <>\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                          Creating...\n                        </>\n                      ) : (\n                        'Create Album'\n                      )}\n                    </button>\n                  </div>\n                </form>\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </div>\n      </Dialog>\n    </Transition>\n  );\n};\n\nexport default CreateAlbumModal;\n","import { FC, Fragment, useState, useEffect } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { toast } from 'react-hot-toast';\nimport { useUpdateAlbumMutation, useGetAlbumQuery } from '../../../store/api/galleryApi';\nimport ImageUploader from '../../common/UI/ImageUploader';\nimport type { Album } from '../../../types/gallery';\nimport { getApiUrl } from '@/utils/helpers';\n\ninterface EditAlbumModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  album: Album | null;\n  onSuccess?: () => void;\n}\n\nconst EditAlbumModal: FC<EditAlbumModalProps> = ({ isOpen, onClose, album, onSuccess }) => {\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [coverImage, setCoverImage] = useState<File | null>(null);\n  const [isArchived, setIsArchived] = useState(false);\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n  const [coverImageKey, setCoverImageKey] = useState(0); // Key to force re-render of cover image\n\n  const [updateAlbum, { isLoading }] = useUpdateAlbumMutation();\n\n  // Fetch the latest album data when modal is open\n  const { data: latestAlbumData } = useGetAlbumQuery(\n    { albumId: album?.id || '', includePhotos: false },\n    { skip: !album?.id || !isOpen }\n  );\n\n  const currentAlbum = latestAlbumData?.data.album || album;\n\n  // Populate form when album changes\n  useEffect(() => {\n    if (currentAlbum) {\n      setName(currentAlbum.name);\n      setDescription(currentAlbum.description || '');\n      setIsArchived(currentAlbum.isArchived);\n      setCoverImage(null); // Reset cover image file\n      setCoverImageKey(prev => prev + 1); // Force re-render of cover image\n    }\n  }, [currentAlbum?.updatedAt, currentAlbum?.id]);\n\n  const validate = (): boolean => {\n    const newErrors: { [key: string]: string } = {};\n\n    if (!name.trim()) {\n      newErrors.name = 'Album name is required';\n    } else if (name.trim().length < 2) {\n      newErrors.name = 'Album name must be at least 2 characters';\n    } else if (name.trim().length > 100) {\n      newErrors.name = 'Album name must be less than 100 characters';\n    }\n\n    if (description && description.length > 500) {\n      newErrors.description = 'Description must be less than 500 characters';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!currentAlbum || !validate()) return;\n\n    try {\n      await updateAlbum({\n        albumId: currentAlbum.id,\n        data: {\n          name: name.trim(),\n          description: description.trim() || undefined,\n          isArchived,\n          coverImage: coverImage || undefined,\n        },\n      }).unwrap();\n\n      toast.success('Album updated successfully');\n      handleClose();\n      onSuccess?.();\n    } catch (error: any) {\n      toast.error(error?.data?.message || 'Failed to update album');\n    }\n  };\n\n  const handleClose = () => {\n    setErrors({});\n    setCoverImage(null);\n    onClose();\n  };\n\n  const handleFilesSelected = (files: File[]) => {\n    if (files.length > 0) {\n      setCoverImage(files[0]);\n    }\n  };\n\n  const handleRemoveFile = () => {\n    setCoverImage(null);\n  };\n\n  if (!album) return null;\n\n  return (\n    <Transition appear show={isOpen} as={Fragment}>\n      <Dialog as=\"div\" className=\"relative z-50\" onClose={handleClose}>\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm\" />\n        </Transition.Child>\n\n        <div className=\"fixed inset-0 overflow-y-auto\">\n          <div className=\"flex min-h-full items-center justify-center p-4\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <Dialog.Panel className=\"w-full max-w-2xl max-h-[90vh] flex flex-col transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-xl transition-all\">\n                {/* Header */}\n                <div className=\"flex-shrink-0 flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4\">\n                  <Dialog.Title className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                    Edit Album\n                  </Dialog.Title>\n                  <button\n                    onClick={handleClose}\n                    className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors\"\n                  >\n                    <XMarkIcon className=\"w-6 h-6\" />\n                  </button>\n                </div>\n\n                {/* Form - Scrollable */}\n                <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 overflow-hidden\">\n                  <div className=\"flex-1 overflow-y-auto px-6 py-6 space-y-6\">\n                  {/* Album Name */}\n                  <div>\n                    <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Album Name <span className=\"text-red-500\">*</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      id=\"name\"\n                      value={name}\n                      onChange={(e) => setName(e.target.value)}\n                      className={`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${\n                        errors.name\n                          ? 'border-red-500 focus:ring-red-500'\n                          : 'border-gray-300 dark:border-gray-600 focus:ring-guild-500'\n                      } rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500`}\n                      placeholder=\"e.g., Graduation 2024\"\n                      maxLength={100}\n                    />\n                    {errors.name && <p className=\"mt-1 text-sm text-red-500\">{errors.name}</p>}\n                    <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                      {name.length}/100 characters\n                    </p>\n                  </div>\n\n                  {/* Description */}\n                  <div>\n                    <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Description\n                    </label>\n                    <textarea\n                      id=\"description\"\n                      value={description}\n                      onChange={(e) => setDescription(e.target.value)}\n                      rows={4}\n                      className={`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${\n                        errors.description\n                          ? 'border-red-500 focus:ring-red-500'\n                          : 'border-gray-300 dark:border-gray-600 focus:ring-guild-500'\n                      } rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 resize-none`}\n                      placeholder=\"Optional description for this album...\"\n                      maxLength={500}\n                    />\n                    {errors.description && <p className=\"mt-1 text-sm text-red-500\">{errors.description}</p>}\n                    <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                      {description.length}/500 characters\n                    </p>\n                  </div>\n\n                  {/* Archive Status */}\n                  <div className=\"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"isArchived\"\n                      checked={isArchived}\n                      onChange={(e) => setIsArchived(e.target.checked)}\n                      className=\"w-5 h-5 text-guild-600 bg-gray-100 border-gray-300 rounded focus:ring-guild-500 dark:focus:ring-guild-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600\"\n                    />\n                    <label htmlFor=\"isArchived\" className=\"text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer\">\n                      Archive this album (hide from active listings)\n                    </label>\n                  </div>\n\n                  {/* Current Cover Image */}\n                  {currentAlbum?.coverImage && !coverImage && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                        Current Cover Image\n                      </label>\n                      <div className=\"relative w-full h-48 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700\">\n                        <img\n                          key={coverImageKey}\n                          src={getApiUrl(`/api/albums/cover/${currentAlbum.id}?t=${new Date(currentAlbum.updatedAt).getTime()}`)}\n                          alt={currentAlbum.name}\n                          className=\"w-full h-full object-cover\"\n                        />\n                      </div>\n                      <p className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">\n                        Upload a new image below to replace the current cover\n                      </p>\n                    </div>\n                  )}\n\n                  {/* New Cover Image */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      {album.coverImage && !coverImage ? 'Replace Cover Image' : 'Cover Image'}\n                    </label>\n                    <ImageUploader\n                      onFilesSelected={handleFilesSelected}\n                      maxFiles={1}\n                      maxSize={3}\n                      accept=\"image/jpeg,image/jpg,image/png,image/webp\"\n                      multiple={false}\n                      selectedFiles={coverImage ? [coverImage] : []}\n                      onRemoveFile={handleRemoveFile}\n                    />\n                    <p className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">\n                      Max 3MB • JPG, PNG, WebP\n                    </p>\n                  </div>\n\n                  </div>\n\n                  {/* Actions - Fixed at bottom */}\n                  <div className=\"flex-shrink-0 flex justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900\">\n                    <button\n                      type=\"button\"\n                      onClick={handleClose}\n                      className=\"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium\"\n                      disabled={isLoading}\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={isLoading}\n                      className=\"px-6 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                    >\n                      {isLoading ? (\n                        <>\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                          Updating...\n                        </>\n                      ) : (\n                        'Update Album'\n                      )}\n                    </button>\n                  </div>\n                </form>\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </div>\n      </Dialog>\n    </Transition>\n  );\n};\n\nexport default EditAlbumModal;\n","import { FC, Fragment, useState, useEffect } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { XMarkIcon, XCircleIcon } from '@heroicons/react/24/outline';\nimport { toast } from 'react-hot-toast';\nimport { useUpdatePhotoMutation } from '../../../store/api/galleryApi';\nimport type { Photo } from '../../../types/gallery';\n\ninterface EditPhotoModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  photo: Photo | null;\n  albumId: string;\n  onSuccess?: () => void;\n}\n\nconst EditPhotoModal: FC<EditPhotoModalProps> = ({\n  isOpen,\n  onClose,\n  photo,\n  albumId,\n  onSuccess,\n}) => {\n  const [caption, setCaption] = useState('');\n  const [tagInput, setTagInput] = useState('');\n  const [tags, setTags] = useState<string[]>([]);\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n\n  const [updatePhoto, { isLoading }] = useUpdatePhotoMutation();\n\n  // Populate form when photo changes\n  useEffect(() => {\n    if (photo) {\n      setCaption(photo.caption || '');\n      setTags(photo.tags || []);\n    }\n  }, [photo]);\n\n  const validate = (): boolean => {\n    const newErrors: { [key: string]: string } = {};\n\n    if (caption && caption.length > 500) {\n      newErrors.caption = 'Caption must be less than 500 characters';\n    }\n\n    if (tags.length > 20) {\n      newErrors.tags = 'Maximum 20 tags allowed';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!photo || !validate()) return;\n\n    try {\n      await updatePhoto({\n        albumId,\n        photoId: photo.id,\n        data: {\n          caption: caption.trim() || undefined,\n          tags: tags.length > 0 ? tags : undefined,\n        },\n      }).unwrap();\n\n      toast.success('Photo updated successfully');\n      handleClose();\n      onSuccess?.();\n    } catch (error: any) {\n      toast.error(error?.data?.message || 'Failed to update photo');\n    }\n  };\n\n  const handleClose = () => {\n    setErrors({});\n    onClose();\n  };\n\n  const handleAddTag = () => {\n    const trimmedTag = tagInput.trim();\n    if (trimmedTag && !tags.includes(trimmedTag) && tags.length < 20) {\n      setTags([...tags, trimmedTag]);\n      setTagInput('');\n    }\n  };\n\n  const handleRemoveTag = (tagToRemove: string) => {\n    setTags(tags.filter((tag) => tag !== tagToRemove));\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleAddTag();\n    }\n  };\n\n  if (!photo) return null;\n\n  return (\n    <Transition appear show={isOpen} as={Fragment}>\n      <Dialog as=\"div\" className=\"relative z-50\" onClose={handleClose}>\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm\" />\n        </Transition.Child>\n\n        <div className=\"fixed inset-0 overflow-y-auto\">\n          <div className=\"flex min-h-full items-center justify-center p-4\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <Dialog.Panel className=\"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-xl transition-all\">\n                {/* Header */}\n                <div className=\"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4\">\n                  <Dialog.Title className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                    Edit Photo\n                  </Dialog.Title>\n                  <button\n                    onClick={handleClose}\n                    className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors\"\n                  >\n                    <XMarkIcon className=\"w-6 h-6\" />\n                  </button>\n                </div>\n\n                {/* Form */}\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n                  {/* Photo Preview */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Photo Preview\n                    </label>\n                    <div className=\"w-full h-64 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden\">\n                      <img\n                        src={photo.url}\n                        alt={photo.caption || 'Photo'}\n                        className=\"w-full h-full object-contain\"\n                      />\n                    </div>\n                  </div>\n\n                  {/* Caption */}\n                  <div>\n                    <label htmlFor=\"caption\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Caption\n                    </label>\n                    <textarea\n                      id=\"caption\"\n                      value={caption}\n                      onChange={(e) => setCaption(e.target.value)}\n                      rows={4}\n                      disabled={isLoading}\n                      className={`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${\n                        errors.caption\n                          ? 'border-red-500 focus:ring-red-500'\n                          : 'border-gray-300 dark:border-gray-600 focus:ring-guild-500'\n                      } rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 resize-none disabled:opacity-50`}\n                      placeholder=\"Add a caption for this photo...\"\n                      maxLength={500}\n                    />\n                    {errors.caption && <p className=\"mt-1 text-sm text-red-500\">{errors.caption}</p>}\n                    <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                      {caption.length}/500 characters\n                    </p>\n                  </div>\n\n                  {/* Tags */}\n                  <div>\n                    <label htmlFor=\"tagInput\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Tag People (User IDs)\n                    </label>\n                    <div className=\"flex gap-2\">\n                      <input\n                        type=\"text\"\n                        id=\"tagInput\"\n                        value={tagInput}\n                        onChange={(e) => setTagInput(e.target.value)}\n                        onKeyPress={handleKeyPress}\n                        disabled={isLoading || tags.length >= 20}\n                        className={`flex-1 px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${\n                          errors.tags\n                            ? 'border-red-500 focus:ring-red-500'\n                            : 'border-gray-300 dark:border-gray-600 focus:ring-guild-500'\n                        } rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 disabled:opacity-50`}\n                        placeholder=\"Enter user ID and press Enter\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={handleAddTag}\n                        disabled={isLoading || !tagInput.trim() || tags.length >= 20}\n                        className=\"px-4 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        Add\n                      </button>\n                    </div>\n                    {errors.tags && <p className=\"mt-1 text-sm text-red-500\">{errors.tags}</p>}\n                    <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                      {tags.length}/20 tags • Press Enter or click Add\n                    </p>\n\n                    {/* Tagged Users List */}\n                    {tags.length > 0 && (\n                      <div className=\"mt-3 flex flex-wrap gap-2\">\n                        {tags.map((tag, index) => (\n                          <div\n                            key={index}\n                            className=\"flex items-center gap-2 bg-guild-100 dark:bg-guild-900/30 text-guild-700 dark:text-guild-300 px-3 py-1 rounded-full text-sm\"\n                          >\n                            <span>{tag}</span>\n                            <button\n                              type=\"button\"\n                              onClick={() => handleRemoveTag(tag)}\n                              disabled={isLoading}\n                              className=\"text-guild-600 dark:text-guild-400 hover:text-guild-800 dark:hover:text-guild-200 transition-colors\"\n                            >\n                              <XCircleIcon className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Photo Info */}\n                  {photo.metadata && (\n                    <div className=\"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg\">\n                      <h4 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                        Photo Information\n                      </h4>\n                      <dl className=\"space-y-1 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <dt className=\"text-gray-600 dark:text-gray-400\">Format:</dt>\n                          <dd className=\"text-gray-900 dark:text-white font-medium\">\n                            {photo.metadata.format}\n                          </dd>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <dt className=\"text-gray-600 dark:text-gray-400\">Size:</dt>\n                          <dd className=\"text-gray-900 dark:text-white font-medium\">\n                            {photo.metadata.sizeFormatted}\n                          </dd>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <dt className=\"text-gray-600 dark:text-gray-400\">Original Name:</dt>\n                          <dd className=\"text-gray-900 dark:text-white font-medium truncate ml-2\">\n                            {photo.metadata.originalName}\n                          </dd>\n                        </div>\n                      </dl>\n                    </div>\n                  )}\n\n                  {/* Actions */}\n                  <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                    <button\n                      type=\"button\"\n                      onClick={handleClose}\n                      className=\"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium\"\n                      disabled={isLoading}\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={isLoading}\n                      className=\"px-6 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                    >\n                      {isLoading ? (\n                        <>\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                          Updating...\n                        </>\n                      ) : (\n                        'Save Changes'\n                      )}\n                    </button>\n                  </div>\n                </form>\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </div>\n      </Dialog>\n    </Transition>\n  );\n};\n\nexport default EditPhotoModal;\n","import { FC, Fragment, useState } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { XMarkIcon, ArrowsRightLeftIcon } from '@heroicons/react/24/outline';\nimport { toast } from 'react-hot-toast';\nimport { useGetAlbumsQuery, useMovePhotosMutation } from '../../../store/api/galleryApi';\n\ninterface MovePhotosModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  currentAlbumId: string;\n  photoIds: string[];\n  onSuccess?: () => void;\n}\n\nconst MovePhotosModal: FC<MovePhotosModalProps> = ({\n  isOpen,\n  onClose,\n  currentAlbumId,\n  photoIds,\n  onSuccess,\n}) => {\n  const [targetAlbumId, setTargetAlbumId] = useState('');\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n\n  const { data: albumsData } = useGetAlbumsQuery({ limit: 100, includeArchived: false });\n  const [movePhotos, { isLoading }] = useMovePhotosMutation();\n\n  const albums = albumsData?.data.albums.filter((album) => album.id !== currentAlbumId) || [];\n\n  const validate = (): boolean => {\n    const newErrors: { [key: string]: string } = {};\n\n    if (!targetAlbumId) {\n      newErrors.album = 'Please select a target album';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validate()) return;\n\n    try {\n      const result = await movePhotos({\n        albumId: currentAlbumId,\n        data: {\n          photoIds,\n          targetAlbumId,\n        },\n      }).unwrap();\n\n      const moved = result.data.moved;\n      const failed = result.data.failed;\n\n      if (failed > 0) {\n        toast.success(`Moved ${moved} photos. ${failed} failed.`, { duration: 4000 });\n      } else {\n        toast.success(`Successfully moved ${moved} photos!`);\n      }\n\n      handleClose();\n      onSuccess?.();\n    } catch (error: any) {\n      toast.error(error?.data?.message || 'Failed to move photos');\n    }\n  };\n\n  const handleClose = () => {\n    setTargetAlbumId('');\n    setErrors({});\n    onClose();\n  };\n\n  return (\n    <Transition appear show={isOpen} as={Fragment}>\n      <Dialog as=\"div\" className=\"relative z-50\" onClose={handleClose}>\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm\" />\n        </Transition.Child>\n\n        <div className=\"fixed inset-0 overflow-y-auto\">\n          <div className=\"flex min-h-full items-center justify-center p-4\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <Dialog.Panel className=\"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-xl transition-all\">\n                {/* Header */}\n                <div className=\"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <ArrowsRightLeftIcon className=\"w-6 h-6 text-guild-600 dark:text-guild-400\" />\n                    <Dialog.Title className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                      Move Photos\n                    </Dialog.Title>\n                  </div>\n                  <button\n                    onClick={handleClose}\n                    className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors\"\n                  >\n                    <XMarkIcon className=\"w-6 h-6\" />\n                  </button>\n                </div>\n\n                {/* Form */}\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n                  {/* Info */}\n                  <div className=\"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n                    <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n                      You are about to move{' '}\n                      <span className=\"font-semibold\">{photoIds.length}</span> photo\n                      {photoIds.length !== 1 ? 's' : ''} to a different album.\n                    </p>\n                  </div>\n\n                  {/* Target Album Selection */}\n                  <div>\n                    <label htmlFor=\"targetAlbum\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Move to Album <span className=\"text-red-500\">*</span>\n                    </label>\n                    <select\n                      id=\"targetAlbum\"\n                      value={targetAlbumId}\n                      onChange={(e) => {\n                        setTargetAlbumId(e.target.value);\n                        setErrors((prev) => ({ ...prev, album: '' }));\n                      }}\n                      disabled={isLoading}\n                      className={`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${\n                        errors.album\n                          ? 'border-red-500 focus:ring-red-500'\n                          : 'border-gray-300 dark:border-gray-600 focus:ring-guild-500'\n                      } rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed`}\n                    >\n                      <option value=\"\">-- Select target album --</option>\n                      {albums.map((album) => (\n                        <option key={album.id} value={album.id}>\n                          {album.name} ({album._count?.photos || 0} photos)\n                        </option>\n                      ))}\n                    </select>\n                    {errors.album && <p className=\"mt-1 text-sm text-red-500\">{errors.album}</p>}\n                    {albums.length === 0 && (\n                      <p className=\"mt-2 text-sm text-yellow-600 dark:text-yellow-400\">\n                        No other albums available. Create a new album first.\n                      </p>\n                    )}\n                  </div>\n\n                  {/* Warning */}\n                  <div className=\"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg\">\n                    <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\n                      <strong>Note:</strong> This action will move the selected photos to the target\n                      album. This cannot be undone easily.\n                    </p>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                    <button\n                      type=\"button\"\n                      onClick={handleClose}\n                      className=\"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium\"\n                      disabled={isLoading}\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={isLoading || albums.length === 0}\n                      className=\"px-6 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                    >\n                      {isLoading ? (\n                        <>\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                          Moving...\n                        </>\n                      ) : (\n                        <>\n                          <ArrowsRightLeftIcon className=\"w-4 h-4\" />\n                          Move Photos\n                        </>\n                      )}\n                    </button>\n                  </div>\n                </form>\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </div>\n      </Dialog>\n    </Transition>\n  );\n};\n\nexport default MovePhotosModal;\n","import { FC, Fragment, useState, useEffect } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { toast } from 'react-hot-toast';\nimport { useGetAlbumsQuery, useBulkUploadPhotosMutation } from '../../../store/api/galleryApi';\nimport ImageUploader from '../../common/UI/ImageUploader';\n\ninterface UploadPhotosModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  preselectedAlbumId?: string;\n  onSuccess?: () => void;\n}\n\nconst UploadPhotosModal: FC<UploadPhotosModalProps> = ({\n  isOpen,\n  onClose,\n  preselectedAlbumId,\n  onSuccess,\n}) => {\n  const [selectedAlbumId, setSelectedAlbumId] = useState(preselectedAlbumId || '');\n  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n\n  const { data: albumsData } = useGetAlbumsQuery({ limit: 100, includeArchived: false });\n  const [bulkUpload, { isLoading }] = useBulkUploadPhotosMutation();\n\n  const albums = albumsData?.data.albums || [];\n\n  // Set preselected album when it changes\n  useEffect(() => {\n    if (preselectedAlbumId) {\n      setSelectedAlbumId(preselectedAlbumId);\n    }\n  }, [preselectedAlbumId]);\n\n  const validate = (): boolean => {\n    const newErrors: { [key: string]: string } = {};\n\n    if (!selectedAlbumId) {\n      newErrors.album = 'Please select an album';\n    }\n\n    if (selectedFiles.length === 0) {\n      newErrors.files = 'Please select at least one photo';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validate()) return;\n\n    try {\n      // Start progress\n      setUploadProgress(10);\n\n      // Simulate upload progress for better UX\n      const progressInterval = setInterval(() => {\n        setUploadProgress((prev) => {\n          if (prev >= 90) return prev; // Stop at 90% until actual upload completes\n          return prev + 10;\n        });\n      }, 300); // Update every 300ms\n\n      const result = await bulkUpload({\n        albumId: selectedAlbumId,\n        data: {\n          photos: selectedFiles,\n        },\n      }).unwrap();\n\n      // Clear interval and set to 100%\n      clearInterval(progressInterval);\n      setUploadProgress(100);\n\n      const uploaded = result.data.uploaded.length;\n      const failed = result.data.failed.length;\n\n      // Show success message\n      if (failed > 0) {\n        toast.success(`Uploaded ${uploaded} photos. ${failed} failed.`, { duration: 4000 });\n      } else {\n        toast.success(`Successfully uploaded ${uploaded} photo${uploaded > 1 ? 's' : ''}!`, { duration: 3000 });\n      }\n\n      // Wait a moment to show 100% progress, then close\n      setTimeout(() => {\n        handleClose();\n        onSuccess?.();\n      }, 500);\n    } catch (error: any) {\n      setUploadProgress(0);\n      toast.error(error?.data?.message || 'Failed to upload photos');\n    }\n  };\n\n  const handleClose = () => {\n    setSelectedFiles([]);\n    setUploadProgress(0);\n    setErrors({});\n    if (!preselectedAlbumId) {\n      setSelectedAlbumId('');\n    }\n    onClose();\n  };\n\n  const handleFilesSelected = (files: File[]) => {\n    setSelectedFiles((prev) => [...prev, ...files]);\n    setErrors((prev) => ({ ...prev, files: '' }));\n  };\n\n  const handleRemoveFile = (index: number) => {\n    setSelectedFiles((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  const totalSize = selectedFiles.reduce((acc, file) => acc + file.size, 0);\n  const formattedTotalSize = (totalSize / (1024 * 1024)).toFixed(2);\n\n  return (\n    <Transition appear show={isOpen} as={Fragment}>\n      <Dialog as=\"div\" className=\"relative z-50\" onClose={handleClose}>\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm\" />\n        </Transition.Child>\n\n        <div className=\"fixed inset-0 overflow-y-auto\">\n          <div className=\"flex min-h-full items-center justify-center p-4\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <Dialog.Panel className=\"w-full max-w-3xl max-h-[90vh] flex flex-col transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-xl transition-all\">\n                {/* Header */}\n                <div className=\"flex-shrink-0 flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4\">\n                  <div>\n                    <Dialog.Title className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                      Upload Photos\n                    </Dialog.Title>\n                    {selectedFiles.length > 0 && (\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                        {selectedFiles.length} file{selectedFiles.length !== 1 ? 's' : ''} selected • {formattedTotalSize} MB\n                      </p>\n                    )}\n                  </div>\n                  <button\n                    onClick={handleClose}\n                    className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors\"\n                    disabled={isLoading}\n                  >\n                    <XMarkIcon className=\"w-6 h-6\" />\n                  </button>\n                </div>\n\n                {/* Form - Scrollable */}\n                <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 overflow-hidden\">\n                  <div className=\"flex-1 overflow-y-auto px-6 py-6 space-y-6\">\n                  {/* Album Selection */}\n                  <div>\n                    <label htmlFor=\"album\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Select Album <span className=\"text-red-500\">*</span>\n                    </label>\n                    <select\n                      id=\"album\"\n                      value={selectedAlbumId}\n                      onChange={(e) => {\n                        setSelectedAlbumId(e.target.value);\n                        setErrors((prev) => ({ ...prev, album: '' }));\n                      }}\n                      disabled={!!preselectedAlbumId || isLoading}\n                      className={`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${\n                        errors.album\n                          ? 'border-red-500 focus:ring-red-500'\n                          : 'border-gray-300 dark:border-gray-600 focus:ring-guild-500'\n                      } rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed`}\n                    >\n                      <option value=\"\">-- Select an album --</option>\n                      {albums.map((album) => (\n                        <option key={album.id} value={album.id}>\n                          {album.name} ({album._count?.photos || 0} photos)\n                        </option>\n                      ))}\n                    </select>\n                    {errors.album && <p className=\"mt-1 text-sm text-red-500\">{errors.album}</p>}\n                  </div>\n\n                  {/* File Uploader */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Photos <span className=\"text-red-500\">*</span>\n                    </label>\n                    <ImageUploader\n                      onFilesSelected={handleFilesSelected}\n                      maxFiles={20}\n                      maxSize={5}\n                      accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\n                      multiple={true}\n                      selectedFiles={selectedFiles}\n                      onRemoveFile={handleRemoveFile}\n                    />\n                    {errors.files && <p className=\"mt-2 text-sm text-red-500\">{errors.files}</p>}\n                  </div>\n\n                  {/* Upload Progress */}\n                  {isLoading && uploadProgress > 0 && (\n                    <div>\n                      <div className=\"flex justify-between text-sm text-gray-700 dark:text-gray-300 mb-2\">\n                        <span>Uploading photos...</span>\n                        <span>{uploadProgress}%</span>\n                      </div>\n                      <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden\">\n                        <div\n                          className=\"bg-guild-600 h-2.5 transition-all duration-300\"\n                          style={{ width: `${uploadProgress}%` }}\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  </div>\n\n                  {/* Actions - Fixed at bottom */}\n                  <div className=\"flex-shrink-0 flex justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900\">\n                    <button\n                      type=\"button\"\n                      onClick={handleClose}\n                      className=\"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium\"\n                      disabled={isLoading}\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={isLoading || selectedFiles.length === 0}\n                      className=\"px-6 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                    >\n                      {isLoading ? (\n                        <>\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                          Uploading...\n                        </>\n                      ) : (\n                        <>Upload {selectedFiles.length} Photo{selectedFiles.length !== 1 ? 's' : ''}</>\n                      )}\n                    </button>\n                  </div>\n                </form>\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </div>\n      </Dialog>\n    </Transition>\n  );\n};\n\nexport default UploadPhotosModal;\n","import { FC, useState } from 'react';\nimport { toast } from 'react-hot-toast';\nimport {\n  ArrowLeftIcon,\n  CloudArrowUpIcon,\n  CheckCircleIcon,\n  XMarkIcon,\n  ArrowsRightLeftIcon,\n  TrashIcon,\n} from '@heroicons/react/24/outline';\nimport {\n  useGetAlbumQuery,\n  useGetAlbumPhotosQuery,\n  useDeletePhotoMutation,\n  useBulkDeletePhotosMutation,\n  useSetAlbumCoverMutation,\n} from '../../../store/api/galleryApi';\nimport PhotoCard from '../../common/UI/PhotoCard';\nimport PhotoModal from '../../common/UI/PhotoModal';\nimport LoadingSpinner from '../../common/UI/LoadingSpinner';\nimport EditPhotoModal from './EditPhotoModal';\nimport MovePhotosModal from './MovePhotosModal';\nimport UploadPhotosModal from './UploadPhotosModal';\nimport type { Album, Photo } from '../../../types/gallery';\n\ninterface AlbumPhotosViewProps {\n  albumId: string;\n  onBack: () => void;\n}\n\nconst AlbumPhotosView: FC<AlbumPhotosViewProps> = ({ albumId, onBack }) => {\n  const [currentPage, setCurrentPage] = useState(1);\n  const [selectionMode, setSelectionMode] = useState(false);\n  const [selectedPhotoIds, setSelectedPhotoIds] = useState<string[]>([]);\n  const [viewingPhoto, setViewingPhoto] = useState<Photo | null>(null);\n  const [editingPhoto, setEditingPhoto] = useState<Photo | null>(null);\n  const [showMoveModal, setShowMoveModal] = useState(false);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n\n  // API hooks\n  const { data: albumData, isLoading: loadingAlbum } = useGetAlbumQuery({\n    albumId,\n    includePhotos: false,\n  });\n\n  const {\n    data: photosData,\n    isLoading: loadingPhotos,\n    isFetching,\n    refetch,\n  } = useGetAlbumPhotosQuery({\n    albumId,\n    page: currentPage,\n    limit: 24,\n  });\n\n  const [deletePhoto, { isLoading: isDeleting }] = useDeletePhotoMutation();\n  const [bulkDeletePhotos, { isLoading: isBulkDeleting }] = useBulkDeletePhotosMutation();\n  const [setAlbumCover, { isLoading: isSettingCover }] = useSetAlbumCoverMutation();\n\n  const album = albumData?.data.album;\n  const photos = photosData?.data.photos || [];\n  const pagination = photosData?.data.pagination;\n\n  // Handlers\n  const handleToggleSelection = (photoId: string) => {\n    setSelectedPhotoIds((prev) =>\n      prev.includes(photoId) ? prev.filter((id) => id !== photoId) : [...prev, photoId]\n    );\n  };\n\n  const handleSelectAll = () => {\n    if (selectedPhotoIds.length === photos.length) {\n      setSelectedPhotoIds([]);\n    } else {\n      setSelectedPhotoIds(photos.map((p) => p.id));\n    }\n  };\n\n  const handleCancelSelection = () => {\n    setSelectionMode(false);\n    setSelectedPhotoIds([]);\n  };\n\n  const handleDeletePhoto = async (photoId: string) => {\n    if (!confirm('Are you sure you want to delete this photo?')) return;\n\n    try {\n      await deletePhoto({ albumId, photoId }).unwrap();\n      toast.success('Photo deleted');\n      refetch();\n    } catch (error: any) {\n      toast.error(error?.data?.message || 'Failed to delete photo');\n    }\n  };\n\n  const handleBulkDelete = async () => {\n    if (selectedPhotoIds.length === 0) return;\n\n    if (!confirm(`Delete ${selectedPhotoIds.length} selected photos?`)) return;\n\n    try {\n      const result = await bulkDeletePhotos({\n        albumId,\n        data: { photoIds: selectedPhotoIds },\n      }).unwrap();\n\n      toast.success(`Deleted ${result.data.deleted} photos`);\n      setSelectedPhotoIds([]);\n      setSelectionMode(false);\n      refetch();\n    } catch (error: any) {\n      toast.error(error?.data?.message || 'Failed to delete photos');\n    }\n  };\n\n  const handleSetCover = async (photoId: string) => {\n    try {\n      await setAlbumCover({\n        albumId,\n        data: { photoId },\n      }).unwrap();\n\n      toast.success('Album cover updated');\n      refetch();\n    } catch (error: any) {\n      toast.error(error?.data?.message || 'Failed to set cover');\n    }\n  };\n\n  const handlePhotoAction = (photo: Photo, action: 'edit' | 'delete') => {\n    switch (action) {\n      case 'edit':\n        setEditingPhoto(photo);\n        break;\n      case 'delete':\n        handleDeletePhoto(photo.id);\n        break;\n    }\n  };\n\n  const handleViewPhoto = (photo: Photo) => {\n    if (selectionMode) {\n      handleToggleSelection(photo.id);\n    } else {\n      setViewingPhoto(photo);\n    }\n  };\n\n  const currentPhotoIndex = viewingPhoto ? photos.findIndex((p) => p.id === viewingPhoto.id) : -1;\n  const hasPrevious = currentPhotoIndex > 0;\n  const hasNext = currentPhotoIndex < photos.length - 1;\n\n  const handlePreviousPhoto = () => {\n    if (hasPrevious) {\n      setViewingPhoto(photos[currentPhotoIndex - 1]);\n    }\n  };\n\n  const handleNextPhoto = () => {\n    if (hasNext) {\n      setViewingPhoto(photos[currentPhotoIndex + 1]);\n    }\n  };\n\n  if (loadingAlbum || !album) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <LoadingSpinner size=\"large\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n      {/* Header */}\n      <div className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          {/* Back Button & Title */}\n          <div className=\"flex items-center gap-4 mb-4\">\n            <button\n              onClick={onBack}\n              className=\"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-guild-600 dark:hover:text-guild-400 transition-colors\"\n            >\n              <ArrowLeftIcon className=\"w-5 h-5\" />\n              <span className=\"hidden sm:inline\">Back to Albums</span>\n            </button>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n            <div>\n              <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white\">\n                {album.name}\n              </h1>\n              {album.description && (\n                <p className=\"mt-1 text-sm text-gray-600 dark:text-gray-400\">{album.description}</p>\n              )}\n              <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-500\">\n                {album._count?.photos || 0} photos\n              </p>\n            </div>\n\n            {/* Actions */}\n            {!selectionMode ? (\n              <div className=\"flex flex-wrap items-center gap-3\">\n                <button\n                  onClick={() => setShowUploadModal(true)}\n                  className=\"flex items-center gap-2 px-4 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors text-sm font-medium\"\n                >\n                  <CloudArrowUpIcon className=\"w-5 h-5\" />\n                  <span className=\"hidden sm:inline\">Upload Photos</span>\n                </button>\n\n                {photos.length > 0 && (\n                  <button\n                    onClick={() => setSelectionMode(true)}\n                    className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium\"\n                  >\n                    <CheckCircleIcon className=\"w-5 h-5\" />\n                    <span className=\"hidden sm:inline\">Select Photos</span>\n                  </button>\n                )}\n              </div>\n            ) : (\n              <div className=\"flex flex-wrap items-center gap-3\">\n                <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                  {selectedPhotoIds.length} selected\n                </span>\n\n                <button\n                  onClick={handleSelectAll}\n                  className=\"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium\"\n                >\n                  {selectedPhotoIds.length === photos.length ? 'Deselect All' : 'Select All'}\n                </button>\n\n                {selectedPhotoIds.length > 0 && (\n                  <>\n                    <button\n                      onClick={() => setShowMoveModal(true)}\n                      className=\"flex items-center gap-2 px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium\"\n                    >\n                      <ArrowsRightLeftIcon className=\"w-4 h-4\" />\n                      Move\n                    </button>\n\n                    <button\n                      onClick={handleBulkDelete}\n                      disabled={isBulkDeleting}\n                      className=\"flex items-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm font-medium disabled:opacity-50\"\n                    >\n                      <TrashIcon className=\"w-4 h-4\" />\n                      Delete\n                    </button>\n                  </>\n                )}\n\n                <button\n                  onClick={handleCancelSelection}\n                  className=\"flex items-center gap-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm font-medium\"\n                >\n                  <XMarkIcon className=\"w-4 h-4\" />\n                  Cancel\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {loadingPhotos ? (\n          <div className=\"flex justify-center items-center h-64\">\n            <LoadingSpinner size=\"large\" />\n          </div>\n        ) : photos.length === 0 ? (\n          <div className=\"text-center py-16\">\n            <CloudArrowUpIcon className=\"w-20 h-20 mx-auto text-gray-300 dark:text-gray-600 mb-4\" />\n            <h3 className=\"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n              No photos yet\n            </h3>\n            <p className=\"text-gray-500 dark:text-gray-400 mb-6\">\n              Upload your first photos to this album\n            </p>\n            <button\n              onClick={() => setShowUploadModal(true)}\n              className=\"inline-flex items-center gap-2 px-6 py-3 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium\"\n            >\n              <CloudArrowUpIcon className=\"w-5 h-5\" />\n              Upload Photos\n            </button>\n          </div>\n        ) : (\n          <>\n            {/* Photos Grid */}\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4\">\n              {photos.map((photo) => (\n                <PhotoCard\n                  key={photo.id}\n                  photo={photo}\n                  onClick={() => handleViewPhoto(photo)}\n                  onAction={(action) => handlePhotoAction(photo, action)}\n                  showActions={!selectionMode}\n                  selectionMode={selectionMode}\n                  isSelected={selectedPhotoIds.includes(photo.id)}\n                  onToggleSelect={() => handleToggleSelection(photo.id)}\n                />\n              ))}\n            </div>\n\n            {/* Pagination */}\n            {pagination && pagination.pages > 1 && (\n              <div className=\"mt-8 flex justify-center\">\n                <nav className=\"flex items-center gap-2\">\n                  <button\n                    onClick={() => setCurrentPage(currentPage - 1)}\n                    disabled={currentPage === 1 || isFetching}\n                    className=\"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300\"\n                  >\n                    Previous\n                  </button>\n\n                  <span className=\"px-4 py-2 text-gray-700 dark:text-gray-300\">\n                    Page {currentPage} of {pagination.pages}\n                  </span>\n\n                  <button\n                    onClick={() => setCurrentPage(currentPage + 1)}\n                    disabled={currentPage === pagination.pages || isFetching}\n                    className=\"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300\"\n                  >\n                    Next\n                  </button>\n                </nav>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Modals */}\n      <PhotoModal\n        isOpen={!!viewingPhoto}\n        onClose={() => setViewingPhoto(null)}\n        photo={viewingPhoto}\n        onPrevious={handlePreviousPhoto}\n        onNext={handleNextPhoto}\n        hasPrevious={hasPrevious}\n        hasNext={hasNext}\n      />\n\n      <EditPhotoModal\n        isOpen={!!editingPhoto}\n        onClose={() => setEditingPhoto(null)}\n        photo={editingPhoto}\n        albumId={albumId}\n        onSuccess={() => {\n          setEditingPhoto(null);\n          refetch();\n        }}\n      />\n\n      <MovePhotosModal\n        isOpen={showMoveModal}\n        onClose={() => setShowMoveModal(false)}\n        currentAlbumId={albumId}\n        photoIds={selectedPhotoIds}\n        onSuccess={() => {\n          setShowMoveModal(false);\n          setSelectedPhotoIds([]);\n          setSelectionMode(false);\n          refetch();\n        }}\n      />\n\n      <UploadPhotosModal\n        isOpen={showUploadModal}\n        onClose={() => setShowUploadModal(false)}\n        preselectedAlbumId={albumId}\n        onSuccess={() => {\n          setShowUploadModal(false);\n          refetch();\n        }}\n      />\n    </div>\n  );\n};\n\nexport default AlbumPhotosView;\n","import { FC, useState } from 'react';\nimport { toast } from 'react-hot-toast';\nimport {\n  PlusIcon,\n  ChartBarIcon,\n} from '@heroicons/react/24/outline';\nimport {\n  useGetAlbumsQuery,\n  useDeleteAlbumMutation,\n  useToggleArchiveAlbumMutation,\n} from '../../store/api/galleryApi';\nimport AlbumCard from '../../components/common/UI/AlbumCard';\nimport LoadingSpinner from '../../components/common/UI/LoadingSpinner';\nimport CreateAlbumModal from '../../components/admin/Gallery/CreateAlbumModal';\nimport EditAlbumModal from '../../components/admin/Gallery/EditAlbumModal';\nimport AlbumPhotosView from '../../components/admin/Gallery/AlbumPhotosView';\nimport type { Album } from '../../types/gallery';\n\nconst GalleryManagement: FC = () => {\n  const [currentPage, setCurrentPage] = useState(1);\n  const [showArchived, setShowArchived] = useState(false);\n\n  // Modals state\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [selectedAlbum, setSelectedAlbum] = useState<Album | null>(null);\n  const [viewingAlbumId, setViewingAlbumId] = useState<string | null>(null);\n\n  // API hooks\n  const {\n    data: albumsData,\n    isLoading,\n    isFetching,\n    refetch,\n  } = useGetAlbumsQuery({\n    page: currentPage,\n    limit: 12,\n    sortBy: 'createdAt',\n    sortOrder: 'desc',\n    includeArchived: showArchived,\n  });\n\n  const [deleteAlbum, { isLoading: isDeleting }] = useDeleteAlbumMutation();\n  const [toggleArchive, { isLoading: isToggling }] = useToggleArchiveAlbumMutation();\n\n  const albums = albumsData?.data.albums || [];\n  const pagination = albumsData?.data.pagination;\n\n  // Handlers\n  const handleCreateAlbum = () => {\n    setShowCreateModal(true);\n  };\n\n  const handleEditAlbum = (album: Album) => {\n    setSelectedAlbum(album);\n    setShowEditModal(true);\n  };\n\n  const handleViewAlbum = (album: Album) => {\n    setViewingAlbumId(album.id);\n  };\n\n  const handleDeleteAlbum = async (album: Album) => {\n    if (!confirm(`Are you sure you want to delete \"${album.name}\"? This will also delete all photos in this album.`)) {\n      return;\n    }\n\n    try {\n      await deleteAlbum(album.id).unwrap();\n      toast.success('Album deleted successfully');\n      refetch();\n    } catch (error: any) {\n      toast.error(error?.data?.message || 'Failed to delete album');\n    }\n  };\n\n  const handleToggleArchive = async (album: Album) => {\n    try {\n      await toggleArchive(album.id).unwrap();\n      toast.success(album.isArchived ? 'Album unarchived' : 'Album archived');\n      refetch();\n    } catch (error: any) {\n      toast.error(error?.data?.message || 'Failed to update album');\n    }\n  };\n\n  const handleAlbumAction = (album: Album, action: 'edit' | 'delete' | 'archive' | 'view') => {\n    switch (action) {\n      case 'view':\n        handleViewAlbum(album);\n        break;\n      case 'edit':\n        handleEditAlbum(album);\n        break;\n      case 'delete':\n        handleDeleteAlbum(album);\n        break;\n      case 'archive':\n        handleToggleArchive(album);\n        break;\n    }\n  };\n\n  // If viewing an album, show the album photos view\n  if (viewingAlbumId) {\n    return (\n      <AlbumPhotosView\n        albumId={viewingAlbumId}\n        onBack={() => setViewingAlbumId(null)}\n      />\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n      {/* Header */}\n      <div className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n            <div>\n              <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white\">\n                Gallery Management\n              </h1>\n              <p className=\"mt-1 text-sm text-gray-600 dark:text-gray-400\">\n                Manage albums and photos\n              </p>\n            </div>\n\n            <div className=\"flex flex-wrap items-center gap-3\">\n              <button\n                onClick={handleCreateAlbum}\n                className=\"flex items-center gap-2 px-4 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors text-sm font-medium\"\n              >\n                <PlusIcon className=\"w-5 h-5\" />\n                <span className=\"hidden sm:inline\">Create Album</span>\n              </button>\n            </div>\n          </div>\n\n          {/* Filter */}\n          <div className=\"mt-6 flex justify-end\">\n            {/* Archive Toggle */}\n            <div className=\"inline-flex rounded-lg border border-gray-300 dark:border-gray-600 overflow-hidden\">\n              <button\n                onClick={() => setShowArchived(false)}\n                className={`px-4 py-2 text-sm font-medium transition-colors ${\n                  !showArchived\n                    ? 'bg-guild-600 text-white'\n                    : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700'\n                }`}\n              >\n                Active\n              </button>\n              <button\n                onClick={() => setShowArchived(true)}\n                className={`px-4 py-2 text-sm font-medium transition-colors border-l border-gray-300 dark:border-gray-600 ${\n                  showArchived\n                    ? 'bg-guild-600 text-white'\n                    : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700'\n                }`}\n              >\n                Archived\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {isLoading ? (\n          <div className=\"flex justify-center items-center h-64\">\n            <LoadingSpinner size=\"large\" />\n          </div>\n        ) : albums.length === 0 ? (\n          <div className=\"text-center py-16\">\n            <ChartBarIcon className=\"w-20 h-20 mx-auto text-gray-300 dark:text-gray-600 mb-4\" />\n            <h3 className=\"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n              {showArchived ? 'No archived albums' : 'No active albums yet'}\n            </h3>\n            <p className=\"text-gray-500 dark:text-gray-400 mb-6\">\n              {showArchived\n                ? 'You don\\'t have any archived albums'\n                : 'Create your first album to get started'}\n            </p>\n            {!showArchived && (\n              <button\n                onClick={handleCreateAlbum}\n                className=\"inline-flex items-center gap-2 px-6 py-3 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium\"\n              >\n                <PlusIcon className=\"w-5 h-5\" />\n                Create Album\n              </button>\n            )}\n          </div>\n        ) : (\n          <>\n            {/* Albums Grid */}\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {albums.map((album) => (\n                <AlbumCard\n                  key={album.id}\n                  album={album}\n                  onClick={() => handleViewAlbum(album)}\n                  showActions={true}\n                  onAction={(action) => handleAlbumAction(album, action)}\n                />\n              ))}\n            </div>\n\n            {/* Pagination */}\n            {pagination && pagination.pages > 1 && (\n              <div className=\"mt-8 flex justify-center\">\n                <nav className=\"flex items-center gap-2\">\n                  <button\n                    onClick={() => setCurrentPage(currentPage - 1)}\n                    disabled={currentPage === 1 || isFetching}\n                    className=\"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300\"\n                  >\n                    Previous\n                  </button>\n\n                  <span className=\"px-4 py-2 text-gray-700 dark:text-gray-300\">\n                    Page {currentPage} of {pagination.pages}\n                  </span>\n\n                  <button\n                    onClick={() => setCurrentPage(currentPage + 1)}\n                    disabled={currentPage === pagination.pages || isFetching}\n                    className=\"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300\"\n                  >\n                    Next\n                  </button>\n                </nav>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Modals */}\n      <CreateAlbumModal\n        isOpen={showCreateModal}\n        onClose={() => setShowCreateModal(false)}\n        onSuccess={() => {\n          setShowCreateModal(false);\n          refetch();\n        }}\n      />\n\n      <EditAlbumModal\n        isOpen={showEditModal}\n        onClose={() => {\n          setShowEditModal(false);\n          setSelectedAlbum(null);\n        }}\n        album={selectedAlbum}\n        onSuccess={() => {\n          setShowEditModal(false);\n          setSelectedAlbum(null);\n          refetch();\n        }}\n      />\n    </div>\n  );\n};\n\nexport default GalleryManagement;\n"],"names":["ArrowsRightLeftIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","CloudArrowUpIcon","ImageUploader","onFilesSelected","maxFiles","maxSize","accept","multiple","selectedFiles","onRemoveFile","isDragging","setIsDragging","useState","errors","setErrors","validateFiles","files","validFiles","newErrors","fileArray","file","type","handleDragOver","useCallback","e","handleDragLeave","handleDrop","handleFileInput","formatFileSize","bytes","k","sizes","i","jsxs","jsx","error","index","acc","XMarkIcon","CreateAlbumModal","isOpen","onClose","onSuccess","name","setName","description","setDescription","coverImage","setCoverImage","createAlbum","isLoading","useCreateAlbumMutation","validate","handleSubmit","toast","handleClose","handleFilesSelected","handleRemoveFile","Transition","Fragment","Dialog","EditAlbumModal","album","isArchived","setIsArchived","coverImageKey","setCoverImageKey","updateAlbum","useUpdateAlbumMutation","latestAlbumData","useGetAlbumQuery","currentAlbum","useEffect","prev","getApiUrl","EditPhotoModal","photo","albumId","caption","setCaption","tagInput","setTagInput","tags","setTags","updatePhoto","useUpdatePhotoMutation","handleAddTag","trimmedTag","handleRemoveTag","tagToRemove","tag","handleKeyPress","XCircleIcon","MovePhotosModal","currentAlbumId","photoIds","targetAlbumId","setTargetAlbumId","albumsData","useGetAlbumsQuery","movePhotos","useMovePhotosMutation","albums","result","moved","failed","UploadPhotosModal","preselectedAlbumId","selectedAlbumId","setSelectedAlbumId","setSelectedFiles","uploadProgress","setUploadProgress","bulkUpload","useBulkUploadPhotosMutation","progressInterval","uploaded","_","formattedTotalSize","AlbumPhotosView","onBack","currentPage","setCurrentPage","selectionMode","setSelectionMode","selectedPhotoIds","setSelectedPhotoIds","viewingPhoto","setViewingPhoto","editingPhoto","setEditingPhoto","showMoveModal","setShowMoveModal","showUploadModal","setShowUploadModal","albumData","loadingAlbum","photosData","loadingPhotos","isFetching","refetch","useGetAlbumPhotosQuery","deletePhoto","isDeleting","useDeletePhotoMutation","bulkDeletePhotos","isBulkDeleting","useBulkDeletePhotosMutation","setAlbumCover","isSettingCover","useSetAlbumCoverMutation","photos","pagination","handleToggleSelection","photoId","id","handleSelectAll","p","handleCancelSelection","handleDeletePhoto","handleBulkDelete","handlePhotoAction","action","handleViewPhoto","currentPhotoIndex","hasPrevious","hasNext","handlePreviousPhoto","handleNextPhoto","LoadingSpinner","ArrowLeftIcon","TrashIcon","CheckCircleIcon","PhotoCard","PhotoModal","GalleryManagement","showArchived","setShowArchived","showCreateModal","setShowCreateModal","showEditModal","setShowEditModal","selectedAlbum","setSelectedAlbum","viewingAlbumId","setViewingAlbumId","deleteAlbum","useDeleteAlbumMutation","toggleArchive","isToggling","useToggleArchiveAlbumMutation","handleCreateAlbum","handleEditAlbum","handleViewAlbum","handleDeleteAlbum","handleToggleArchive","handleAlbumAction","PlusIcon","ChartBarIcon","AlbumCard"],"mappings":"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","x_google_ignoreList":[0,1]}