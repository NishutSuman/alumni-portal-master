{"version":3,"file":"userApi-CvQNIjgQ.js","sources":["../../src/store/api/userApi.ts"],"sourcesContent":["// src/store/api/userApi.ts\n// Comprehensive User Profile API\n\nimport { apiSlice } from './apiSlice'\n\n// User Profile Types\nexport interface UserProfile {\n  id: string\n  serialId?: string\n  fullName: string\n  email: string\n  whatsappNumber?: string\n  alternateNumber?: string\n  batch: number\n  admissionYear?: number\n  passoutYear?: number\n  dateOfBirth?: string\n  isAlumniVerified: boolean\n  pendingVerification: boolean\n  isRejected: boolean\n  rejectionReason?: string\n  rejectedAt?: string\n  profileImage?: string\n  bio?: string\n  employmentStatus: 'WORKING' | 'STUDYING' | 'OPEN_TO_WORK' | 'ENTREPRENEUR' | 'RETIRED'\n  \n  // Social Links\n  linkedinUrl?: string\n  instagramUrl?: string\n  facebookUrl?: string\n  twitterUrl?: string\n  youtubeUrl?: string\n  portfolioUrl?: string\n  \n  // Privacy Settings\n  isProfilePublic: boolean\n  showEmail: boolean\n  showPhone: boolean\n  \n  // Role and Status\n  role: 'USER' | 'BATCH_ADMIN' | 'SUPER_ADMIN'\n  isActive: boolean\n  \n  // Membership\n  membershipStatus: 'ACTIVE' | 'EXPIRED' | 'PENDING' | 'SUSPENDED' | 'INACTIVE'\n  membershipExpiresAt?: string\n  currentMembershipYear?: number\n  membershipPaidAt?: string\n  membershipAmountPaid?: number\n  \n  // LifeLink\n  bloodGroup?: 'A_POSITIVE' | 'A_NEGATIVE' | 'B_POSITIVE' | 'B_NEGATIVE' | 'AB_POSITIVE' | 'AB_NEGATIVE' | 'O_POSITIVE' | 'O_NEGATIVE'\n  isBloodDonor: boolean\n  lastBloodDonationDate?: string\n  totalBloodDonations: number\n  \n  // Timestamps\n  createdAt: string\n  updatedAt: string\n  lastLoginAt?: string\n  \n  // Relations\n  addresses?: UserAddress[]\n  education?: UserEducation[]\n  workExperience?: UserWorkExperience[]\n  \n  // Verification Context\n  verificationContext?: {\n    isVerified: boolean\n    isPending: boolean\n    canEditBatch: boolean\n    rejectionReason?: string\n    isBlacklisted: boolean\n    blacklistInfo?: {\n      reason: string\n      blacklistedAt: string\n      blacklistedBy: string\n    }\n  }\n}\n\nexport interface UserAddress {\n  id: string\n  addressLine1: string\n  addressLine2?: string\n  city: string\n  district?: string\n  state: string\n  postalCode: string\n  country: string\n  addressType: 'PERMANENT' | 'CURRENT'\n  createdAt: string\n  updatedAt: string\n}\n\nexport interface UserEducation {\n  id: string\n  course: string\n  stream?: string\n  institution: string\n  fromYear: number\n  toYear?: number\n  isOngoing: boolean\n  description?: string\n  createdAt: string\n  updatedAt: string\n}\n\nexport interface UserWorkExperience {\n  id: string\n  companyName: string\n  jobRole: string\n  companyType?: 'GOVERNMENT' | 'PRIVATE' | 'STARTUP' | 'NGO' | 'FREELANCE' | 'SELF_EMPLOYED'\n  workAddress?: string\n  fromYear: number\n  toYear?: number\n  isCurrentJob: boolean\n  description?: string\n  createdAt: string\n  updatedAt: string\n}\n\nexport interface UpdateProfileRequest {\n  fullName?: string\n  whatsappNumber?: string\n  alternateNumber?: string\n  batch?: number\n  admissionYear?: number\n  passoutYear?: number\n  dateOfBirth?: string\n  bio?: string\n  employmentStatus?: UserProfile['employmentStatus']\n  linkedinUrl?: string\n  instagramUrl?: string\n  facebookUrl?: string\n  twitterUrl?: string\n  youtubeUrl?: string\n  portfolioUrl?: string\n  isProfilePublic?: boolean\n  showEmail?: boolean\n  showPhone?: boolean\n  bloodGroup?: UserProfile['bloodGroup']\n  isBloodDonor?: boolean\n}\n\nexport interface CreateEducationRequest {\n  course: string\n  stream?: string\n  institution: string\n  fromYear: number\n  toYear?: number\n  isOngoing: boolean\n  description?: string\n}\n\nexport interface CreateWorkExperienceRequest {\n  companyName: string\n  jobRole: string\n  companyType?: UserWorkExperience['companyType']\n  workAddress?: string\n  fromYear: number\n  toYear?: number\n  isCurrentJob: boolean\n  description?: string\n}\n\nexport interface UpdateAddressRequest {\n  addressLine1: string\n  addressLine2?: string\n  city: string\n  district?: string\n  state: string\n  postalCode: string\n  country: string\n}\n\nexport interface MentionUser {\n  id: string\n  fullName: string\n  batch: number\n  profileImage?: string\n  serialId?: string\n}\n\n// API endpoints\nexport const userApi = apiSlice.injectEndpoints({\n  endpoints: (builder) => ({\n    // Profile Management\n    getProfile: builder.query<UserProfile, void>({\n      query: () => '/users/profile',\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Profile'],\n    }),\n\n    updateProfile: builder.mutation<UserProfile, UpdateProfileRequest>({\n      query: (data) => ({\n        url: '/users/profile',\n        method: 'PUT',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Profile', 'User'],\n    }),\n\n    getPublicProfile: builder.query<UserProfile, string>({\n      query: (userId) => `/users/profile/${userId}`,\n      transformResponse: (response: any) => response.data,\n      providesTags: (result, error, userId) => [{ type: 'Profile', id: userId }],\n    }),\n\n    getMembershipStatus: builder.query<{\n      status: string\n      expiresAt?: string\n      currentYear?: number\n      paidAt?: string\n      amountPaid?: number\n    }, void>({\n      query: () => '/users/membership-status',\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Profile'],\n    }),\n\n    // Address Management\n    getAddresses: builder.query<UserAddress[], void>({\n      query: () => '/users/addresses',\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Profile'],\n    }),\n\n    updateAddress: builder.mutation<UserAddress, { \n      addressType: 'PERMANENT' | 'CURRENT'\n      data: UpdateAddressRequest\n    }>({\n      query: ({ addressType, data }) => ({\n        url: `/users/address/${addressType}`,\n        method: 'PUT',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Profile'],\n    }),\n\n    // Profile Picture Management\n    uploadProfilePicture: builder.mutation<{ imageUrl: string }, FormData>({\n      query: (formData) => ({\n        url: '/users/profile-picture',\n        method: 'POST',\n        body: formData,\n        formData: true, // This ensures RTK Query treats it as FormData\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Profile', 'User'],\n    }),\n\n    updateProfilePicture: builder.mutation<{ imageUrl: string }, FormData>({\n      query: (formData) => ({\n        url: '/users/profile-picture',\n        method: 'PUT',\n        body: formData,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Profile', 'User'],\n    }),\n\n    deleteProfilePicture: builder.mutation<void, void>({\n      query: () => ({\n        url: '/users/profile-picture',\n        method: 'DELETE',\n      }),\n      invalidatesTags: ['Profile', 'User'],\n    }),\n\n    // Education Management\n    getEducationHistory: builder.query<UserEducation[], void>({\n      query: () => '/users/education',\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Profile'],\n    }),\n\n    addEducation: builder.mutation<UserEducation, CreateEducationRequest>({\n      query: (data) => ({\n        url: '/users/education',\n        method: 'POST',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Profile'],\n    }),\n\n    updateEducation: builder.mutation<UserEducation, { \n      educationId: string\n      data: Partial<CreateEducationRequest>\n    }>({\n      query: ({ educationId, data }) => ({\n        url: `/users/education/${educationId}`,\n        method: 'PUT',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Profile'],\n    }),\n\n    deleteEducation: builder.mutation<void, string>({\n      query: (educationId) => ({\n        url: `/users/education/${educationId}`,\n        method: 'DELETE',\n      }),\n      invalidatesTags: ['Profile'],\n    }),\n\n    // Work Experience Management\n    getWorkHistory: builder.query<UserWorkExperience[], void>({\n      query: () => '/users/work-experience',\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Profile'],\n    }),\n\n    addWorkExperience: builder.mutation<UserWorkExperience, CreateWorkExperienceRequest>({\n      query: (data) => ({\n        url: '/users/work-experience',\n        method: 'POST',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Profile'],\n    }),\n\n    updateWorkExperience: builder.mutation<UserWorkExperience, { \n      workId: string\n      data: Partial<CreateWorkExperienceRequest>\n    }>({\n      query: ({ workId, data }) => ({\n        url: `/users/work-experience/${workId}`,\n        method: 'PUT',\n        body: data,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Profile'],\n    }),\n\n    deleteWorkExperience: builder.mutation<void, string>({\n      query: (workId) => ({\n        url: `/users/work-experience/${workId}`,\n        method: 'DELETE',\n      }),\n      invalidatesTags: ['Profile'],\n    }),\n\n    // Premium Features (Verified users only)\n    getUserSettings: builder.query<{\n      notifications: boolean\n      privacy: Record<string, any>\n      preferences: Record<string, any>\n    }, void>({\n      query: () => '/users/settings',\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Profile'],\n    }),\n\n    updateUserSettings: builder.mutation<any, Record<string, any>>({\n      query: (settings) => ({\n        url: '/users/settings',\n        method: 'PUT',\n        body: settings,\n      }),\n      transformResponse: (response: any) => response.data,\n      invalidatesTags: ['Profile'],\n    }),\n\n    getUserActivity: builder.query<any[], void>({\n      query: () => '/users/activity',\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Profile'],\n    }),\n\n    // User Search for Mentions\n    searchUsersForMentions: builder.query<MentionUser[], { query: string }>({\n      query: ({ query }) => `/users/search?query=${encodeURIComponent(query)}`,\n      transformResponse: (response: any) => response.data,\n      keepUnusedDataFor: 60, // Cache for 1 minute\n    }),\n\n    // Event Registrations\n    getMyEventRegistrations: builder.query<{\n      registrations: any[]\n      totalCount: number\n      currentPage: number\n      totalPages: number\n    }, {\n      page?: number\n      limit?: number\n      status?: string\n      upcoming?: boolean\n    }>({\n      query: (params) => ({\n        url: '/users/registrations',\n        params,\n      }),\n      transformResponse: (response: any) => ({\n        registrations: response.data || [],\n        totalCount: response.pagination?.total || 0,\n        currentPage: response.pagination?.page || 1,\n        totalPages: response.pagination?.pages || 1,\n      }),\n      providesTags: ['EventRegistration', 'Profile'],\n    }),\n\n    // Public Organization Information\n    getOrganizationInfo: builder.query<{\n      organization: {\n        id: string\n        name: string\n        shortName: string\n        foundationYear: number\n        officialEmail: string\n        officialContactNumber?: string\n        officeAddress?: string\n        logoUrl?: string\n        websiteUrl?: string\n        instagramUrl?: string\n        facebookUrl?: string\n        youtubeUrl?: string\n        twitterUrl?: string\n        linkedinUrl?: string\n      }\n      isConfigured: boolean\n    }, void>({\n      query: () => '/organization',\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Organization'],\n    }),\n  }),\n  overrideExisting: false,\n})\n\nexport const {\n  useGetProfileQuery,\n  useUpdateProfileMutation,\n  useGetPublicProfileQuery,\n  useGetMembershipStatusQuery,\n  useGetAddressesQuery,\n  useUpdateAddressMutation,\n  useUploadProfilePictureMutation,\n  useUpdateProfilePictureMutation,\n  useDeleteProfilePictureMutation,\n  useGetEducationHistoryQuery,\n  useAddEducationMutation,\n  useUpdateEducationMutation,\n  useDeleteEducationMutation,\n  useGetWorkHistoryQuery,\n  useAddWorkExperienceMutation,\n  useUpdateWorkExperienceMutation,\n  useDeleteWorkExperienceMutation,\n  useGetUserSettingsQuery,\n  useUpdateUserSettingsMutation,\n  useGetUserActivityQuery,\n  useSearchUsersForMentionsQuery,\n  useGetMyEventRegistrationsQuery,\n  useGetOrganizationInfoQuery,\n} = userApi\n\nexport default userApi"],"names":["userApi","apiSlice","builder","response","data","userId","result","error","addressType","formData","educationId","workId","settings","query","params","useGetProfileQuery","useUpdateProfileMutation","useGetMembershipStatusQuery","useGetAddressesQuery","useUpdateAddressMutation","useDeleteProfilePictureMutation","useGetEducationHistoryQuery","useAddEducationMutation","useUpdateEducationMutation","useDeleteEducationMutation","useGetWorkHistoryQuery","useAddWorkExperienceMutation","useUpdateWorkExperienceMutation","useDeleteWorkExperienceMutation","useSearchUsersForMentionsQuery","useGetOrganizationInfoQuery"],"mappings":"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"}