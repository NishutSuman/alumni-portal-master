import{j as e,m as oe,a as Q,L as G}from"./ui-BlmhFX_F.js";import{r as a}from"./router-DFnE1L-t.js";import{u as le,C as ie}from"./index.esm-B0I9BSpA.js";import{o as de,c as ce,a as ee,f as me,d as W}from"./index.esm-kU_tS0bV.js";import{o as ge,p as ue}from"./PostImageDisplay-3tQBx3Ab.js";import{L as xe}from"./LoadingSpinner-BR8iBbEe.js";import{o as he}from"./userApi-CvQNIjgQ.js";import{c as Y,z as D}from"./index-DLsoxDpQ.js";import{F as J}from"./XMarkIcon-D1c1wIzV.js";import{F as te}from"./PlusIcon-B6tiF6Nj.js";import{F as be}from"./PhotoIcon-n1eOvNeY.js";import{F as re}from"./TrashIcon-mpSEd7uz.js";function fe({title:o,titleId:g,...n},x){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":g},n),o?a.createElement("title",{id:g},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 1 0-2.636 6.364M16.5 12V8.25"}))}const pe=a.forwardRef(fe);function ye({title:o,titleId:g,...n},x){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":g},n),o?a.createElement("title",{id:g},o):null,a.createElement("path",{strokeLinejoin:"round",d:"M6.75 3.744h-.753v8.25h7.125a4.125 4.125 0 0 0 0-8.25H6.75Zm0 0v.38m0 16.122h6.747a4.5 4.5 0 0 0 0-9.001h-7.5v9h.753Zm0 0v-.37m0-15.751h6a3.75 3.75 0 1 1 0 7.5h-6m0-7.5v7.5m0 0v8.25m0-8.25h6.375a4.125 4.125 0 0 1 0 8.25H6.75m.747-15.38h4.875a3.375 3.375 0 0 1 0 6.75H7.497v-6.75Zm0 7.5h5.25a3.75 3.75 0 0 1 0 7.5h-5.25v-7.5Z"}))}const we=a.forwardRef(ye);function ve({title:o,titleId:g,...n},x){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":g},n),o?a.createElement("title",{id:g},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.248 20.246H9.05m0 0h3.696m-3.696 0 5.893-16.502m0 0h-3.697m3.697 0h3.803"}))}const ke=a.forwardRef(ve);function Ne({title:o,titleId:g,...n},x){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":g},n),o?a.createElement("title",{id:g},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const je=a.forwardRef(Ne);function Ce({title:o,titleId:g,...n},x){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":g},n),o?a.createElement("title",{id:g},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.242 5.992h12m-12 6.003H20.24m-12 5.999h12M4.117 7.495v-3.75H2.99m1.125 3.75H2.99m1.125 0H5.24m-1.92 2.577a1.125 1.125 0 1 1 1.591 1.59l-1.83 1.83h2.16M2.99 15.745h1.125a1.125 1.125 0 0 1 0 2.25H3.74m0-.002h.375a1.125 1.125 0 0 1 0 2.25H2.99"}))}const Ee=a.forwardRef(Ce);function Se({title:o,titleId:g,...n},x){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":g},n),o?a.createElement("title",{id:g},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.995 3.744v7.5a6 6 0 1 1-12 0v-7.5m-2.25 16.502h16.5"}))}const Te=a.forwardRef(Se),Le=[{value:"MOM",label:"Minutes of Meeting"},{value:"STORY",label:"Alumni Story"},{value:"POST",label:"General Post"},{value:"NOTICE",label:"Official Notice"},{value:"ANNOUNCEMENT",label:"Event Announcement"}],Pe=[{value:"createdAt:desc",label:"New to Old"},{value:"createdAt:asc",label:"Old to New"}],ae=({variant:o="primary",size:g="md",loading:n=!1,disabled:x,children:j,className:H="",...F})=>{const y="inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",w={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-blue-500",ghost:"hover:bg-gray-100 text-gray-700 focus:ring-gray-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500"},O={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},C=w[o],v=O[g];return e.jsxs(oe.button,{whileHover:{scale:x||n?1:1.02},whileTap:{scale:x||n?1:.98},className:`${y} ${C} ${v} ${H}`,disabled:x||n,...F,children:[n?e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,j]})},Ie=({content:o="",onChange:g,placeholder:n="Write your post...",className:x="",disabled:j=!1})=>{const[H,F]=a.useState(o),[y,w]=a.useState(!1),[O,C]=a.useState(""),[v,b]=a.useState(0),[A,T]=a.useState(null),[E,_]=a.useState({bold:!1,italic:!1,underline:!1}),u=a.useRef(null),B=a.useRef(null),{data:k=[]}=he({query:O},{skip:O.length<2});a.useEffect(()=>{F(o),u.current&&o!==u.current.innerHTML&&(u.current.innerHTML=o)},[o]),a.useEffect(()=>{b(0)},[k]);const q=s=>{const m=/@\[([^\]]+)\]\(([^)]+)\)/g,l=[];let c;for(;(c=m.exec(s))!==null;)l.push(c[2]);return l},L=()=>{_({bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),underline:document.queryCommandState("underline")})},N=()=>{if(!u.current)return;const s=u.current.innerHTML;F(s),L();const m=u.current.textContent||"",l=window.getSelection();if(l&&l.rangeCount>0){const i=l.getRangeAt(0);T(i);let p=0;const S=document.createTreeWalker(u.current,NodeFilter.SHOW_TEXT);let t;for(;t=S.nextNode();){if(t===i.startContainer){p+=i.startOffset;break}p+=t.textContent?.length||0}const r=m.substring(0,p),d=r.match(/@([^@\s]*)$/);d&&!r.endsWith(" ")?(C(d[1]),w(!0)):(w(!1),C(""))}else w(!1),C("");const c=q(s);g(s,c)},Z=s=>{if((s.key==="Backspace"||s.key==="Delete")&&!y){const m=window.getSelection();if(m&&m.rangeCount>0){const l=m.getRangeAt(0);if(l.collapsed&&l.startOffset===0&&l.startContainer.nodeType===Node.TEXT_NODE){const i=l.startContainer.previousSibling;if(i&&i.nodeType===Node.ELEMENT_NODE&&i.classList.contains("mention")){s.preventDefault(),i.remove(),N();return}}if(l.collapsed&&l.startContainer.nodeType===Node.ELEMENT_NODE){const c=l.startContainer;if(s.key==="Backspace"){const i=c.childNodes[l.startOffset-1];if(i&&i.nodeType===Node.ELEMENT_NODE&&i.classList.contains("mention")){s.preventDefault(),i.remove(),N();return}}else if(s.key==="Delete"){const i=c.childNodes[l.startOffset];if(i&&i.nodeType===Node.ELEMENT_NODE&&i.classList.contains("mention")){s.preventDefault(),i.remove(),N();return}}}if(s.key==="Delete"&&l.collapsed&&l.startContainer.nodeType===Node.TEXT_NODE){const c=l.startContainer,i=c.textContent||"";if(l.startOffset===i.length){const p=c.nextSibling;if(p&&p.nodeType===Node.ELEMENT_NODE&&p.classList.contains("mention")){s.preventDefault(),p.remove(),N();return}}}}}if(!y||k.length===0){if(s.ctrlKey||s.metaKey)switch(s.key.toLowerCase()){case"b":s.preventDefault(),document.execCommand("bold");break;case"i":s.preventDefault(),document.execCommand("italic");break;case"u":s.preventDefault(),document.execCommand("underline");break}return}switch(s.key){case"ArrowDown":s.preventDefault(),b(m=>m<k.length-1?m+1:0);break;case"ArrowUp":s.preventDefault(),b(m=>m>0?m-1:k.length-1);break;case"Enter":case"Tab":k[v]&&(s.preventDefault(),P(k[v]));break;case"Escape":w(!1);break}},P=s=>{if(!u.current)return;const m=window.getSelection();if(!m||m.rangeCount===0)return;const l=m.getRangeAt(0),c=l.startContainer;if(c.nodeType===Node.TEXT_NODE){const i=c.textContent||"",p=l.startOffset,S=i.substring(0,p);if(S.match(/@([^@\s]*)$/)){const r=S.lastIndexOf("@"),d=i.substring(0,r),h=i.substring(p),R=document.createElement("span");R.className="mention bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 px-1 rounded font-medium",R.setAttribute("data-user-id",s.id),R.textContent=`@${s.fullName}`,R.contentEditable="false";const se=document.createTextNode(d),ne=document.createTextNode(h),z=c.parentNode;if(z){z.insertBefore(se,c),z.insertBefore(R,c),z.insertBefore(ne,c),z.removeChild(c);const X=document.createRange();X.setStartAfter(R),X.collapse(!0),m.removeAllRanges(),m.addRange(X)}}}w(!1),C(""),N()},I=()=>{document.execCommand("bold"),u.current?.focus(),L()},U=()=>{document.execCommand("italic"),u.current?.focus(),L()},K=()=>{document.execCommand("underline"),u.current?.focus(),L()},f=()=>{document.execCommand("insertUnorderedList"),u.current?.focus()},$=()=>{document.execCommand("insertOrderedList"),u.current?.focus()},V=()=>{document.execCommand("insertText",!1,"@"),u.current?.focus()},M=({onClick:s,isActive:m=!1,disabled:l=!1,children:c,title:i})=>e.jsx("button",{type:"button",onClick:s,disabled:l,title:i,className:`p-2 rounded-md border transition-colors ${m?"bg-blue-100 dark:bg-blue-900 border-blue-300 dark:border-blue-600 text-blue-700 dark:text-blue-300":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"} ${l?"opacity-50 cursor-not-allowed":""}`,children:c});return e.jsxs("div",{className:`relative ${x}`,children:[e.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 p-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(M,{onClick:I,isActive:E.bold,disabled:j,title:"Bold (Ctrl+B)",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx(M,{onClick:U,isActive:E.italic,disabled:j,title:"Italic (Ctrl+I)",children:e.jsx(ke,{className:"h-4 w-4"})}),e.jsx(M,{onClick:K,isActive:E.underline,disabled:j,title:"Underline (Ctrl+U)",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),e.jsx(M,{onClick:f,disabled:j,title:"Bullet List",children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(M,{onClick:$,disabled:j,title:"Numbered List",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),e.jsx(M,{onClick:V,disabled:j,title:"Mention User (@)",children:e.jsx(pe,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{ref:u,contentEditable:!j,onInput:N,onKeyDown:Z,className:"min-h-[150px] p-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none",style:{wordBreak:"break-word"},suppressContentEditableWarning:!0}),!H&&e.jsx("div",{className:"absolute top-4 left-4 pointer-events-none text-gray-400 dark:text-gray-500",children:n})]})]}),y&&k.length>0&&e.jsx("div",{ref:B,className:"absolute z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg w-80 mb-1 bottom-full left-0",children:k.map((s,m)=>e.jsxs("button",{className:`w-full flex items-center gap-3 p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 first:rounded-t-lg last:rounded-b-lg transition-colors ${m===v?"bg-blue-50 dark:bg-blue-900/20":""}`,onClick:()=>P(s),children:[s.profileImage?e.jsx("img",{src:Y(`/api/users/profile-picture/${s.id}`),alt:s.fullName,className:"w-8 h-8 rounded-full object-cover",onError:l=>{const c=l.target;c.style.display="none";const i=c.nextElementSibling;i&&(i.style.display="flex")}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm ${s.profileImage?"hidden":"flex"}`,children:s.fullName.split(" ").map(l=>l.charAt(0)).join("").slice(0,2).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:s.fullName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Batch ",s.batch]})]})]},s.id))})]})},Me=ce({title:W().required("Title is required").min(3,"Title must be at least 3 characters").max(200,"Title must be less than 200 characters"),body:W().required("Content is required").min(10,"Content must be at least 10 characters").max(5e4,"Content must be less than 50,000 characters"),category:W().required("Category is required"),linkedEventId:W().optional(),tags:me().of(W()),allowComments:ee().default(!0),allowLikes:ee().default(!0)}),qe=({isOpen:o,onClose:g,editPost:n})=>{const[x,{isLoading:j}]=ge(),[H,{isLoading:F}]=ue(),y=!!n,w=j||F,O=(t,r,d)=>!t||t.startsWith("/api/")||t.startsWith("http://localhost:")?t:d!==void 0?Y(`/api/posts/${r}/images/${d}`):Y(`/api/posts/${r}/hero-image`),[C,v]=a.useState(null),[b,A]=a.useState([]),[T,E]=a.useState([]),[_,u]=a.useState(""),[B,k]=a.useState(!1),[q,L]=a.useState([]),{register:N,handleSubmit:Z,control:P,formState:{errors:I},reset:U,watch:K,setValue:f}=le({resolver:de(Me),mode:"onSubmit",defaultValues:{title:"",body:"",category:"POST",linkedEventId:"",tags:[],allowComments:!0,allowLikes:!0}}),$=K("tags");a.useLayoutEffect(()=>{if(o&&n){if(f("title",n.title),f("body",n.body),f("category",n.category),f("tags",n.tags||[]),f("allowComments",n.allowComments),f("allowLikes",n.allowLikes),n.heroImage){const t=O(n.heroImage,n.id);v(t)}if(n.images&&n.images.length>0){const t=n.images.map((r,d)=>O(r,n.id,d));E(t)}A([])}else o&&!n&&(v(null),E([]),A([]))},[o,n,f]),a.useEffect(()=>{o||(U(),v(null),A([]),E([]),u(""),k(!1),L([]))},[o,U]);const V=t=>{const r=t.target.files?.[0];if(r){if(r.size>10*1024*1024){D.error("Hero image must be less than 10MB");return}const d=new FileReader;d.onload=h=>{v(h.target?.result)},d.readAsDataURL(r),f("heroImage",r)}},M=t=>{const r=Array.from(t.target.files||[]);if(b.length+r.length+T.length>9){D.error("Maximum 9 additional images allowed");return}const d=r.filter(h=>h.size>10*1024*1024?(D.error(`${h.name} is too large (max 10MB)`),!1):!0);if(d.length>0){const h=[...b,...d];A(h)}t.target.value=""},s=t=>{console.log("ðŸ—‘ï¸ Removing existing image at index:",t);const r=T.filter((d,h)=>h!==t);E(r),console.log("ðŸ–¼ï¸ Updated existing images:",r)},m=t=>{console.log("ðŸ—‘ï¸ Removing additional image at index:",t);const r=b.filter((d,h)=>h!==t);A(r),console.log("ðŸ“ Updated additional images:",r)},l=t=>{(t.key==="Enter"||t.key===",")&&(t.preventDefault(),c())},c=()=>{const t=_.trim().toLowerCase();t&&!$.includes(t)&&$.length<10&&(f("tags",[...$,t]),u(""))},i=t=>{f("tags",$.filter(r=>r!==t))},p=async t=>{k(!0);try{const r=new FormData;r.append("title",t.title),r.append("body",t.body),r.append("category",t.category),r.append("allowComments",t.allowComments.toString()),r.append("allowLikes",t.allowLikes.toString()),t.linkedEventId&&r.append("linkedEventId",t.linkedEventId);const d=[...new Set([...t.tags,...q])];d.length>0&&r.append("tags",JSON.stringify(d)),t.heroImage&&r.append("heroImage",t.heroImage),b&&b.length>0?(console.log("ðŸ“ Adding additional images to FormData:",b.length),b.forEach((h,R)=>{console.log(`ðŸ“· Adding image ${R}:`,h.name,h.size),r.append("images",h)})):console.log("âš ï¸ No additional images to add"),y&&r.append("existingImages",JSON.stringify(T)),y&&n?(await H({postId:n.id,formData:r}).unwrap(),D.success("Post updated successfully!")):(await x(r).unwrap(),D.success("Post created successfully!")),S()}catch(r){console.error("Failed to save post:",r);const d=r?.data?.message||(y?"Failed to update post":"Failed to create post");D.error(d)}},S=()=>{U({title:"",body:"",category:"POST",linkedEventId:"",tags:[],allowComments:!0,allowLikes:!0}),v(null),A([]),E([]),u(""),k(!1),L([]),g()};return e.jsx(Q,{appear:!0,show:o,as:a.Fragment,children:e.jsxs(G,{as:"div",className:"relative z-50",onClose:S,children:[e.jsx(Q.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 dark:bg-opacity-40"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(Q.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(G.Panel,{className:"w-full max-w-4xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx(G.Title,{className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:y?"Edit Post":"Create New Post"}),e.jsx("button",{type:"button",onClick:S,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",children:e.jsx(J,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:Z(p),className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),e.jsx("input",{...N("title"),type:"text",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter post title"}),B&&I.title&&e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:I.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category *"}),e.jsx("select",{...N("category"),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Le.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),B&&I.category&&e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:I.category.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:$.map((t,r)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-sm bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300",children:["#",t,e.jsx("button",{type:"button",onClick:()=>i(t),className:"ml-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",children:e.jsx(J,{className:"h-3 w-3"})})]},r))}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:_,onChange:t=>u(t.target.value),onKeyDown:l,placeholder:"Add tags (press Enter)",className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-l-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:c,className:"px-3 py-2 bg-blue-600 dark:bg-blue-700 text-white rounded-r-md hover:bg-blue-700 dark:hover:bg-blue-600",children:e.jsx(te,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...N("allowComments"),type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Allow comments"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...N("allowLikes"),type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Allow likes"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Linked Event (optional)"}),e.jsx("input",{...N("linkedEventId"),type:"text",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter event ID (optional)"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Image"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700",children:C?e.jsxs("div",{className:"relative bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden",children:[e.jsx("img",{src:C,alt:"Hero preview",className:"w-full h-48 object-cover",loading:"lazy",onError:t=>{const r=t.target;r.style.display="none"}}),e.jsx("button",{type:"button",onClick:()=>{v(null),f("heroImage",void 0)},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 shadow-sm",children:e.jsx(J,{className:"h-4 w-4"})})]}):e.jsxs("label",{className:"cursor-pointer block text-center",children:[e.jsx(be,{className:"h-12 w-12 mx-auto text-gray-400 dark:text-gray-500 mb-2"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click to upload hero image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:V,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Additional Images (",T.length+b.length,"/9)"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[T.map((t,r)=>e.jsxs("div",{className:"relative aspect-square bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden",children:[e.jsx("img",{src:t,alt:`Existing image ${r}`,className:"w-full h-full object-cover",loading:"lazy",onError:d=>{const h=d.target;h.style.display="none"}}),e.jsx("button",{type:"button",onClick:()=>s(r),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 shadow-sm",title:"Remove existing image",children:e.jsx(re,{className:"h-3 w-3"})})]},`existing-${r}`)),b.map((t,r)=>{const d=URL.createObjectURL(t);return e.jsxs("div",{className:"relative aspect-square bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden",children:[e.jsx("img",{src:d,alt:`New image ${r}`,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("button",{type:"button",onClick:()=>m(r),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 shadow-sm",title:"Remove new image",children:e.jsx(re,{className:"h-3 w-3"})})]},`new-${r}`)})]}),T.length+b.length<9&&e.jsxs("label",{className:"cursor-pointer block border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center bg-gray-50 dark:bg-gray-700",children:[e.jsx(te,{className:"h-8 w-8 mx-auto text-gray-400 dark:text-gray-500 mb-1"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add more images"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:M,className:"hidden"})]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content *"}),e.jsx(ie,{name:"body",control:P,render:({field:t})=>e.jsx(Ie,{content:t.value,onChange:(r,d)=>{t.onChange(r),L(d)},placeholder:"Write your post content here...",disabled:w})}),B&&I.body&&e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:I.body.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(ae,{type:"button",variant:"outline",onClick:S,disabled:w,children:"Cancel"}),e.jsx(ae,{type:"submit",disabled:w,className:"flex items-center space-x-2",children:w?e.jsxs(e.Fragment,{children:[e.jsx(xe,{size:"sm"}),e.jsx("span",{children:y?"Updating...":"Creating..."})]}):e.jsx("span",{children:y?"Update Post":"Create Post"})})]})]})]})})})})]})})};export{ae as B,qe as C,Pe as P,Le as a};
//# sourceMappingURL=CreatePostModal-DiyLfNhX.js.map
