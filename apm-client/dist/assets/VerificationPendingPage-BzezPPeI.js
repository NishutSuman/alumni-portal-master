import{j as e,m as d}from"./ui-BlmhFX_F.js";import{u as Y,r as n}from"./router-DFnE1L-t.js";import{u as P,z as i,L as j}from"./index-DHymdRDT.js";import{D as V}from"./redux-VN59sPcb.js";import{b as k}from"./api-BiOw3EPh.js";import{F as w}from"./ClockIcon-DZUckIFe.js";import{F as N}from"./XMarkIcon-D1c1wIzV.js";import{F as A}from"./EnvelopeIcon-BhdVQxlI.js";import{F as I}from"./UserGroupIcon-CnvKPj6V.js";import{F as q}from"./PencilIcon-DAEDOf0J.js";import{F as U}from"./CheckIcon-BVDXZInn.js";import{F as D}from"./ExclamationTriangleIcon-DCwPn2ZM.js";import{F as v}from"./ArrowPathIcon-2g4qvb1M.js";import{F as T}from"./ArrowRightOnRectangleIcon-1n2irUT1.js";import"./vendor-gH-7aFTg.js";import"./utils-CXyNmL__.js";const ae=()=>{const{user:a,logout:C}=P(),h=V(),o=Y(),[b,c]=n.useState(!1),[l,m]=n.useState(a?.batch||""),[x,f]=n.useState(!1),[g,p]=n.useState(!1),t=a?.isRejected;a?.pendingVerification;const F=a?.verificationContext?.isBlacklisted,R=a?.verificationContext?.blacklistInfo,S=async()=>{await C()},B=async()=>{p(!0);try{const s=await k.get("/auth/me");if(s.data.success){const r=s.data.data;h(j(r)),r.isAlumniVerified&&!r.pendingVerification?(i.success("Your verification has been approved! Redirecting to dashboard..."),setTimeout(()=>{r.role==="DEVELOPER"?o("/developer"):r.role==="SUPER_ADMIN"||r.role==="BATCH_ADMIN"?o("/admin/dashboard"):o("/user/dashboard")},1500)):r.isRejected?i.error("Your verification was rejected. Please check the rejection reason."):i("Verification is still pending. Please check back later.",{icon:"â³"})}}catch(s){console.error("Error checking verification status:",s),i.error("Failed to check status. Please try again.")}finally{p(!1)}},E=()=>{m(a?.batch||""),c(!0)},y=()=>{c(!1),m(a?.batch||"")},$=async()=>{if(!l||l===a?.batch){y();return}const s=parseInt(l.toString());if(isNaN(s)||s<1980||s>2030){i.error("Please enter a valid batch year between 1980 and 2030");return}f(!0);try{const r=await k.put("/users/profile",{batch:s,resetVerificationStatus:t});if(r.data.success){r.data.data&&h(j(r.data.data));const u=t?"Batch year updated and verification status reset! Your application will be reviewed again by the correct batch admin.":"Batch year updated successfully! Your verification will be reassigned to the correct batch admin.";i.success(u),c(!1)}else throw new Error(r.data.message||"Update failed")}catch(r){console.error("Batch update error:",r);const u=r?.response?.data?.message||r?.message||"Failed to update batch year";i.error(u)}finally{f(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-blue-900 dark:to-indigo-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto h-20 w-20 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-full flex items-center justify-center mb-6",children:e.jsx(w,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:t?"Verification Status":"Verification Pending"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:t?"Your verification request requires attention":"Your alumni status is being reviewed by our administrators"})]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card p-8 mb-6",children:F?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mb-6",children:e.jsx(N,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),e.jsx("h2",{className:"text-2xl font-semibold text-red-900 dark:text-red-100 mb-4",children:"Application Rejected"}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:[e.jsx("p",{className:"text-red-800 dark:text-red-200 text-lg mb-4",children:"Your application has been rejected to create an account with our organisation."}),e.jsx("p",{className:"text-red-700 dark:text-red-300 mb-4",children:R?.reason||"Your registration could not be verified with our alumni records."}),e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:"Please reach out to our admin team for further assistance."})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Contact Administration"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["For questions or appeals, contact:"," ",e.jsx("a",{href:"mailto:admin@alumni-portal.com",className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"admin@alumni-portal.com"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:["Hello, ",a?.fullName,"! ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Thank you for registering with Alumni Portal. Your account has been created successfully, but we need to verify your alumni status before you can access all features."})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(A,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Email Verified âœ…"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:a?.email})]})]}),e.jsxs("div",{className:`p-4 ${t?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800"} rounded-lg`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{className:`h-6 w-6 ${t?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400"}`})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsxs("h3",{className:`text-sm font-medium ${t?"text-red-800 dark:text-red-200":"text-yellow-800 dark:text-yellow-200"}`,children:["Alumni Status: ",t?"Not Approved âŒ":"Pending Review â³"]}),e.jsx("div",{className:"mt-1",children:b?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Batch:"}),e.jsx("input",{type:"number",value:l,onChange:s=>m(s.target.value),className:"w-20 px-2 py-1 text-sm border  border-yellow-300 rounded bg-black focus:outline-none focus:border-yellow-500",min:"1980",max:"2030",disabled:x}),e.jsx("button",{onClick:$,disabled:x,className:"p-1 text-green-600 hover:text-green-800 transition-colors disabled:opacity-50",title:"Save changes",children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx("button",{onClick:y,disabled:x,className:"p-1 text-red-600 hover:text-red-800 transition-colors disabled:opacity-50",title:"Cancel editing",children:e.jsx(N,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:`text-sm ${t?"text-red-700 dark:text-red-300":"text-yellow-700 dark:text-yellow-300"}`,children:["Batch: ",a?.batch," | ",t?"Verification rejected":"Claimed as alumni"]}),e.jsxs("button",{onClick:E,className:`flex items-center px-3 py-1 text-xs ${t?"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200 bg-red-100 dark:bg-red-800/20 hover:bg-red-200 dark:hover:bg-red-800/30 border border-red-300 dark:border-red-600":"text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 dark:hover:text-yellow-200 bg-yellow-100 dark:bg-yellow-800/20 hover:bg-yellow-200 dark:hover:bg-yellow-800/30 border border-yellow-300 dark:border-yellow-600"} rounded transition-colors`,title:t?"Change batch to retry verification":"Edit batch year",children:[e.jsx(q,{className:"h-3 w-3 mr-1"}),t?"Change Batch":"Edit"]})]})})]})]}),t&&a?.rejectionReason&&e.jsxs("div",{className:"mt-3 p-3 bg-red-100 dark:bg-red-800/30 border border-red-200 dark:border-red-700 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-1",children:"Rejection Reason:"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:a.rejectionReason}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2",children:"ðŸ’¡ You can change your batch year above to retry verification with the correct batch admin."})]}),b&&e.jsx("div",{className:`mt-3 p-3 ${t?"bg-red-100 dark:bg-red-800/30":"bg-yellow-100 dark:bg-yellow-800/30"} rounded-md`,children:e.jsxs("p",{className:`text-xs ${t?"text-red-700 dark:text-red-300":"text-yellow-700 dark:text-yellow-300"}`,children:["ðŸ’¡ ",e.jsx("strong",{children:"Note:"})," ",t?"Changing your batch year will reset your rejection status and submit a new verification request to the correct batch admin.":"Changing your batch year will update which admin reviews your verification. Make sure to enter the correct passout year for proper assignment to batch admins."]})})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4",children:t?"What can you do now?":"What happens next?"}),e.jsx("ul",{className:"space-y-3 text-blue-800 dark:text-blue-200",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-300 rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"1"}),e.jsx("span",{children:"Review the rejection reason above to understand why your verification was not approved"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-300 rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"2"}),e.jsx("span",{children:'If you believe your batch year was incorrect, use the "Change Batch" button above to update it'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-300 rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"3"}),e.jsx("span",{children:"Changing your batch will reset your rejection status and submit a new verification request"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-300 rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"4"}),e.jsx("span",{children:"Contact support if you need additional help or have questions about the rejection"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-300 rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"1"}),e.jsx("span",{children:"Our administrators will review your registration details and claimed batch information"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-300 rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"2"}),e.jsx("span",{children:"We may cross-reference with existing alumni records and batch information"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-300 rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"3"}),e.jsx("span",{children:"You'll receive an email notification once your alumni status is verified"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-300 rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"4"}),e.jsx("span",{children:"After verification, you'll have full access to all alumni portal features"})]})]})})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-5 w-5 text-gray-500 mr-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Estimated Review Time"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Typically 1-3 business days. You'll be notified by email once completed."})]})]})}),e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(D,{className:"h-5 w-5 text-red-500 mt-0.5 mr-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Need to Update Information?"}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:["If you need to correct any information or have questions about the verification process, please contact our administrators at"," ",e.jsx("a",{href:"mailto:admin@alumni-portal.com",className:"underline font-medium",children:"admin@alumni-portal.com"})]})]})]})})]})}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col sm:flex-row justify-center gap-4",children:[e.jsx("button",{onClick:B,disabled:g,className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-8 py-3 rounded-lg font-medium transition-all flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:g?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"h-5 w-5 mr-2 animate-spin"}),"Checking Status..."]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"h-5 w-5 mr-2"}),"Check Verification Status"]})}),e.jsxs("button",{onClick:S,className:"bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2"}),"Sign Out"]})]}),e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-center mt-8",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:`You'll remain logged in during the verification process. Click "Check Verification Status" to see if your account has been approved.`})})]})})};export{ae as default};
//# sourceMappingURL=VerificationPendingPage-BzezPPeI.js.map
