{"version":3,"mappings":"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","names":["PrinterIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","QrCodeIcon","TicketIcon","EventDetailsModal","event","isOpen","onClose","formatEventTime","date","startTime","endTime","eventDate","dateStr","format","getEventModeColor","mode","getStatusColor","status","jsxs","jsx","XMarkIcon","e","CalendarIcon","ClockIcon","MapPinIcon","UsersIcon","CurrencyRupeeIcon","paymentApi","apiSlice","builder","paymentData","verificationData","transactionId","referenceType","referenceId","params","useInitiatePaymentMutation","useVerifyPaymentMutation","EventRegistrationModal","user","useAuth","navigate","useNavigate","step","setStep","useState","totalAmount","setTotalAmount","registrationData","setRegistrationData","isProcessingPayment","setIsProcessingPayment","registerForEvent","useRegisterForEventMutation","initiatePayment","verifyPayment","register","handleSubmit","watch","setValue","errors","isSubmitting","reset","useForm","guestCount","donationAmount","calculateTotal","guests","donation","registrationFee","guestFee","React","handleClose","onSubmit","data","toast","handlePayment","paymentResponse","transaction","provider","razorpayOptions","response","verifyError","errorMessage","razorpay","error","count","_","index","target","Fragment","LoadingSpinner","UserIcon","guest","RegistrationDetailsModal","registration","onViewInvoice","onViewQR","onViewTicket","isLoadingInvoice","isLoadingTicket","getPaymentStatusColor","DocumentTextIcon","QRCodeGenerator","qrCode","canvasRef","useRef","isLoading","setIsLoading","setError","qrImageData","setQrImageData","useEffect","qrDataURL","__vitePreload","__vite_default__","n","QRCodeModal","qrData","handleDownload","link","generateAndDownloadQR","handlePrint","printWindow","ArrowDownTrayIcon","InvoiceModal","invoiceData","invoice","organization","handleDownloadPDF","html2canvas","jsPDF","element","canvas","imgData","pdf","imgWidth","pageHeight","imgHeight","heightLeft","position","QRCodeGeneratorForTicket","TicketModal","ticketData"],"ignoreList":[0,1,2],"sources":["../../node_modules/@heroicons/react/24/outline/esm/PrinterIcon.js","../../node_modules/@heroicons/react/24/outline/esm/QrCodeIcon.js","../../node_modules/@heroicons/react/24/outline/esm/TicketIcon.js","../../src/components/common/UI/EventDetailsModal.tsx","../../src/store/api/paymentApi.ts","../../src/components/common/UI/EventRegistrationModal.tsx","../../src/components/common/UI/RegistrationDetailsModal.tsx","../../src/components/common/UI/QRCodeModal.tsx","../../src/components/common/UI/InvoiceModal.tsx","../../src/components/common/UI/TicketModal.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction PrinterIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PrinterIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction QrCodeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(QrCodeIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction TicketIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(TicketIcon);\nexport default ForwardRef;","import React from 'react'\nimport { XMarkIcon, CalendarIcon, MapPinIcon, ClockIcon, UsersIcon, CurrencyRupeeIcon } from '@heroicons/react/24/outline'\nimport { format } from 'date-fns'\n\ninterface Event {\n  id: string\n  title: string\n  description: string\n  eventDate: string\n  startTime?: string\n  endTime?: string\n  venue?: string\n  meetingLink?: string\n  eventMode: 'PHYSICAL' | 'VIRTUAL' | 'HYBRID'\n  status: string\n  maxCapacity?: number\n  registrationFee: string | number\n  guestFee: string | number\n  heroImage?: string\n  category?: {\n    name: string\n  }\n  _count?: {\n    registrations: number\n  }\n  registrationCount?: number\n}\n\ninterface EventDetailsModalProps {\n  event: Event | null\n  isOpen: boolean\n  onClose: () => void\n}\n\nconst EventDetailsModal: React.FC<EventDetailsModalProps> = ({ event, isOpen, onClose }) => {\n  if (!isOpen || !event) return null\n\n  const formatEventTime = (date: string, startTime?: string, endTime?: string) => {\n    const eventDate = new Date(date)\n    const dateStr = format(eventDate, 'EEEE, MMMM dd, yyyy')\n    \n    if (startTime && endTime) {\n      return `${dateStr} • ${startTime} - ${endTime}`\n    } else if (startTime) {\n      return `${dateStr} • ${startTime}`\n    }\n    return dateStr\n  }\n\n  const getEventModeColor = (mode: string) => {\n    switch (mode) {\n      case 'VIRTUAL':\n        return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\n      case 'HYBRID':\n        return 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200'\n      default:\n        return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n    }\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'PUBLISHED':\n      case 'REGISTRATION_OPEN':\n        return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n      case 'REGISTRATION_CLOSED':\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\n      case 'COMPLETED':\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'\n      case 'CANCELLED':\n        return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\n      case 'DRAFT':\n        return 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200'\n      default:\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose}></div>\n        \n        <div className=\"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl sm:p-6\">\n          {/* Header */}\n          <div className=\"absolute right-0 top-0 hidden pr-4 pt-4 sm:block\">\n            <button\n              type=\"button\"\n              className=\"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-guild-500 focus:ring-offset-2\"\n              onClick={onClose}\n            >\n              <span className=\"sr-only\">Close</span>\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Event Image */}\n          {event.heroImage && (\n            <div className=\"mb-6\">\n              <img\n                src={`http://localhost:3000/api/events/${event.id}/hero-image`}\n                alt={event.title}\n                className=\"w-full h-64 object-cover rounded-lg\"\n                onError={(e) => {\n                  console.error('Image failed to load:', event.heroImage);\n                  console.error('Proxy URL:', `http://localhost:3000/api/events/${event.id}/hero-image`);\n                  (e.target as HTMLImageElement).style.display = 'none';\n                }}\n                onLoad={() => {\n                  console.log('Event image loaded successfully in modal via proxy:', `http://localhost:3000/api/events/${event.id}/hero-image`);\n                }}\n              />\n            </div>\n          )}\n\n          {/* Content */}\n          <div className=\"space-y-6\">\n            {/* Title and Category */}\n            <div>\n              <div className=\"flex items-center justify-between mb-2\">\n                {event.category && (\n                  <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200\">\n                    {event.category.name}\n                  </span>\n                )}\n                <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(event.status)}`}>\n                  {event.status.replace('_', ' ')}\n                </span>\n              </div>\n              <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-3\">\n                {event.title}\n              </h3>\n              <p className=\"text-gray-600 dark:text-gray-400\">\n                {event.description}\n              </p>\n            </div>\n\n            {/* Event Details Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {/* Date & Time */}\n              <div className=\"flex items-start space-x-3\">\n                <CalendarIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                <div>\n                  <div className=\"text-sm font-medium text-gray-900 dark:text-white\">Date & Time</div>\n                  <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    {formatEventTime(event.eventDate, event.startTime, event.endTime)}\n                  </div>\n                </div>\n              </div>\n\n              {/* Location/Mode */}\n              <div className=\"flex items-start space-x-3\">\n                {event.eventMode === 'VIRTUAL' ? (\n                  <ClockIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                ) : (\n                  <MapPinIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                )}\n                <div>\n                  <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                    {event.eventMode === 'VIRTUAL' ? 'Event Mode' : 'Location'}\n                  </div>\n                  <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    {event.eventMode === 'VIRTUAL' ? (\n                      <span className={`px-2 py-1 rounded-full text-xs ${getEventModeColor(event.eventMode)}`}>\n                        Virtual Event\n                      </span>\n                    ) : (\n                      <div className=\"flex items-center space-x-2\">\n                        <span>{event.venue || 'Venue TBA'}</span>\n                        {event.eventMode === 'HYBRID' && (\n                          <span className={`px-2 py-1 rounded-full text-xs ${getEventModeColor(event.eventMode)}`}>\n                            Hybrid\n                          </span>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* Capacity */}\n              {event.maxCapacity && (\n                <div className=\"flex items-start space-x-3\">\n                  <UsersIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                  <div>\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">Capacity</div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      {event._count?.registrations || event.registrationCount || 0} / {event.maxCapacity} registered\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Registration Fee */}\n              {Number(event.registrationFee) > 0 && (\n                <div className=\"flex items-start space-x-3\">\n                  <CurrencyRupeeIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                  <div>\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">Registration Fee</div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      ₹{event.registrationFee}\n                      {Number(event.guestFee) > 0 && (\n                        <span className=\"text-xs ml-1\">(Guest: ₹{event.guestFee})</span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Meeting Link for Virtual Events */}\n            {event.eventMode !== 'PHYSICAL' && event.meetingLink && (\n              <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4\">\n                <h4 className=\"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2\">\n                  Meeting Link\n                </h4>\n                <a\n                  href={event.meetingLink}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"text-blue-600 dark:text-blue-400 hover:text-blue-500 text-sm break-all\"\n                >\n                  {event.meetingLink}\n                </a>\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"mt-6 flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              className=\"btn-secondary\"\n              onClick={onClose}\n            >\n              Close\n            </button>\n            {event.status === 'REGISTRATION_OPEN' && (\n              <button\n                type=\"button\"\n                className=\"btn-guild\"\n              >\n                Register Now\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default EventDetailsModal","import { apiSlice } from './apiSlice'\n\nexport interface PaymentTransaction {\n  id: string\n  transactionNumber: string\n  amount: number\n  currency: string\n  description: string\n  status: 'PENDING' | 'COMPLETED' | 'FAILED' | 'CANCELLED'\n  referenceType: 'EVENT_REGISTRATION' | 'EVENT_PAYMENT' | 'MEMBERSHIP' | 'MERCHANDISE' | 'DONATION'\n  referenceId: string\n  breakdown: {\n    registrationFee?: number\n    guestCount?: number\n    guestFees?: number\n    merchandiseTotal?: number\n    subtotal?: number\n    processingFee?: number\n    total: number\n  }\n  provider: {\n    name: string\n    orderId: string\n    checkoutOptions: {\n      key: string\n      amount: number\n      currency: string\n      name: string\n      description: string\n      order_id: string\n      prefill: {\n        name: string\n        email: string\n        contact?: string\n      }\n      theme: {\n        color: string\n      }\n      modal: {\n        ondismiss: () => void\n      }\n      handler: (response: any) => void\n    }\n  }\n  items: Array<{\n    type: string\n    description: string\n    amount: number\n  }>\n}\n\nexport interface InitiatePaymentRequest {\n  referenceType: 'EVENT_REGISTRATION' | 'EVENT_PAYMENT' | 'MEMBERSHIP' | 'MERCHANDISE' | 'DONATION'\n  referenceId: string\n  description?: string\n  registrationData?: {\n    mealPreference?: string\n    guestCount: number\n    guests: Array<{\n      name: string\n      email?: string\n      phone?: string\n      mealPreference?: string\n    }>\n  }\n}\n\nexport interface VerifyPaymentRequest {\n  transactionId: string\n  razorpay_payment_id: string\n  razorpay_order_id: string\n  razorpay_signature: string\n}\n\nexport interface PaymentCalculationResponse {\n  breakdown: {\n    registrationFee?: number\n    guestCount?: number\n    guestFees?: number\n    merchandiseTotal?: number\n    subtotal?: number\n    processingFee?: number\n    total: number\n  }\n  items: Array<{\n    type: string\n    description: string\n    amount: number\n  }>\n  user: {\n    fullName: string\n    email: string\n    whatsappNumber?: string\n  }\n  metadata?: any\n}\n\nexport const paymentApi = apiSlice.injectEndpoints({\n  endpoints: (builder) => ({\n    initiatePayment: builder.mutation<\n      { success: boolean; transaction: PaymentTransaction; message: string },\n      InitiatePaymentRequest\n    >({\n      query: (paymentData) => ({\n        url: '/payments/initiate',\n        method: 'POST',\n        body: paymentData,\n      }),\n      invalidatesTags: ['Payment'],\n    }),\n\n    verifyPayment: builder.mutation<\n      { success: boolean; transaction: PaymentTransaction; message: string },\n      VerifyPaymentRequest\n    >({\n      query: (verificationData) => {\n        const { transactionId, ...paymentData } = verificationData;\n        return {\n          url: `/payments/${transactionId}/verify`,\n          method: 'POST',\n          body: paymentData,\n        };\n      },\n      invalidatesTags: ['Payment', 'Event', 'Registration'],\n    }),\n\n    calculatePayment: builder.query<\n      { success: boolean; data: PaymentCalculationResponse; message: string },\n      { referenceType: string; referenceId: string }\n    >({\n      query: ({ referenceType, referenceId }) => ({\n        url: `/payments/calculate?referenceType=${referenceType}&referenceId=${referenceId}`,\n        method: 'GET',\n      }),\n      providesTags: ['Payment'],\n    }),\n\n    getPaymentStatus: builder.query<\n      { success: boolean; transaction: PaymentTransaction; message: string },\n      string\n    >({\n      query: (transactionId) => ({\n        url: `/payments/${transactionId}/status`,\n        method: 'GET',\n      }),\n      providesTags: ['Payment'],\n    }),\n\n    getUserPayments: builder.query<\n      { \n        success: boolean\n        data: PaymentTransaction[]\n        pagination: {\n          page: number\n          totalPages: number\n          total: number\n        }\n        message: string \n      },\n      { page?: number; limit?: number; referenceType?: string }\n    >({\n      query: (params) => ({\n        url: '/payments/my-payments',\n        method: 'GET',\n        params,\n      }),\n      providesTags: ['Payment'],\n    }),\n\n  }),\n})\n\nexport const {\n  useInitiatePaymentMutation,\n  useVerifyPaymentMutation,\n  useCalculatePaymentQuery,\n  useGetPaymentStatusQuery,\n  useGetUserPaymentsQuery,\n} = paymentApi","import React, { useState } from 'react'\nimport { XMarkIcon, CurrencyRupeeIcon, UsersIcon, CalendarIcon, UserIcon } from '@heroicons/react/24/outline'\nimport { useForm } from 'react-hook-form'\nimport { format } from 'date-fns'\nimport { useNavigate } from 'react-router-dom'\nimport { useAuth } from '@/hooks/useAuth'\nimport { useRegisterForEventMutation } from '@/store/api/eventApi'\nimport { useInitiatePaymentMutation, useVerifyPaymentMutation } from '@/store/api/paymentApi'\nimport { toast } from 'react-hot-toast'\nimport LoadingSpinner from './LoadingSpinner'\n\ninterface Event {\n  id: string\n  title: string\n  description: string\n  eventDate: string\n  startTime?: string\n  endTime?: string\n  venue?: string\n  eventMode: 'PHYSICAL' | 'VIRTUAL' | 'HYBRID'\n  status: string\n  maxCapacity?: number\n  registrationFee: string | number\n  guestFee: string | number\n  heroImage?: string\n  hasGuests?: boolean\n  hasMeals?: boolean\n}\n\ninterface EventRegistrationModalProps {\n  event: Event | null\n  isOpen: boolean\n  onClose: () => void\n}\n\ninterface RegistrationFormData {\n  mealPreference?: string\n  guestCount: number\n  guests: {\n    name: string\n    email: string\n    phone?: string\n    mealPreference?: string\n  }[]\n  donationAmount?: number\n}\n\nconst EventRegistrationModal: React.FC<EventRegistrationModalProps> = ({ event, isOpen, onClose }) => {\n  // Early return BEFORE any hooks to avoid Rules of Hooks violation\n  if (!isOpen || !event) return null\n\n  const { user } = useAuth()\n  const navigate = useNavigate()\n  const [step, setStep] = useState<'form' | 'payment'>('form')\n  const [totalAmount, setTotalAmount] = useState(0)\n  const [registrationData, setRegistrationData] = useState<RegistrationFormData | null>(null)\n  const [isProcessingPayment, setIsProcessingPayment] = useState(false)\n  \n  const [registerForEvent] = useRegisterForEventMutation()\n  const [initiatePayment] = useInitiatePaymentMutation()\n  const [verifyPayment] = useVerifyPaymentMutation()\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    setValue,\n    formState: { errors, isSubmitting },\n    reset\n  } = useForm<RegistrationFormData>({\n    defaultValues: {\n      guestCount: 0,\n      guests: [],\n      mealPreference: ''\n    }\n  })\n\n  const guestCount = watch('guestCount') || 0\n  const donationAmount = watch('donationAmount') || 0\n\n  const calculateTotal = (guests: number, donation: number = 0) => {\n    const registrationFee = Number(event.registrationFee) || 0\n    const guestFee = Number(event.guestFee) || 0\n    return registrationFee + (guests * guestFee) + donation\n  }\n\n  React.useEffect(() => {\n    setTotalAmount(calculateTotal(guestCount, donationAmount))\n  }, [guestCount, donationAmount, event])\n\n  const formatEventTime = (date: string, startTime?: string) => {\n    const eventDate = new Date(date)\n    const dateStr = format(eventDate, 'MMM dd, yyyy')\n    if (startTime) {\n      return `${dateStr} at ${startTime}`\n    }\n    return dateStr\n  }\n\n  const handleClose = () => {\n    setStep('form')\n    setRegistrationData(null)\n    reset()\n    onClose()\n  }\n\n  const onSubmit = async (data: RegistrationFormData) => {\n    // Step 1: Just store form data and proceed to payment - don't create registration yet!\n    setRegistrationData(data)\n    setStep('payment')\n    toast.success('Please complete payment to confirm your registration')\n  }\n\n  const handlePayment = async () => {\n    if (!registrationData) {\n      toast.error('Registration data not found')\n      return\n    }\n\n    try {\n      setIsProcessingPayment(true)\n\n      // Step 1: Initiate payment with event details (not registration yet)\n      const paymentResponse = await initiatePayment({\n        referenceType: 'EVENT_PAYMENT',\n        referenceId: event.id, // Use event ID, not registration ID\n        description: `Event Registration - ${event.title}`,\n        registrationData: {\n          mealPreference: registrationData.mealPreference,\n          guestCount: registrationData.guestCount || 0,\n          guests: registrationData.guests || [],\n          donationAmount: registrationData.donationAmount || 0\n        }\n      }).unwrap()\n\n      if (!paymentResponse.success) {\n        throw new Error('Failed to initiate payment')\n      }\n\n      const { transaction, provider } = paymentResponse.data\n      \n      // Validate payment response structure\n      if (!transaction || !provider || !provider.checkoutOptions) {\n        throw new Error('Invalid payment response structure')\n      }\n      \n      // Step 2: Open Razorpay checkout\n      const razorpayOptions = {\n        key: provider.checkoutOptions.key,\n        amount: provider.checkoutOptions.amount,\n        currency: provider.checkoutOptions.currency,\n        name: provider.checkoutOptions.name,\n        description: provider.checkoutOptions.description,\n        order_id: provider.checkoutOptions.order_id,\n        prefill: provider.checkoutOptions.prefill,\n        theme: provider.checkoutOptions.theme,\n        handler: async (response: any) => {\n          try {\n            // Step 3: Verify payment first\n            const verifyResponse = await verifyPayment({\n              transactionId: transaction.id,\n              razorpay_payment_id: response.razorpay_payment_id,\n              razorpay_order_id: response.razorpay_order_id,\n              razorpay_signature: response.razorpay_signature,\n            }).unwrap()\n\n            if (verifyResponse.success) {\n              // Step 4: Registration is automatically created during payment verification\n              // No need to call registerForEvent again - it's handled by EVENT_PAYMENT flow\n              toast.success(`Registration confirmed! Payment of ₹${transaction.amount} completed successfully.`)\n              handleClose()\n              \n              // Redirect to user events page and switch to Your Bookings tab\n              setTimeout(() => {\n                navigate('/user/events', { \n                  replace: true,\n                  state: { activeTab: 'booked' }\n                })\n              }, 1000) // Small delay to show the success toast\n            } else {\n              throw new Error('Payment verification failed')\n            }\n          } catch (verifyError: any) {\n            console.error('Payment verification error:', verifyError)\n            const errorMessage = verifyError?.data?.message || verifyError?.message || 'Payment verification failed'\n            toast.error(errorMessage)\n          } finally {\n            setIsProcessingPayment(false)\n          }\n        },\n        modal: {\n          ondismiss: () => {\n            setIsProcessingPayment(false)\n            toast.info('Payment cancelled')\n          }\n        }\n      }\n\n      // Check if Razorpay is loaded\n      if (typeof window !== 'undefined' && window.Razorpay) {\n        const razorpay = new window.Razorpay(razorpayOptions)\n        \n        razorpay.on('payment.failed', (response: any) => {\n          setIsProcessingPayment(false)\n          const errorMessage = response.error?.description || 'Payment failed'\n          toast.error(errorMessage)\n        })\n\n        razorpay.open()\n      } else {\n        throw new Error('Payment system not available')\n      }\n\n    } catch (error: any) {\n      setIsProcessingPayment(false)\n      console.error('Payment initiation error:', error)\n      const errorMessage = error?.data?.message || error?.message || 'Failed to initiate payment'\n      toast.error(errorMessage)\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={handleClose}></div>\n        \n        <div className=\"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl sm:p-6\">\n          {/* Header */}\n          <div className=\"absolute right-0 top-0 hidden pr-4 pt-4 sm:block\">\n            <button\n              type=\"button\"\n              className=\"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-guild-500 focus:ring-offset-2\"\n              onClick={handleClose}\n            >\n              <span className=\"sr-only\">Close</span>\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"space-y-6\">\n            {/* Event Summary */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700 pb-4\">\n              <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\n                Register for {event.title}\n              </h3>\n              <div className=\"flex items-center text-sm text-gray-500 dark:text-gray-400 space-x-4\">\n                <div className=\"flex items-center\">\n                  <CalendarIcon className=\"h-4 w-4 mr-1\" />\n                  {formatEventTime(event.eventDate, event.startTime)}\n                </div>\n                {event.venue && (\n                  <div className=\"flex items-center\">\n                    <span>📍 {event.venue}</span>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {step === 'form' ? (\n              <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n                {/* Meal Preference Section */}\n                <div>\n                  <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                    Your Meal Preference *\n                  </h4>\n                  <select\n                    {...register('mealPreference', { \n                      required: 'Meal preference is required' \n                    })}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white\"\n                  >\n                    <option value=\"\">Select your meal preference *</option>\n                    <option value=\"VEG\">Vegetarian</option>\n                    <option value=\"NON_VEG\">Non-Vegetarian</option>\n                  </select>\n                  {errors.mealPreference && (\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.mealPreference.message}</p>\n                  )}\n                </div>\n\n                {/* Guest Information Section */}\n                <div>\n                  <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                    Guest Information\n                  </h4>\n                  <div className=\"space-y-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        Number of Guests\n                      </label>\n                      <select\n                        {...register('guestCount', { \n                          valueAsNumber: true,\n                          onChange: (e) => {\n                            const count = parseInt(e.target.value)\n                            const guests = Array.from({ length: count }, () => ({\n                              name: '',\n                              email: '',\n                              phone: '',\n                              mealPreference: ''\n                            }))\n                            setValue('guests', guests)\n                          }\n                        })}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white\"\n                      >\n                        <option value={0}>0 Guests</option>\n                        <option value={1}>1 Guest</option>\n                        <option value={2}>2 Guests</option>\n                        <option value={3}>3 Guests</option>\n                        <option value={4}>4 Guests</option>\n                        <option value={5}>5 Guests</option>\n                      </select>\n                    </div>\n\n                    {guestCount > 0 && (\n                      <div className=\"space-y-4\">\n                        <h5 className=\"text-md font-medium text-gray-900 dark:text-white\">\n                          Guest Details\n                        </h5>\n                        {Array.from({ length: guestCount }, (_, index) => (\n                          <div key={index} className=\"border border-gray-200 dark:border-gray-600 rounded-lg p-4 space-y-3\">\n                            <h6 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                              Guest {index + 1}\n                            </h6>\n                            \n                            {/* Guest Name - Required */}\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                Name *\n                              </label>\n                              <input\n                                type=\"text\"\n                                {...register(`guests.${index}.name` as const, { \n                                  required: `Guest ${index + 1} name is required` \n                                })}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white\"\n                                placeholder={`Guest ${index + 1} full name`}\n                              />\n                              {errors.guests?.[index]?.name && (\n                                <p className=\"mt-1 text-sm text-red-600\">{errors.guests[index]?.name?.message}</p>\n                              )}\n                            </div>\n\n                            {/* Guest Email */}\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                Email *\n                              </label>\n                              <input\n                                type=\"email\"\n                                {...register(`guests.${index}.email` as const, { \n                                  required: `Guest ${index + 1} email is required`,\n                                  pattern: {\n                                    value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                                    message: `Guest ${index + 1} email must be valid`\n                                  }\n                                })}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white\"\n                                placeholder={`Guest ${index + 1} email address`}\n                              />\n                              {errors.guests?.[index]?.email && (\n                                <p className=\"mt-1 text-sm text-red-600\">{errors.guests[index]?.email?.message}</p>\n                              )}\n                            </div>\n\n                            {/* Guest Phone */}\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                Phone Number (Optional)\n                              </label>\n                              <input\n                                type=\"tel\"\n                                {...register(`guests.${index}.phone` as const, {\n                                  pattern: {\n                                    value: /^[0-9]{10}$/,\n                                    message: `Guest ${index + 1} phone number must be exactly 10 digits`\n                                  },\n                                  minLength: {\n                                    value: 10,\n                                    message: `Guest ${index + 1} phone number must be exactly 10 digits`\n                                  },\n                                  maxLength: {\n                                    value: 10,\n                                    message: `Guest ${index + 1} phone number must be exactly 10 digits`\n                                  }\n                                })}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white\"\n                                placeholder={`Guest ${index + 1} phone number (10 digits)`}\n                                maxLength={10}\n                                onInput={(e) => {\n                                  // Only allow numbers\n                                  const target = e.target as HTMLInputElement;\n                                  target.value = target.value.replace(/[^0-9]/g, '');\n                                }}\n                              />\n                              {errors.guests?.[index]?.phone && (\n                                <p className=\"mt-1 text-sm text-red-600\">{errors.guests[index]?.phone?.message}</p>\n                              )}\n                            </div>\n\n                            {/* Guest Meal Preference */}\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                Meal Preference\n                              </label>\n                              <select\n                                {...register(`guests.${index}.mealPreference` as const)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white\"\n                              >\n                                <option value=\"\">Select preference</option>\n                                <option value=\"VEG\">Vegetarian</option>\n                                <option value=\"NON_VEG\">Non-Vegetarian</option>\n                              </select>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* Donation Section */}\n                {(event.hasDonations || true) && ( /* Always show for testing */\n                  <div>\n                    <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                      Support Our Event (Optional)\n                    </h4>\n                    <div className=\"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border border-green-200 dark:border-green-700 rounded-lg p-4\">\n                      <div className=\"space-y-3\">\n                        <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                          Your generous donation helps us organize better events for our alumni community. \n                          Any amount is appreciated and will be used for event improvement and future activities.\n                        </p>\n                        <div>\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                            Donation Amount (₹) - Optional\n                          </label>\n                          <input\n                            type=\"number\"\n                            min=\"0\"\n                            step=\"1\"\n                            placeholder=\"Enter amount (e.g., 100)\"\n                            {...register('donationAmount', { \n                              valueAsNumber: true,\n                              min: 0\n                            })}\n                            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:text-white\"\n                          />\n                          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                            💚 Thank you for supporting our alumni community!\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Price Summary */}\n                <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                  <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-3\">\n                    Registration Summary\n                  </h4>\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span>Registration Fee</span>\n                      <span>₹{event.registrationFee}</span>\n                    </div>\n                    {guestCount > 0 && (\n                      <div className=\"flex justify-between\">\n                        <span>Guest Fee ({guestCount} × ₹{event.guestFee})</span>\n                        <span>₹{guestCount * Number(event.guestFee)}</span>\n                      </div>\n                    )}\n                    {donationAmount > 0 && (\n                      <div className=\"flex justify-between text-green-600 dark:text-green-400\">\n                        <span>Donation (Thank you! 💚)</span>\n                        <span>₹{donationAmount}</span>\n                      </div>\n                    )}\n                    <div className=\"border-t border-gray-200 dark:border-gray-600 pt-2 flex justify-between font-semibold text-lg\">\n                      <span>Total Amount</span>\n                      <span className=\"text-guild-600 dark:text-guild-400\">₹{totalAmount}</span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Terms and Conditions */}\n                <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4\">\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"w-5 h-5 bg-yellow-100 dark:bg-yellow-800 rounded-full flex items-center justify-center\">\n                        <span className=\"text-yellow-600 dark:text-yellow-300 text-sm\">!</span>\n                      </div>\n                    </div>\n                    <div className=\"flex-1\">\n                      <h4 className=\"text-sm font-medium text-yellow-800 dark:text-yellow-200\">\n                        Terms & Conditions\n                      </h4>\n                      <div className=\"mt-2 text-xs text-yellow-700 dark:text-yellow-300\">\n                        <ul className=\"list-disc list-inside space-y-1\">\n                          <li>All payments are non-refundable once processed</li>\n                          <li>Event details may be subject to change</li>\n                          <li>Registration confirmation will be sent via email</li>\n                          <li>By proceeding, you agree to our event terms and payment policy</li>\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Form Actions */}\n                <div className=\"flex justify-end space-x-3\">\n                  <button\n                    type=\"button\"\n                    className=\"btn-secondary\"\n                    onClick={handleClose}\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    disabled={isSubmitting || isProcessingPayment}\n                    className=\"btn-guild\"\n                  >\n                    {isSubmitting || isProcessingPayment ? (\n                      <>\n                        <LoadingSpinner size=\"sm\" className=\"mr-2\" />\n                        {isProcessingPayment ? 'Creating Registration...' : 'Processing...'}\n                      </>\n                    ) : (\n                      'Proceed to Payment'\n                    )}\n                  </button>\n                </div>\n              </form>\n            ) : (\n              // Payment Step\n              <div className=\"space-y-6\">\n                <div className=\"text-center\">\n                  <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n                    Complete Your Registration\n                  </h4>\n                  <p className=\"text-gray-600 dark:text-gray-400\">\n                    Please review your registration details and proceed with payment\n                  </p>\n                </div>\n\n                {/* Registration Summary */}\n                <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-6 space-y-6\">\n                  {/* Event Details */}\n                  <div>\n                    <h5 className=\"text-md font-semibold text-gray-900 dark:text-white mb-3\">\n                      Event Details\n                    </h5>\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-400\">Event:</span>\n                        <span className=\"font-medium text-gray-900 dark:text-white\">{event.title}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-400\">Date:</span>\n                        <span className=\"font-medium text-gray-900 dark:text-white\">\n                          {formatEventTime(event.eventDate, event.startTime)}\n                        </span>\n                      </div>\n                      {event.venue && (\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">Venue:</span>\n                          <span className=\"font-medium text-gray-900 dark:text-white\">{event.venue}</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Primary Registrant Details */}\n                  <div className=\"border-t border-gray-200 dark:border-gray-600 pt-4\">\n                    <h5 className=\"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center\">\n                      <UserIcon className=\"h-5 w-5 mr-2\" />\n                      Primary Registrant\n                    </h5>\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-400\">Name:</span>\n                        <span className=\"font-medium text-gray-900 dark:text-white\">{user?.fullName}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-400\">Email:</span>\n                        <span className=\"font-medium text-gray-900 dark:text-white\">{user?.email}</span>\n                      </div>\n                      {registrationData?.mealPreference && (\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">Meal Preference:</span>\n                          <span className=\"font-medium text-gray-900 dark:text-white\">\n                            {registrationData.mealPreference === 'VEG' ? 'Vegetarian' : 'Non-Vegetarian'}\n                          </span>\n                        </div>\n                      )}\n                      {registrationData?.donationAmount && registrationData.donationAmount > 0 && (\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">Donation:</span>\n                          <span className=\"font-medium text-green-600 dark:text-green-400\">\n                            ₹{registrationData.donationAmount} (Thank you! 💚)\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Guest Details */}\n                  {registrationData && registrationData.guestCount > 0 && (\n                    <div className=\"border-t border-gray-200 dark:border-gray-600 pt-4\">\n                      <h5 className=\"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center\">\n                        <UsersIcon className=\"h-5 w-5 mr-2\" />\n                        Guest Details ({registrationData.guestCount} {registrationData.guestCount === 1 ? 'Guest' : 'Guests'})\n                      </h5>\n                      <div className=\"space-y-3\">\n                        {registrationData.guests.map((guest, index) => (\n                          <div key={index} className=\"bg-white dark:bg-gray-800 rounded-md p-3 space-y-1\">\n                            <div className=\"flex justify-between items-center\">\n                              <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                                Guest {index + 1}\n                              </span>\n                            </div>\n                            <div className=\"text-xs space-y-1\">\n                              <div className=\"flex justify-between\">\n                                <span className=\"text-gray-600 dark:text-gray-400\">Name:</span>\n                                <span className=\"text-gray-900 dark:text-white\">{guest.name || 'Not provided'}</span>\n                              </div>\n                              <div className=\"flex justify-between\">\n                                <span className=\"text-gray-600 dark:text-gray-400\">Email:</span>\n                                <span className=\"text-gray-900 dark:text-white\">{guest.email || 'Not provided'}</span>\n                              </div>\n                              {guest.phone && (\n                                <div className=\"flex justify-between\">\n                                  <span className=\"text-gray-600 dark:text-gray-400\">Phone:</span>\n                                  <span className=\"text-gray-900 dark:text-white\">{guest.phone}</span>\n                                </div>\n                              )}\n                              {guest.mealPreference && (\n                                <div className=\"flex justify-between\">\n                                  <span className=\"text-gray-600 dark:text-gray-400\">Meal:</span>\n                                  <span className=\"text-gray-900 dark:text-white\">\n                                    {guest.mealPreference === 'VEG' ? 'Vegetarian' : 'Non-Vegetarian'}\n                                  </span>\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Payment Breakdown */}\n                  <div className=\"border-t border-gray-200 dark:border-gray-600 pt-4\">\n                    <h5 className=\"text-md font-semibold text-gray-900 dark:text-white mb-3\">\n                      Payment Breakdown\n                    </h5>\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-400\">Registration Fee:</span>\n                        <span className=\"font-medium text-gray-900 dark:text-white\">₹{event.registrationFee}</span>\n                      </div>\n                      {registrationData && registrationData.guestCount > 0 && (\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">\n                            Guest Fee ({registrationData.guestCount} × ₹{event.guestFee}):\n                          </span>\n                          <span className=\"font-medium text-gray-900 dark:text-white\">\n                            ₹{registrationData.guestCount * Number(event.guestFee)}\n                          </span>\n                        </div>\n                      )}\n                      {registrationData && registrationData.donationAmount && registrationData.donationAmount > 0 && (\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-green-600 dark:text-green-400\">\n                            Donation (Thank you! 💚):\n                          </span>\n                          <span className=\"font-medium text-green-600 dark:text-green-400\">\n                            ₹{registrationData.donationAmount}\n                          </span>\n                        </div>\n                      )}\n                      <div className=\"border-t border-gray-200 dark:border-gray-600 pt-2 flex justify-between text-lg font-bold\">\n                        <span className=\"text-gray-900 dark:text-white\">Total Amount:</span>\n                        <span className=\"text-guild-600 dark:text-guild-400\">₹{totalAmount}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center justify-center gap-2 text-xs text-gray-500 dark:text-gray-400\">\n                    <svg \n                      className=\"h-4 w-4 text-green-500\" \n                      viewBox=\"0 0 24 24\" \n                      fill=\"currentColor\"\n                    >\n                      <path fillRule=\"evenodd\" d=\"M12.516 2.17a.75.75 0 00-1.032 0 11.209 11.209 0 01-7.877 3.08.75.75 0 00-.722.515A12.74 12.74 0 002.25 9.75c0 5.814 3.966 10.702 9.32 12.118a.75.75 0 00.86 0 12.596 12.596 0 004.911-3.478 12.596 12.596 0 004.409-8.64c0-1.034-.126-2.036-.37-3.002a.75.75 0 00-.722-.515 11.209 11.209 0 01-7.877-3.08z\" clipRule=\"evenodd\" />\n                    </svg>\n                    <span>Secure payment powered by Razorpay</span>\n                  </div>\n                </div>\n\n                {/* Payment Actions */}\n                <div className=\"flex justify-end space-x-3\">\n                  <button\n                    type=\"button\"\n                    className=\"btn-secondary\"\n                    onClick={() => setStep('form')}\n                  >\n                    Back to Form\n                  </button>\n                  \n                  <button\n                    type=\"button\"\n                    className=\"btn-guild flex items-center\"\n                    onClick={handlePayment}\n                    disabled={!registrationData || isProcessingPayment}\n                  >\n                    {isProcessingPayment ? (\n                      <>\n                        <LoadingSpinner size=\"sm\" className=\"mr-2\" />\n                        Processing...\n                      </>\n                    ) : (\n                      <>\n                        <CurrencyRupeeIcon className=\"h-5 w-5 mr-2\" />\n                        Pay ₹{totalAmount}\n                      </>\n                    )}\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default EventRegistrationModal","import React from 'react'\nimport { XMarkIcon, CalendarIcon, MapPinIcon, UsersIcon, CurrencyRupeeIcon, DocumentTextIcon, QrCodeIcon, TicketIcon } from '@heroicons/react/24/outline'\nimport { format } from 'date-fns'\n\ninterface Event {\n  id: string\n  title: string\n  description: string\n  eventDate: string\n  startTime?: string\n  endTime?: string\n  venue?: string\n  meetingLink?: string\n  eventMode: 'PHYSICAL' | 'VIRTUAL' | 'HYBRID'\n  status: string\n  registrationFee: string | number\n  guestFee: string | number\n  category?: {\n    name: string\n  }\n}\n\ninterface Guest {\n  id: string\n  name: string\n  email: string\n  phone?: string\n  mealPreference?: string\n}\n\ninterface QRCode {\n  id: string\n  qrCode: string\n  qrImageUrl?: string\n  generatedAt: string\n  scanCount: number\n  isActive: boolean\n}\n\ninterface Registration {\n  id: string\n  event: Event\n  status: string\n  paymentStatus: string\n  mealPreference?: string\n  registrationDate: string\n  totalAmount: number\n  guests: Guest[]\n  qr?: QRCode\n}\n\ninterface RegistrationDetailsModalProps {\n  registration: Registration | null\n  isOpen: boolean\n  onClose: () => void\n  onViewInvoice?: () => void\n  onViewQR?: () => void\n  onViewTicket?: () => void\n  isLoadingInvoice?: boolean\n  isLoadingTicket?: boolean\n}\n\nconst RegistrationDetailsModal: React.FC<RegistrationDetailsModalProps> = ({\n  registration,\n  isOpen,\n  onClose,\n  onViewInvoice,\n  onViewQR,\n  onViewTicket,\n  isLoadingInvoice = false,\n  isLoadingTicket = false\n}) => {\n  if (!isOpen || !registration) return null\n\n  const { event } = registration\n\n  const formatEventTime = (date: string, startTime?: string, endTime?: string) => {\n    const eventDate = new Date(date)\n    const dateStr = format(eventDate, 'EEEE, MMMM dd, yyyy')\n    \n    if (startTime && endTime) {\n      return `${dateStr} • ${startTime} - ${endTime}`\n    } else if (startTime) {\n      return `${dateStr} • ${startTime}`\n    }\n    return dateStr\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'CONFIRMED':\n        return 'bg-green-100 text-green-800'\n      case 'PENDING':\n        return 'bg-yellow-100 text-yellow-800'\n      case 'CANCELLED':\n        return 'bg-red-100 text-red-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  const getPaymentStatusColor = (status: string) => {\n    switch (status) {\n      case 'PAID':\n        return 'bg-green-100 text-green-800'\n      case 'PENDING':\n        return 'bg-yellow-100 text-yellow-800'\n      case 'FAILED':\n        return 'bg-red-100 text-red-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose}></div>\n        \n        <div className=\"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:p-6\">\n          {/* Header */}\n          <div className=\"absolute right-0 top-0 hidden pr-4 pt-4 sm:block\">\n            <button\n              type=\"button\"\n              className=\"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-guild-500 focus:ring-offset-2\"\n              onClick={onClose}\n            >\n              <span className=\"sr-only\">Close</span>\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"space-y-6\">\n            {/* Title */}\n            <div>\n              <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                Registration Details\n              </h3>\n              <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n                Your registration information for {event.title}\n              </p>\n            </div>\n\n            {/* Status Badges */}\n            <div className=\"flex space-x-3\">\n              <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(registration.status)}`}>\n                Registration: {registration.status}\n              </span>\n              <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${getPaymentStatusColor(registration.paymentStatus)}`}>\n                Payment: {registration.paymentStatus}\n              </span>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n              {/* Event Details */}\n              <div className=\"space-y-6\">\n                <div>\n                  <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                    Event Information\n                  </h4>\n                  \n                  <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3\">\n                    <h5 className=\"font-semibold text-gray-900 dark:text-white\">\n                      {event.title}\n                    </h5>\n                    \n                    {event.category && (\n                      <span className=\"inline-block px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200\">\n                        {event.category.name}\n                      </span>\n                    )}\n\n                    <div className=\"space-y-2 text-sm text-gray-600 dark:text-gray-300\">\n                      <div className=\"flex items-center\">\n                        <CalendarIcon className=\"h-4 w-4 mr-2\" />\n                        {formatEventTime(event.eventDate, event.startTime, event.endTime)}\n                      </div>\n                      \n                      <div className=\"flex items-center\">\n                        <MapPinIcon className=\"h-4 w-4 mr-2\" />\n                        {event.eventMode === 'VIRTUAL' ? 'Virtual Event' : event.venue || 'Venue TBA'}\n                      </div>\n\n                      {Number(event.registrationFee) > 0 && (\n                        <div className=\"flex items-center\">\n                          <CurrencyRupeeIcon className=\"h-4 w-4 mr-2\" />\n                          ₹{event.registrationFee}\n                          {Number(event.guestFee) > 0 && (\n                            <span className=\"ml-1\">(Guest: ₹{event.guestFee})</span>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Guest Information */}\n                {registration.guests && registration.guests.length > 0 && (\n                  <div>\n                    <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                      Guest Information ({registration.guests.length})\n                    </h4>\n                    \n                    <div className=\"space-y-3\">\n                      {registration.guests.map((guest, index) => (\n                        <div key={guest.id} className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                          <h6 className=\"font-medium text-gray-900 dark:text-white\">\n                            Guest {index + 1}: {guest.name}\n                          </h6>\n                          <div className=\"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-300\">\n                            <p><strong>Email:</strong> {guest.email || 'Not provided'}</p>\n                            <p><strong>Phone:</strong> {guest.phone || 'Not provided'}</p>\n                            <p><strong>Meal Preference:</strong> {guest.mealPreference || 'Not specified'}</p>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Registration Details */}\n              <div className=\"space-y-6\">\n                <div>\n                  <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                    Registration Information\n                  </h4>\n                  \n                  <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3\">\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-300\">Registration ID:</span>\n                        <span className=\"font-mono text-gray-900 dark:text-white\">{registration.id}</span>\n                      </div>\n                      \n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-300\">Registration Date:</span>\n                        <span className=\"text-gray-900 dark:text-white\">\n                          {format(new Date(registration.registrationDate), 'MMM dd, yyyy')}\n                        </span>\n                      </div>\n\n                      {registration.mealPreference && (\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600 dark:text-gray-300\">Your Meal:</span>\n                          <span className=\"text-gray-900 dark:text-white\">{registration.mealPreference}</span>\n                        </div>\n                      )}\n\n                      <div className=\"flex justify-between font-semibold text-lg border-t pt-2 mt-3\">\n                        <span className=\"text-gray-600 dark:text-gray-300\">Total Amount:</span>\n                        <span className=\"text-gray-900 dark:text-white\">₹{registration.totalAmount}</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Action Buttons */}\n                <div>\n                  <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                    Actions\n                  </h4>\n                  \n                  <div className=\"space-y-3\">\n                    <button\n                      onClick={onViewInvoice}\n                      className=\"w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500\"\n                    >\n                      <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n                      View Invoice\n                    </button>\n\n                    {registration.qr && (\n                      <button\n                        onClick={onViewQR}\n                        className=\"w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500\"\n                      >\n                        <QrCodeIcon className=\"h-5 w-5 mr-2\" />\n                        Get QR for Check-in\n                      </button>\n                    )}\n\n                    <button\n                      onClick={onViewTicket}\n                      disabled={isLoadingTicket}\n                      className=\"w-full flex items-center justify-center px-4 py-2 bg-guild-600 text-white rounded-md shadow-sm text-sm font-medium hover:bg-guild-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      {isLoadingTicket ? (\n                        <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></div>\n                      ) : (\n                        <TicketIcon className=\"h-5 w-5 mr-2\" />\n                      )}\n                      {isLoadingTicket ? 'Loading Ticket...' : 'View Your Ticket'}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default RegistrationDetailsModal","import React, { useEffect, useRef, useState } from 'react'\nimport { XMarkIcon, ArrowDownTrayIcon, PrinterIcon } from '@heroicons/react/24/outline'\nimport { format } from 'date-fns'\n\n// QR Code Generator Component\nconst QRCodeGenerator: React.FC<{ qrCode: string }> = ({ qrCode }) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [qrImageData, setQrImageData] = useState<string | null>(null)\n\n  useEffect(() => {\n    const generateQR = async () => {\n      try {\n        setIsLoading(true)\n        setError(null)\n        \n        if (!qrCode) {\n          throw new Error('No QR code data provided')\n        }\n        \n        const QRCode = (await import('qrcode')).default\n        \n        // Generate QR as data URL directly instead of canvas\n        const qrDataURL = await QRCode.toDataURL(qrCode, {\n          width: 192, // 48 * 4 (w-48 = 192px)\n          margin: 2,\n          color: {\n            dark: '#000000',\n            light: '#FFFFFF'\n          }\n        })\n        \n        setQrImageData(qrDataURL)\n        setIsLoading(false)\n      } catch (error) {\n        console.error('Error generating QR code:', error)\n        setError(error instanceof Error ? error.message : 'Failed to generate QR code')\n        setIsLoading(false)\n      }\n    }\n\n    if (qrCode) {\n      generateQR()\n    } else {\n      setError('No QR code data available')\n      setIsLoading(false)\n    }\n  }, [qrCode])\n\n  if (isLoading) {\n    return (\n      <div className=\"w-48 h-48 bg-gray-100 flex items-center justify-center text-gray-500\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-guild-600 mx-auto mb-2\"></div>\n          <div className=\"text-sm\">Generating QR Code...</div>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"w-48 h-48 bg-red-50 border-2 border-red-200 flex items-center justify-center text-red-600\">\n        <div className=\"text-center p-4\">\n          <div className=\"text-sm font-medium mb-1\">QR Generation Failed</div>\n          <div className=\"text-xs\">{error}</div>\n        </div>\n      </div>\n    )\n  }\n\n  if (qrImageData) {\n    return (\n      <img \n        src={qrImageData} \n        alt=\"QR Code\" \n        className=\"w-48 h-48\"\n      />\n    )\n  }\n\n  return <canvas ref={canvasRef} className=\"w-48 h-48\" />\n}\n\ninterface QRCodeModalProps {\n  isOpen: boolean\n  onClose: () => void\n  qrData: {\n    qrCode: string\n    qrImageUrl?: string\n    event: {\n      title: string\n      eventDate: string\n      venue?: string\n    }\n    user: {\n      fullName: string\n      email: string\n    }\n    registrationId: string\n  } | null\n}\n\nconst QRCodeModal: React.FC<QRCodeModalProps> = ({ isOpen, onClose, qrData }) => {\n  if (!isOpen || !qrData) return null\n\n  const handleDownload = () => {\n    if (qrData.qrImageUrl) {\n      // Download existing QR image\n      const link = document.createElement('a')\n      link.href = qrData.qrImageUrl\n      link.download = `qr-code-${qrData.registrationId}.png`\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n    } else {\n      // Generate QR code image and download\n      generateAndDownloadQR()\n    }\n  }\n\n  const generateAndDownloadQR = async () => {\n    try {\n      // Import QR code library dynamically\n      const QRCode = (await import('qrcode')).default\n      \n      // Generate QR code as data URL\n      const qrDataURL = await QRCode.toDataURL(qrData.qrCode, {\n        width: 400,\n        margin: 2,\n        color: {\n          dark: '#000000',\n          light: '#FFFFFF'\n        }\n      })\n\n      // Create download link\n      const link = document.createElement('a')\n      link.href = qrDataURL\n      link.download = `qr-code-${qrData.registrationId}.png`\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n    } catch (error) {\n      console.error('Error generating QR code:', error)\n      alert('Failed to generate QR code. Please try again.')\n    }\n  }\n\n  const handlePrint = () => {\n    const printWindow = window.open('', '_blank')\n    if (printWindow) {\n      printWindow.document.write(`\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <title>Event QR Code - ${qrData.event.title}</title>\n            <style>\n              body {\n                font-family: Arial, sans-serif;\n                text-align: center;\n                padding: 20px;\n                margin: 0;\n              }\n              .qr-container {\n                max-width: 600px;\n                margin: 0 auto;\n                border: 2px solid #000;\n                padding: 30px;\n                border-radius: 10px;\n              }\n              .qr-code {\n                margin: 20px 0;\n              }\n              .qr-code img {\n                width: 300px;\n                height: 300px;\n              }\n              .event-details {\n                margin: 20px 0;\n                line-height: 1.6;\n              }\n              .title {\n                font-size: 24px;\n                font-weight: bold;\n                margin-bottom: 10px;\n              }\n              .subtitle {\n                font-size: 18px;\n                color: #666;\n                margin-bottom: 20px;\n              }\n              .details {\n                font-size: 14px;\n                color: #333;\n              }\n              @media print {\n                body { margin: 0; }\n                .qr-container { border: 1px solid #000; }\n              }\n            </style>\n          </head>\n          <body>\n            <div class=\"qr-container\">\n              <div class=\"title\">${qrData.event.title}</div>\n              <div class=\"subtitle\">Event Check-in QR Code</div>\n              <div class=\"qr-code\">\n                <canvas id=\"qr-canvas\"></canvas>\n              </div>\n              <div class=\"event-details\">\n                <div class=\"details\">\n                  <strong>Participant:</strong> ${qrData.user.fullName}<br>\n                  <strong>Email:</strong> ${qrData.user.email}<br>\n                  <strong>Event Date:</strong> ${format(new Date(qrData.event.eventDate), 'EEEE, MMMM dd, yyyy')}<br>\n                  ${qrData.event.venue ? `<strong>Venue:</strong> ${qrData.event.venue}<br>` : ''}\n                  <strong>Registration ID:</strong> ${qrData.registrationId}<br>\n                  <br>\n                  <em>Please present this QR code at the event entrance for quick check-in</em>\n                </div>\n              </div>\n            </div>\n            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js\"></script>\n            <script>\n              // Generate QR code\n              const qr = qrcode(0, 'M');\n              qr.addData('${qrData.qrCode}');\n              qr.make();\n              \n              // Create canvas and draw QR code\n              const canvas = document.getElementById('qr-canvas');\n              const ctx = canvas.getContext('2d');\n              const cellSize = 8;\n              const moduleCount = qr.getModuleCount();\n              canvas.width = moduleCount * cellSize;\n              canvas.height = moduleCount * cellSize;\n              \n              for (let row = 0; row < moduleCount; row++) {\n                for (let col = 0; col < moduleCount; col++) {\n                  ctx.fillStyle = qr.isDark(row, col) ? '#000000' : '#FFFFFF';\n                  ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);\n                }\n              }\n              \n              // Auto print after loading\n              window.onload = function() {\n                window.print();\n                window.onafterprint = function() {\n                  window.close();\n                }\n              }\n            </script>\n          </body>\n        </html>\n      `)\n      printWindow.document.close()\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose}></div>\n        \n        <div className=\"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6\">\n          {/* Header */}\n          <div className=\"absolute right-0 top-0 hidden pr-4 pt-4 sm:block\">\n            <button\n              type=\"button\"\n              className=\"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-guild-500 focus:ring-offset-2\"\n              onClick={onClose}\n            >\n              <span className=\"sr-only\">Close</span>\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"sm:flex sm:items-start\">\n            <div className=\"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full\">\n              <h3 className=\"text-lg font-medium leading-6 text-gray-900 dark:text-white\">\n                Event Check-in QR Code\n              </h3>\n              <div className=\"mt-4\">\n                {/* Event Info */}\n                <div className=\"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                  <h4 className=\"font-semibold text-gray-900 dark:text-white\">{qrData.event.title}</h4>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    {format(new Date(qrData.event.eventDate), 'EEEE, MMMM dd, yyyy')}\n                  </p>\n                  {qrData.event.venue && (\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">{qrData.event.venue}</p>\n                  )}\n                </div>\n\n                {/* QR Code Display */}\n                <div className=\"flex justify-center mb-4\">\n                  <div className=\"p-4 bg-white rounded-lg shadow-inner\">\n                    {qrData.qrImageUrl ? (\n                      <img \n                        src={qrData.qrImageUrl} \n                        alt=\"QR Code\" \n                        className=\"w-48 h-48\"\n                      />\n                    ) : (\n                      <QRCodeGenerator qrCode={qrData.qrCode} />\n                    )}\n                  </div>\n                </div>\n\n                {/* User Info */}\n                <div className=\"text-center mb-4\">\n                  <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    <strong>Participant:</strong> {qrData.user.fullName}\n                  </p>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                    Registration ID: {qrData.registrationId}\n                  </p>\n                </div>\n\n                {/* Instructions */}\n                <div className=\"bg-blue-50 dark:bg-blue-900 p-3 rounded-lg mb-4\">\n                  <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n                    📱 <strong>Instructions:</strong> Present this QR code at the event entrance for quick check-in.\n                    You can download or print this QR code for easy access.\n                  </p>\n                </div>\n\n                {/* Action Buttons */}\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={handleDownload}\n                    className=\"flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-guild-600 hover:bg-guild-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500\"\n                  >\n                    <ArrowDownTrayIcon className=\"h-4 w-4 mr-2\" />\n                    Download QR\n                  </button>\n                  \n                  <button\n                    onClick={handlePrint}\n                    className=\"flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500\"\n                  >\n                    <PrinterIcon className=\"h-4 w-4 mr-2\" />\n                    Print QR\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default QRCodeModal","import React from 'react'\nimport { XMarkIcon, ArrowDownTrayIcon, PrinterIcon } from '@heroicons/react/24/outline'\nimport { format } from 'date-fns'\n\ninterface InvoiceModalProps {\n  isOpen: boolean\n  onClose: () => void\n  isLoading?: boolean\n  invoiceData: {\n    invoice: {\n      id: string\n      invoiceNumber: string\n      amount: number\n      currency: string\n      createdAt: string\n      dueDate?: string\n      status: string\n    }\n    transaction: {\n      id: string\n      transactionNumber: string\n      amount: number\n      currency: string\n      paymentMethod?: string\n      completedAt?: string\n      provider?: string\n      status?: string\n    }\n    registration: {\n      id: string\n      totalAmount: number\n      registrationFeePaid: number\n      guestFeesPaid: number\n      donationAmount?: number\n      platformFee?: number\n      event: {\n        title: string\n        eventDate: string\n        venue?: string\n        registrationFee: number\n        guestFee?: number\n      }\n      guests: any[]\n      totalGuests: number\n      activeGuests: number\n    }\n    user: {\n      fullName: string\n      email: string\n      whatsappNumber?: string\n    }\n    organization: {\n      name: string\n      officialEmail?: string\n      officeAddress?: string\n      logoUrl?: string\n    }\n  } | null\n}\n\nconst InvoiceModal: React.FC<InvoiceModalProps> = ({ isOpen, onClose, isLoading = false, invoiceData }) => {\n  if (!isOpen) return null\n\n  // Show loading state if no data yet\n  if (isLoading || !invoiceData) {\n    return (\n      <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n        <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n          <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose}></div>\n          <div className=\"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md sm:p-6\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-guild-600 mx-auto mb-4\"></div>\n              <p className=\"text-gray-600 dark:text-gray-300\">Loading invoice...</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const { invoice, transaction, registration, user, organization } = invoiceData\n\n  const handleDownloadPDF = async () => {\n    try {\n      // Import html2canvas and jsPDF dynamically\n      const html2canvas = (await import('html2canvas')).default\n      const jsPDF = (await import('jspdf')).default\n\n      // Get the invoice element\n      const element = document.getElementById('invoice-content')\n      if (!element) return\n\n      // Generate canvas from HTML\n      const canvas = await html2canvas(element, {\n        scale: 2,\n        useCORS: true,\n        allowTaint: true,\n        backgroundColor: '#ffffff'\n      })\n\n      // Create PDF\n      const imgData = canvas.toDataURL('image/png')\n      const pdf = new jsPDF('p', 'mm', 'a4')\n      \n      const imgWidth = 210 // A4 width in mm\n      const pageHeight = 295 // A4 height in mm\n      const imgHeight = (canvas.height * imgWidth) / canvas.width\n      let heightLeft = imgHeight\n\n      let position = 0\n\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight)\n      heightLeft -= pageHeight\n\n      while (heightLeft >= 0) {\n        position = heightLeft - imgHeight\n        pdf.addPage()\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight)\n        heightLeft -= pageHeight\n      }\n\n      pdf.save(`invoice-${invoice.invoiceNumber}.pdf`)\n    } catch (error) {\n      console.error('Error generating PDF:', error)\n      alert('Failed to generate PDF. Please try again.')\n    }\n  }\n\n  const handlePrint = () => {\n    window.print()\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose}></div>\n        \n        <div className=\"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:p-6\">\n          {/* Header */}\n          <div className=\"absolute right-0 top-0 hidden pr-4 pt-4 sm:block print:hidden\">\n            <button\n              type=\"button\"\n              className=\"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-guild-500 focus:ring-offset-2\"\n              onClick={onClose}\n            >\n              <span className=\"sr-only\">Close</span>\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Invoice Content */}\n          <div id=\"invoice-content\" className=\"bg-white text-black p-8\" style={{ color: '#000000' }}>\n            {/* Header */}\n            <div className=\"flex justify-between items-start mb-8\">\n              <div>\n                <h1 className=\"text-3xl font-bold text-black mb-2\">INVOICE</h1>\n                <p className=\"text-gray-700\">#{invoice.invoiceNumber}</p>\n              </div>\n              <div className=\"text-right\">\n                <h2 className=\"text-xl font-semibold text-black mb-2\">{organization.name}</h2>\n                {organization.officialEmail && (\n                  <p className=\"text-gray-700\">{organization.officialEmail}</p>\n                )}\n                {organization.officeAddress && (\n                  <p className=\"text-gray-700 whitespace-pre-line\">{organization.officeAddress}</p>\n                )}\n              </div>\n            </div>\n\n            {/* Bill To & Invoice Details */}\n            <div className=\"grid grid-cols-2 gap-8 mb-8\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-black mb-4\">Bill To:</h3>\n                <div className=\"text-gray-800\">\n                  <p className=\"font-medium text-black\">{user.fullName}</p>\n                  <p className=\"text-gray-700\">{user.email}</p>\n                  {user.whatsappNumber && <p className=\"text-gray-700\">{user.whatsappNumber}</p>}\n                </div>\n              </div>\n              <div>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-700\">Invoice Date:</span>\n                    <span className=\"font-medium text-black\">\n                      {invoice.createdAt ? format(new Date(invoice.createdAt), 'MMM dd, yyyy') : 'N/A'}\n                    </span>\n                  </div>\n                  {invoice.dueDate && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-700\">Due Date:</span>\n                      <span className=\"font-medium text-black\">{format(new Date(invoice.dueDate), 'MMM dd, yyyy')}</span>\n                    </div>\n                  )}\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-700\">Status:</span>\n                    <span className={`font-medium px-2 py-1 rounded-full text-xs ${\n                      invoice.status === 'EMAILED' || invoice.status === 'PAID' \n                        ? 'bg-green-100 text-green-800' \n                        : 'bg-yellow-100 text-yellow-800'\n                    }`}>\n                      {invoice.status}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Event Details */}\n            <div className=\"mb-8\">\n              <h3 className=\"text-lg font-semibold text-black mb-4\">Event Registration</h3>\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <h4 className=\"font-semibold text-black mb-2\">{registration.event.title}</h4>\n                <div className=\"grid grid-cols-2 gap-4 text-sm text-gray-700\">\n                  <div>\n                    <span className=\"font-medium\">Event Date:</span> {format(new Date(registration.event.eventDate), 'EEEE, MMMM dd, yyyy')}\n                  </div>\n                  {registration.event.venue && (\n                    <div>\n                      <span className=\"font-medium\">Venue:</span> {registration.event.venue}\n                    </div>\n                  )}\n                  <div>\n                    <span className=\"font-medium\">Guests:</span> {registration.activeGuests || registration.totalGuests || 0}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Invoice Items */}\n            <div className=\"mb-8\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-50\">\n                    <th className=\"border border-gray-300 px-4 py-2 text-left font-semibold text-black\">Description</th>\n                    <th className=\"border border-gray-300 px-4 py-2 text-right font-semibold text-black\">Rate</th>\n                    <th className=\"border border-gray-300 px-4 py-2 text-right font-semibold text-black\">Amount</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr className=\"bg-white\">\n                    <td className=\"border border-gray-300 px-4 py-3 text-black\">\n                      Event Registration - {registration.event.title}\n                    </td>\n                    <td className=\"border border-gray-300 px-4 py-3 text-right text-black\">\n                      ₹{registration.registrationFeePaid || registration.event.registrationFee}\n                    </td>\n                    <td className=\"border border-gray-300 px-4 py-3 text-right text-black\">\n                      ₹{registration.registrationFeePaid || registration.event.registrationFee}\n                    </td>\n                  </tr>\n                  {(registration.totalGuests > 0 || registration.activeGuests > 0) && (\n                    <tr className=\"bg-white\">\n                      <td className=\"border border-gray-300 px-4 py-3 text-black\">\n                        Guest Registration × {registration.activeGuests || registration.totalGuests}\n                      </td>\n                      <td className=\"border border-gray-300 px-4 py-3 text-right text-black\">\n                        ₹{registration.event.guestFee || 0}\n                      </td>\n                      <td className=\"border border-gray-300 px-4 py-3 text-right text-black\">\n                        ₹{registration.guestFeesPaid || ((registration.event.guestFee || 0) * (registration.activeGuests || registration.totalGuests))}\n                      </td>\n                    </tr>\n                  )}\n                  {registration.donationAmount && registration.donationAmount > 0 && (\n                    <tr className=\"bg-white\">\n                      <td className=\"border border-gray-300 px-4 py-3 text-black\">\n                        Donation Amount\n                      </td>\n                      <td className=\"border border-gray-300 px-4 py-3 text-right text-black\">\n                        ₹{registration.donationAmount}\n                      </td>\n                      <td className=\"border border-gray-300 px-4 py-3 text-right text-black\">\n                        ₹{registration.donationAmount}\n                      </td>\n                    </tr>\n                  )}\n                  {registration.platformFee && registration.platformFee > 0 && (\n                    <tr className=\"bg-white\">\n                      <td className=\"border border-gray-300 px-4 py-3 text-black\">\n                        Platform Fee\n                      </td>\n                      <td className=\"border border-gray-300 px-4 py-3 text-right text-black\">\n                        ₹{registration.platformFee}\n                      </td>\n                      <td className=\"border border-gray-300 px-4 py-3 text-right text-black\">\n                        ₹{registration.platformFee}\n                      </td>\n                    </tr>\n                  )}\n                </tbody>\n              </table>\n            </div>\n\n            {/* Totals */}\n            <div className=\"flex justify-end mb-8\">\n              <div className=\"w-64\">\n                <div className=\"flex justify-between py-2 border-b border-gray-200\">\n                  <span className=\"font-medium text-black\">Subtotal:</span>\n                  <span className=\"text-black\">₹{registration.totalAmount || invoice.amount}</span>\n                </div>\n                <div className=\"flex justify-between py-3 text-lg font-bold\">\n                  <span className=\"text-black\">Total:</span>\n                  <span className=\"text-black\">₹{registration.totalAmount || invoice.amount}</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Payment Information */}\n            {transaction.completedAt && (\n              <div className=\"border-t pt-4\">\n                <h3 className=\"text-lg font-semibold text-black mb-2\">Payment Information</h3>\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                  <div>\n                    <span className=\"text-gray-700\">Transaction ID:</span>\n                    <span className=\"font-mono ml-2 text-black\">{transaction.transactionNumber}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-gray-700\">Payment Date:</span>\n                    <span className=\"ml-2 text-black\">{format(new Date(transaction.completedAt), 'MMM dd, yyyy HH:mm')}</span>\n                  </div>\n                  {transaction.paymentMethod && (\n                    <div>\n                      <span className=\"text-gray-700\">Payment Method:</span>\n                      <span className=\"ml-2 text-black\">{transaction.paymentMethod}</span>\n                    </div>\n                  )}\n                  <div>\n                    <span className=\"text-gray-700\">Amount Paid:</span>\n                    <span className=\"ml-2 font-medium text-black\">₹{transaction.amount}</span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Footer */}\n            <div className=\"mt-8 pt-4 border-t text-center text-sm text-gray-600\">\n              <p>Thank you for your registration!</p>\n              <p>This invoice was generated on {format(new Date(), 'MMM dd, yyyy HH:mm')}</p>\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-3 mt-4 print:hidden\">\n            <button\n              onClick={handleDownloadPDF}\n              className=\"flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-guild-600 hover:bg-guild-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500\"\n            >\n              <ArrowDownTrayIcon className=\"h-4 w-4 mr-2\" />\n              Download PDF\n            </button>\n            \n            <button\n              onClick={handlePrint}\n              className=\"flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500\"\n            >\n              <PrinterIcon className=\"h-4 w-4 mr-2\" />\n              Print Invoice\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default InvoiceModal","import React, { useEffect, useRef, useState } from 'react'\nimport { XMarkIcon, ArrowDownTrayIcon, PrinterIcon } from '@heroicons/react/24/outline'\nimport { format } from 'date-fns'\n\n// QR Code Generator Component for Tickets\nconst QRCodeGeneratorForTicket: React.FC<{ qrCode: string }> = ({ qrCode }) => {\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [qrImageData, setQrImageData] = useState<string | null>(null)\n\n  useEffect(() => {\n    const generateQR = async () => {\n      try {\n        setIsLoading(true)\n        setError(null)\n        \n        if (!qrCode) {\n          throw new Error('No QR code data provided')\n        }\n        \n        const QRCode = (await import('qrcode')).default\n        \n        // Generate QR as data URL directly instead of canvas\n        const qrDataURL = await QRCode.toDataURL(qrCode, {\n          width: 128, // 32 * 4 (w-32 = 128px)\n          margin: 2,\n          color: {\n            dark: '#000000',\n            light: '#FFFFFF'\n          }\n        })\n        \n        setQrImageData(qrDataURL)\n        setIsLoading(false)\n      } catch (error) {\n        console.error('Error generating ticket QR code:', error)\n        setError(error instanceof Error ? error.message : 'Failed to generate QR code')\n        setIsLoading(false)\n      }\n    }\n\n    if (qrCode) {\n      generateQR()\n    } else {\n      setError('No QR code data available')\n      setIsLoading(false)\n    }\n  }, [qrCode])\n\n  if (isLoading) {\n    return (\n      <div className=\"w-32 h-32 mx-auto mb-3 bg-gray-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-guild-600 mx-auto mb-1\"></div>\n          <div className=\"text-xs text-gray-500\">Loading...</div>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"w-32 h-32 mx-auto mb-3 bg-red-50 border border-red-200 flex items-center justify-center\">\n        <div className=\"text-center p-2\">\n          <div className=\"text-xs text-red-600\">QR Error</div>\n        </div>\n      </div>\n    )\n  }\n\n  if (qrImageData) {\n    return (\n      <img \n        src={qrImageData} \n        alt=\"QR Code\" \n        className=\"w-32 h-32 mx-auto mb-3\"\n      />\n    )\n  }\n\n  return null\n}\n\ninterface TicketModalProps {\n  isOpen: boolean\n  onClose: () => void\n  isLoading?: boolean\n  ticketData: {\n    registration: {\n      id: string\n      status: string\n      event: {\n        title: string\n        description: string\n        eventDate: string\n        startTime?: string\n        endTime?: string\n        venue?: string\n        eventMode: 'PHYSICAL' | 'VIRTUAL' | 'HYBRID'\n        category?: {\n          name: string\n        }\n      }\n      mealPreference?: string\n      guests: any[]\n      qr?: {\n        qrCode: string\n        qrImageUrl?: string\n      }\n    }\n    user: {\n      fullName: string\n      email: string\n      batch?: number\n    }\n    organization: {\n      name: string\n    }\n  } | null\n}\n\nconst TicketModal: React.FC<TicketModalProps> = ({ isOpen, onClose, ticketData, isLoading = false }) => {\n  if (!isOpen) return null\n\n  // If loading or no data, we'll handle it in the render\n  const registration = ticketData?.registration\n  const user = ticketData?.user\n  const organization = ticketData?.organization\n  const event = registration?.event\n\n  const handleDownload = async () => {\n    try {\n      // Import html2canvas dynamically\n      const html2canvas = (await import('html2canvas')).default\n\n      // Get the ticket element\n      const element = document.getElementById('ticket-content')\n      if (!element) return\n\n      // Generate canvas from HTML\n      const canvas = await html2canvas(element, {\n        scale: 2,\n        useCORS: true,\n        allowTaint: true,\n        backgroundColor: '#ffffff'\n      })\n\n      // Create download link\n      const link = document.createElement('a')\n      link.href = canvas.toDataURL('image/png')\n      link.download = `ticket-${event.title.replace(/[^a-zA-Z0-9]/g, '-')}-${registration.id}.png`\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n    } catch (error) {\n      console.error('Error generating ticket image:', error)\n      alert('Failed to download ticket. Please try again.')\n    }\n  }\n\n  const handlePrint = () => {\n    const printWindow = window.open('', '_blank')\n    if (printWindow) {\n      printWindow.document.write(`\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <title>Event Ticket - ${event.title}</title>\n            <style>\n              * { margin: 0; padding: 0; box-sizing: border-box; }\n              body {\n                font-family: 'Arial', sans-serif;\n                background: #f5f5f5;\n                padding: 20px;\n              }\n              .ticket {\n                width: 800px;\n                margin: 0 auto;\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                border-radius: 20px;\n                overflow: hidden;\n                box-shadow: 0 20px 40px rgba(0,0,0,0.1);\n                position: relative;\n              }\n              .ticket::before {\n                content: '';\n                position: absolute;\n                width: 40px;\n                height: 40px;\n                background: #f5f5f5;\n                border-radius: 50%;\n                left: -20px;\n                top: 50%;\n                transform: translateY(-50%);\n              }\n              .ticket::after {\n                content: '';\n                position: absolute;\n                width: 40px;\n                height: 40px;\n                background: #f5f5f5;\n                border-radius: 50%;\n                right: -20px;\n                top: 50%;\n                transform: translateY(-50%);\n              }\n              .ticket-content {\n                padding: 40px;\n                color: white;\n                position: relative;\n              }\n              .ticket-header {\n                text-align: center;\n                margin-bottom: 30px;\n                border-bottom: 2px dashed rgba(255,255,255,0.3);\n                padding-bottom: 20px;\n              }\n              .ticket-title {\n                font-size: 32px;\n                font-weight: bold;\n                margin-bottom: 10px;\n                text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n              }\n              .organization-name {\n                font-size: 18px;\n                opacity: 0.9;\n                margin-bottom: 20px;\n              }\n              .ticket-body {\n                display: grid;\n                grid-template-columns: 1fr auto;\n                gap: 40px;\n                align-items: center;\n              }\n              .event-details {\n                display: grid;\n                grid-template-columns: 1fr 1fr;\n                gap: 20px;\n              }\n              .detail-item {\n                margin-bottom: 15px;\n              }\n              .detail-label {\n                font-size: 14px;\n                opacity: 0.8;\n                margin-bottom: 5px;\n              }\n              .detail-value {\n                font-size: 18px;\n                font-weight: 600;\n              }\n              .qr-section {\n                text-align: center;\n                background: white;\n                padding: 20px;\n                border-radius: 15px;\n                box-shadow: 0 10px 20px rgba(0,0,0,0.1);\n              }\n              .qr-code {\n                width: 150px;\n                height: 150px;\n                margin-bottom: 10px;\n              }\n              .qr-text {\n                color: #333;\n                font-size: 12px;\n                font-weight: 600;\n              }\n              .ticket-footer {\n                margin-top: 30px;\n                text-align: center;\n                padding-top: 20px;\n                border-top: 2px dashed rgba(255,255,255,0.3);\n                font-size: 14px;\n                opacity: 0.8;\n              }\n              @media print {\n                body { margin: 0; padding: 10px; }\n                .ticket { box-shadow: none; }\n              }\n            </style>\n          </head>\n          <body>\n            <div class=\"ticket\">\n              <div class=\"ticket-content\">\n                <div class=\"ticket-header\">\n                  <div class=\"ticket-title\">${event.title}</div>\n                  <div class=\"organization-name\">${organization.name}</div>\n                  ${event.category ? `<div style=\"background: rgba(255,255,255,0.2); display: inline-block; padding: 5px 15px; border-radius: 20px; font-size: 12px; margin-top: 10px;\">${event.category.name}</div>` : ''}\n                </div>\n                \n                <div class=\"ticket-body\">\n                  <div class=\"event-details\">\n                    <div class=\"detail-item\">\n                      <div class=\"detail-label\">PARTICIPANT</div>\n                      <div class=\"detail-value\">${user.fullName}</div>\n                    </div>\n                    <div class=\"detail-item\">\n                      <div class=\"detail-label\">EMAIL</div>\n                      <div class=\"detail-value\">${user.email}</div>\n                    </div>\n                    <div class=\"detail-item\">\n                      <div class=\"detail-label\">EVENT DATE</div>\n                      <div class=\"detail-value\">${format(new Date(event.eventDate), 'MMM dd, yyyy')}</div>\n                    </div>\n                    <div class=\"detail-item\">\n                      <div class=\"detail-label\">TIME</div>\n                      <div class=\"detail-value\">${event.startTime && event.endTime ? `${event.startTime} - ${event.endTime}` : event.startTime || 'TBD'}</div>\n                    </div>\n                    <div class=\"detail-item\">\n                      <div class=\"detail-label\">VENUE</div>\n                      <div class=\"detail-value\">${event.eventMode === 'VIRTUAL' ? 'Virtual Event' : event.venue || 'TBD'}</div>\n                    </div>\n                    <div class=\"detail-item\">\n                      <div class=\"detail-label\">STATUS</div>\n                      <div class=\"detail-value\">${registration.status}</div>\n                    </div>\n                  </div>\n                  \n                  ${registration.qr ? `\n                  <div class=\"qr-section\">\n                    <canvas id=\"qr-canvas\" class=\"qr-code\"></canvas>\n                    <div class=\"qr-text\">SCAN FOR CHECK-IN</div>\n                  </div>\n                  ` : ''}\n                </div>\n                \n                <div class=\"ticket-footer\">\n                  <div>Registration ID: ${registration.id}</div>\n                  <div>This ticket is valid for the specified event only</div>\n                  <div>Generated on ${format(new Date(), 'MMM dd, yyyy HH:mm')}</div>\n                </div>\n              </div>\n            </div>\n            \n            ${registration.qr ? `\n            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js\"></script>\n            <script>\n              // Generate QR code\n              const qr = qrcode(0, 'M');\n              qr.addData('${registration.qr.qrCode}');\n              qr.make();\n              \n              // Create canvas and draw QR code\n              const canvas = document.getElementById('qr-canvas');\n              const ctx = canvas.getContext('2d');\n              const cellSize = 6;\n              const moduleCount = qr.getModuleCount();\n              canvas.width = moduleCount * cellSize;\n              canvas.height = moduleCount * cellSize;\n              \n              for (let row = 0; row < moduleCount; row++) {\n                for (let col = 0; col < moduleCount; col++) {\n                  ctx.fillStyle = qr.isDark(row, col) ? '#000000' : '#FFFFFF';\n                  ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);\n                }\n              }\n            </script>\n            ` : ''}\n            \n            <script>\n              window.onload = function() {\n                window.print();\n                window.onafterprint = function() {\n                  window.close();\n                }\n              }\n            </script>\n          </body>\n        </html>\n      `)\n      printWindow.document.close()\n    }\n  }\n\n  const formatEventTime = (date: string, startTime?: string, endTime?: string) => {\n    const eventDate = new Date(date)\n    const dateStr = format(eventDate, 'EEEE, MMMM dd, yyyy')\n    \n    if (startTime && endTime) {\n      return `${dateStr} • ${startTime} - ${endTime}`\n    } else if (startTime) {\n      return `${dateStr} • ${startTime}`\n    }\n    return dateStr\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose}></div>\n        \n        <div className=\"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:p-6\">\n          \n            {/* Header */}\n            <div className=\"absolute right-0 top-0 hidden pr-4 pt-4 sm:block print:hidden\">\n              <button\n                type=\"button\"\n                className=\"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-guild-500 focus:ring-offset-2\"\n                onClick={onClose}\n              >\n                <span className=\"sr-only\">Close</span>\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            {/* Loading State */}\n            {isLoading && (\n              <div className=\"flex flex-col items-center justify-center py-12\">\n                <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-guild-600 mb-4\"></div>\n                <p className=\"text-gray-600 dark:text-gray-400 text-lg\">Loading your ticket...</p>\n                <p className=\"text-gray-500 dark:text-gray-500 text-sm mt-2\">Please wait while we prepare your event ticket</p>\n              </div>\n            )}\n\n            {/* Ticket Preview */}\n            {!isLoading && ticketData && (\n              <div id=\"ticket-content\" className=\"max-w-4xl mx-auto\">\n                <div className=\"relative bg-gradient-to-r from-guild-500 to-purple-600 rounded-2xl overflow-hidden shadow-2xl\">\n                {/* Decorative circles */}\n                <div className=\"absolute w-8 h-8 bg-white rounded-full -left-4 top-1/2 transform -translate-y-1/2\"></div>\n                <div className=\"absolute w-8 h-8 bg-white rounded-full -right-4 top-1/2 transform -translate-y-1/2\"></div>\n                \n                {/* Ticket Content */}\n                <div className=\"p-8 text-white\">\n                  {/* Header */}\n                  <div className=\"text-center mb-6 border-b-2 border-dashed border-white/30 pb-4\">\n                    <h1 className=\"text-3xl font-bold mb-2 text-shadow-lg\">{event.title}</h1>\n                    <p className=\"text-lg opacity-90\">{organization.name}</p>\n                    {event.category && (\n                      <span className=\"inline-block mt-2 px-4 py-1 bg-white/20 rounded-full text-sm\">\n                        {event.category.name}\n                      </span>\n                    )}\n                  </div>\n\n                  {/* Body */}\n                  <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 items-center\">\n                    {/* Event & User Details */}\n                    <div className=\"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm opacity-80\">PARTICIPANT</p>\n                        <p className=\"text-lg font-semibold\">{user.fullName}</p>\n                      </div>\n                      \n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm opacity-80\">EMAIL</p>\n                        <p className=\"text-lg font-semibold\">{user.email}</p>\n                      </div>\n\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm opacity-80\">EVENT DATE</p>\n                        <p className=\"text-lg font-semibold\">{format(new Date(event.eventDate), 'MMM dd, yyyy')}</p>\n                      </div>\n\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm opacity-80\">TIME</p>\n                        <p className=\"text-lg font-semibold\">\n                          {event.startTime && event.endTime \n                            ? `${event.startTime} - ${event.endTime}` \n                            : event.startTime || 'TBD'\n                          }\n                        </p>\n                      </div>\n\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm opacity-80\">VENUE</p>\n                        <p className=\"text-lg font-semibold\">\n                          {event.eventMode === 'VIRTUAL' ? 'Virtual Event' : event.venue || 'TBD'}\n                        </p>\n                      </div>\n\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm opacity-80\">STATUS</p>\n                        <p className=\"text-lg font-semibold\">{registration.status}</p>\n                      </div>\n\n                      {registration.mealPreference && (\n                        <div className=\"space-y-1\">\n                          <p className=\"text-sm opacity-80\">MEAL</p>\n                          <p className=\"text-lg font-semibold\">{registration.mealPreference}</p>\n                        </div>\n                      )}\n\n                      {registration.guests.length > 0 && (\n                        <div className=\"space-y-1\">\n                          <p className=\"text-sm opacity-80\">GUESTS</p>\n                          <p className=\"text-lg font-semibold\">{registration.guests.length}</p>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* QR Code Section */}\n                    {registration.qr && (\n                      <div className=\"text-center bg-white rounded-xl p-6 shadow-lg\">\n                        {registration.qr.qrImageUrl ? (\n                          <img \n                            src={registration.qr.qrImageUrl} \n                            alt=\"QR Code\" \n                            className=\"w-32 h-32 mx-auto mb-3\"\n                          />\n                        ) : registration.qr.qrCode ? (\n                          <QRCodeGeneratorForTicket qrCode={registration.qr.qrCode} />\n                        ) : (\n                          <div className=\"w-32 h-32 mx-auto mb-3 bg-gray-100 flex items-center justify-center\">\n                            <span className=\"text-gray-500 text-xs\">QR Code</span>\n                          </div>\n                        )}\n                        <p className=\"text-gray-800 text-sm font-semibold\">SCAN FOR CHECK-IN</p>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Footer */}\n                  <div className=\"mt-6 pt-4 border-t-2 border-dashed border-white/30 text-center text-sm opacity-80\">\n                    <p>Registration ID: {registration.id}</p>\n                    <p className=\"mt-1\">This ticket is valid for the specified event only</p>\n                    <p className=\"mt-1\">Generated on {format(new Date(), 'MMM dd, yyyy HH:mm')}</p>\n                  </div>\n                </div>\n              </div>\n              </div>\n            )}\n\n            {/* Action Buttons */}\n            {!isLoading && ticketData && (\n              <div className=\"flex space-x-3 mt-6 print:hidden\">\n                <button\n                  onClick={handleDownload}\n                  className=\"flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-guild-600 hover:bg-guild-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500\"\n                >\n                <ArrowDownTrayIcon className=\"h-4 w-4 mr-2\" />\n                Download Ticket\n                </button>\n              \n                <button\n                  onClick={handlePrint}\n                  className=\"flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500\"\n                >\n                  <PrinterIcon className=\"h-4 w-4 mr-2\" />\n                  Print Ticket\n                </button>\n              </div>\n            )}\n          \n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default TicketModal"],"file":"assets/TicketModal-DaFcOTmg.js"}