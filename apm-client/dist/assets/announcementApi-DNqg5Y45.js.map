{"version":3,"file":"announcementApi-DNqg5Y45.js","sources":["../../src/store/api/announcementApi.ts"],"sourcesContent":["// src/store/api/announcementApi.ts\nimport { apiSlice } from './apiSlice';\n\nexport interface Announcement {\n  id: string;\n  message: string;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n  createdBy: {\n    id: string;\n    fullName: string;\n    profileImage?: string;\n  };\n}\n\nexport interface AnnouncementPagination {\n  page: number;\n  limit: number;\n  total: number;\n  totalPages: number;\n}\n\n// Inject announcement endpoints into the main API slice\nexport const announcementApi = apiSlice.injectEndpoints({\n  endpoints: (builder) => ({\n    // ============================================\n    // USER ENDPOINTS\n    // ============================================\n\n    // Get active announcements (for dashboard banner)\n    getActiveAnnouncements: builder.query<{\n      announcements: Announcement[];\n    }, void>({\n      query: () => '/announcements/active',\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Announcement'],\n    }),\n\n    // Get all announcements (user history)\n    getUserAnnouncements: builder.query<{\n      announcements: Announcement[];\n      pagination: AnnouncementPagination;\n    }, {\n      page?: number;\n      limit?: number;\n    }>({\n      query: (params = {}) => ({\n        url: '/announcements',\n        params,\n      }),\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Announcement'],\n    }),\n\n    // ============================================\n    // ADMIN ENDPOINTS\n    // ============================================\n\n    // Get all announcements for admin (with all statuses)\n    getAdminAnnouncements: builder.query<{\n      announcements: Announcement[];\n      pagination: AnnouncementPagination;\n    }, {\n      page?: number;\n      limit?: number;\n      status?: 'active' | 'inactive';\n    }>({\n      query: (params = {}) => ({\n        url: '/announcements/admin',\n        params,\n      }),\n      transformResponse: (response: any) => response.data,\n      providesTags: ['Announcement'],\n    }),\n\n    // Create new announcement\n    createAnnouncement: builder.mutation<{\n      success: boolean;\n      data: Announcement;\n      message: string;\n    }, {\n      message: string;\n    }>({\n      query: (data) => ({\n        url: '/announcements',\n        method: 'POST',\n        body: data,\n      }),\n      invalidatesTags: ['Announcement'],\n    }),\n\n    // Toggle announcement active/inactive status\n    toggleAnnouncementStatus: builder.mutation<{\n      success: boolean;\n      data: Announcement;\n      message: string;\n    }, string>({\n      query: (id) => ({\n        url: `/announcements/${id}/toggle`,\n        method: 'PATCH',\n      }),\n      invalidatesTags: ['Announcement'],\n    }),\n\n    // Delete announcement\n    deleteAnnouncement: builder.mutation<{\n      success: boolean;\n      message: string;\n    }, string>({\n      query: (id) => ({\n        url: `/announcements/${id}`,\n        method: 'DELETE',\n      }),\n      invalidatesTags: ['Announcement'],\n    }),\n  }),\n  overrideExisting: false,\n});\n\n// Export hooks\nexport const {\n  // User hooks\n  useGetActiveAnnouncementsQuery,\n  useGetUserAnnouncementsQuery,\n  // Admin hooks\n  useGetAdminAnnouncementsQuery,\n  useCreateAnnouncementMutation,\n  useToggleAnnouncementStatusMutation,\n  useDeleteAnnouncementMutation,\n} = announcementApi;\n\nexport default announcementApi;\n"],"names":["announcementApi","apiSlice","builder","response","params","data","id","useGetActiveAnnouncementsQuery","useGetUserAnnouncementsQuery","useGetAdminAnnouncementsQuery","useCreateAnnouncementMutation","useToggleAnnouncementStatusMutation","useDeleteAnnouncementMutation"],"mappings":"wCAwBO,MAAMA,EAAkBC,EAAS,gBAAgB,CACtD,UAAYC,IAAa,CAMvB,uBAAwBA,EAAQ,MAEvB,CACP,MAAO,IAAM,wBACb,kBAAoBC,GAAkBA,EAAS,KAC/C,aAAc,CAAC,cAAc,CAAA,CAC9B,EAGD,qBAAsBD,EAAQ,MAM3B,CACD,MAAO,CAACE,EAAS,MAAQ,CACvB,IAAK,iBACL,OAAAA,CAAA,GAEF,kBAAoBD,GAAkBA,EAAS,KAC/C,aAAc,CAAC,cAAc,CAAA,CAC9B,EAOD,sBAAuBD,EAAQ,MAO5B,CACD,MAAO,CAACE,EAAS,MAAQ,CACvB,IAAK,uBACL,OAAAA,CAAA,GAEF,kBAAoBD,GAAkBA,EAAS,KAC/C,aAAc,CAAC,cAAc,CAAA,CAC9B,EAGD,mBAAoBD,EAAQ,SAMzB,CACD,MAAQG,IAAU,CAChB,IAAK,iBACL,OAAQ,OACR,KAAMA,CAAA,GAER,gBAAiB,CAAC,cAAc,CAAA,CACjC,EAGD,yBAA0BH,EAAQ,SAIvB,CACT,MAAQI,IAAQ,CACd,IAAK,kBAAkBA,CAAE,UACzB,OAAQ,OAAA,GAEV,gBAAiB,CAAC,cAAc,CAAA,CACjC,EAGD,mBAAoBJ,EAAQ,SAGjB,CACT,MAAQI,IAAQ,CACd,IAAK,kBAAkBA,CAAE,GACzB,OAAQ,QAAA,GAEV,gBAAiB,CAAC,cAAc,CAAA,CACjC,CAAA,GAEH,iBAAkB,EACpB,CAAC,EAGY,CAEX,+BAAAC,EACA,6BAAAC,EAEA,8BAAAC,EACA,8BAAAC,EACA,oCAAAC,EACA,8BAAAC,CACF,EAAIZ"}