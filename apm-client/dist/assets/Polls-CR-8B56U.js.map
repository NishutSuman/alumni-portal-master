{"version":3,"file":"Polls-CR-8B56U.js","sources":["../../src/pages/user/Polls.tsx"],"sourcesContent":["// src/pages/user/Polls.tsx\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  ChartBarIcon,\n  ClockIcon,\n  UserGroupIcon,\n  CheckCircleIcon,\n  ChevronDownIcon,\n  ChevronUpIcon,\n  EyeIcon,\n  UsersIcon\n} from '@heroicons/react/24/outline';\nimport { formatDistanceToNow } from 'date-fns';\nimport toast from 'react-hot-toast';\nimport { useSelector } from 'react-redux';\nimport type { RootState } from '../../store';\nimport {\n  useGetActivePollsQuery,\n  useGetPollsQuery,\n  useGetPollStatsQuery,\n  useVotePollMutation,\n  Poll,\n} from '../../store/api/pollApi';\n\nconst Polls: React.FC = () => {\n  const [activeTab, setActiveTab] = useState<'active' | 'all'>('active');\n  const [expandedStats, setExpandedStats] = useState<string | null>(null);\n  const [expandedVoters, setExpandedVoters] = useState<string | null>(null);\n  const { user } = useSelector((state: RootState) => state.auth);\n\n  const { data: activePollsData, isLoading: activePollsLoading } = useGetActivePollsQuery();\n  const { data: allPollsData, isLoading: allPollsLoading } = useGetPollsQuery({\n    page: 1,\n    limit: 20,\n    sortBy: 'createdAt',\n    sortOrder: 'desc'\n  });\n\n  const [votePoll] = useVotePollMutation();\n\n  const polls = activeTab === 'active' \n    ? activePollsData?.activePolls \n    : allPollsData?.polls?.filter(poll => {\n        // Consider a poll non-active if it's either:\n        // 1. Marked as inactive (isActive: false), OR\n        // 2. Expired (has expiresAt and it's in the past)\n        const isExpired = poll.expiresAt && new Date() > new Date(poll.expiresAt);\n        return !poll.isActive || isExpired;\n      });\n  const isLoading = activeTab === 'active' ? activePollsLoading : allPollsLoading;\n\n  const handleInstantVote = async (pollId: string, optionId: string, allowMultiple: boolean, currentUserVotes: string[]) => {\n    let newVotes: string[];\n\n    if (allowMultiple) {\n      // For multiple choice: toggle the option\n      if (currentUserVotes.includes(optionId)) {\n        newVotes = currentUserVotes.filter(id => id !== optionId);\n      } else {\n        newVotes = [...currentUserVotes, optionId];\n      }\n    } else {\n      // For single choice: select only this option (or deselect if already selected)\n      if (currentUserVotes.includes(optionId)) {\n        newVotes = []; // Deselect (remove vote)\n      } else {\n        newVotes = [optionId]; // Select only this one\n      }\n    }\n\n    // Submit the vote (including empty array to remove all votes)\n    try {\n      await votePoll({\n        pollId,\n        data: { optionIds: newVotes }\n      }).unwrap();\n      \n      if (newVotes.length === 0) {\n        toast.success('All votes removed successfully!');\n      } else {\n        toast.success('Vote updated successfully!');\n      }\n    } catch (error) {\n      console.error('Vote error:', error);\n      toast.error('Failed to update vote');\n    }\n  };\n\n  const toggleStats = (pollId: string) => {\n    setExpandedStats(expandedStats === pollId ? null : pollId);\n  };\n\n  const toggleVoters = (optionId: string) => {\n    setExpandedVoters(expandedVoters === optionId ? null : optionId);\n  };\n\n  const PollCard: React.FC<{ poll: Poll }> = ({ poll }) => {\n    const isExpired = poll.expiresAt && new Date() > new Date(poll.expiresAt);\n    const canVote = poll.isActive && !isExpired && user;\n\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n        {/* Poll Header */}\n        <div className=\"mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n            {poll.title}\n          </h3>\n          {poll.description && (\n            <p className=\"text-gray-600 dark:text-gray-400 text-sm mb-3\">\n              {poll.description}\n            </p>\n          )}\n          <div className=\"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex items-center space-x-1\">\n                <UserGroupIcon className=\"h-4 w-4\" />\n                <span>{poll.totalVotes} votes</span>\n              </div>\n              {poll.expiresAt && (\n                <div className=\"flex items-center space-x-1\">\n                  <ClockIcon className=\"h-4 w-4\" />\n                  <span>\n                    {isExpired ? 'Expired' : `Expires ${formatDistanceToNow(new Date(poll.expiresAt))} from now`}\n                  </span>\n                </div>\n              )}\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              {poll.hasVoted && (\n                <div className=\"flex items-center space-x-1 text-green-600\">\n                  <CheckCircleIcon className=\"h-4 w-4\" />\n                  <span>Voted</span>\n                </div>\n              )}\n              <button\n                onClick={() => toggleStats(poll.id)}\n                className=\"flex items-center space-x-1 px-2 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors\"\n              >\n                <ChartBarIcon className=\"h-4 w-4\" />\n                <span>Stats</span>\n                {expandedStats === poll.id ? (\n                  <ChevronUpIcon className=\"h-3 w-3\" />\n                ) : (\n                  <ChevronDownIcon className=\"h-3 w-3\" />\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Poll Options */}\n        <div className=\"space-y-3 mb-4\">\n          {poll.options.map((option) => {\n            const isUserVote = poll.userVote?.includes(option.id);\n            const showResults = poll.hasVoted || !poll.isActive || isExpired;\n            \n            // Helper function to get color based on percentage\n            const getColorForPercentage = (percentage: number) => {\n              if (percentage >= 60) return 'bg-green-200 border-green-400 text-green-900';\n              if (percentage >= 40) return 'bg-yellow-200 border-yellow-400 text-yellow-900';\n              if (percentage >= 20) return 'bg-orange-200 border-orange-400 text-orange-900';\n              return 'bg-red-200 border-red-400 text-red-900';\n            };\n\n            const optionColorClass = showResults ? getColorForPercentage(option.percentage) : '';\n\n            return (\n              <div key={option.id} className=\"relative\">\n                <button\n                  onClick={() => canVote && handleInstantVote(poll.id, option.id, poll.allowMultiple, poll.userVote || [])}\n                  disabled={!canVote}\n                  className={`w-full p-3 rounded-lg border text-left transition-all relative overflow-hidden ${\n                    isUserVote\n                      ? 'border-green-300 bg-green-50 text-green-800'\n                      : canVote\n                      ? 'border-gray-300 hover:border-blue-400 hover:bg-blue-50'\n                      : showResults\n                      ? optionColorClass\n                      : 'border-gray-200'\n                  }`}\n                >\n                  {/* Progress bar background with color based on percentage */}\n                  {showResults && (\n                    <div \n                      className=\"absolute inset-0 opacity-20\"\n                      style={{ \n                        background: `linear-gradient(to right, currentColor ${option.percentage}%, transparent ${option.percentage}%)` \n                      }}\n                    />\n                  )}\n                  \n                  <div className=\"relative flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"font-medium\">{option.text}</span>\n                      {isUserVote && (\n                        <CheckCircleIcon className=\"h-4 w-4 text-green-600\" />\n                      )}\n                    </div>\n                    {showResults && (\n                      <div className=\"flex items-center space-x-2 text-sm\">\n                        <span>{option.voteCount} votes</span>\n                        <span className=\"font-semibold\">{option.percentage}%</span>\n                      </div>\n                    )}\n                  </div>\n                </button>\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Stats Accordion */}\n        <PollStats pollId={poll.id} isExpanded={expandedStats === poll.id} />\n      </div>\n    );\n  };\n\n  const PollStats: React.FC<{ pollId: string; isExpanded: boolean }> = ({ pollId, isExpanded }) => {\n    const { data: statsData, isLoading: statsLoading } = useGetPollStatsQuery(pollId, {\n      skip: !isExpanded\n    });\n\n    if (!isExpanded) return null;\n\n    return (\n      <motion.div\n        initial={{ height: 0, opacity: 0 }}\n        animate={{ height: 'auto', opacity: 1 }}\n        exit={{ height: 0, opacity: 0 }}\n        transition={{ duration: 0.3 }}\n        className=\"border-t border-gray-200 dark:border-gray-700 pt-4 overflow-hidden\"\n      >\n        {statsLoading ? (\n          <div className=\"text-center py-4\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto\"></div>\n          </div>\n        ) : statsData ? (\n          <div className=\"space-y-4\">\n            {/* Summary Stats */}\n            <div className=\"grid grid-cols-2 gap-4 text-center\">\n              <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-3\">\n                <div className=\"text-2xl font-bold text-blue-600\">{statsData.totalVotes}</div>\n                <div className=\"text-sm text-gray-600 dark:text-gray-400\">Total Votes</div>\n              </div>\n              <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-3\">\n                <div className=\"text-2xl font-bold text-green-600\">{statsData.totalVoters}</div>\n                <div className=\"text-sm text-gray-600 dark:text-gray-400\">Total Voters</div>\n              </div>\n            </div>\n\n            {/* Option Details with Dropdown Voters */}\n            <div className=\"space-y-3\">\n              <h4 className=\"font-semibold text-gray-900 dark:text-white flex items-center\">\n                <ChartBarIcon className=\"h-4 w-4 mr-2\" />\n                Vote Breakdown\n              </h4>\n              {statsData.options.map((option) => (\n                <div key={option.id} className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-3\">\n                  <div>\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"font-medium\">{option.text}</span>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"text-sm\">{option.voteCount} votes</span>\n                        <span className=\"font-bold\">{option.percentage}%</span>\n                      </div>\n                    </div>\n                    \n                    {/* Voters Dropdown */}\n                    {!statsData.poll.isAnonymous && option.voters.length > 0 && (\n                      <div className=\"mt-2\">\n                        <button\n                          onClick={() => toggleVoters(option.id)}\n                          className=\"flex items-center justify-between w-full text-sm p-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-600 dark:hover:bg-gray-500 rounded border border-gray-300 dark:border-gray-500 transition-colors\"\n                        >\n                          <span className=\"font-medium text-gray-700 dark:text-gray-200\">\n                            Voted by ({option.voters.length})\n                          </span>\n                          {expandedVoters === option.id ? (\n                            <ChevronUpIcon className=\"h-4 w-4 text-gray-600 dark:text-gray-300\" />\n                          ) : (\n                            <ChevronDownIcon className=\"h-4 w-4 text-gray-600 dark:text-gray-300\" />\n                          )}\n                        </button>\n                        \n                        <AnimatePresence>\n                          {expandedVoters === option.id && (\n                            <motion.div\n                              initial={{ height: 0, opacity: 0 }}\n                              animate={{ height: 'auto', opacity: 1 }}\n                              exit={{ height: 0, opacity: 0 }}\n                              transition={{ duration: 0.2 }}\n                              className=\"mt-2 overflow-hidden\"\n                            >\n                              <div className=\"space-y-1 max-h-32 overflow-y-auto\">\n                                {option.voters.map((voter) => (\n                                  <div\n                                    key={voter.id}\n                                    className=\"flex items-center justify-between text-xs p-2 bg-white dark:bg-gray-600 border border-gray-200 dark:border-gray-500 rounded\"\n                                  >\n                                    <div className=\"flex items-center space-x-2\">\n                                      <div className=\"w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-medium\">\n                                        {voter.fullName.charAt(0)}\n                                      </div>\n                                      <span className=\"text-gray-800 dark:text-gray-200 font-medium\">{voter.fullName}</span>\n                                      {voter.batch && (\n                                        <span className=\"text-gray-500 dark:text-gray-400\">({voter.batch})</span>\n                                      )}\n                                    </div>\n                                    <span className=\"text-gray-500 dark:text-gray-400\">\n                                      {formatDistanceToNow(new Date(voter.votedAt))} ago\n                                    </span>\n                                  </div>\n                                ))}\n                              </div>\n                            </motion.div>\n                          )}\n                        </AnimatePresence>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {statsData.poll.isAnonymous && (\n              <div className=\"text-center text-gray-500 dark:text-gray-400 py-2\">\n                <EyeIcon className=\"h-5 w-5 mx-auto mb-1\" />\n                This poll is anonymous - voter details are hidden\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"text-center text-gray-500 py-4\">\n            Failed to load statistics\n          </div>\n        )}\n      </motion.div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n      <div className=\"max-w-4xl mx-auto p-6\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">Polls</h1>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            Vote on community polls and see detailed statistics\n          </p>\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"flex space-x-6 mb-6 border-b border-gray-200 dark:border-gray-700\">\n          {[\n            { id: 'active', label: 'Active Polls', count: activePollsData?.count },\n            { id: 'all', label: 'All Polls', count: allPollsData?.polls?.filter(poll => {\n                const isExpired = poll.expiresAt && new Date() > new Date(poll.expiresAt);\n                return !poll.isActive || isExpired;\n              })?.length },\n          ].map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id as any)}\n              className={`pb-3 px-1 border-b-2 font-medium transition-colors ${\n                activeTab === tab.id\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n            >\n              {tab.label}\n              {tab.count !== undefined && (\n                <span className=\"ml-2 px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 rounded-full\">\n                  {tab.count}\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n\n        {/* Content */}\n        {isLoading ? (\n          <div className=\"space-y-6\">\n            {[...Array(3)].map((_, i) => (\n              <div key={i} className=\"bg-white dark:bg-gray-800 rounded-lg p-6 animate-pulse\">\n                <div className=\"h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4\"></div>\n                <div className=\"space-y-3\">\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded\"></div>\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6\"></div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : polls && polls.length > 0 ? (\n          <div className=\"space-y-6\">\n            {polls.map((poll) => (\n              <PollCard key={poll.id} poll={poll} />\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <ChartBarIcon className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\n              {activeTab === 'active' ? 'No Active Polls' : 'No Polls Found'}\n            </h3>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              {activeTab === 'active'\n                ? 'There are no active polls at the moment.'\n                : 'No polls have been created yet.'}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Polls;"],"names":["Polls","activeTab","setActiveTab","useState","expandedStats","setExpandedStats","expandedVoters","setExpandedVoters","user","useSelector","state","activePollsData","activePollsLoading","useGetActivePollsQuery","allPollsData","allPollsLoading","useGetPollsQuery","votePoll","useVotePollMutation","polls","poll","isExpired","isLoading","handleInstantVote","pollId","optionId","allowMultiple","currentUserVotes","newVotes","id","toast","error","toggleStats","toggleVoters","PollCard","canVote","jsxs","jsx","UserGroupIcon","ClockIcon","formatDistanceToNow","CheckCircleIcon","ChartBarIcon","ChevronUpIcon","ChevronDownIcon","option","isUserVote","showResults","optionColorClass","percentage","PollStats","isExpanded","statsData","statsLoading","useGetPollStatsQuery","motion","AnimatePresence","voter","EyeIcon","tab","_","i"],"mappings":"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"}