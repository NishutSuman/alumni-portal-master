import{j as e,z as Y,L as Z,A as J,m as M,i as U}from"./ui-DhYQrQWF.js";import{r as s,L as xe,R as Ne}from"./router-BgvBx64T.js";import{C as we}from"./redux-CfKcOgfB.js";import{e as Ce,f as Le,g as Re,h as Ae,i as Se,j as $e,k as Ee,l as Fe,m as Ie,n as Pe,F as me,P as Te}from"./PostImageDisplay-BLTVOls9.js";import{F as he}from"./XMarkIcon-B58Eb0hU.js";import{a as ie}from"./utils-CXyNmL__.js";import{u as Me,z as le}from"./index-CZ6-uofb.js";import{F as Oe}from"./EllipsisHorizontalIcon-D05md_Ps.js";import{F as be}from"./PencilIcon-CGtBlyj4.js";import{F as ye}from"./TrashIcon-CkjDT07c.js";import{F as De}from"./EllipsisVerticalIcon-BBXHSY48.js";import{F as Be}from"./CheckCircleIcon-CON4vt6K.js";import{F as He}from"./XCircleIcon-CK17SfJH.js";import{F as We}from"./ClockIcon-53QLE2kZ.js";function Ue({title:t,titleId:y,...n},x){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":y},n),t?s.createElement("title",{id:y},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const _e=s.forwardRef(Ue);function ze({title:t,titleId:y,...n},x){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":y},n),t?s.createElement("title",{id:y},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const Ge=s.forwardRef(ze),ue={LIKE:{emoji:"ðŸ‘",label:"Like",color:"text-blue-600 dark:text-blue-400"},LOVE:{emoji:"â¤ï¸",label:"Love",color:"text-red-600 dark:text-red-400"},CELEBRATE:{emoji:"ðŸŽ‰",label:"Celebrate",color:"text-yellow-600 dark:text-yellow-400"},SUPPORT:{emoji:"ðŸ™Œ",label:"Support",color:"text-green-600 dark:text-green-400"},FUNNY:{emoji:"ðŸ˜‚",label:"Funny",color:"text-orange-600 dark:text-orange-400"},WOW:{emoji:"ðŸ˜®",label:"Wow",color:"text-purple-600 dark:text-purple-400"},ANGRY:{emoji:"ðŸ˜ ",label:"Angry",color:"text-red-700 dark:text-red-300"},SAD:{emoji:"ðŸ˜¢",label:"Sad",color:"text-blue-700 dark:text-blue-300"}},Ye=({isOpen:t,onClose:y,postId:n})=>{const[x,A]=s.useState("ALL"),[w,h]=s.useState(1),{data:m,isLoading:g,error:j}=Ce({postId:n,reactionType:x==="ALL"?void 0:x,page:w,limit:20},{skip:!t}),S=a=>a.split(" ").map(k=>k.charAt(0)).join("").slice(0,2).toUpperCase(),C=m?.reactionCounts?Object.entries(m.reactionCounts).filter(([a,k])=>k>0).sort(([a,k],[l,p])=>a==="ALL"?-1:l==="ALL"?1:p-k):[];return e.jsx(Y,{appear:!0,show:t,as:s.Fragment,children:e.jsxs(Z,{as:"div",className:"relative z-50",onClose:y,children:[e.jsx(Y.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(Y.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Z.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Z.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:"Reactions"}),e.jsx("button",{onClick:y,className:"rounded-md p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(he,{className:"h-6 w-6"})})]}),C.length>0&&e.jsx("div",{className:"flex space-x-1 mb-4 overflow-x-auto",children:C.map(([a,k])=>e.jsxs("button",{onClick:()=>{A(a),h(1)},className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${x===a?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[a!=="ALL"&&e.jsx("span",{className:"text-base",children:ue[a]?.emoji}),a==="ALL"&&e.jsx("span",{children:"All"}),e.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-2 py-0.5 rounded-full text-xs",children:k})]},a))}),e.jsx("div",{className:"h-96 overflow-y-auto",children:g?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):j?e.jsx("div",{className:"text-center py-8 text-red-600 dark:text-red-400",children:"Failed to load reactions"}):m?.reactions?.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No reactions found"}):e.jsx("div",{className:"space-y-3",children:e.jsx(J,{mode:"popLayout",children:m?.reactions?.map((a,k)=>e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:k*.05},className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsxs("div",{className:"relative",children:[a.user.profileImage?e.jsx("img",{src:`/api/users/profile-picture/${a.user.id}`,alt:a.user.fullName,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm",children:S(a.user.fullName)}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 bg-white dark:bg-gray-800 rounded-full p-0.5 border border-gray-200 dark:border-gray-600 w-5 h-5 flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:ue[a.reactionType]?.emoji})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(xe,{to:`/alumni/${a.user.id}`,className:"block hover:text-blue-600 dark:hover:text-blue-400",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:a.user.fullName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:a.user.currentPosition&&a.user.currentCompany?`${a.user.currentPosition} at ${a.user.currentCompany}`:a.user.currentPosition||a.user.currentCompany||a.user.batch&&`Batch ${a.user.batch}`||"Alumni"})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:ie(new Date(a.createdAt),{addSuffix:!0})})]})]},a.id))})})}),m?.pagination&&m.pagination.pages>1&&e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>h(a=>Math.max(1,a-1)),disabled:!m.pagination.hasPrev,className:"px-3 py-1 text-sm rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",m.pagination.page," of ",m.pagination.pages]}),e.jsx("button",{onClick:()=>h(a=>a+1),disabled:!m.pagination.hasNext,className:"px-3 py-1 text-sm rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})})})]})})},te={LIKE:{emoji:"ðŸ‘",label:"Like",color:"text-blue-600 dark:text-blue-400"},LOVE:{emoji:"â¤ï¸",label:"Love",color:"text-red-600 dark:text-red-400"},CELEBRATE:{emoji:"ðŸŽ‰",label:"Celebrate",color:"text-yellow-600 dark:text-yellow-400"},SUPPORT:{emoji:"ðŸ™Œ",label:"Support",color:"text-green-600 dark:text-green-400"},FUNNY:{emoji:"ðŸ˜‚",label:"Funny",color:"text-orange-600 dark:text-orange-400"},WOW:{emoji:"ðŸ˜®",label:"Wow",color:"text-purple-600 dark:text-purple-400"},ANGRY:{emoji:"ðŸ˜ ",label:"Angry",color:"text-red-700 dark:text-red-300"},SAD:{emoji:"ðŸ˜¢",label:"Sad",color:"text-blue-700 dark:text-blue-300"}},Ke=({postId:t,reactions:y,userReactions:n,totalReactions:x,recentReactions:A=[],onReact:w,onCommentClick:h,onShareClick:m,commentCount:g=0,disabled:j=!1,className:S=""})=>{const[C,a]=s.useState(!1),[k,l]=s.useState(!1),[p,P]=s.useState(!1),$=n?.[0],E=!!$,D=Object.entries(y||{}).filter(([i,v])=>v>0).sort(([,i],[,v])=>v-i).slice(0,3).map(([i])=>i),_=i=>{w(i),a(!1)},K=()=>{w(E?$:"LIKE")};s.useEffect(()=>{let i;return k&&!j&&(i=setTimeout(()=>{a(!0)},500)),()=>{i&&clearTimeout(i)}},[k,j]);const B=()=>{if(x===0||!x)return null;const i=Array.from(new Map(A.map(v=>[v.userId,v])).values());return i.length===0?`${x}`:i.length===1?x===1?i[0].user.fullName:`${i[0].user.fullName} and ${x-1} others`:i.length===2?x===2?`${i[0].user.fullName} and ${i[1].user.fullName}`:`${i[0].user.fullName}, ${i[1].user.fullName} and ${x-2} others`:`${i[0].user.fullName}, ${i[1].user.fullName} and ${x-2} others`};return e.jsxs("div",{className:`space-y-3 ${S}`,children:[x>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("button",{onClick:()=>P(!0),className:"flex items-center space-x-2 hover:text-gray-700 dark:hover:text-gray-300 hover:underline cursor-pointer",children:[e.jsx("div",{className:"flex -space-x-1",children:D.map((i,v)=>e.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs border-2 border-white dark:border-gray-800",style:{zIndex:D.length-v},children:te[i].emoji},i))}),e.jsx("span",{className:"ml-1",children:B()})]}),g>0&&e.jsx("button",{onClick:h,className:"hover:text-gray-700 dark:hover:text-gray-300 hover:underline",children:g===1?"1 comment":`${g} comments`})]}),e.jsx("div",{className:"flex items-center justify-between border-t border-gray-100 dark:border-gray-700 pt-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:K,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),disabled:j,className:`flex items-center space-x-2 px-4 py-2 rounded-md transition-all duration-200 ${E?`${te[$]?.color} bg-blue-50 dark:bg-blue-900/20 font-medium`:"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-700"} ${j?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[e.jsx("span",{className:"text-lg",children:E?te[$]?.emoji:"ðŸ‘"}),e.jsx("span",{className:"text-sm font-medium",children:E?te[$]?.label:"Like"})]}),e.jsx(J,{children:C&&e.jsx(M.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},className:"absolute bottom-full left-0 mb-2 z-50",onMouseEnter:()=>l(!0),onMouseLeave:()=>{l(!1),a(!1)},children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-full shadow-xl border border-gray-200 dark:border-gray-700 p-2 flex space-x-1",children:Object.entries(te).map(([i,v])=>{const z=$===i,T=y?.[i]||0;return e.jsxs(M.button,{whileHover:{scale:1.3,y:-4},whileTap:{scale:.9},onClick:()=>_(i),className:`relative p-2 rounded-full transition-all duration-200 ${z?"bg-blue-100 dark:bg-blue-900 scale-110 shadow-lg":"hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer"}`,title:`${v.label}${T>0?` (${T})`:""}`,children:[e.jsx("span",{className:"text-xl",children:v.emoji}),T>0&&e.jsx(M.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full min-w-[16px] h-4 flex items-center justify-center px-1",children:T})]},i)})})})})]}),e.jsxs("button",{onClick:h,className:"flex items-center space-x-2 px-4 py-2 rounded-md text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(_e,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Comment"})]}),e.jsxs("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 rounded-md text-gray-600 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(Ge,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Share"})]})]})}),C&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsx(Ye,{isOpen:p,onClose:()=>P(!1),postId:t})]})},ge={LIKE:{emoji:"ðŸ‘",label:"Like",color:"text-blue-600 dark:text-blue-400"},LOVE:{emoji:"â¤ï¸",label:"Love",color:"text-red-600 dark:text-red-400"},CELEBRATE:{emoji:"ðŸŽ‰",label:"Celebrate",color:"text-yellow-600 dark:text-yellow-400"},SUPPORT:{emoji:"ðŸ™Œ",label:"Support",color:"text-green-600 dark:text-green-400"},FUNNY:{emoji:"ðŸ˜‚",label:"Funny",color:"text-orange-600 dark:text-orange-400"},WOW:{emoji:"ðŸ˜®",label:"Wow",color:"text-purple-600 dark:text-purple-400"},ANGRY:{emoji:"ðŸ˜ ",label:"Angry",color:"text-red-700 dark:text-red-300"},SAD:{emoji:"ðŸ˜¢",label:"Sad",color:"text-blue-700 dark:text-blue-300"}},Ve=({isOpen:t,onClose:y,postId:n,commentId:x})=>{const[A,w]=s.useState("ALL"),[h,m]=s.useState(1),{data:g,isLoading:j,error:S}=Le({postId:n,commentId:x,reactionType:A==="ALL"?void 0:A,page:h,limit:20},{skip:!t}),C=l=>l.split(" ").map(p=>p.charAt(0)).join("").slice(0,2).toUpperCase(),a=g?.reactionCounts?Object.entries(g.reactionCounts).filter(([l,p])=>p>0).sort(([l,p],[P,$])=>l==="ALL"?-1:P==="ALL"?1:$-p):[],k=a.reduce((l,[p,P])=>l+P,0);return e.jsx(Y,{appear:!0,show:t,as:s.Fragment,children:e.jsxs(Z,{as:"div",className:"relative z-50",onClose:y,children:[e.jsx(Y.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(Y.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Z.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Z.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:"Reactions"}),e.jsx("button",{onClick:y,className:"rounded-md p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(he,{className:"h-6 w-6"})})]}),a.length>0&&e.jsxs("div",{className:"flex space-x-1 mb-4 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>{w("ALL"),m(1)},className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${A==="ALL"?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"All"}),e.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-2 py-0.5 rounded-full text-xs",children:k})]}),a.map(([l,p])=>e.jsxs("button",{onClick:()=>{w(l),m(1)},className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${A===l?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-base",children:ge[l]?.emoji}),e.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-2 py-0.5 rounded-full text-xs",children:p})]},l))]}),e.jsx("div",{className:"h-96 overflow-y-auto",children:j?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):S?e.jsx("div",{className:"text-center py-8 text-red-600 dark:text-red-400",children:"Failed to load reactions"}):g?.reactions?.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No reactions found"}):e.jsx("div",{className:"space-y-3",children:e.jsx(J,{mode:"popLayout",children:g?.reactions?.map((l,p)=>e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:p*.05},className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsxs("div",{className:"relative",children:[l.user.profileImage?e.jsx("img",{src:`/api/users/profile-picture/${l.user.id}`,alt:l.user.fullName,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm",children:C(l.user.fullName)}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 bg-white dark:bg-gray-800 rounded-full p-0.5 border border-gray-200 dark:border-gray-600 w-5 h-5 flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:ge[l.reactionType]?.emoji})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(xe,{to:`/alumni/${l.user.id}`,className:"block hover:text-blue-600 dark:hover:text-blue-400",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:l.user.fullName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:l.user.workHistory&&l.user.workHistory.length>0?`${l.user.workHistory[0].jobRole} at ${l.user.workHistory[0].companyName}`:l.user.batch&&`Batch ${l.user.batch}`||"Alumni"})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:ie(new Date(l.createdAt),{addSuffix:!0})})]})]},l.id))})})}),g?.pagination&&g.pagination.pages>1&&e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>m(l=>Math.max(1,l-1)),disabled:!g.pagination.hasPrev,className:"px-3 py-1 text-sm rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",g.pagination.page," of ",g.pagination.pages]}),e.jsx("button",{onClick:()=>m(l=>l+1),disabled:!g.pagination.hasNext,className:"px-3 py-1 text-sm rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})})})]})})},ce={LIKE:{emoji:"ðŸ‘",label:"Like",color:"text-blue-600 dark:text-blue-400"},LOVE:{emoji:"â¤ï¸",label:"Love",color:"text-red-600 dark:text-red-400"},CELEBRATE:{emoji:"ðŸŽ‰",label:"Celebrate",color:"text-yellow-600 dark:text-yellow-400"},SUPPORT:{emoji:"ðŸ™Œ",label:"Support",color:"text-green-600 dark:text-green-400"},FUNNY:{emoji:"ðŸ˜‚",label:"Funny",color:"text-orange-600 dark:text-orange-400"},WOW:{emoji:"ðŸ˜®",label:"Wow",color:"text-purple-600 dark:text-purple-400"},ANGRY:{emoji:"ðŸ˜ ",label:"Angry",color:"text-red-700 dark:text-red-300"},SAD:{emoji:"ðŸ˜¢",label:"Sad",color:"text-blue-700 dark:text-blue-300"}},qe=({postId:t,allowComments:y})=>{const{user:n}=Me(),[x,A]=s.useState("desc"),[w,h]=s.useState(null),[m,g]=s.useState(2),{data:j,isLoading:S,error:C}=Re({postId:t,page:1,limit:m,sortOrder:x}),[a,{isLoading:k}]=Ae(),[l,{isLoading:p}]=Se(),[P]=$e(),[$,{isLoading:E}]=Ee(),[D]=Fe(),[_,K]=s.useState(new Set),B=r=>r.split(" ").map(o=>o.charAt(0)).join("").slice(0,2).toUpperCase(),i=r=>{const o=["from-blue-500 to-purple-600","from-green-500 to-teal-600","from-pink-500 to-red-600","from-yellow-500 to-orange-600","from-indigo-500 to-blue-600","from-purple-500 to-pink-600","from-teal-500 to-green-600","from-orange-500 to-red-600"],u=r.split("").reduce((b,L)=>b+L.charCodeAt(0),0)%o.length;return o[u]},v=(r,o)=>{const u=o.target;u.naturalWidth>50&&u.naturalHeight>50&&K(b=>new Set(b).add(r))},z=async(r,o)=>{if(n)try{await P({postId:t,commentId:r,reactionType:o}).unwrap(),h(null)}catch(u){console.error("Failed to toggle reaction:",u)}},T=async r=>{if(!(!n||!window.confirm("Are you sure you want to delete this comment?")))try{await D({postId:t,commentId:r}).unwrap()}catch(o){console.error("Failed to delete comment:",o)}},re=({placeholder:r,onSubmit:o,isLoading:u,buttonText:b,autoFocus:L=!1})=>{const[R,q]=s.useState(""),[Q,O]=s.useState(!1),H=s.useRef(null),W=s.useCallback(async()=>{if(R.trim())try{await o(R.trim()),q(""),O(!1),H.current&&(H.current.style.height="36px")}catch(F){console.error("Failed to submit:",F)}},[R,o]),ae=s.useCallback(F=>{q(F.target.value);const I=F.target;I.style.height="36px",I.style.height=Math.min(I.scrollHeight,120)+"px"},[]),se=s.useCallback(F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),W())},[W]),ne=s.useCallback(()=>{O(!0)},[]),X=s.useCallback(()=>{R.trim()||O(!1)},[R]);return e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:H,value:R,onChange:ae,onKeyPress:se,onFocus:ne,onBlur:X,placeholder:r,autoFocus:L,className:`w-full resize-none focus:outline-none text-sm dark:text-white placeholder-gray-500 dark:placeholder-gray-400 border rounded-lg px-3 py-2 transition-colors ${Q?"border-blue-500 bg-white dark:bg-gray-700":"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 hover:bg-white dark:hover:bg-gray-700"}`,rows:1,style:{minHeight:"40px",maxHeight:"120px",lineHeight:"18px"}}),(Q||R.trim())&&e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("button",{onClick:()=>{q(""),O(!1)},className:"px-4 py-1 bg-gray-500 text-white rounded-lg text-sm font-medium hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:W,disabled:!R.trim()||u,className:"px-4 py-1 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Posting...":b})]})]})},V=Ne.memo(({comment:r,isReply:o=!1,level:u=0})=>{const[b,L]=s.useState(!1),[R,q]=s.useState(!1),[Q,O]=s.useState(null),[H,W]=s.useState(!1),[ae,se]=s.useState(!1),ne=r.author.id===n?.id,X=r.userReaction,F=r.replies&&r.replies.length>0,I=r.replies?r.replies.length:0,pe=async d=>{await l({postId:t,commentId:r.id,content:d,mentions:[]}).unwrap(),L(!1)},fe=d=>{z(r.id,d),q(!1)},je=()=>{O({id:r.id,content:r.content}),W(!1)},ke=async d=>{if(!(!n||!d.trim()))try{await $({postId:t,commentId:r.id,content:d}).unwrap(),O(null)}catch(N){console.error("Failed to update comment:",N)}},ve=s.useCallback(d=>{O(N=>N?{...N,content:d}:null)},[]),de=s.useRef(null);return s.useEffect(()=>{const d=N=>{de.current&&!de.current.contains(N.target)&&W(!1)};if(H)return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[H]),e.jsx(M.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${o?"ml-10 mt-2":"mb-3"}`,children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:_.has(r.author.id)?e.jsx("img",{src:`/api/users/profile-picture/${r.author.id}`,alt:r.author.fullName,className:"h-8 w-8 rounded-full object-cover"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:`/api/users/profile-picture/${r.author.id}`,alt:r.author.fullName,className:"h-8 w-8 rounded-full object-cover opacity-0 absolute",onLoad:d=>v(r.author.id,d)}),e.jsx("div",{className:`h-8 w-8 rounded-full bg-gradient-to-br ${i(r.author.id)} flex items-center justify-center text-white font-semibold text-xs`,children:B(r.author.fullName)})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"py-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900 dark:text-white",children:r.author.fullName}),ne&&e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:"Author"})]}),r.author.batch&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Batch ",r.author.batch]})]}),n&&n.id===r.createdBy&&e.jsxs("div",{className:"relative",ref:de,children:[e.jsx("button",{onClick:()=>W(!H),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:e.jsx(Oe,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"})}),e.jsx(J,{children:H&&e.jsx(M.div,{initial:{opacity:0,scale:.8,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},className:"absolute right-0 mt-2 w-32 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-md shadow-lg z-20",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:je,className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>{T(r.id),W(!1)},className:"flex items-center w-full px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})})]})]}),Q?.id===r.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:Q.content,onChange:d=>ve(d.target.value),className:"w-full text-sm bg-transparent border border-gray-300 dark:border-gray-600 rounded px-2 py-1 focus:outline-none focus:border-blue-500",rows:2,autoFocus:!0}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ke(Q.content),disabled:E,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:E?"Saving...":"Save"}),e.jsx("button",{onClick:()=>O(null),className:"px-3 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 leading-normal",children:r.content}),r.isEdited&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:"edited"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1 ml-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>q(!R),className:`flex items-center space-x-1 px-2 py-1 rounded text-xs font-medium transition-colors ${X?"text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"Like"}),X&&e.jsx("span",{className:"text-sm",children:ce[X].emoji})]}),e.jsx(J,{children:R&&e.jsx(M.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},className:"absolute bottom-full left-0 mb-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-lg px-2 py-1 flex space-x-1 z-10",children:Object.entries(ce).map(([d,N])=>e.jsx("button",{onClick:()=>fe(d),className:"hover:scale-125 transition-transform p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",title:N.label,children:e.jsx("span",{className:"text-xl",children:N.emoji})},d))})})]}),r.totalReactions>0&&e.jsxs("button",{onClick:()=>h({commentId:r.id,isOpen:!0}),className:"flex items-center space-x-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 text-xs font-medium",children:[e.jsx("span",{className:"text-sm",children:r.reactions&&Object.entries(r.reactions).filter(([,d])=>d>0).slice(0,3).map(([d])=>ce[d]?.emoji).join("")}),e.jsxs("span",{children:["(",r.totalReactions,")"]})]}),e.jsxs("button",{onClick:()=>L(!b),className:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 text-xs font-medium",children:["Reply",I>0&&` Â· ${I} ${I===1?"reply":"replies"}`]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:ie(new Date(r.createdAt),{addSuffix:!0})})]}),b&&e.jsx(M.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 ml-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("img",{src:`/api/users/profile-picture/${n?.id}`,alt:n?.fullName||"",className:"h-6 w-6 rounded-full object-cover",onLoad:d=>{const N=d.target;if(N.naturalWidth<=50||N.naturalHeight<=50){const ee=N.parentElement;ee&&(ee.innerHTML=`<div class="h-6 w-6 rounded-full bg-gradient-to-br ${i(n?.id||"")} flex items-center justify-center text-white font-semibold text-xs">${B(n?.fullName||"")}</div>`)}},onError:d=>{const ee=d.target.parentElement;ee&&(ee.innerHTML=`<div class="h-6 w-6 rounded-full bg-gradient-to-br ${i(n?.id||"")} flex items-center justify-center text-white font-semibold text-xs">${B(n?.fullName||"")}</div>`)}})}),e.jsx("div",{className:"flex-1",children:e.jsx(re,{placeholder:"Write a reply...",onSubmit:pe,isLoading:p,buttonText:"Reply",autoFocus:!0})})]})}),F&&!o&&e.jsx("div",{className:"mt-3 ml-6",children:I>1&&!ae?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>se(!0),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium mb-3 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"See previous ",I-1," ",I-1===1?"reply":"replies"]}),e.jsx(V,{comment:r.replies[r.replies.length-1],isReply:!0,level:u+1},r.replies[r.replies.length-1].id)]}):e.jsx("div",{children:r.replies.map((d,N)=>e.jsxs("div",{className:"mb-3",children:[I>1&&ae&&N===0&&e.jsxs("button",{onClick:()=>se(!1),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium mb-3 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Hide previous replies"]}),e.jsx(V,{comment:d,isReply:!0,level:u+1})]},d.id))})}),F&&o&&e.jsx("div",{className:"mt-3 ml-6",children:r.replies.map(d=>e.jsx(V,{comment:d,isReply:!0,level:u+1},d.id))})]})]})})}),oe=async r=>{await a({postId:t,content:r,mentions:[]}).unwrap()},c=()=>{A(r=>r==="desc"?"asc":"desc"),g(2)},f=()=>{g(r=>r+5)},G=j?.pagination&&j.pagination.hasNext;return y?e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[j?.pagination.totalAllComments||j?.pagination.total||0," comments"]}),e.jsx("button",{onClick:c,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors font-medium",children:x==="desc"?"Oldest first":"Newest first"})]}),n&&e.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:_.has(n.id)?e.jsx("img",{src:`/api/users/profile-picture/${n.id}`,alt:n.fullName,className:"h-8 w-8 rounded-full object-cover"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:`/api/users/profile-picture/${n.id}`,alt:n.fullName,className:"h-8 w-8 rounded-full object-cover opacity-0 absolute",onLoad:r=>v(n.id,r)}),e.jsx("div",{className:`h-8 w-8 rounded-full bg-gradient-to-br ${i(n.id)} flex items-center justify-center text-white font-semibold text-xs`,children:B(n.fullName)})]})}),e.jsx("div",{className:"flex-1",children:e.jsx(re,{placeholder:"Add a comment...",onSubmit:oe,isLoading:k,buttonText:"Comment"})})]}),e.jsx("div",{className:"space-y-3",children:S?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):C?e.jsx("div",{className:"text-center py-8 text-red-600 dark:text-red-400",children:"Failed to load comments"}):j?.comments?.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No comments yet. Be the first to comment!"}):e.jsx(J,{children:j?.comments?.map(r=>e.jsx(V,{comment:r},r.id))})}),G&&e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("button",{onClick:f,disabled:S,className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium text-sm transition-colors disabled:opacity-50",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),e.jsx("span",{children:S?"Loading...":"Load more comments"})]})}),w&&e.jsx(Ve,{isOpen:w.isOpen,onClose:()=>h(null),commentId:w.commentId,postId:t})]}):null},ct=({post:t,showActions:y=!0,onEdit:n,onDelete:x,onArchive:A,onApprove:w})=>{const{user:h}=we(c=>c.auth),[m,g]=s.useState(!1),[j,S]=s.useState(!1),[C,a]=s.useState(!1),[k,{isLoading:l}]=Ie(),[p,{isLoading:P}]=Pe(),E={reactions:{...{LIKE:0,LOVE:0,CELEBRATE:0,SUPPORT:0,FUNNY:0,WOW:0,ANGRY:0,SAD:0},...t.reactionCounts},userReactions:t.userReactions||[],totalReactions:t.totalReactions||0},D=h?.id===t.createdBy||h?.role==="SUPER_ADMIN",_=h?.id===t.createdBy||h?.role==="SUPER_ADMIN",K=h?.role==="SUPER_ADMIN"&&!t.isPublished,B=D,i=async c=>{if(!h){le.error("Please login to react to posts");return}try{await p({postId:t.id,reactionType:c}).unwrap()}catch(f){console.error("Failed to toggle reaction:",f);const G=f?.data?.message||"Failed to update reaction";le.error(G)}},v=c=>c.split(" ").map(f=>f.charAt(0)).join("").slice(0,2).toUpperCase(),z=c=>{const f=document.createElement("div");return f.innerHTML=c,f.textContent||f.innerText||""},T=c=>{const f=document.createElement("div");return f.innerHTML=c,f.querySelectorAll("a").forEach(o=>{if(o.hasAttribute("data-user-id")||o.classList.contains("mention")||o.textContent?.startsWith("@")){const b=document.createElement("span");b.className="mention bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 px-1 rounded font-medium",b.textContent=o.textContent||"",o.hasAttribute("data-user-id")&&b.setAttribute("data-user-id",o.getAttribute("data-user-id")||""),o.parentNode?.replaceChild(b,o)}else{const b=document.createTextNode(o.textContent||"");o.parentNode?.replaceChild(b,o)}}),f.querySelectorAll("*").forEach(o=>{o.removeAttribute("href"),o.removeAttribute("data-discover");const u=o.getAttribute("style");if(u){const b=["color: rgb(96, 165, 250)","--tw-text-opacity: 1"];let L=u;b.forEach(R=>{L=L.replace(new RegExp(R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"),"")}),L=L.replace(/;+/g,";").replace(/;\s*$/,"").trim(),L?o.setAttribute("style",L):o.removeAttribute("style")}}),f.innerHTML},re=(c,f)=>{const G=T(c),r=z(G);if(r.length<=f)return G;const o=r.split(" ");let u="";for(const b of o){if((u+" "+b).length>f)break;u+=(u?" ":"")+b}return u},V=async()=>{if(navigator.share)try{await navigator.share({title:t.title,text:z(T(t.body)).substring(0,100)+"...",url:`${window.location.origin}/posts/${t.id}`})}catch(c){console.error("Error sharing:",c)}else try{await navigator.clipboard.writeText(`${window.location.origin}/posts/${t.id}`),le.success("Link copied to clipboard!")}catch{le.error("Failed to copy link")}},oe=()=>t.isArchived?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-300",children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),"Archived"]}):t.isPublished?null:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-300",children:[e.jsx(We,{className:"h-3 w-3 mr-1"}),"Pending Review"]});return e.jsxs(M.article,{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-200",whileHover:{y:-2},layout:!0,children:[e.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[j?e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm",children:v(t.author.fullName)}):e.jsx("img",{src:`/api/users/profile-picture/${t.author.id}`,alt:t.author.fullName,className:"h-10 w-10 rounded-full object-cover",onError:()=>S(!0)}),e.jsxs("div",{children:[e.jsx(xe,{to:`/alumni/${t.author.id}`,className:"font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400",children:t.author.fullName}),t.author.batch&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Batch ",t.author.batch]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("time",{children:ie(new Date(t.createdAt),{addSuffix:!0})}),t.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 px-2 py-1 rounded-full",children:t.category})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[oe(),y&&(D||_||K)&&e.jsxs(U,{as:"div",className:"relative",children:[e.jsx(U.Button,{className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(De,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})}),e.jsx(Y,{as:s.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx(U.Items,{className:"absolute right-0 mt-2 w-48 origin-top-right bg-white dark:bg-gray-800 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 dark:ring-gray-600 focus:outline-none z-10",children:e.jsxs("div",{className:"py-1",children:[K&&e.jsxs(e.Fragment,{children:[e.jsx(U.Item,{children:({active:c})=>e.jsxs("button",{onClick:()=>w?.(t.id,!0),className:`${c?"bg-gray-100 dark:bg-gray-700":""} group flex items-center px-4 py-2 text-sm text-green-700 dark:text-green-400 w-full text-left`,children:[e.jsx(Be,{className:"h-4 w-4 mr-3"}),"Approve Post"]})}),e.jsx(U.Item,{children:({active:c})=>e.jsxs("button",{onClick:()=>w?.(t.id,!1),className:`${c?"bg-gray-100 dark:bg-gray-700":""} group flex items-center px-4 py-2 text-sm text-red-700 dark:text-red-400 w-full text-left`,children:[e.jsx(He,{className:"h-4 w-4 mr-3"}),"Reject Post"]})})]}),D&&e.jsx(U.Item,{children:({active:c})=>e.jsxs("button",{onClick:()=>n?.(t),className:`${c?"bg-gray-100 dark:bg-gray-700":""} group flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 w-full text-left`,children:[e.jsx(be,{className:"h-4 w-4 mr-3"}),"Edit Post"]})}),B&&e.jsx(U.Item,{children:({active:c})=>e.jsxs("button",{onClick:()=>A?.(t.id),className:`${c?"bg-gray-100 dark:bg-gray-700":""} group flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 w-full text-left`,children:[e.jsx(me,{className:"h-4 w-4 mr-3"}),"Archive Post"]})}),_&&e.jsx(U.Item,{children:({active:c})=>e.jsxs("button",{onClick:()=>x?.(t.id),className:`${c?"bg-gray-100 dark:bg-gray-700":""} group flex items-center px-4 py-2 text-sm text-red-700 dark:text-red-400 w-full text-left`,children:[e.jsx(ye,{className:"h-4 w-4 mr-3"}),"Delete Post"]})})]})})})]})]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:t.title}),e.jsxs("div",{className:"text-gray-700 dark:text-gray-300 mb-3 leading-relaxed",children:[e.jsx("div",{className:"prose dark:prose-invert max-w-none prose-sm",dangerouslySetInnerHTML:{__html:C?T(t.body):re(t.body,200)}}),z(t.body).length>200&&e.jsx("button",{onClick:()=>a(!C),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm font-medium mt-1 inline-block",children:C?"Read less":"Read more"})]})]}),(t.heroImage||t.images&&t.images.length>0)&&e.jsx(Te,{postId:t.id,heroImage:t.heroImage,images:t.images||[],title:t.title}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.map(c=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 cursor-pointer",children:["#",c]},c))})]}),e.jsx("div",{className:"px-4 py-3",children:e.jsx(Ke,{postId:t.id,reactions:E.reactions,userReactions:E.userReactions,totalReactions:E.totalReactions,recentReactions:t.recentReactions,onReact:i,onCommentClick:()=>g(!m),onShareClick:V,commentCount:t._count?.comments||0,disabled:P||!h})}),m&&e.jsx(qe,{postId:t.id,allowComments:t.allowComments})]})};export{ct as P};
//# sourceMappingURL=PostCard-tgtijsOJ.js.map
