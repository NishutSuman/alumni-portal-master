{"version":3,"file":"Groups--CODP5EE.js","sources":["../../src/pages/user/Groups.tsx"],"sourcesContent":["// src/pages/user/Groups.tsx\nimport React, { useState } from 'react'\nimport {\n  UserGroupIcon,\n  ExclamationTriangleIcon,\n  EnvelopeIcon,\n  PhoneIcon,\n} from '@heroicons/react/24/outline'\nimport { useGetGroupsQuery, useGetGroupQuery, Group, GroupMember } from '@/store/api/groupsApi'\nimport { useAuth } from '@/hooks/useAuth'\nimport LoadingSpinner from '@/components/common/UI/LoadingSpinner'\nimport { motion } from 'framer-motion'\nimport { getApiUrl } from '@/utils/helpers'\n\nconst Groups: React.FC = () => {\n  const { user } = useAuth()\n  const [selectedGroupId, setSelectedGroupId] = useState<string | null>(null)\n  const [isTabSwitching, setIsTabSwitching] = useState(false)\n  \n  // Fetch all groups\n  const {\n    data: groupsData,\n    isLoading: groupsLoading,\n    isError: groupsError,\n    error,\n  } = useGetGroupsQuery({\n    isActive: true,\n    limit: 50,\n  })\n\n  const groups = groupsData?.groups || []\n\n  // Auto-select first group if none selected and groups are available\n  React.useEffect(() => {\n    if (groups.length > 0 && !selectedGroupId) {\n      setSelectedGroupId(groups[0].id)\n    }\n  }, [groups, selectedGroupId])\n\n  // Fetch selected group details with members\n  const {\n    data: selectedGroupData,\n    isLoading: groupLoading,\n    isError: groupError,\n  } = useGetGroupQuery(\n    { groupId: selectedGroupId!, includeMembers: true },\n    { skip: !selectedGroupId }\n  )\n\n  // Handle tab switching with loading state\n  const handleTabSwitch = (groupId: string) => {\n    if (groupId !== selectedGroupId) {\n      setIsTabSwitching(true)\n      setSelectedGroupId(groupId)\n    }\n  }\n\n  // Reset tab switching state when data loads\n  React.useEffect(() => {\n    if (selectedGroupData || groupError) {\n      setIsTabSwitching(false)\n    }\n  }, [selectedGroupData, groupError])\n\n  // Member card component\n  const MemberCard: React.FC<{ member: GroupMember }> = ({ member }) => {\n    const { user: memberUser } = member\n    \n    return (\n      <motion.div\n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        className=\"relative group h-64 w-full\"\n      >\n        <div className=\"relative w-full h-full bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-all duration-300 overflow-hidden border-b-4 border-b-blue-500 dark:border-b-blue-400\">\n          {/* Role Badge */}\n          <div className=\"absolute top-2 left-2 z-10\">\n            <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\">\n              {member.role.replace(/_/g, ' ')}\n            </span>\n          </div>\n\n          <div className=\"p-4 text-center h-full flex flex-col justify-center\">\n            {/* Profile Image */}\n            <div className=\"flex justify-center mb-3\">\n              {memberUser.profileImage ? (\n                <img\n                  src={getApiUrl(`/api/users/profile-picture/${memberUser.id}`)}\n                  alt={memberUser.fullName}\n                  className=\"h-16 w-16 rounded-full object-cover border-2 border-gray-100 dark:border-gray-700\"\n                  onError={(e) => {\n                    const target = e.target as HTMLImageElement\n                    target.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(memberUser.fullName)}&background=3B82F6&color=fff&size=64`\n                  }}\n                />\n              ) : (\n                <div className=\"h-16 w-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-lg font-bold border-2 border-gray-100 dark:border-gray-700\">\n                  {memberUser.fullName.split(' ').map(n => n[0]).join('').slice(0, 2).toUpperCase()}\n                </div>\n              )}\n            </div>\n            \n            {/* Name and Batch */}\n            <h3 className=\"text-sm font-semibold text-gray-900 dark:text-white truncate mb-1\">\n              {memberUser.fullName}\n            </h3>\n            <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-4\">\n              Batch {memberUser.batch}\n            </p>\n\n            {/* Social Links */}\n            <div className=\"flex items-center justify-center gap-3 mb-4\">\n              {memberUser.email && (\n                <a\n                  href={`mailto:${memberUser.email}`}\n                  className=\"p-2 rounded-full bg-gray-50 dark:bg-gray-900/20 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors\"\n                  title=\"Email\"\n                >\n                  <EnvelopeIcon className=\"h-4 w-4\" />\n                </a>\n              )}\n            </div>\n          </div>\n        </div>\n      </motion.div>\n    )\n  }\n\n  if (groupsLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <LoadingSpinner size=\"lg\" />\n      </div>\n    )\n  }\n\n  if (groupsError) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <ExclamationTriangleIcon className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n            Failed to Load Groups\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            {(error as any)?.data?.message || 'Something went wrong'}\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      {/* Page Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white flex items-center\">\n              <UserGroupIcon className=\"w-8 h-8 mr-3 text-blue-600\" />\n              Organization Groups\n            </h1>\n            <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\n              Explore committees, cells, and leadership teams in our alumni organization\n            </p>\n          </div>\n          \n          {/* Statistics Summary */}\n          <div className=\"hidden md:flex items-center space-x-6 text-center\">\n            <div>\n              <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {groups.length}\n              </div>\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                Groups\n              </div>\n            </div>\n            <div>\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {groups.reduce((sum, group) => sum + group.membersCount, 0)}\n              </div>\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                Total Members\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n\n      {/* Groups Tabs */}\n      {groups.length > 0 ? (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n          {/* Tabs Navigation */}\n          <div className=\"border-b border-gray-200 dark:border-gray-700\">\n            <nav className=\"flex space-x-8 px-6\" aria-label=\"Tabs\">\n              {groups.map((group) => (\n                <button\n                  key={group.id}\n                  onClick={() => handleTabSwitch(group.id)}\n                  className={`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${\n                    selectedGroupId === group.id\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  {group.name}\n                  {group.membersCount > 0 && (\n                    <span className=\"ml-2 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-300 py-0.5 px-2 rounded-full text-xs\">\n                      {group.membersCount}\n                    </span>\n                  )}\n                </button>\n              ))}\n            </nav>\n          </div>\n\n          {/* Tab Content */}\n          <div className=\"p-6\">\n            {groupLoading || isTabSwitching || (!selectedGroupData && selectedGroupId) ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <LoadingSpinner size=\"md\" />\n              </div>\n            ) : selectedGroupData ? (\n              <>\n                {/* Group Info */}\n                <div className=\"mb-6\">\n                  <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\n                    {selectedGroupData.name}\n                  </h2>\n                  {selectedGroupData.description && (\n                    <p className=\"text-gray-600 dark:text-gray-400 mb-3\">\n                      {selectedGroupData.description}\n                    </p>\n                  )}\n                  <div className=\"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400\">\n                    <span>Type: {selectedGroupData.type.replace(/_/g, ' ')}</span>\n                    <span>â€¢</span>\n                    <span>{selectedGroupData.membersCount} Members</span>\n                  </div>\n                </div>\n\n                {/* Members Grid */}\n                {selectedGroupData.members && selectedGroupData.members.length > 0 ? (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n                    {selectedGroupData.members.map((member) => (\n                      <MemberCard key={member.id} member={member} />\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-12\">\n                    <UserGroupIcon className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n                      No Members\n                    </h3>\n                    <p className=\"text-gray-600 dark:text-gray-400\">\n                      This group doesn't have any members yet.\n                    </p>\n                  </div>\n                )}\n              </>\n            ) : groupError ? (\n              <div className=\"text-center py-12\">\n                <ExclamationTriangleIcon className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n                  Failed to Load Group Details\n                </h3>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  Unable to load the details for this group.\n                </p>\n              </div>\n            ) : null}\n          </div>\n        </div>\n      ) : (\n        <div className=\"text-center py-12\">\n          <UserGroupIcon className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-xl font-medium text-gray-900 dark:text-white mb-2\">\n            No Groups Found\n          </h3>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            No groups are currently available\n          </p>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default Groups"],"names":["Groups","useAuth","selectedGroupId","setSelectedGroupId","useState","isTabSwitching","setIsTabSwitching","groupsData","groupsLoading","groupsError","error","useGetGroupsQuery","groups","React","selectedGroupData","groupLoading","groupError","useGetGroupQuery","handleTabSwitch","groupId","MemberCard","member","memberUser","jsx","motion","jsxs","getApiUrl","e","target","n","EnvelopeIcon","LoadingSpinner","ExclamationTriangleIcon","UserGroupIcon","sum","group","Fragment"],"mappings":"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"}