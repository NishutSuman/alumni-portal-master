import{b as i}from"./utils-CXyNmL__.js";import{I as a,J as n}from"./index-CR7i03R2.js";const r=typeof window<"u"&&window.Capacitor&&window.Capacitor.isNativePlatform(),p=()=>r?"http://10.0.2.2:3000/api":"http://localhost:3000/api",u=p(),o=i.create({baseURL:u,headers:{"Content-Type":"application/json"},withCredentials:!0,timeout:1e4});o.interceptors.request.use(t=>{const s=a.getState().auth.token;return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));o.interceptors.response.use(t=>t,t=>(t.response?.status===401&&(t.config?.url?.includes("/auth/login")||t.config?.url?.includes("/auth/register")||(a.dispatch(n()),window.location.href="/auth/login")),t.response||(t.message="Network error - please check your connection"),Promise.reject(t)));const l={get:(t,e)=>o.get(t,e),post:(t,e,s)=>o.post(t,e,s),put:(t,e,s)=>o.put(t,e,s),patch:(t,e,s)=>o.patch(t,e,s),delete:(t,e)=>o.delete(t,e),postFormData:(t,e,s)=>o.post(t,e,{...s,headers:{"Content-Type":"multipart/form-data",...s?.headers}})};export{l as a,o as b};
//# sourceMappingURL=api-CvKbdd9q.js.map
