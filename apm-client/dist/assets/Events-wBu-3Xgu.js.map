{"version":3,"file":"Events-wBu-3Xgu.js","sources":["../../src/components/user/PublicEventAnalytics.tsx","../../src/pages/user/Events.tsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { \n  ChevronDownIcon,\n  ChevronUpIcon,\n  UserIcon,\n  UsersIcon,\n  ChartBarIcon,\n  CurrencyRupeeIcon\n} from '@heroicons/react/24/outline'\nimport { useGetEventsQuery } from '@/store/api/eventApi'\nimport LoadingSpinner from '@/components/common/UI/LoadingSpinner'\n\ninterface Event {\n  id: string\n  title: string\n  eventDate: string\n  status: string\n}\n\ninterface PublicAnalyticsData {\n  statistics: {\n    totalRegistrations: number\n    totalRevenue: number\n    totalDonations: number\n    totalGuests: number\n  }\n  batchStats: {\n    batches: Array<{\n      batch: number\n      statistics: {\n        registrationCount: number\n        uniqueUsers: number\n        totalRevenue: number\n        totalDonations: number\n      }\n    }>\n  }\n  privacySettings: {\n    showPaymentAmounts: boolean\n    showDonationAmounts: boolean\n    showUserEmails: boolean\n    showUserPhones: boolean\n    showGuestDetails: boolean\n  }\n}\n\ninterface PublicRegistrationsData {\n  registrations: Array<{\n    id: string\n    user: {\n      id: string\n      fullName: string\n      email?: string\n      batch?: number\n      profileImage?: string\n    }\n    totalGuests?: number\n    donationAmount?: number\n    totalAmount?: number\n    registrationDate?: string\n    status: string\n  }>\n  totalCount: number\n  privacySettings: {\n    showPaymentAmounts: boolean\n    showDonationAmounts: boolean\n    showUserEmails: boolean\n    showUserPhones: boolean\n    showGuestDetails: boolean\n    showBatchInfo: boolean\n    showRegistrationDate: boolean\n  }\n}\n\ntype SortField = 'batch' | 'date' | 'totalAmount'\ntype SortOrder = 'asc' | 'desc'\n\nconst PublicEventAnalytics: React.FC = () => {\n  const [selectedEventId, setSelectedEventId] = useState<string>('all')\n  const [selectedBatch, setSelectedBatch] = useState<string>('all')\n  const [activeTab, setActiveTab] = useState<'overview' | 'registration'>('overview')\n  const [analyticsData, setAnalyticsData] = useState<PublicAnalyticsData | null>(null)\n  const [registrationsData, setRegistrationsData] = useState<PublicRegistrationsData | null>(null)\n  const [isLoadingAnalytics, setIsLoadingAnalytics] = useState(false)\n  const [isLoadingRegistrations, setIsLoadingRegistrations] = useState(false)\n  const [sortField, setSortField] = useState<SortField | null>(null)\n  const [sortOrder, setSortOrder] = useState<SortOrder>('asc')\n\n  const { data: eventsData, isLoading: eventsLoading } = useGetEventsQuery({\n    page: 1,\n    limit: 100,\n    status: 'PUBLISHED'\n  })\n\n  const events = eventsData?.events || []\n\n  // Get unique batches from registration data\n  const availableBatches = React.useMemo(() => {\n    if (!registrationsData?.registrations) return []\n    \n    const batches = registrationsData.registrations\n      .map(registration => registration.user?.batch)\n      .filter((batch): batch is number => batch !== undefined && batch !== null)\n    \n    return [...new Set(batches)].sort((a, b) => b - a) // Sort descending\n  }, [registrationsData])\n\n  const fetchAnalytics = async (eventId: string) => {\n    if (eventId === 'all') {\n      setAnalyticsData(null)\n      return\n    }\n\n    setIsLoadingAnalytics(true)\n    try {\n      const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/events/${eventId}/public-analytics`, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setAnalyticsData(data.data)\n      } else {\n        console.error('Failed to fetch public analytics')\n        setAnalyticsData(null)\n      }\n    } catch (error) {\n      console.error('Error fetching public analytics:', error)\n      setAnalyticsData(null)\n    } finally {\n      setIsLoadingAnalytics(false)\n    }\n  }\n\n  const fetchRegistrations = async (eventId: string) => {\n    if (eventId === 'all') {\n      setRegistrationsData(null)\n      return\n    }\n\n    setIsLoadingRegistrations(true)\n    try {\n      const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/events/${eventId}/public-registrations`, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setRegistrationsData(data.data)\n      } else {\n        console.error('Failed to fetch public registrations')\n        setRegistrationsData(null)\n      }\n    } catch (error) {\n      console.error('Error fetching public registrations:', error)\n      setRegistrationsData(null)\n    } finally {\n      setIsLoadingRegistrations(false)\n    }\n  }\n\n  const handleSort = (field: SortField) => {\n    if (sortField === field) {\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')\n    } else {\n      setSortField(field)\n      setSortOrder('asc')\n    }\n  }\n\n  const getSortedRegistrations = () => {\n    if (!registrationsData?.registrations || !sortField) {\n      return registrationsData?.registrations || []\n    }\n\n    return [...registrationsData.registrations].sort((a, b) => {\n      let aValue: number, bValue: number\n\n      switch (sortField) {\n        case 'batch':\n          aValue = a.user?.batch || 0\n          bValue = b.user?.batch || 0\n          break\n        case 'date':\n          aValue = new Date(a.registrationDate || '').getTime()\n          bValue = new Date(b.registrationDate || '').getTime()\n          break\n        case 'totalAmount':\n          aValue = a.totalAmount || 0\n          bValue = b.totalAmount || 0\n          break\n        default:\n          return 0\n      }\n\n      if (sortOrder === 'asc') {\n        return aValue > bValue ? 1 : aValue < bValue ? -1 : 0\n      } else {\n        return aValue < bValue ? 1 : aValue > bValue ? -1 : 0\n      }\n    })\n  }\n\n  const handleEventChange = (eventId: string) => {\n    setSelectedEventId(eventId)\n    setSelectedBatch('all') // Reset batch filter when changing events\n    setSortField(null) // Reset sorting when changing events\n    if (eventId !== 'all') {\n      fetchAnalytics(eventId)\n      fetchRegistrations(eventId)\n    } else {\n      setAnalyticsData(null)\n      setRegistrationsData(null)\n    }\n  }\n\n  const handleTabChange = (tab: 'overview' | 'registration') => {\n    setActiveTab(tab)\n    // If switching to registration tab and have an event selected, fetch fresh data\n    if (tab === 'registration' && selectedEventId !== 'all') {\n      fetchRegistrations(selectedEventId)\n    }\n  }\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-IN', {\n      day: '2-digit',\n      month: '2-digit',\n      year: '2-digit'\n    })\n  }\n\n  const formatAmount = (amount: number) => {\n    return `₹${amount.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`\n  }\n\n  const SortableHeader: React.FC<{ field: SortField; children: React.ReactNode; className?: string }> = ({ field, children, className = '' }) => (\n    <th \n      className={`py-4 px-4 text-gray-300 font-medium cursor-pointer hover:text-white transition-colors ${className}`}\n      onClick={() => handleSort(field)}\n    >\n      <div className=\"flex items-center justify-center gap-2\">\n        {children}\n        <div className=\"flex flex-col opacity-80 hover:opacity-100\">\n          <ChevronUpIcon className={`h-4 w-4 ${sortField === field && sortOrder === 'asc' ? 'text-blue-400' : 'text-gray-400'}`} />\n          <ChevronDownIcon className={`h-4 w-4 -mt-1 ${sortField === field && sortOrder === 'desc' ? 'text-blue-400' : 'text-gray-400'}`} />\n        </div>\n      </div>\n    </th>\n  )\n\n  if (eventsLoading) return <LoadingSpinner />\n\n  return (\n    <div className=\"bg-gray-900 text-white min-h-screen p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold mb-8\">Event Analytics</h1>\n        </div>\n\n        {/* Event and Batch Selectors */}\n        <div className=\"flex justify-center gap-4 mb-8\">\n          <div className=\"relative\">\n            <select\n              value={selectedEventId}\n              onChange={(e) => handleEventChange(e.target.value)}\n              className=\"bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 pr-10 text-white min-w-80 appearance-none focus:outline-none focus:border-blue-500\"\n            >\n              <option value=\"all\">Default All Event</option>\n              {events.map((event: Event) => (\n                <option key={event.id} value={event.id}>\n                  {event.title}\n                </option>\n              ))}\n            </select>\n            <ChevronDownIcon className=\"h-5 w-5 absolute right-3 top-3 text-gray-400 pointer-events-none\" />\n          </div>\n\n          {/* Batch Dropdown */}\n          {selectedEventId !== 'all' && availableBatches.length > 0 && (\n            <div className=\"relative\">\n              <select\n                value={selectedBatch}\n                onChange={(e) => setSelectedBatch(e.target.value)}\n                className=\"bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 pr-10 text-white min-w-48 appearance-none focus:outline-none focus:border-blue-500\"\n              >\n                <option value=\"all\">Select Batch</option>\n                {availableBatches.map((batch) => (\n                  <option key={batch} value={batch.toString()}>\n                    {batch}\n                  </option>\n                ))}\n              </select>\n              <ChevronDownIcon className=\"h-5 w-5 absolute right-3 top-3 text-gray-400 pointer-events-none\" />\n            </div>\n          )}\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"flex justify-center mb-8\">\n          <div className=\"flex bg-gray-800 rounded-lg p-1\">\n            <button\n              onClick={() => handleTabChange('overview')}\n              className={`px-6 py-2 rounded-md transition-colors ${\n                activeTab === 'overview' \n                  ? 'bg-gray-700 text-white' \n                  : 'text-gray-400 hover:text-white'\n              }`}\n            >\n              Overview\n            </button>\n            <button\n              onClick={() => handleTabChange('registration')}\n              className={`px-6 py-2 rounded-md transition-colors ${\n                activeTab === 'registration' \n                  ? 'bg-gray-700 text-white' \n                  : 'text-gray-400 hover:text-white'\n              }`}\n            >\n              Registration\n            </button>\n          </div>\n        </div>\n\n        {/* Content */}\n        {selectedEventId === 'all' ? (\n          <div className=\"text-center py-12\">\n            <div className=\"bg-gray-800 rounded-lg p-8\">\n              <ChartBarIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n              <h3 className=\"text-lg font-medium text-white mb-2\">\n                Select an Event\n              </h3>\n              <p className=\"text-gray-400\">\n                Choose an event from the dropdown above to view its analytics\n              </p>\n            </div>\n          </div>\n        ) : activeTab === 'overview' ? (\n          <div className=\"bg-gray-800 rounded-2xl p-8\">\n            <h3 className=\"text-xl mb-6 text-white\">Overview Analytics</h3>\n            \n            {isLoadingAnalytics ? (\n              <div className=\"text-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto\"></div>\n                <p className=\"mt-2 text-gray-400\">Loading overview...</p>\n              </div>\n            ) : !analyticsData ? (\n              <div className=\"text-center py-8\">\n                <div className=\"bg-red-50 dark:bg-red-900/20 rounded-lg p-8\">\n                  <h3 className=\"text-lg font-medium text-red-900 dark:text-red-200 mb-2\">\n                    Analytics Not Available\n                  </h3>\n                  <p className=\"text-red-700 dark:text-red-300\">\n                    Public analytics are not available for this event or an error occurred.\n                  </p>\n                </div>\n              </div>\n            ) : (\n              <>\n                {/* Overview Analytics Cards */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n                  {/* User Registration */}\n                  <div className=\"bg-gray-700 rounded-lg p-6\">\n                    <div className=\"flex items-start justify-between\">\n                      <div>\n                        <p className=\"text-gray-400 text-sm\">User Registration</p>\n                        <p className=\"text-2xl font-bold text-white\">{analyticsData.statistics.totalRegistrations}</p>\n                      </div>\n                      <div className=\"flex-shrink-0\">\n                        <UserIcon className=\"h-8 w-8 text-blue-400\" />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Guest Registration - Show only if privacy settings allow */}\n                  {analyticsData.privacySettings.showGuestDetails && (\n                    <div className=\"bg-gray-700 rounded-lg p-6\">\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <p className=\"text-gray-400 text-sm\">Guest Registration</p>\n                          <p className=\"text-2xl font-bold text-white\">{analyticsData.statistics.totalGuests}</p>\n                        </div>\n                        <div className=\"flex-shrink-0\">\n                          <UsersIcon className=\"h-8 w-8 text-purple-400\" />\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Total Registration */}\n                  <div className=\"bg-gray-700 rounded-lg p-6\">\n                    <div className=\"flex items-start justify-between\">\n                      <div>\n                        <p className=\"text-gray-400 text-sm\">Total Registration</p>\n                        <p className=\"text-2xl font-bold text-white\">\n                          {analyticsData.statistics.totalRegistrations + analyticsData.statistics.totalGuests}\n                        </p>\n                      </div>\n                      <div className=\"flex-shrink-0\">\n                        <ChartBarIcon className=\"h-8 w-8 text-green-400\" />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Total Collection - Show only if privacy settings allow */}\n                  {analyticsData.privacySettings.showPaymentAmounts && (\n                    <div className=\"bg-gray-700 rounded-lg p-6\">\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <p className=\"text-gray-400 text-sm\">Total Collection</p>\n                          <p className=\"text-2xl font-bold text-white\">{formatAmount(analyticsData.statistics.totalRevenue)}</p>\n                        </div>\n                        <div className=\"flex-shrink-0\">\n                          <CurrencyRupeeIcon className=\"h-8 w-8 text-orange-400\" />\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n\n                {/* Batch Participation Details Table */}\n                {analyticsData.batchStats.batches.length > 0 && (\n                  <div className=\"mb-8\">\n                    <h4 className=\"text-lg font-semibold text-white mb-4\">Batch Participation Details</h4>\n                    <div className=\"bg-gray-700 rounded-lg overflow-hidden\">\n                      <div className=\"overflow-x-auto\">\n                        <table className=\"w-full\">\n                          <thead className=\"bg-gray-600\">\n                            <tr>\n                              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">Batch</th>\n                              <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\">Total Users</th>\n                              <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\">Active Participants</th>\n                              <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\">Participation Rate</th>\n                              {analyticsData.privacySettings.showPaymentAmounts && (\n                                <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider\">Total Collection</th>\n                              )}\n                            </tr>\n                          </thead>\n                          <tbody className=\"divide-y divide-gray-600\">\n                            {analyticsData.batchStats.batches\n                              .filter((batchData) => selectedBatch === 'all' || batchData.batch === parseInt(selectedBatch))\n                              .map((batchData) => (\n                              <tr key={batchData.batch} className=\"hover:bg-gray-600\">\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-white font-medium\">\n                                  Batch {batchData.batch}\n                                </td>\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300 text-center\">\n                                  {batchData.statistics.uniqueUsers}\n                                </td>\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300 text-center\">\n                                  {batchData.statistics.registrationCount}\n                                </td>\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300 text-center\">\n                                  <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                                    {batchData.statistics.uniqueUsers > 0 \n                                      ? ((batchData.statistics.registrationCount / batchData.statistics.uniqueUsers) * 100).toFixed(1) \n                                      : '0.0'}%\n                                  </span>\n                                </td>\n                                {analyticsData.privacySettings.showPaymentAmounts && (\n                                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300 text-center\">\n                                    ₹{batchData.statistics.totalRevenue.toLocaleString('en-IN')}\n                                  </td>\n                                )}\n                              </tr>\n                            ))}\n                          </tbody>\n                        </table>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Batch wise Revenue Sources */}\n                {analyticsData.privacySettings.showPaymentAmounts && analyticsData.batchStats.batches.length > 0 && (\n                  <div>\n                    <h4 className=\"text-lg font-semibold text-white mb-4\">Batch wise Revenue Sources</h4>\n                    <div className=\"bg-gray-700 rounded-lg p-6\">\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n                        {analyticsData.batchStats.batches.slice(0, 4).map((batchData) => {\n                          const registrationRevenue = batchData.statistics.totalRevenue - (batchData.statistics.totalDonations || 0);\n                          const donationRevenue = batchData.statistics.totalDonations || 0;\n                          const maxRevenue = Math.max(registrationRevenue, donationRevenue);\n                          \n                          return (\n                            <div key={batchData.batch} className=\"text-center\">\n                              <p className=\"text-sm text-gray-300 mb-2\">Batch {batchData.batch}</p>\n                              <div className=\"flex items-end justify-center space-x-2 h-32\">\n                                {/* Donations Bar */}\n                                <div className=\"flex flex-col items-center\">\n                                  <div \n                                    className=\"w-8 bg-red-400 rounded-t\"\n                                    style={{ \n                                      height: maxRevenue > 0 ? `${(donationRevenue / maxRevenue) * 100}px` : '4px',\n                                      minHeight: '4px'\n                                    }}\n                                  ></div>\n                                  <p className=\"text-xs text-gray-400 mt-1\">₹{donationRevenue.toLocaleString('en-IN')}</p>\n                                </div>\n                                {/* Registration Fees Bar */}\n                                <div className=\"flex flex-col items-center\">\n                                  <div \n                                    className=\"w-8 bg-green-400 rounded-t\"\n                                    style={{ \n                                      height: maxRevenue > 0 ? `${(registrationRevenue / maxRevenue) * 100}px` : '4px',\n                                      minHeight: '4px'\n                                    }}\n                                  ></div>\n                                  <p className=\"text-xs text-gray-400 mt-1\">₹{registrationRevenue.toLocaleString('en-IN')}</p>\n                                </div>\n                              </div>\n                            </div>\n                          );\n                        })}\n                      </div>\n                      <div className=\"flex justify-center mt-6 space-x-6\">\n                        <div className=\"flex items-center\">\n                          <div className=\"w-4 h-4 bg-red-400 rounded mr-2\"></div>\n                          <span className=\"text-sm text-gray-300\">Donations</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <div className=\"w-4 h-4 bg-green-400 rounded mr-2\"></div>\n                          <span className=\"text-sm text-gray-300\">Registration Fees</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n        ) : (\n          /* Registration Table */\n          <div className=\"bg-gray-800 rounded-2xl p-8\">\n            {isLoadingRegistrations ? (\n              <div className=\"text-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto\"></div>\n                <p className=\"mt-2 text-gray-400\">Loading registrations...</p>\n              </div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead>\n                    <tr className=\"border-b border-gray-600\">\n                      <th className=\"text-left py-4 px-4 text-gray-300 font-medium\">Name</th>\n                      <SortableHeader field=\"batch\" className=\"text-center\">Batch</SortableHeader>\n                      <th className=\"text-center py-4 px-4 text-gray-300 font-medium\">Guest Count</th>\n                      {registrationsData?.privacySettings.showDonationAmounts && (\n                        <th className=\"text-center py-4 px-4 text-gray-300 font-medium\">Donation</th>\n                      )}\n                      {registrationsData?.privacySettings.showPaymentAmounts && (\n                        <SortableHeader field=\"totalAmount\" className=\"text-center\">Total Amount</SortableHeader>\n                      )}\n                      <SortableHeader field=\"date\" className=\"text-center\">Date</SortableHeader>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {registrationsData?.registrations && registrationsData.registrations.length > 0 ? (\n                      getSortedRegistrations()\n                        .filter((registration) => selectedBatch === 'all' || registration.user?.batch === parseInt(selectedBatch))\n                        .map((registration) => (\n                        <tr key={registration.id} className=\"border-b border-gray-700 hover:bg-gray-700\">\n                          <td className=\"py-4 px-4\">\n                            <div className=\"flex items-center space-x-3\">\n                              <div className=\"w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center\">\n                                {registration.user?.profileImage ? (\n                                  <img \n                                    src={`${import.meta.env.VITE_API_BASE_URL}/users/profile-picture/${registration.user.id}`}\n                                    alt={registration.user?.fullName || 'User'}\n                                    className=\"w-10 h-10 rounded-full object-cover\"\n                                    onError={(e) => {\n                                      e.currentTarget.style.display = 'none';\n                                      const nextSibling = e.currentTarget.nextElementSibling as HTMLElement;\n                                      if (nextSibling) {\n                                        nextSibling.style.display = 'flex';\n                                      }\n                                    }}\n                                  />\n                                ) : null}\n                                <UserIcon className=\"h-6 w-6 text-gray-400\" style={{ display: registration.user?.profileImage ? 'none' : 'block' }} />\n                              </div>\n                              <div>\n                                <p className=\"text-white font-medium\">{registration.user?.fullName || 'N/A'}</p>\n                                {registrationsData.privacySettings.showUserEmails && registration.user?.email && (\n                                  <p className=\"text-sm text-gray-400\">{registration.user.email}</p>\n                                )}\n                              </div>\n                            </div>\n                          </td>\n                          <td className=\"py-4 px-4 text-center text-gray-300\">{registration.user?.batch || 'N/A'}</td>\n                          <td className=\"py-4 px-4 text-center text-gray-300\">{registration.totalGuests || 0}</td>\n                          {registrationsData.privacySettings.showDonationAmounts && (\n                            <td className=\"py-4 px-4 text-center text-gray-300\">{formatAmount(registration.donationAmount || 0)}</td>\n                          )}\n                          {registrationsData.privacySettings.showPaymentAmounts && (\n                            <td className=\"py-4 px-4 text-center text-gray-300\">{formatAmount(registration.totalAmount || 0)}</td>\n                          )}\n                          <td className=\"py-4 px-4 text-center text-gray-300\">{registration.registrationDate ? formatDate(registration.registrationDate) : 'N/A'}</td>\n                        </tr>\n                      ))\n                    ) : (\n                      <tr>\n                        <td colSpan={8} className=\"py-8 text-center text-gray-400\">\n                          {selectedBatch !== 'all' ? 'No registrations found for the selected batch' : 'No registrations available for public viewing'}\n                        </td>\n                      </tr>\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Privacy Notice */}\n        {selectedEventId !== 'all' && (\n          <div className=\"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\n            <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n              <strong>Privacy Notice:</strong> This analytics view respects privacy settings configured by event administrators. \n              Some information may be hidden based on these settings.\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default PublicEventAnalytics","import React, { useState, useEffect } from 'react'\nimport { CalendarIcon, MapPinIcon, ClockIcon, UsersIcon, CurrencyRupeeIcon, EyeIcon, ChartBarIcon } from '@heroicons/react/24/outline'\nimport { useSearchParams, useLocation, useNavigate } from 'react-router-dom'\nimport { useGetEventsQuery } from '@/store/api/eventApi'\nimport { useGetMyEventRegistrationsQuery } from '@/store/api/userApi'\nimport LoadingSpinner from '@/components/common/UI/LoadingSpinner'\nimport EventDetailsModal from '@/components/common/UI/EventDetailsModal'\nimport EventRegistrationModal from '@/components/common/UI/EventRegistrationModal'\nimport RegistrationDetailsModal from '@/components/common/UI/RegistrationDetailsModal'\nimport QRCodeModal from '@/components/common/UI/QRCodeModal'\nimport InvoiceModal from '@/components/common/UI/InvoiceModal'\nimport TicketModal from '@/components/common/UI/TicketModal'\nimport PublicEventAnalytics from '@/components/user/PublicEventAnalytics'\nimport { useAuth } from '@/hooks/useAuth'\nimport { useGetInvoiceQuery, useGenerateInvoiceMutation } from '@/store/api/invoiceApi'\nimport { format } from 'date-fns'\n\ninterface Event {\n  id: string\n  title: string\n  description: string\n  eventDate: string\n  startTime?: string\n  endTime?: string\n  venue?: string\n  meetingLink?: string\n  eventMode: 'PHYSICAL' | 'VIRTUAL' | 'HYBRID'\n  status: string\n  maxCapacity?: number\n  registrationFee: string | number\n  guestFee: string | number\n  heroImage?: string\n  category?: {\n    name: string\n  }\n  _count?: {\n    registrations: number\n  }\n  registrationCount?: number\n}\n\nconst Events: React.FC = () => {\n  const { user, auth } = useAuth()\n  const [searchParams] = useSearchParams()\n  const location = useLocation()\n  const navigate = useNavigate()\n  \n  const [activeTab, setActiveTab] = useState<'active' | 'booked' | 'past' | 'analytics'>('active')\n  \n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null)\n  const [selectedRegistration, setSelectedRegistration] = useState<any>(null)\n  const [showDetailsModal, setShowDetailsModal] = useState(false)\n  const [showRegistrationModal, setShowRegistrationModal] = useState(false)\n  const [showRegistrationDetailsModal, setShowRegistrationDetailsModal] = useState(false)\n  const [showQRModal, setShowQRModal] = useState(false)\n  const [showInvoiceModal, setShowInvoiceModal] = useState(false)\n  const [showTicketModal, setShowTicketModal] = useState(false)\n  const [isLoadingInvoice, setIsLoadingInvoice] = useState(false)\n  const [isLoadingTicket, setIsLoadingTicket] = useState(false)\n  \n  // Modal data states\n  const [qrData, setQRData] = useState<any>(null)\n  const [invoiceData, setInvoiceData] = useState<any>(null)\n  const [ticketData, setTicketData] = useState<any>(null)\n  \n  const { data: eventsData, isLoading, error } = useGetEventsQuery({\n    page: 1,\n    limit: 50,\n    upcoming: undefined\n  })\n\n  const { data: registrationsData, isLoading: isLoadingRegistrations, error: registrationsError, refetch: refetchRegistrations } = useGetMyEventRegistrationsQuery({\n    page: 1,\n    limit: 50,\n  })\n\n  const events = eventsData?.events || []\n  const registrations = registrationsData?.registrations || []\n  const now = new Date()\n\n  // Handle tab from URL query parameters or router state\n  useEffect(() => {\n    // First check router state (from navigation after registration)\n    if (location.state?.activeTab && ['active', 'booked', 'past', 'analytics'].includes(location.state.activeTab)) {\n      setActiveTab(location.state.activeTab as 'active' | 'booked' | 'past' | 'analytics')\n      \n      // Clear the router state after handling it to prevent unnecessary refetches\n      navigate(location.pathname, { replace: true })\n      return\n    }\n    \n    // Fallback to URL query parameters\n    const tabParam = searchParams.get('tab')\n    if (tabParam && ['active', 'booked', 'past', 'analytics'].includes(tabParam)) {\n      setActiveTab(tabParam as 'active' | 'booked' | 'past' | 'analytics')\n    }\n  }, [searchParams, location.state, navigate, location.pathname])\n\n  // Refetch registrations when switching to 'booked' tab to ensure fresh data\n  useEffect(() => {\n    if (activeTab === 'booked') {\n      refetchRegistrations()\n    }\n  }, [activeTab, refetchRegistrations])\n\n  // Create a Set of registered event IDs for quick lookup\n  const registeredEventIds = new Set(registrations.map(reg => reg.event?.id).filter(Boolean))\n\n  // Filter events based on tab selection\n  let filteredEvents\n  if (activeTab === 'booked') {\n    filteredEvents = registrations\n      .filter(registration => registration.event)\n      .map(registration => ({\n        ...registration.event,\n        registration: registration,\n        hasQRCode: !!registration.qr,\n        totalGuests: registration.guests?.length || 0,\n        registrationStatus: registration.status,\n        paymentStatus: registration.paymentStatus,\n        mealPreference: registration.mealPreference,\n        registrationDate: registration.createdAt,\n        qrCode: registration.qr\n      }))\n  } else {\n    filteredEvents = events.filter((event: Event) => {\n      const eventDate = new Date(event.eventDate)\n      if (activeTab === 'active') {\n        return eventDate >= now && !['COMPLETED', 'CANCELLED'].includes(event.status)\n      } else {\n        return eventDate < now || ['COMPLETED', 'CANCELLED'].includes(event.status)\n      }\n    })\n  }\n\n  const formatEventTime = (date: string, startTime?: string, endTime?: string) => {\n    const eventDate = new Date(date)\n    const dateStr = format(eventDate, 'MMM dd, yyyy')\n    \n    if (startTime && endTime) {\n      return `${dateStr} • ${startTime} - ${endTime}`\n    } else if (startTime) {\n      return `${dateStr} • ${startTime}`\n    }\n    return dateStr\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'PUBLISHED':\n      case 'REGISTRATION_OPEN':\n        return 'bg-green-100 text-green-800'\n      case 'REGISTRATION_CLOSED':\n        return 'bg-yellow-100 text-yellow-800'\n      case 'COMPLETED':\n        return 'bg-gray-100 text-gray-800'\n      case 'CANCELLED':\n        return 'bg-red-100 text-red-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  const handleViewDetails = (event: Event) => {\n    setSelectedEvent(event)\n    setShowDetailsModal(true)\n  }\n\n  const handleRegister = (event: Event) => {\n    setSelectedEvent(event)\n    setShowRegistrationModal(true)\n  }\n\n  const handleViewRegistration = (event: any) => {\n    // Find the full registration data for this event\n    const registration = registrations.find(reg => reg.event?.id === event.id)\n    if (registration) {\n      setSelectedEvent(event)\n      setSelectedRegistration(registration)\n      setShowRegistrationDetailsModal(true)\n    }\n  }\n\n  // Modal handlers for registration actions\n  const handleViewInvoice = async () => {\n    if (selectedRegistration?.paymentTransaction?.id) {\n      setIsLoadingInvoice(true)\n      setShowInvoiceModal(true) // Show modal immediately with loading state\n      \n      try {\n        // Fetch both invoice data and organization details\n        const [invoiceResult, orgResult] = await Promise.all([\n          fetch(`${import.meta.env.VITE_API_BASE_URL}/payments/${selectedRegistration.paymentTransaction.id}/invoice`, {\n            headers: {\n              'Authorization': `Bearer ${auth.token || localStorage.getItem('token')}`,\n            },\n          }),\n          fetch(`${import.meta.env.VITE_API_BASE_URL}/organization`, {\n            headers: {\n              'Authorization': `Bearer ${auth.token || localStorage.getItem('token')}`,\n            },\n          })\n        ])\n        \n        if (invoiceResult.ok) {\n          const invoiceResponse = await invoiceResult.json()\n          let organizationData = {\n            name: 'Alumni Portal Organization',\n            officialEmail: 'admin@alumniportal.com',\n            officeAddress: 'Organization Address'\n          }\n\n          // Use organization data if available\n          if (orgResult.ok) {\n            try {\n              const orgResponse = await orgResult.json()\n              if (orgResponse.data?.organization) {\n                organizationData = {\n                  name: orgResponse.data.organization.name || organizationData.name,\n                  officialEmail: orgResponse.data.organization.officialEmail || organizationData.officialEmail,\n                  officeAddress: orgResponse.data.organization.officeAddress || organizationData.officeAddress,\n                  logoUrl: orgResponse.data.organization.logoUrl\n                }\n              }\n            } catch (orgError) {\n              console.warn('Failed to parse organization data:', orgError)\n            }\n          }\n          \n          setInvoiceData({\n            invoice: invoiceResponse.data.invoice,\n            transaction: selectedRegistration.paymentTransaction,\n            registration: selectedRegistration,\n            user: user,\n            organization: organizationData\n          })\n        } else {\n          console.error('Failed to fetch invoice data')\n          alert('Failed to load invoice. Please try again.')\n          setShowInvoiceModal(false)\n        }\n      } catch (error) {\n        console.error('Error fetching invoice:', error)\n        alert('Failed to load invoice. Please try again.')\n        setShowInvoiceModal(false)\n      } finally {\n        setIsLoadingInvoice(false)\n      }\n    } else {\n      // For free events or events without payment transactions, show a special message\n      if (selectedRegistration?.totalAmount === 0) {\n        alert('This is a free event. No invoice is available.')\n      } else {\n        alert('No payment transaction found for this registration.')\n      }\n    }\n  }\n\n  const handleViewQR = async () => {\n    if (selectedRegistration?.qr?.qrCode) {\n      // Use existing QR code if available\n      setQRData({\n        qrCode: selectedRegistration.qr.qrCode,\n        qrImageUrl: selectedRegistration.qr.qrImageUrl,\n        event: {\n          title: selectedRegistration.event.title,\n          eventDate: selectedRegistration.event.eventDate,\n          venue: selectedRegistration.event.venue\n        },\n        user: {\n          fullName: user?.fullName || 'User',\n          email: user?.email || 'user@example.com'\n        },\n        registrationId: selectedRegistration.id\n      })\n      setShowQRModal(true)\n    } else {\n      // Generate QR code via API endpoint if not available\n      try {\n        const apiUrl = `${import.meta.env.VITE_API_BASE_URL}/events/${selectedRegistration.event.id}/my-registration/qr-code`\n        \n        const response = await fetch(apiUrl, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${auth.token || localStorage.getItem('token')}`,\n            'Content-Type': 'application/json',\n          },\n        })\n        \n        if (response.ok) {\n          const qrResponse = await response.json()\n          \n          const qrData = {\n            qrCode: qrResponse.data?.qrCode || qrResponse.qrCode,\n            qrImageUrl: qrResponse.data?.qrImageUrl || qrResponse.qrImageUrl,\n            event: {\n              title: selectedRegistration.event.title,\n              eventDate: selectedRegistration.event.eventDate,\n              venue: selectedRegistration.event.venue\n            },\n            user: {\n              fullName: user?.fullName || 'User',\n              email: user?.email || 'user@example.com'\n            },\n            registrationId: selectedRegistration.id\n          }\n          \n          setQRData(qrData)\n          setShowQRModal(true)\n        } else {\n          const errorText = await response.text()\n          console.error('Failed to generate QR code:', response.status, errorText)\n          alert(`Failed to generate QR code: ${response.status} - ${errorText}`)\n        }\n      } catch (error) {\n        console.error('Error generating QR code:', error)\n        alert('Failed to generate QR code. Please try again.')\n      }\n    }\n  }\n\n  const handleViewTicket = async () => {\n    if (selectedRegistration) {\n      setIsLoadingTicket(true)\n      setShowTicketModal(true) // Show modal immediately with loading state\n      \n      try {\n        const orgResult = await fetch(`${import.meta.env.VITE_API_BASE_URL}/organization`, {\n          headers: {\n            'Authorization': `Bearer ${auth.token || localStorage.getItem('token')}`,\n          },\n        })\n        \n        let organizationData = {\n          name: 'Alumni Portal Organization'\n        }\n\n        if (orgResult.ok) {\n          try {\n            const orgResponse = await orgResult.json()\n            if (orgResponse.data?.organization) {\n              organizationData = {\n                name: orgResponse.data.organization.name || organizationData.name,\n                logoUrl: orgResponse.data.organization.logoUrl\n              }\n            }\n          } catch (orgError) {\n            console.warn('Failed to parse organization data:', orgError)\n          }\n        }\n        \n        setTicketData({\n          registration: selectedRegistration,\n          user: user,\n          organization: organizationData\n        })\n        setIsLoadingTicket(false)\n      } catch (error) {\n        console.error('Error loading ticket:', error)\n        setIsLoadingTicket(false)\n        alert('Failed to load ticket.')\n      }\n    }\n  }\n\n  const closeModals = () => {\n    setSelectedEvent(null)\n    setSelectedRegistration(null)\n    setQRData(null)\n    setInvoiceData(null)\n    setTicketData(null)\n    setShowDetailsModal(false)\n    setShowRegistrationModal(false)\n    setShowRegistrationDetailsModal(false)\n    setShowQRModal(false)\n    setShowInvoiceModal(false)\n    setShowTicketModal(false)\n    setIsLoadingInvoice(false)\n    setIsLoadingTicket(false)\n  }\n\n  const closeQRModal = () => {\n    setQRData(null)\n    setShowQRModal(false)\n    // Keep other modals open\n  }\n\n  const closeInvoiceModal = () => {\n    setInvoiceData(null)\n    setShowInvoiceModal(false)\n    setIsLoadingInvoice(false)\n    // Keep other modals open\n  }\n\n  const closeTicketModal = () => {\n    setTicketData(null)\n    setShowTicketModal(false)\n    setIsLoadingTicket(false)\n    // Keep other modals open\n  }\n\n  const isLoadingAny = isLoading || (activeTab === 'booked' && isLoadingRegistrations)\n  const errorAny = error || (activeTab === 'booked' && registrationsError)\n\n  if (isLoadingAny) return <LoadingSpinner />\n\n  if (errorAny) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-red-500 mb-4\">Failed to load events</div>\n        <button \n          onClick={() => window.location.reload()} \n          className=\"btn-guild\"\n        >\n          Try Again\n        </button>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex flex-col h-screen lg:h-auto overflow-hidden lg:overflow-visible\">\n      {/* Header - Fixed on mobile */}\n      <div className=\"flex-shrink-0 bg-white dark:bg-gray-900 lg:bg-transparent lg:dark:bg-transparent px-4 sm:px-0 pt-4 lg:pt-0\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n          <div>\n            <h1 className=\"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white\">Events</h1>\n            <p className=\"mt-1 text-xs sm:text-sm text-gray-500 dark:text-gray-400\">\n              Discover and participate in alumni events\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs - Fixed on mobile */}\n      <div className=\"flex-shrink-0 border-b border-gray-200 dark:border-gray-700 -mx-4 sm:mx-0 overflow-x-auto scrollbar-hide bg-white dark:bg-gray-900 lg:bg-transparent lg:dark:bg-transparent mt-4\">\n        <nav className=\"-mb-px flex space-x-2 sm:space-x-6 px-4 sm:px-0 min-w-min\">\n          <button\n            onClick={() => setActiveTab('active')}\n            className={`py-2 sm:py-3 px-1.5 sm:px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0 ${\n              activeTab === 'active'\n                ? 'border-guild-500 text-guild-600 dark:text-guild-400'\n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n            }`}\n          >\n            <span className=\"flex items-center gap-1 sm:gap-2\">\n              <span className=\"hidden sm:inline\">Active Events</span>\n              <span className=\"sm:hidden\">Active</span>\n              <span className=\"bg-guild-100 text-guild-600 dark:bg-guild-900/30 dark:text-guild-400 py-0.5 px-1.5 rounded-full text-xs\">\n                {events.filter((event: Event) => {\n                  const eventDate = new Date(event.eventDate)\n                  return eventDate >= now && !['COMPLETED', 'CANCELLED'].includes(event.status)\n                }).length}\n              </span>\n            </span>\n          </button>\n          <button\n            onClick={() => setActiveTab('booked')}\n            className={`py-2 sm:py-3 px-1.5 sm:px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0 ${\n              activeTab === 'booked'\n                ? 'border-guild-500 text-guild-600 dark:text-guild-400'\n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n            }`}\n          >\n            <span className=\"hidden sm:inline\">Your Bookings</span>\n            <span className=\"sm:hidden\">Bookings</span>\n          </button>\n          <button\n            onClick={() => setActiveTab('past')}\n            className={`py-2 sm:py-3 px-1.5 sm:px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0 ${\n              activeTab === 'past'\n                ? 'border-guild-500 text-guild-600 dark:text-guild-400'\n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n            }`}\n          >\n            <span className=\"flex items-center gap-1 sm:gap-2\">\n              <span className=\"hidden sm:inline\">Past Events</span>\n              <span className=\"sm:hidden\">Past</span>\n              <span className=\"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 py-0.5 px-1.5 rounded-full text-xs\">\n                {events.filter((event: Event) => {\n                  const eventDate = new Date(event.eventDate)\n                  return eventDate < now || ['COMPLETED', 'CANCELLED'].includes(event.status)\n                }).length}\n              </span>\n            </span>\n          </button>\n          <button\n            onClick={() => setActiveTab('analytics')}\n            className={`py-2 sm:py-3 px-1.5 sm:px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0 ${\n              activeTab === 'analytics'\n                ? 'border-guild-500 text-guild-600 dark:text-guild-400'\n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n            }`}\n          >\n            <span className=\"flex items-center gap-1\">\n              <ChartBarIcon className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n              <span className=\"hidden sm:inline\">Analytics</span>\n            </span>\n          </button>\n        </nav>\n      </div>\n\n      {/* Scrollable Content Area */}\n      <div className=\"flex-1 overflow-y-auto lg:overflow-visible\">\n        <div className=\"py-4 sm:py-6 pb-24 lg:pb-6\">\n          {activeTab === 'analytics' ? (\n            <div className=\"px-4 sm:px-0\">\n              <PublicEventAnalytics />\n            </div>\n          ) : filteredEvents.length === 0 ? (\n            <div className=\"text-center py-12 px-4\">\n              <CalendarIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n              <h3 className=\"mt-2 text-sm font-medium text-gray-900 dark:text-white\">\n                No {activeTab === 'booked' ? 'booked' : activeTab} events\n              </h3>\n              <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n                {activeTab === 'active'\n                  ? \"There are no upcoming events at the moment.\"\n                  : activeTab === 'booked'\n                  ? \"You haven't registered for any events yet.\"\n                  : \"No past events to display.\"\n                }\n              </p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 gap-4 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3 px-4 sm:px-0\">\n          {filteredEvents.map((event: any) => (\n            <div\n              key={event.id}\n              className=\"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:shadow rounded-lg hover:shadow-lg transition-shadow duration-200\"\n            >\n              {/* Event Image */}\n              {event.heroImage && (\n                <div className=\"aspect-w-16 aspect-h-9\">\n                  <img\n                    src={`${import.meta.env.VITE_API_BASE_URL}/events/${event.id}/hero-image`}\n                    alt={event.title}\n                    className=\"w-full h-40 sm:h-48 object-cover\"\n                    onError={(e) => {\n                      (e.target as HTMLImageElement).style.display = 'none';\n                    }}\n                  />\n                </div>\n              )}\n\n              {/* Event Content */}\n              <div className=\"p-4 sm:p-6\">\n                {/* Category and Status */}\n                <div className=\"flex items-center justify-between gap-2 mb-3\">\n                  {event.category && (\n                    <span className=\"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200 truncate\">\n                      {event.category.name}\n                    </span>\n                  )}\n                  <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium whitespace-nowrap ${getStatusColor(event.status)}`}>\n                    {event.status.replace('_', ' ')}\n                  </span>\n                </div>\n\n                {/* Event Title */}\n                <h3 className=\"text-base sm:text-lg font-medium text-gray-900 dark:text-white mb-2 line-clamp-2\">\n                  {event.title}\n                </h3>\n\n                {/* Event Description */}\n                <p className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-3 sm:mb-4 line-clamp-2\">\n                  {event.description}\n                </p>\n\n                {/* Event Details */}\n                <div className=\"space-y-1.5 sm:space-y-2\">\n                  {/* Date & Time */}\n                  <div className=\"flex items-center text-xs sm:text-sm text-gray-500 dark:text-gray-400\">\n                    <CalendarIcon className=\"flex-shrink-0 mr-1.5 sm:mr-2 h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                    <span className=\"truncate\">{formatEventTime(event.eventDate, event.startTime, event.endTime)}</span>\n                  </div>\n\n                  {/* Location/Mode */}\n                  <div className=\"flex items-center text-xs sm:text-sm text-gray-500 dark:text-gray-400\">\n                    {event.eventMode === 'VIRTUAL' ? (\n                      <>\n                        <ClockIcon className=\"flex-shrink-0 mr-1.5 sm:mr-2 h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                        <span className=\"px-2 py-0.5 rounded-full text-xs bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\">\n                          Virtual Event\n                        </span>\n                      </>\n                    ) : (\n                      <>\n                        <MapPinIcon className=\"flex-shrink-0 mr-1.5 sm:mr-2 h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                        <span className=\"truncate flex-1\">\n                          {event.venue || 'Venue TBA'}\n                        </span>\n                        {event.eventMode === 'HYBRID' && (\n                          <span className=\"ml-2 px-2 py-0.5 rounded-full text-xs bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 whitespace-nowrap\">\n                            Hybrid\n                          </span>\n                        )}\n                      </>\n                    )}\n                  </div>\n\n                  {/* Capacity & Registrations */}\n                  {event.maxCapacity && (\n                    <div className=\"flex items-center text-xs sm:text-sm text-gray-500 dark:text-gray-400\">\n                      <UsersIcon className=\"flex-shrink-0 mr-1.5 sm:mr-2 h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                      <span className=\"truncate\">{event._count?.registrations || event.registrationCount || 0} / {event.maxCapacity} registered</span>\n                    </div>\n                  )}\n\n                  {/* Fee */}\n                  {Number(event.registrationFee) > 0 && (\n                    <div className=\"flex items-center text-xs sm:text-sm text-gray-500 dark:text-gray-400\">\n                      <CurrencyRupeeIcon className=\"flex-shrink-0 mr-1.5 sm:mr-2 h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                      <span className=\"truncate\">\n                        ₹{event.registrationFee}\n                        {Number(event.guestFee) > 0 && (\n                          <span className=\"text-xs ml-1\">(Guest: ₹{event.guestFee})</span>\n                        )}\n                      </span>\n                    </div>\n                  )}\n                </div>\n\n                {/* Action Buttons */}\n                <div className=\"mt-3 sm:mt-4 space-y-2\">\n                  {activeTab === 'active' ? (\n                    <>\n                      {/* Register Button - Show for PUBLISHED and REGISTRATION_OPEN events, hide if already registered */}\n                      {(['PUBLISHED', 'REGISTRATION_OPEN'].includes(event.status)) && !registeredEventIds.has(event.id) && (\n                        <button\n                          className=\"w-full btn-guild text-xs sm:text-sm py-2.5 sm:py-2\"\n                          onClick={() => handleRegister(event)}\n                        >\n                          Register Now\n                        </button>\n                      )}\n\n                      {/* Already Registered Badge */}\n                      {registeredEventIds.has(event.id) && (\n                        <div className=\"w-full text-center py-2 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 rounded-md text-xs sm:text-sm font-medium\">\n                          ✓ Already Registered\n                        </div>\n                      )}\n\n                      {/* View Details Button */}\n                      <button\n                        className=\"w-full btn-secondary text-xs sm:text-sm py-2.5 sm:py-2 inline-flex items-center justify-center gap-1\"\n                        onClick={() => handleViewDetails(event)}\n                      >\n                        <EyeIcon className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                        View Details\n                      </button>\n                    </>\n                  ) : activeTab === 'booked' ? (\n                    /* Your Bookings - Show Registration Details */\n                    <button\n                      className=\"w-full btn-guild text-xs sm:text-sm py-2.5 sm:py-2 inline-flex items-center justify-center gap-1\"\n                      onClick={() => handleViewRegistration(event)}\n                    >\n                      <EyeIcon className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                      View Registration Details\n                    </button>\n                  ) : (\n                    /* Past Events */\n                    <button\n                      className=\"w-full btn-secondary text-xs sm:text-sm py-2.5 sm:py-2 inline-flex items-center justify-center gap-1\"\n                      onClick={() => handleViewDetails(event)}\n                    >\n                      <EyeIcon className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                      View Event\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Modals */}\n      <EventDetailsModal\n        event={selectedEvent}\n        isOpen={showDetailsModal}\n        onClose={closeModals}\n      />\n      \n      <EventRegistrationModal\n        event={selectedEvent}\n        isOpen={showRegistrationModal}\n        onClose={closeModals}\n      />\n\n      <RegistrationDetailsModal\n        registration={selectedRegistration}\n        isOpen={showRegistrationDetailsModal}\n        onClose={closeModals}\n        onViewInvoice={handleViewInvoice}\n        onViewQR={handleViewQR}\n        onViewTicket={handleViewTicket}\n        isLoadingInvoice={isLoadingInvoice}\n        isLoadingTicket={isLoadingTicket}\n      />\n\n      <QRCodeModal\n        isOpen={showQRModal}\n        onClose={closeQRModal}\n        qrData={qrData}\n      />\n\n      <InvoiceModal\n        isOpen={showInvoiceModal}\n        onClose={closeInvoiceModal}\n        isLoading={isLoadingInvoice}\n        invoiceData={invoiceData}\n      />\n\n      <TicketModal\n        isOpen={showTicketModal}\n        onClose={closeTicketModal}\n        ticketData={ticketData}\n        isLoading={isLoadingTicket}\n      />\n    </div>\n  )\n}\n\nexport default Events"],"names":["PublicEventAnalytics","selectedEventId","setSelectedEventId","useState","selectedBatch","setSelectedBatch","activeTab","setActiveTab","analyticsData","setAnalyticsData","registrationsData","setRegistrationsData","isLoadingAnalytics","setIsLoadingAnalytics","isLoadingRegistrations","setIsLoadingRegistrations","sortField","setSortField","sortOrder","setSortOrder","eventsData","eventsLoading","useGetEventsQuery","events","availableBatches","React","batches","registration","batch","b","fetchAnalytics","eventId","response","data","error","fetchRegistrations","handleSort","field","getSortedRegistrations","a","aValue","bValue","handleEventChange","handleTabChange","tab","formatDate","dateString","formatAmount","amount","SortableHeader","children","className","jsx","jsxs","ChevronUpIcon","ChevronDownIcon","LoadingSpinner","e","event","ChartBarIcon","Fragment","UserIcon","UsersIcon","CurrencyRupeeIcon","batchData","registrationRevenue","donationRevenue","maxRevenue","nextSibling","Events","user","auth","useAuth","searchParams","useSearchParams","location","useLocation","navigate","useNavigate","selectedEvent","setSelectedEvent","selectedRegistration","setSelectedRegistration","showDetailsModal","setShowDetailsModal","showRegistrationModal","setShowRegistrationModal","showRegistrationDetailsModal","setShowRegistrationDetailsModal","showQRModal","setShowQRModal","showInvoiceModal","setShowInvoiceModal","showTicketModal","setShowTicketModal","isLoadingInvoice","setIsLoadingInvoice","isLoadingTicket","setIsLoadingTicket","qrData","setQRData","invoiceData","setInvoiceData","ticketData","setTicketData","isLoading","registrationsError","refetchRegistrations","useGetMyEventRegistrationsQuery","registrations","now","useEffect","tabParam","registeredEventIds","reg","filteredEvents","eventDate","formatEventTime","date","startTime","endTime","dateStr","format","getStatusColor","status","handleViewDetails","handleRegister","handleViewRegistration","handleViewInvoice","invoiceResult","orgResult","invoiceResponse","organizationData","orgResponse","orgError","handleViewQR","apiUrl","qrResponse","errorText","handleViewTicket","closeModals","closeQRModal","closeInvoiceModal","closeTicketModal","isLoadingAny","errorAny","CalendarIcon","ClockIcon","MapPinIcon","EyeIcon","EventDetailsModal","EventRegistrationModal","RegistrationDetailsModal","QRCodeModal","InvoiceModal","TicketModal"],"mappings":"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"}