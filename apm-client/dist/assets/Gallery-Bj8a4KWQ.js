import{j as e}from"./ui-BlmhFX_F.js";import{r as t}from"./router-DFnE1L-t.js";import{M as F,N as E,c as k,P as S}from"./index-P8gjH_om.js";import{P as I,a as R,A as $}from"./PhotoModal-QPliPx_S.js";import{L as u}from"./LoadingSpinner-BR8iBbEe.js";import{F as D}from"./ArrowLeftIcon-qMHYicG6.js";import{F as G}from"./UserCircleIcon-paQ8KrXl.js";import{F as V}from"./CalendarIcon-CroBm0p_.js";import"./redux-VN59sPcb.js";import"./vendor-gH-7aFTg.js";import"./PhotoIcon-n1eOvNeY.js";import"./CheckCircleIcon-DCBCeWMH.js";import"./XMarkIcon-D1c1wIzV.js";import"./ChevronLeftIcon-D6giPwF6.js";import"./ChevronRightIcon-CdFql2QB.js";import"./ArrowDownTrayIcon-DTq0PqpU.js";function z({title:a,titleId:o,...s},l){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":o},s),a?t.createElement("title",{id:o},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"}))}const B=t.forwardRef(z),M=({albumId:a,onBack:o})=>{const[s,l]=t.useState(1),[i,c]=t.useState(null),[m,h]=t.useState(!1),[d,g]=t.useState(!1),{data:N,isLoading:w}=F({albumId:a,includePhotos:!1}),{data:b,isLoading:P,isFetching:j}=E({albumId:a,page:s,limit:24}),r=N?.data.album,x=b?.data.photos||[],p=b?.data.pagination,A=n=>{c(n)},y=i?x.findIndex(n=>n.id===i.id):-1,f=y>0,v=y<x.length-1,C=()=>{f&&c(x[y-1])},L=()=>{v&&c(x[y+1])};return w||!r?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(u,{size:"large"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-guild-600 dark:hover:text-guild-400 transition-colors mb-4",children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Gallery"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[r.coverImage&&e.jsxs("div",{className:"w-full sm:w-64 h-48 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden flex-shrink-0 relative",children:[!d&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-shimmer"})}),e.jsx("img",{src:k(`/api/albums/cover/${a}?t=${new Date(r.updatedAt).getTime()}`),alt:r.name,className:`w-full h-full object-cover transition-opacity duration-300 ${d?"opacity-100":"opacity-0"}`,onLoad:()=>g(!0),onError:()=>g(!0)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2",children:r.name}),r.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:r.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[!m&&r.creator?.id?e.jsx("img",{src:k(`/api/users/profile-picture/${r.creator.id}`),alt:r.creator.fullName,className:"w-6 h-6 rounded-full object-cover border border-gray-200 dark:border-gray-600",onError:()=>h(!0)}):e.jsx(G,{className:"w-6 h-6 text-gray-400"}),e.jsxs("span",{children:["Created by ",r.creator.fullName]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("span",{children:new Date(r.createdAt).toLocaleDateString()})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"font-semibold",children:[r._count?.photos||0," photos"]})})]})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:P?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(u,{size:"large"})}):x.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("svg",{className:"w-20 h-20 mx-auto text-gray-300 dark:text-gray-600 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No photos in this album"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Photos will appear here once uploaded"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:x.map(n=>e.jsx(I,{photo:n,onClick:()=>A(n)},n.id))}),p&&p.pages>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("nav",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(s-1),disabled:s===1||j,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:["Page ",s," of ",p.pages]}),e.jsx("button",{onClick:()=>l(s+1),disabled:s===p.pages||j,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:"Next"})]})})]})}),e.jsx(R,{isOpen:!!i,onClose:()=>c(null),photo:i,onPrevious:C,onNext:L,hasPrevious:f,hasNext:v})]})},se=()=>{const[a,o]=t.useState(1),[s,l]=t.useState(null),{data:i,isLoading:c,isFetching:m}=S({page:a,limit:12,includeArchived:!1}),h=i?.data.albums||[],d=i?.data.pagination;return s?e.jsx(M,{albumId:s,onBack:()=>l(null)}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"Photo Gallery"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Browse albums and photos from our community"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(u,{size:"large"})}):h.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(B,{className:"w-20 h-20 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No albums yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Albums will appear here once created"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:h.map(g=>e.jsx($,{album:g,onClick:()=>l(g.id)},g.id))}),d&&d.pages>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("nav",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(a-1),disabled:a===1||m,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:["Page ",a," of ",d.pages]}),e.jsx("button",{onClick:()=>o(a+1),disabled:a===d.pages||m,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:"Next"})]})})]})})]})};export{se as default};
//# sourceMappingURL=Gallery-Bj8a4KWQ.js.map
