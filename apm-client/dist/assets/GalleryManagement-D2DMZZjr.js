import{j as e,a as T,L as $}from"./ui-BlmhFX_F.js";import{r as t}from"./router-DFnE1L-t.js";import{a0 as le,$ as A,a1 as oe,M as Q,c as ie,a2 as de,P as V,a3 as ne,a4 as ce,N as ge,a5 as me,a6 as xe,a7 as ue,a8 as he,a9 as be}from"./index-DHymdRDT.js";import{P as pe,a as ye,A as fe}from"./PhotoModal-CRqgihvT.js";import{L as O}from"./LoadingSpinner-BR8iBbEe.js";import{F as L}from"./XMarkIcon-D1c1wIzV.js";import{F as je}from"./XCircleIcon-CvFATmWB.js";import{F as ve}from"./ArrowLeftIcon-qMHYicG6.js";import{F as ke}from"./CheckCircleIcon-DCBCeWMH.js";import{F as we}from"./TrashIcon-mpSEd7uz.js";import{F as J}from"./PlusIcon-B6tiF6Nj.js";import{F as Ne}from"./ChartBarIcon-CLsU3hA-.js";import"./redux-VN59sPcb.js";import"./vendor-gH-7aFTg.js";import"./PhotoIcon-n1eOvNeY.js";import"./UserCircleIcon-paQ8KrXl.js";import"./CalendarIcon-CroBm0p_.js";import"./ChevronLeftIcon-D6giPwF6.js";import"./ChevronRightIcon-CdFql2QB.js";import"./ArrowDownTrayIcon-DTq0PqpU.js";function Ce({title:c,titleId:C,...s},u){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":C},s),c?t.createElement("title",{id:C},c):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"}))}const G=t.forwardRef(Ce);function Fe({title:c,titleId:C,...s},u){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":C},s),c?t.createElement("title",{id:C},c):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const B=t.forwardRef(Fe),K=({onFilesSelected:c,maxFiles:C=20,maxSize:s=5,accept:u="image/jpeg,image/jpg,image/png,image/webp,image/gif",multiple:p=!0,selectedFiles:n=[],onRemoveFile:i})=>{const[g,x]=t.useState(!1),[l,v]=t.useState([]),m=r=>{const a=[],d=[],D=Array.from(r);return n.length+D.length>C?(d.push(`Maximum ${C} files allowed`),v(d),a):(D.forEach(o=>{if(!u.split(",").some(w=>o.type.match(w.replace("*",".*")))){d.push(`${o.name}: Invalid file type`);return}if(o.size/(1024*1024)>s){d.push(`${o.name}: File too large (max ${s}MB)`);return}a.push(o)}),v(d),a)},k=t.useCallback(r=>{r.preventDefault(),x(!0)},[]),S=t.useCallback(r=>{r.preventDefault(),x(!1)},[]),y=t.useCallback(r=>{r.preventDefault(),x(!1);const a=r.dataTransfer.files;if(a.length>0){const d=m(a);d.length>0&&c(d)}},[c,m]),f=t.useCallback(r=>{const a=r.target.files;if(a&&a.length>0){const d=m(a);d.length>0&&c(d)}r.target.value=""},[c,m]),h=r=>{if(r===0)return"0 Bytes";const a=1024,d=["Bytes","KB","MB","GB"],D=Math.floor(Math.log(r)/Math.log(a));return Math.round(r/Math.pow(a,D)*100)/100+" "+d[D]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{onDragOver:k,onDragLeave:S,onDrop:y,className:`relative border-2 border-dashed rounded-lg p-8 sm:p-12 text-center transition-all ${g?"border-guild-600 bg-guild-50 dark:bg-guild-900/20":"border-gray-300 dark:border-gray-600 hover:border-guild-500 dark:hover:border-guild-500"}`,children:[e.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:u,multiple:p,onChange:f}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center justify-center",children:[e.jsx(B,{className:`w-16 h-16 sm:w-20 sm:h-20 mb-4 transition-colors ${g?"text-guild-600 dark:text-guild-400":"text-gray-400 dark:text-gray-500"}`}),e.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:g?"Drop files here":"Drag & drop photos here"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"or click to browse"}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:[p?`Max ${C} files`:"1 file"," • ",s,"MB per file • JPG, PNG, WebP, GIF"]})]})]}),l.length>0&&e.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:e.jsx("ul",{className:"text-sm text-red-600 dark:text-red-400 space-y-1",children:l.map((r,a)=>e.jsxs("li",{children:["• ",r]},a))})}),n.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:["Selected Files (",n.length,")"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: ",h(n.reduce((r,a)=>r+a.size,0))]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:n.map((r,a)=>e.jsxs("div",{className:"relative group bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700 overflow-hidden",children:e.jsx("img",{src:URL.createObjectURL(r),alt:r.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 truncate",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:h(r.size)})]}),i&&e.jsx("button",{onClick:()=>i(a),className:"absolute top-2 right-2 p-1 bg-red-600 hover:bg-red-700 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Remove file",children:e.jsx(L,{className:"w-4 h-4"})})]},a))})]})]})},Ae=({isOpen:c,onClose:C,onSuccess:s})=>{const[u,p]=t.useState(""),[n,i]=t.useState(""),[g,x]=t.useState(null),[l,v]=t.useState({}),[m,{isLoading:k}]=le(),S=()=>{const a={};return u.trim()?u.trim().length<2?a.name="Album name must be at least 2 characters":u.trim().length>100&&(a.name="Album name must be less than 100 characters"):a.name="Album name is required",n&&n.length>500&&(a.description="Description must be less than 500 characters"),v(a),Object.keys(a).length===0},y=async a=>{if(a.preventDefault(),!!S())try{await m({name:u.trim(),description:n.trim()||void 0,coverImage:g||void 0}).unwrap(),A.success("Album created successfully"),f(),s?.()}catch(d){A.error(d?.data?.message||"Failed to create album")}},f=()=>{p(""),i(""),x(null),v({}),C()},h=a=>{a.length>0&&x(a[0])},r=()=>{x(null)};return e.jsx(T,{appear:!0,show:c,as:t.Fragment,children:e.jsxs($,{as:"div",className:"relative z-50",onClose:f,children:[e.jsx(T.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(T.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs($.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:[e.jsx($.Title,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Create Album"}),e.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Album Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:u,onChange:a=>p(a.target.value),className:`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${l.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-guild-500"} rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500`,placeholder:"e.g., Graduation 2024",maxLength:100}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.name}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[u.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",value:n,onChange:a=>i(a.target.value),rows:4,className:`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${l.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-guild-500"} rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 resize-none`,placeholder:"Optional description for this album...",maxLength:500}),l.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.description}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[n.length,"/500 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cover Image"}),e.jsx(K,{onFilesSelected:h,maxFiles:1,maxSize:3,accept:"image/jpeg,image/jpg,image/png,image/webp",multiple:!1,selectedFiles:g?[g]:[],onRemoveFile:r}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Max 3MB • JPG, PNG, WebP"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",disabled:k,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k,className:"px-6 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):"Create Album"})]})]})]})})})})]})})},Se=({isOpen:c,onClose:C,album:s,onSuccess:u})=>{const[p,n]=t.useState(""),[i,g]=t.useState(""),[x,l]=t.useState(null),[v,m]=t.useState(!1),[k,S]=t.useState({}),[y,f]=t.useState(0),[h,{isLoading:r}]=oe(),{data:a}=Q({albumId:s?.id||"",includePhotos:!1},{skip:!s?.id||!c}),d=a?.data.album||s;t.useEffect(()=>{d&&(n(d.name),g(d.description||""),m(d.isArchived),l(null),f(j=>j+1))},[d?.updatedAt,d?.id]);const D=()=>{const j={};return p.trim()?p.trim().length<2?j.name="Album name must be at least 2 characters":p.trim().length>100&&(j.name="Album name must be less than 100 characters"):j.name="Album name is required",i&&i.length>500&&(j.description="Description must be less than 500 characters"),S(j),Object.keys(j).length===0},o=async j=>{if(j.preventDefault(),!(!d||!D()))try{await h({albumId:d.id,data:{name:p.trim(),description:i.trim()||void 0,isArchived:v,coverImage:x||void 0}}).unwrap(),A.success("Album updated successfully"),P(),u?.()}catch(E){A.error(E?.data?.message||"Failed to update album")}},P=()=>{S({}),l(null),C()},w=j=>{j.length>0&&l(j[0])},F=()=>{l(null)};return s?e.jsx(T,{appear:!0,show:c,as:t.Fragment,children:e.jsxs($,{as:"div",className:"relative z-50",onClose:P,children:[e.jsx(T.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(T.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs($.Panel,{className:"w-full max-w-2xl max-h-[90vh] flex flex-col transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-xl transition-all",children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:[e.jsx($.Title,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Edit Album"}),e.jsx("button",{onClick:P,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:o,className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Album Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:p,onChange:j=>n(j.target.value),className:`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${k.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-guild-500"} rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500`,placeholder:"e.g., Graduation 2024",maxLength:100}),k.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:k.name}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[p.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",value:i,onChange:j=>g(j.target.value),rows:4,className:`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${k.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-guild-500"} rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 resize-none`,placeholder:"Optional description for this album...",maxLength:500}),k.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:k.description}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[i.length,"/500 characters"]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"isArchived",checked:v,onChange:j=>m(j.target.checked),className:"w-5 h-5 text-guild-600 bg-gray-100 border-gray-300 rounded focus:ring-guild-500 dark:focus:ring-guild-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:"isArchived",className:"text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer",children:"Archive this album (hide from active listings)"})]}),d?.coverImage&&!x&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Cover Image"}),e.jsx("div",{className:"relative w-full h-48 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700",children:e.jsx("img",{src:ie(`/api/albums/cover/${d.id}?t=${new Date(d.updatedAt).getTime()}`),alt:d.name,className:"w-full h-full object-cover"},y)}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Upload a new image below to replace the current cover"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s.coverImage&&!x?"Replace Cover Image":"Cover Image"}),e.jsx(K,{onFilesSelected:w,maxFiles:1,maxSize:3,accept:"image/jpeg,image/jpg,image/png,image/webp",multiple:!1,selectedFiles:x?[x]:[],onRemoveFile:F}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Max 3MB • JPG, PNG, WebP"})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[e.jsx("button",{type:"button",onClick:P,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",disabled:r,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"px-6 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Updating..."]}):"Update Album"})]})]})]})})})})]})}):null},Pe=({isOpen:c,onClose:C,photo:s,albumId:u,onSuccess:p})=>{const[n,i]=t.useState(""),[g,x]=t.useState(""),[l,v]=t.useState([]),[m,k]=t.useState({}),[S,{isLoading:y}]=de();t.useEffect(()=>{s&&(i(s.caption||""),v(s.tags||[]))},[s]);const f=()=>{const o={};return n&&n.length>500&&(o.caption="Caption must be less than 500 characters"),l.length>20&&(o.tags="Maximum 20 tags allowed"),k(o),Object.keys(o).length===0},h=async o=>{if(o.preventDefault(),!(!s||!f()))try{await S({albumId:u,photoId:s.id,data:{caption:n.trim()||void 0,tags:l.length>0?l:void 0}}).unwrap(),A.success("Photo updated successfully"),r(),p?.()}catch(P){A.error(P?.data?.message||"Failed to update photo")}},r=()=>{k({}),C()},a=()=>{const o=g.trim();o&&!l.includes(o)&&l.length<20&&(v([...l,o]),x(""))},d=o=>{v(l.filter(P=>P!==o))},D=o=>{o.key==="Enter"&&(o.preventDefault(),a())};return s?e.jsx(T,{appear:!0,show:c,as:t.Fragment,children:e.jsxs($,{as:"div",className:"relative z-50",onClose:r,children:[e.jsx(T.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(T.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs($.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:[e.jsx($.Title,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Edit Photo"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Photo Preview"}),e.jsx("div",{className:"w-full h-64 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.url,alt:s.caption||"Photo",className:"w-full h-full object-contain"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"caption",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Caption"}),e.jsx("textarea",{id:"caption",value:n,onChange:o=>i(o.target.value),rows:4,disabled:y,className:`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${m.caption?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-guild-500"} rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 resize-none disabled:opacity-50`,placeholder:"Add a caption for this photo...",maxLength:500}),m.caption&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.caption}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[n.length,"/500 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tagInput",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tag People (User IDs)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",id:"tagInput",value:g,onChange:o=>x(o.target.value),onKeyPress:D,disabled:y||l.length>=20,className:`flex-1 px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${m.tags?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-guild-500"} rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 disabled:opacity-50`,placeholder:"Enter user ID and press Enter"}),e.jsx("button",{type:"button",onClick:a,disabled:y||!g.trim()||l.length>=20,className:"px-4 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]}),m.tags&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.tags}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[l.length,"/20 tags • Press Enter or click Add"]}),l.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:l.map((o,P)=>e.jsxs("div",{className:"flex items-center gap-2 bg-guild-100 dark:bg-guild-900/30 text-guild-700 dark:text-guild-300 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:o}),e.jsx("button",{type:"button",onClick:()=>d(o),disabled:y,className:"text-guild-600 dark:text-guild-400 hover:text-guild-800 dark:hover:text-guild-200 transition-colors",children:e.jsx(je,{className:"w-4 h-4"})})]},P))})]}),s.metadata&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Photo Information"}),e.jsxs("dl",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Format:"}),e.jsx("dd",{className:"text-gray-900 dark:text-white font-medium",children:s.metadata.format})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Size:"}),e.jsx("dd",{className:"text-gray-900 dark:text-white font-medium",children:s.metadata.sizeFormatted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Original Name:"}),e.jsx("dd",{className:"text-gray-900 dark:text-white font-medium truncate ml-2",children:s.metadata.originalName})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",disabled:y,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y,className:"px-6 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Updating..."]}):"Save Changes"})]})]})]})})})})]})}):null},Me=({isOpen:c,onClose:C,currentAlbumId:s,photoIds:u,onSuccess:p})=>{const[n,i]=t.useState(""),[g,x]=t.useState({}),{data:l}=V({limit:100,includeArchived:!1}),[v,{isLoading:m}]=ne(),k=l?.data.albums.filter(h=>h.id!==s)||[],S=()=>{const h={};return n||(h.album="Please select a target album"),x(h),Object.keys(h).length===0},y=async h=>{if(h.preventDefault(),!!S())try{const r=await v({albumId:s,data:{photoIds:u,targetAlbumId:n}}).unwrap(),a=r.data.moved,d=r.data.failed;d>0?A.success(`Moved ${a} photos. ${d} failed.`,{duration:4e3}):A.success(`Successfully moved ${a} photos!`),f(),p?.()}catch(r){A.error(r?.data?.message||"Failed to move photos")}},f=()=>{i(""),x({}),C()};return e.jsx(T,{appear:!0,show:c,as:t.Fragment,children:e.jsxs($,{as:"div",className:"relative z-50",onClose:f,children:[e.jsx(T.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(T.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs($.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"w-6 h-6 text-guild-600 dark:text-guild-400"}),e.jsx($.Title,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Move Photos"})]}),e.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["You are about to move"," ",e.jsx("span",{className:"font-semibold",children:u.length})," photo",u.length!==1?"s":""," to a different album."]})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"targetAlbum",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Move to Album ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"targetAlbum",value:n,onChange:h=>{i(h.target.value),x(r=>({...r,album:""}))},disabled:m,className:`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${g.album?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-guild-500"} rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("option",{value:"",children:"-- Select target album --"}),k.map(h=>e.jsxs("option",{value:h.id,children:[h.name," (",h._count?.photos||0," photos)"]},h.id))]}),g.album&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.album}),k.length===0&&e.jsx("p",{className:"mt-2 text-sm text-yellow-600 dark:text-yellow-400",children:"No other albums available. Create a new album first."})]}),e.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"Note:"})," This action will move the selected photos to the target album. This cannot be undone easily."]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||k.length===0,className:"px-6 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Moving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4"}),"Move Photos"]})})]})]})]})})})})]})})},De=({isOpen:c,onClose:C,preselectedAlbumId:s,onSuccess:u})=>{const[p,n]=t.useState(s||""),[i,g]=t.useState([]),[x,l]=t.useState(0),[v,m]=t.useState({}),{data:k}=V({limit:100,includeArchived:!1}),[S,{isLoading:y}]=ce(),f=k?.data.albums||[];t.useEffect(()=>{s&&n(s)},[s]);const h=()=>{const w={};return p||(w.album="Please select an album"),i.length===0&&(w.files="Please select at least one photo"),m(w),Object.keys(w).length===0},r=async w=>{if(w.preventDefault(),!!h())try{l(10);const F=setInterval(()=>{l(b=>b>=90?b:b+10)},300),j=await S({albumId:p,data:{photos:i}}).unwrap();clearInterval(F),l(100);const E=j.data.uploaded.length,z=j.data.failed.length;z>0?A.success(`Uploaded ${E} photos. ${z} failed.`,{duration:4e3}):A.success(`Successfully uploaded ${E} photo${E>1?"s":""}!`,{duration:3e3}),setTimeout(()=>{a(),u?.()},500)}catch(F){l(0),A.error(F?.data?.message||"Failed to upload photos")}},a=()=>{g([]),l(0),m({}),s||n(""),C()},d=w=>{g(F=>[...F,...w]),m(F=>({...F,files:""}))},D=w=>{g(F=>F.filter((j,E)=>E!==w))},P=(i.reduce((w,F)=>w+F.size,0)/(1024*1024)).toFixed(2);return e.jsx(T,{appear:!0,show:c,as:t.Fragment,children:e.jsxs($,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(T.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(T.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs($.Panel,{className:"w-full max-w-3xl max-h-[90vh] flex flex-col transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-xl transition-all",children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:[e.jsxs("div",{children:[e.jsx($.Title,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Upload Photos"}),i.length>0&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[i.length," file",i.length!==1?"s":""," selected • ",P," MB"]})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",disabled:y,children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:r,className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"album",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Select Album ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"album",value:p,onChange:w=>{n(w.target.value),m(F=>({...F,album:""}))},disabled:!!s||y,className:`w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border ${v.album?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-guild-500"} rounded-lg focus:ring-2 focus:border-transparent text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("option",{value:"",children:"-- Select an album --"}),f.map(w=>e.jsxs("option",{value:w.id,children:[w.name," (",w._count?.photos||0," photos)"]},w.id))]}),v.album&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.album})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Photos ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(K,{onFilesSelected:d,maxFiles:20,maxSize:5,accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",multiple:!0,selectedFiles:i,onRemoveFile:D}),v.files&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:v.files})]}),y&&x>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx("span",{children:"Uploading photos..."}),e.jsxs("span",{children:[x,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden",children:e.jsx("div",{className:"bg-guild-600 h-2.5 transition-all duration-300",style:{width:`${x}%`}})})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",disabled:y,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y||i.length===0,className:"px-6 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:["Upload ",i.length," Photo",i.length!==1?"s":""]})})]})]})]})})})})]})})},Te=({albumId:c,onBack:C})=>{const[s,u]=t.useState(1),[p,n]=t.useState(!1),[i,g]=t.useState([]),[x,l]=t.useState(null),[v,m]=t.useState(null),[k,S]=t.useState(!1),[y,f]=t.useState(!1),{data:h,isLoading:r}=Q({albumId:c,includePhotos:!1}),{data:a,isLoading:d,isFetching:D,refetch:o}=ge({albumId:c,page:s,limit:24}),[P,{isLoading:w}]=me(),[F,{isLoading:j}]=xe(),[E,{isLoading:z}]=ue(),b=h?.data.album,M=a?.data.photos||[],U=a?.data.pagination,W=N=>{g(I=>I.includes(N)?I.filter(re=>re!==N):[...I,N])},H=()=>{i.length===M.length?g([]):g(M.map(N=>N.id))},Y=()=>{n(!1),g([])},Z=async N=>{if(confirm("Are you sure you want to delete this photo?"))try{await P({albumId:c,photoId:N}).unwrap(),A.success("Photo deleted"),o()}catch(I){A.error(I?.data?.message||"Failed to delete photo")}},X=async()=>{if(i.length!==0&&confirm(`Delete ${i.length} selected photos?`))try{const N=await F({albumId:c,data:{photoIds:i}}).unwrap();A.success(`Deleted ${N.data.deleted} photos`),g([]),n(!1),o()}catch(N){A.error(N?.data?.message||"Failed to delete photos")}},ee=(N,I)=>{switch(I){case"edit":m(N);break;case"delete":Z(N.id);break}},te=N=>{p?W(N.id):l(N)},R=x?M.findIndex(N=>N.id===x.id):-1,_=R>0,q=R<M.length-1,ae=()=>{_&&l(M[R-1])},se=()=>{q&&l(M[R+1])};return r||!b?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(O,{size:"large"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs("button",{onClick:C,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-guild-600 dark:hover:text-guild-400 transition-colors",children:[e.jsx(ve,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Albums"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:b.name}),b.description&&e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:b.description}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-500",children:[b._count?.photos||0," photos"]})]}),p?e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[i.length," selected"]}),e.jsx("button",{onClick:H,className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:i.length===M.length?"Deselect All":"Select All"}),i.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(G,{className:"w-4 h-4"}),"Move"]}),e.jsxs("button",{onClick:X,disabled:j,className:"flex items-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm font-medium disabled:opacity-50",children:[e.jsx(we,{className:"w-4 h-4"}),"Delete"]})]}),e.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(L,{className:"w-4 h-4"}),"Cancel"]})]}):e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(B,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Upload Photos"})]}),M.length>0&&e.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(ke,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Select Photos"})]})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(O,{size:"large"})}):M.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(B,{className:"w-20 h-20 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No photos yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Upload your first photos to this album"}),e.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(B,{className:"w-5 h-5"}),"Upload Photos"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:M.map(N=>e.jsx(pe,{photo:N,onClick:()=>te(N),onAction:I=>ee(N,I),showActions:!p,selectionMode:p,isSelected:i.includes(N.id),onToggleSelect:()=>W(N.id)},N.id))}),U&&U.pages>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("nav",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>u(s-1),disabled:s===1||D,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:["Page ",s," of ",U.pages]}),e.jsx("button",{onClick:()=>u(s+1),disabled:s===U.pages||D,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:"Next"})]})})]})}),e.jsx(ye,{isOpen:!!x,onClose:()=>l(null),photo:x,onPrevious:ae,onNext:se,hasPrevious:_,hasNext:q}),e.jsx(Pe,{isOpen:!!v,onClose:()=>m(null),photo:v,albumId:c,onSuccess:()=>{m(null),o()}}),e.jsx(Me,{isOpen:k,onClose:()=>S(!1),currentAlbumId:c,photoIds:i,onSuccess:()=>{S(!1),g([]),n(!1),o()}}),e.jsx(De,{isOpen:y,onClose:()=>f(!1),preselectedAlbumId:c,onSuccess:()=>{f(!1),o()}})]})},Xe=()=>{const[c,C]=t.useState(1),[s,u]=t.useState(!1),[p,n]=t.useState(!1),[i,g]=t.useState(!1),[x,l]=t.useState(null),[v,m]=t.useState(null),{data:k,isLoading:S,isFetching:y,refetch:f}=V({page:c,limit:12,sortBy:"createdAt",sortOrder:"desc",includeArchived:s}),[h,{isLoading:r}]=he(),[a,{isLoading:d}]=be(),D=k?.data.albums||[],o=k?.data.pagination,P=()=>{n(!0)},w=b=>{l(b),g(!0)},F=b=>{m(b.id)},j=async b=>{if(confirm(`Are you sure you want to delete "${b.name}"? This will also delete all photos in this album.`))try{await h(b.id).unwrap(),A.success("Album deleted successfully"),f()}catch(M){A.error(M?.data?.message||"Failed to delete album")}},E=async b=>{try{await a(b.id).unwrap(),A.success(b.isArchived?"Album unarchived":"Album archived"),f()}catch(M){A.error(M?.data?.message||"Failed to update album")}},z=(b,M)=>{switch(M){case"view":F(b);break;case"edit":w(b);break;case"delete":j(b);break;case"archive":E(b);break}};return v?e.jsx(Te,{albumId:v,onBack:()=>m(null)}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"Gallery Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Manage albums and photos"})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:e.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(J,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Create Album"})]})})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 dark:border-gray-600 overflow-hidden",children:[e.jsx("button",{onClick:()=>u(!1),className:`px-4 py-2 text-sm font-medium transition-colors ${s?"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700":"bg-guild-600 text-white"}`,children:"Active"}),e.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 text-sm font-medium transition-colors border-l border-gray-300 dark:border-gray-600 ${s?"bg-guild-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Archived"})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:S?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(O,{size:"large"})}):D.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Ne,{className:"w-20 h-20 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2",children:s?"No archived albums":"No active albums yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:s?"You don't have any archived albums":"Create your first album to get started"}),!s&&e.jsxs("button",{onClick:P,className:"inline-flex items-center gap-2 px-6 py-3 bg-guild-600 hover:bg-guild-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(J,{className:"w-5 h-5"}),"Create Album"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:D.map(b=>e.jsx(fe,{album:b,onClick:()=>F(b),showActions:!0,onAction:M=>z(b,M)},b.id))}),o&&o.pages>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("nav",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(c-1),disabled:c===1||y,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:["Page ",c," of ",o.pages]}),e.jsx("button",{onClick:()=>C(c+1),disabled:c===o.pages||y,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:"Next"})]})})]})}),e.jsx(Ae,{isOpen:p,onClose:()=>n(!1),onSuccess:()=>{n(!1),f()}}),e.jsx(Se,{isOpen:i,onClose:()=>{g(!1),l(null)},album:x,onSuccess:()=>{g(!1),l(null),f()}})]})};export{Xe as default};
//# sourceMappingURL=GalleryManagement-D2DMZZjr.js.map
