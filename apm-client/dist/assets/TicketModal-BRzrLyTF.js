const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-DoRDP8Sf.js","assets/vendor-c5ypKtDW.js","assets/jspdf.es.min-BzdBZ9Wb.js","assets/index-CR7i03R2.js","assets/ui-o2EL3sck.js","assets/router-BgvBx64T.js","assets/redux-BejLzyCF.js","assets/index-NMcvEHuf.css"])))=>i.map(i=>d[i]);
import{j as e}from"./ui-o2EL3sck.js";import{F as A}from"./XMarkIcon-B58Eb0hU.js";import{F as L}from"./CalendarIcon-D1CEt3gK.js";import{F as W}from"./ClockIcon-53QLE2kZ.js";import{F as U}from"./MapPinIcon-DXK1xInM.js";import{F as H}from"./UsersIcon-B-AjT4um.js";import{F as z}from"./CurrencyRupeeIcon-DmDbs4Pp.js";import{f as j}from"./utils-CXyNmL__.js";import{r as x,u as K,R as J}from"./router-BgvBx64T.js";import{u as X}from"./index.esm-Cslq-b9M.js";import{k as ee,u as te,L as se,M as E,_ as T}from"./index-CR7i03R2.js";import{L as O}from"./LoadingSpinner-Vtvv1Ip3.js";import{F as ae}from"./UserIcon-Bm6z4MZR.js";import{F as re}from"./DocumentTextIcon-CP6_YxxS.js";import{F as V}from"./ArrowDownTrayIcon-BpYFy8xY.js";function ne({title:t,titleId:l,...a},c){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},a),t?x.createElement("title",{id:l},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const q=x.forwardRef(ne);function ie({title:t,titleId:l,...a},c){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},a),t?x.createElement("title",{id:l},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const le=x.forwardRef(ie);function de({title:t,titleId:l,...a},c){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},a),t?x.createElement("title",{id:l},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"}))}const oe=x.forwardRef(de),Fe=({event:t,isOpen:l,onClose:a})=>{if(!l||!t)return null;const c=(s,r,d)=>{const i=new Date(s),g=j(i,"EEEE, MMMM dd, yyyy");return r&&d?`${g} â€¢ ${r} - ${d}`:r?`${g} â€¢ ${r}`:g},n=s=>{switch(s){case"VIRTUAL":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"HYBRID":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}},m=s=>{switch(s){case"PUBLISHED":case"REGISTRATION_OPEN":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"REGISTRATION_CLOSED":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"COMPLETED":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200";case"CANCELLED":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"DRAFT":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:a}),e.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 w-full text-left shadow-xl transition-all my-8 max-w-2xl max-h-[85vh] flex flex-col",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 sm:px-6 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:"Event Details"}),e.jsxs("button",{type:"button",className:"rounded-md p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-guild-500 transition-colors",onClick:a,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(A,{className:"h-5 w-5 sm:h-6 sm:w-6"})]})]})}),e.jsxs("div",{className:"overflow-y-auto flex-1 px-4 pb-4 sm:px-6 sm:pb-6",children:[t.heroImage&&e.jsx("div",{className:"mb-4 sm:mb-6 -mx-4 sm:mx-0 sm:rounded-lg overflow-hidden",children:e.jsx("img",{src:`http://localhost:3000/api/events/${t.id}/hero-image`,alt:t.title,className:"w-full h-48 sm:h-64 object-cover",onError:s=>{console.error("Image failed to load:",t.heroImage),console.error("Proxy URL:",`http://localhost:3000/api/events/${t.id}/hero-image`),s.target.style.display="none"},onLoad:()=>{console.log("Event image loaded successfully in modal via proxy:",`http://localhost:3000/api/events/${t.id}/hero-image`)}})}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[t.category&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:t.category.name}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${m(t.status)}`,children:t.status.replace("_"," ")})]}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-2 sm:mb-3",children:t.title}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-2.5 sm:space-x-3",children:[e.jsx(L,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Date & Time"}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 break-words",children:c(t.eventDate,t.startTime,t.endTime)})]})]}),e.jsxs("div",{className:"flex items-start space-x-2.5 sm:space-x-3",children:[t.eventMode==="VIRTUAL"?e.jsx(W,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 mt-0.5 flex-shrink-0"}):e.jsx(U,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:t.eventMode==="VIRTUAL"?"Event Mode":"Location"}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:t.eventMode==="VIRTUAL"?e.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs ${n(t.eventMode)}`,children:"Virtual Event"}):e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"break-words",children:t.venue||"Venue TBA"}),t.eventMode==="HYBRID"&&e.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs whitespace-nowrap ${n(t.eventMode)}`,children:"Hybrid"})]})})]})]}),t.maxCapacity&&e.jsxs("div",{className:"flex items-start space-x-2.5 sm:space-x-3",children:[e.jsx(H,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Capacity"}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[t._count?.registrations||t.registrationCount||0," / ",t.maxCapacity," registered"]})]})]}),Number(t.registrationFee)>0&&e.jsxs("div",{className:"flex items-start space-x-2.5 sm:space-x-3",children:[e.jsx(z,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Registration Fee"}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:["â‚¹",t.registrationFee,Number(t.guestFee)>0&&e.jsxs("span",{className:"text-xs ml-1",children:["(Guest: â‚¹",t.guestFee,")"]})]})]})]})]}),t.eventMode!=="PHYSICAL"&&t.meetingLink&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 sm:p-4",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-blue-900 dark:text-blue-100 mb-1.5 sm:mb-2",children:"Meeting Link"}),e.jsx("a",{href:t.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 text-xs sm:text-sm break-all",children:t.meetingLink})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-4 py-3 sm:px-6 sm:py-4 flex justify-end gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",className:"btn-secondary text-sm sm:text-base py-2 sm:py-2.5 px-4 sm:px-6",onClick:a,children:"Close"}),t.status==="REGISTRATION_OPEN"&&e.jsx("button",{type:"button",className:"btn-guild text-sm sm:text-base py-2 sm:py-2.5 px-4 sm:px-6",children:"Register Now"})]})]})]})]})})},ce=ee.injectEndpoints({endpoints:t=>({initiatePayment:t.mutation({query:l=>({url:"/payments/initiate",method:"POST",body:l}),invalidatesTags:["Payment"]}),verifyPayment:t.mutation({query:l=>{const{transactionId:a,...c}=l;return{url:`/payments/${a}/verify`,method:"POST",body:c}},invalidatesTags:["Payment","Event","Registration"]}),calculatePayment:t.query({query:({referenceType:l,referenceId:a})=>({url:`/payments/calculate?referenceType=${l}&referenceId=${a}`,method:"GET"}),providesTags:["Payment"]}),getPaymentStatus:t.query({query:l=>({url:`/payments/${l}/status`,method:"GET"}),providesTags:["Payment"]}),getUserPayments:t.query({query:l=>({url:"/payments/my-payments",method:"GET",params:l}),providesTags:["Payment"]})})}),{useInitiatePaymentMutation:me,useVerifyPaymentMutation:xe}=ce,Te=({event:t,isOpen:l,onClose:a})=>{if(!l||!t)return null;const{user:c}=te(),n=K(),[m,s]=x.useState("form"),[r,d]=x.useState(0),[i,g]=x.useState(null),[y,u]=x.useState(!1),[f]=se(),[N]=me(),[R]=xe(),{register:b,handleSubmit:I,watch:D,setValue:C,formState:{errors:v,isSubmitting:P},reset:_}=X({defaultValues:{guestCount:0,guests:[],mealPreference:""}}),w=D("guestCount")||0,$=D("donationAmount")||0,B=(h,o=0)=>{const p=Number(t.registrationFee)||0,k=Number(t.guestFee)||0;return p+h*k+o};J.useEffect(()=>{d(B(w,$))},[w,$,t]);const Q=(h,o)=>{const p=new Date(h),k=j(p,"MMM dd, yyyy");return o?`${k} at ${o}`:k},S=()=>{s("form"),g(null),_(),a()},Z=async h=>{g(h),s("payment"),E.success("Please complete payment to confirm your registration")},Y=async()=>{if(!i){E.error("Registration data not found");return}try{u(!0);const h=await N({referenceType:"EVENT_PAYMENT",referenceId:t.id,description:`Event Registration - ${t.title}`,registrationData:{mealPreference:i.mealPreference,guestCount:i.guestCount||0,guests:i.guests||[],donationAmount:i.donationAmount||0}}).unwrap();if(!h.success)throw new Error("Failed to initiate payment");const{transaction:o,provider:p}=h.data;if(!o||!p||!p.checkoutOptions)throw new Error("Invalid payment response structure");const k={key:p.checkoutOptions.key,amount:p.checkoutOptions.amount,currency:p.checkoutOptions.currency,name:p.checkoutOptions.name,description:p.checkoutOptions.description,order_id:p.checkoutOptions.order_id,prefill:p.checkoutOptions.prefill,theme:p.checkoutOptions.theme,handler:async M=>{try{if((await R({transactionId:o.id,razorpay_payment_id:M.razorpay_payment_id,razorpay_order_id:M.razorpay_order_id,razorpay_signature:M.razorpay_signature}).unwrap()).success)E.success(`Registration confirmed! Payment of â‚¹${o.amount} completed successfully.`),S(),setTimeout(()=>{n("/user/events",{replace:!0,state:{activeTab:"booked"}})},1e3);else throw new Error("Payment verification failed")}catch(F){console.error("Payment verification error:",F);const G=F?.data?.message||F?.message||"Payment verification failed";E.error(G)}finally{u(!1)}},modal:{ondismiss:()=>{u(!1),E.info("Payment cancelled")}}};if(typeof window<"u"&&window.Razorpay){const M=new window.Razorpay(k);M.on("payment.failed",F=>{u(!1);const G=F.error?.description||"Payment failed";E.error(G)}),M.open()}else throw new Error("Payment system not available")}catch(h){u(!1),console.error("Payment initiation error:",h);const o=h?.data?.message||h?.message||"Failed to initiate payment";E.error(o)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:S}),e.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl sm:p-6",children:[e.jsx("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block",children:e.jsxs("button",{type:"button",className:"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-guild-500 focus:ring-offset-2",onClick:S,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(A,{className:"h-6 w-6"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:["Register for ",t.title]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),Q(t.eventDate,t.startTime)]}),t.venue&&e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{children:["ðŸ“ ",t.venue]})})]})]}),m==="form"?e.jsxs("form",{onSubmit:I(Z),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Your Meal Preference *"}),e.jsxs("select",{...b("mealPreference",{required:"Meal preference is required"}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Select your meal preference *"}),e.jsx("option",{value:"VEG",children:"Vegetarian"}),e.jsx("option",{value:"NON_VEG",children:"Non-Vegetarian"})]}),v.mealPreference&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.mealPreference.message})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Guest Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Number of Guests"}),e.jsxs("select",{...b("guestCount",{valueAsNumber:!0,onChange:h=>{const o=parseInt(h.target.value),p=Array.from({length:o},()=>({name:"",email:"",phone:"",mealPreference:""}));C("guests",p)}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:0,children:"0 Guests"}),e.jsx("option",{value:1,children:"1 Guest"}),e.jsx("option",{value:2,children:"2 Guests"}),e.jsx("option",{value:3,children:"3 Guests"}),e.jsx("option",{value:4,children:"4 Guests"}),e.jsx("option",{value:5,children:"5 Guests"})]})]}),w>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-md font-medium text-gray-900 dark:text-white",children:"Guest Details"}),Array.from({length:w},(h,o)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 space-y-3",children:[e.jsxs("h6",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Guest ",o+1]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",...b(`guests.${o}.name`,{required:`Guest ${o+1} name is required`}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white",placeholder:`Guest ${o+1} full name`}),v.guests?.[o]?.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.guests[o]?.name?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsx("input",{type:"email",...b(`guests.${o}.email`,{required:`Guest ${o+1} email is required`,pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:`Guest ${o+1} email must be valid`}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white",placeholder:`Guest ${o+1} email address`}),v.guests?.[o]?.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.guests[o]?.email?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number (Optional)"}),e.jsx("input",{type:"tel",...b(`guests.${o}.phone`,{pattern:{value:/^[0-9]{10}$/,message:`Guest ${o+1} phone number must be exactly 10 digits`},minLength:{value:10,message:`Guest ${o+1} phone number must be exactly 10 digits`},maxLength:{value:10,message:`Guest ${o+1} phone number must be exactly 10 digits`}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white",placeholder:`Guest ${o+1} phone number (10 digits)`,maxLength:10,onInput:p=>{const k=p.target;k.value=k.value.replace(/[^0-9]/g,"")}}),v.guests?.[o]?.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.guests[o]?.phone?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meal Preference"}),e.jsxs("select",{...b(`guests.${o}.mealPreference`),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-guild-500 focus:border-guild-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Select preference"}),e.jsx("option",{value:"VEG",children:"Vegetarian"}),e.jsx("option",{value:"NON_VEG",children:"Non-Vegetarian"})]})]})]},o))]})]})]}),(t.hasDonations||!0)&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Support Our Event (Optional)"}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border border-green-200 dark:border-green-700 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Your generous donation helps us organize better events for our alumni community. Any amount is appreciated and will be used for event improvement and future activities."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Donation Amount (â‚¹) - Optional"}),e.jsx("input",{type:"number",min:"0",step:"1",placeholder:"Enter amount (e.g., 100)",...b("donationAmount",{valueAsNumber:!0,min:0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:text-white"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"ðŸ’š Thank you for supporting our alumni community!"})]})]})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Registration Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Registration Fee"}),e.jsxs("span",{children:["â‚¹",t.registrationFee]})]}),w>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Guest Fee (",w," Ã— â‚¹",t.guestFee,")"]}),e.jsxs("span",{children:["â‚¹",w*Number(t.guestFee)]})]}),$>0&&e.jsxs("div",{className:"flex justify-between text-green-600 dark:text-green-400",children:[e.jsx("span",{children:"Donation (Thank you! ðŸ’š)"}),e.jsxs("span",{children:["â‚¹",$]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2 flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total Amount"}),e.jsxs("span",{className:"text-guild-600 dark:text-guild-400",children:["â‚¹",r]})]})]})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-5 h-5 bg-yellow-100 dark:bg-yellow-800 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-600 dark:text-yellow-300 text-sm",children:"!"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Terms & Conditions"}),e.jsx("div",{className:"mt-2 text-xs text-yellow-700 dark:text-yellow-300",children:e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"All payments are non-refundable once processed"}),e.jsx("li",{children:"Event details may be subject to change"}),e.jsx("li",{children:"Registration confirmation will be sent via email"}),e.jsx("li",{children:"By proceeding, you agree to our event terms and payment policy"})]})})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:S,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:P||y,className:"btn-guild",children:P||y?e.jsxs(e.Fragment,{children:[e.jsx(O,{size:"sm",className:"mr-2"}),y?"Creating Registration...":"Processing..."]}):"Proceed to Payment"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Complete Your Registration"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please review your registration details and proceed with payment"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"Event Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Event:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.title})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Date:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Q(t.eventDate,t.startTime)})]}),t.venue&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Venue:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.venue})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[e.jsxs("h5",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(ae,{className:"h-5 w-5 mr-2"}),"Primary Registrant"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Name:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c?.fullName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Email:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c?.email})]}),i?.mealPreference&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Meal Preference:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.mealPreference==="VEG"?"Vegetarian":"Non-Vegetarian"})]}),i?.donationAmount&&i.donationAmount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Donation:"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["â‚¹",i.donationAmount," (Thank you! ðŸ’š)"]})]})]})]}),i&&i.guestCount>0&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[e.jsxs("h5",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(H,{className:"h-5 w-5 mr-2"}),"Guest Details (",i.guestCount," ",i.guestCount===1?"Guest":"Guests",")"]}),e.jsx("div",{className:"space-y-3",children:i.guests.map((h,o)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-md p-3 space-y-1",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Guest ",o+1]})}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Name:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:h.name||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Email:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:h.email||"Not provided"})]}),h.phone&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Phone:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:h.phone})]}),h.mealPreference&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Meal:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:h.mealPreference==="VEG"?"Vegetarian":"Non-Vegetarian"})]})]})]},o))})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[e.jsx("h5",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"Payment Breakdown"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Registration Fee:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["â‚¹",t.registrationFee]})]}),i&&i.guestCount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Guest Fee (",i.guestCount," Ã— â‚¹",t.guestFee,"):"]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["â‚¹",i.guestCount*Number(t.guestFee)]})]}),i&&i.donationAmount&&i.donationAmount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Donation (Thank you! ðŸ’š):"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["â‚¹",i.donationAmount]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2 flex justify-between text-lg font-bold",children:[e.jsx("span",{className:"text-gray-900 dark:text-white",children:"Total Amount:"}),e.jsxs("span",{className:"text-guild-600 dark:text-guild-400",children:["â‚¹",r]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("svg",{className:"h-4 w-4 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.516 2.17a.75.75 0 00-1.032 0 11.209 11.209 0 01-7.877 3.08.75.75 0 00-.722.515A12.74 12.74 0 002.25 9.75c0 5.814 3.966 10.702 9.32 12.118a.75.75 0 00.86 0 12.596 12.596 0 004.911-3.478 12.596 12.596 0 004.409-8.64c0-1.034-.126-2.036-.37-3.002a.75.75 0 00-.722-.515 11.209 11.209 0 01-7.877-3.08z",clipRule:"evenodd"})}),e.jsx("span",{children:"Secure payment powered by Razorpay"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>s("form"),children:"Back to Form"}),e.jsx("button",{type:"button",className:"btn-guild flex items-center",onClick:Y,disabled:!i||y,children:y?e.jsxs(e.Fragment,{children:[e.jsx(O,{size:"sm",className:"mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-5 w-5 mr-2"}),"Pay â‚¹",r]})})]})]})]})]})]})})},Ae=({registration:t,isOpen:l,onClose:a,onViewInvoice:c,onViewQR:n,onViewTicket:m,isLoadingInvoice:s=!1,isLoadingTicket:r=!1})=>{if(!l||!t)return null;const{event:d}=t,i=(u,f,N)=>{const R=new Date(u),b=j(R,"EEEE, MMMM dd, yyyy");return f&&N?`${b} â€¢ ${f} - ${N}`:f?`${b} â€¢ ${f}`:b},g=u=>{switch(u){case"CONFIRMED":return"bg-green-100 text-green-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=u=>{switch(u){case"PAID":return"bg-green-100 text-green-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"FAILED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:a}),e.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:p-6",children:[e.jsx("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block",children:e.jsxs("button",{type:"button",className:"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-guild-500 focus:ring-offset-2",onClick:a,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(A,{className:"h-6 w-6"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Registration Details"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:["Your registration information for ",d.title]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${g(t.status)}`,children:["Registration: ",t.status]}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${y(t.paymentStatus)}`,children:["Payment: ",t.paymentStatus]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Event Information"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white",children:d.title}),d.category&&e.jsx("span",{className:"inline-block px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200",children:d.category.name}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),i(d.eventDate,d.startTime,d.endTime)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),d.eventMode==="VIRTUAL"?"Virtual Event":d.venue||"Venue TBA"]}),Number(d.registrationFee)>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"â‚¹",d.registrationFee,Number(d.guestFee)>0&&e.jsxs("span",{className:"ml-1",children:["(Guest: â‚¹",d.guestFee,")"]})]})]})]})]}),t.guests&&t.guests.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Guest Information (",t.guests.length,")"]}),e.jsx("div",{className:"space-y-3",children:t.guests.map((u,f)=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsxs("h6",{className:"font-medium text-gray-900 dark:text-white",children:["Guest ",f+1,": ",u.name]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",u.email||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",u.phone||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Meal Preference:"})," ",u.mealPreference||"Not specified"]})]})]},u.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Registration Information"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Registration ID:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:t.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Registration Date:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:j(new Date(t.registrationDate),"MMM dd, yyyy")})]}),t.mealPreference&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Your Meal:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:t.mealPreference})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg border-t pt-2 mt-3",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Amount:"}),e.jsxs("span",{className:"text-gray-900 dark:text-white",children:["â‚¹",t.totalAmount]})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:c,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500",children:[e.jsx(re,{className:"h-5 w-5 mr-2"}),"View Invoice"]}),t.qr&&e.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500",children:[e.jsx(le,{className:"h-5 w-5 mr-2"}),"Get QR for Check-in"]}),e.jsxs("button",{onClick:m,disabled:r,className:"w-full flex items-center justify-center px-4 py-2 bg-guild-600 text-white rounded-md shadow-sm text-sm font-medium hover:bg-guild-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[r?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}):e.jsx(oe,{className:"h-5 w-5 mr-2"}),r?"Loading Ticket...":"View Your Ticket"]})]})]})]})]})]})]})]})})},ge=({qrCode:t})=>{const l=x.useRef(null),[a,c]=x.useState(!0),[n,m]=x.useState(null),[s,r]=x.useState(null);return x.useEffect(()=>{t?(async()=>{try{if(c(!0),m(null),!t)throw new Error("No QR code data provided");const g=await(await T(async()=>{const{default:y}=await import("./browser-DoRDP8Sf.js").then(u=>u.b);return{default:y}},__vite__mapDeps([0,1]))).default.toDataURL(t,{width:192,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});r(g),c(!1)}catch(i){console.error("Error generating QR code:",i),m(i instanceof Error?i.message:"Failed to generate QR code"),c(!1)}})():(m("No QR code data available"),c(!1))},[t]),a?e.jsx("div",{className:"w-48 h-48 bg-gray-100 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-guild-600 mx-auto mb-2"}),e.jsx("div",{className:"text-sm",children:"Generating QR Code..."})]})}):n?e.jsx("div",{className:"w-48 h-48 bg-red-50 border-2 border-red-200 flex items-center justify-center text-red-600",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:"QR Generation Failed"}),e.jsx("div",{className:"text-xs",children:n})]})}):s?e.jsx("img",{src:s,alt:"QR Code",className:"w-48 h-48"}):e.jsx("canvas",{ref:l,className:"w-48 h-48"})},Ie=({isOpen:t,onClose:l,qrData:a})=>{if(!t||!a)return null;const c=()=>{if(a.qrImageUrl){const s=document.createElement("a");s.href=a.qrImageUrl,s.download=`qr-code-${a.registrationId}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}else n()},n=async()=>{try{const r=await(await T(async()=>{const{default:i}=await import("./browser-DoRDP8Sf.js").then(g=>g.b);return{default:i}},__vite__mapDeps([0,1]))).default.toDataURL(a.qrCode,{width:400,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}),d=document.createElement("a");d.href=r,d.download=`qr-code-${a.registrationId}.png`,document.body.appendChild(d),d.click(),document.body.removeChild(d)}catch(s){console.error("Error generating QR code:",s),alert("Failed to generate QR code. Please try again.")}},m=()=>{const s=window.open("","_blank");s&&(s.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Event QR Code - ${a.event.title}</title>
            <style>
              body {
                font-family: Arial, sans-serif;
                text-align: center;
                padding: 20px;
                margin: 0;
              }
              .qr-container {
                max-width: 600px;
                margin: 0 auto;
                border: 2px solid #000;
                padding: 30px;
                border-radius: 10px;
              }
              .qr-code {
                margin: 20px 0;
              }
              .qr-code img {
                width: 300px;
                height: 300px;
              }
              .event-details {
                margin: 20px 0;
                line-height: 1.6;
              }
              .title {
                font-size: 24px;
                font-weight: bold;
                margin-bottom: 10px;
              }
              .subtitle {
                font-size: 18px;
                color: #666;
                margin-bottom: 20px;
              }
              .details {
                font-size: 14px;
                color: #333;
              }
              @media print {
                body { margin: 0; }
                .qr-container { border: 1px solid #000; }
              }
            </style>
          </head>
          <body>
            <div class="qr-container">
              <div class="title">${a.event.title}</div>
              <div class="subtitle">Event Check-in QR Code</div>
              <div class="qr-code">
                <canvas id="qr-canvas"></canvas>
              </div>
              <div class="event-details">
                <div class="details">
                  <strong>Participant:</strong> ${a.user.fullName}<br>
                  <strong>Email:</strong> ${a.user.email}<br>
                  <strong>Event Date:</strong> ${j(new Date(a.event.eventDate),"EEEE, MMMM dd, yyyy")}<br>
                  ${a.event.venue?`<strong>Venue:</strong> ${a.event.venue}<br>`:""}
                  <strong>Registration ID:</strong> ${a.registrationId}<br>
                  <br>
                  <em>Please present this QR code at the event entrance for quick check-in</em>
                </div>
              </div>
            </div>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"><\/script>
            <script>
              // Generate QR code
              const qr = qrcode(0, 'M');
              qr.addData('${a.qrCode}');
              qr.make();
              
              // Create canvas and draw QR code
              const canvas = document.getElementById('qr-canvas');
              const ctx = canvas.getContext('2d');
              const cellSize = 8;
              const moduleCount = qr.getModuleCount();
              canvas.width = moduleCount * cellSize;
              canvas.height = moduleCount * cellSize;
              
              for (let row = 0; row < moduleCount; row++) {
                for (let col = 0; col < moduleCount; col++) {
                  ctx.fillStyle = qr.isDark(row, col) ? '#000000' : '#FFFFFF';
                  ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);
                }
              }
              
              // Auto print after loading
              window.onload = function() {
                window.print();
                window.onafterprint = function() {
                  window.close();
                }
              }
            <\/script>
          </body>
        </html>
      `),s.document.close())};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:l}),e.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[e.jsx("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block",children:e.jsxs("button",{type:"button",className:"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-guild-500 focus:ring-offset-2",onClick:l,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(A,{className:"h-6 w-6"})]})}),e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:"Event Check-in QR Code"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:a.event.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:j(new Date(a.event.eventDate),"EEEE, MMMM dd, yyyy")}),a.event.venue&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.event.venue})]}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-white rounded-lg shadow-inner",children:a.qrImageUrl?e.jsx("img",{src:a.qrImageUrl,alt:"QR Code",className:"w-48 h-48"}):e.jsx(ge,{qrCode:a.qrCode})})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("strong",{children:"Participant:"})," ",a.user.fullName]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Registration ID: ",a.registrationId]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 p-3 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["ðŸ“± ",e.jsx("strong",{children:"Instructions:"})," Present this QR code at the event entrance for quick check-in. You can download or print this QR code for easy access."]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:c,className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-guild-600 hover:bg-guild-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Download QR"]}),e.jsxs("button",{onClick:m,className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Print QR"]})]})]})]})})]})]})})},De=({isOpen:t,onClose:l,isLoading:a=!1,invoiceData:c})=>{if(!t)return null;if(a||!c)return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:l}),e.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md sm:p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-guild-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading invoice..."})]})})]})});const{invoice:n,transaction:m,registration:s,user:r,organization:d}=c,i=async()=>{try{const y=(await T(async()=>{const{default:_}=await import("./html2canvas.esm-B0tyYwQk.js");return{default:_}},[])).default,u=(await T(async()=>{const{default:_}=await import("./jspdf.es.min-BzdBZ9Wb.js").then(w=>w.j);return{default:_}},__vite__mapDeps([2,3,4,5,1,6,7]))).default,f=document.getElementById("invoice-content");if(!f)return;const N=await y(f,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"}),R=N.toDataURL("image/png"),b=new u("p","mm","a4"),I=210,D=295,C=N.height*I/N.width;let v=C,P=0;for(b.addImage(R,"PNG",0,P,I,C),v-=D;v>=0;)P=v-C,b.addPage(),b.addImage(R,"PNG",0,P,I,C),v-=D;b.save(`invoice-${n.invoiceNumber}.pdf`)}catch(y){console.error("Error generating PDF:",y),alert("Failed to generate PDF. Please try again.")}},g=()=>{window.print()};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:l}),e.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:p-6",children:[e.jsx("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block print:hidden",children:e.jsxs("button",{type:"button",className:"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-guild-500 focus:ring-offset-2",onClick:l,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(A,{className:"h-6 w-6"})]})}),e.jsxs("div",{id:"invoice-content",className:"bg-white text-black p-8",style:{color:"#000000"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-black mb-2",children:"INVOICE"}),e.jsxs("p",{className:"text-gray-700",children:["#",n.invoiceNumber]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-xl font-semibold text-black mb-2",children:d.name}),d.officialEmail&&e.jsx("p",{className:"text-gray-700",children:d.officialEmail}),d.officeAddress&&e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:d.officeAddress})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-4",children:"Bill To:"}),e.jsxs("div",{className:"text-gray-800",children:[e.jsx("p",{className:"font-medium text-black",children:r.fullName}),e.jsx("p",{className:"text-gray-700",children:r.email}),r.whatsappNumber&&e.jsx("p",{className:"text-gray-700",children:r.whatsappNumber})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Invoice Date:"}),e.jsx("span",{className:"font-medium text-black",children:n.createdAt?j(new Date(n.createdAt),"MMM dd, yyyy"):"N/A"})]}),n.dueDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Due Date:"}),e.jsx("span",{className:"font-medium text-black",children:j(new Date(n.dueDate),"MMM dd, yyyy")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Status:"}),e.jsx("span",{className:`font-medium px-2 py-1 rounded-full text-xs ${n.status==="EMAILED"||n.status==="PAID"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:n.status})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-4",children:"Event Registration"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-black mb-2",children:s.event.title}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Event Date:"})," ",j(new Date(s.event.eventDate),"EEEE, MMMM dd, yyyy")]}),s.event.venue&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Venue:"})," ",s.event.venue]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Guests:"})," ",s.activeGuests||s.totalGuests||0]})]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold text-black",children:"Description"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right font-semibold text-black",children:"Rate"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right font-semibold text-black",children:"Amount"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"bg-white",children:[e.jsxs("td",{className:"border border-gray-300 px-4 py-3 text-black",children:["Event Registration - ",s.event.title]}),e.jsxs("td",{className:"border border-gray-300 px-4 py-3 text-right text-black",children:["â‚¹",s.registrationFeePaid||s.event.registrationFee]}),e.jsxs("td",{className:"border border-gray-300 px-4 py-3 text-right text-black",children:["â‚¹",s.registrationFeePaid||s.event.registrationFee]})]}),(s.totalGuests>0||s.activeGuests>0)&&e.jsxs("tr",{className:"bg-white",children:[e.jsxs("td",{className:"border border-gray-300 px-4 py-3 text-black",children:["Guest Registration Ã— ",s.activeGuests||s.totalGuests]}),e.jsxs("td",{className:"border border-gray-300 px-4 py-3 text-right text-black",children:["â‚¹",s.event.guestFee||0]}),e.jsxs("td",{className:"border border-gray-300 px-4 py-3 text-right text-black",children:["â‚¹",s.guestFeesPaid||(s.event.guestFee||0)*(s.activeGuests||s.totalGuests)]})]}),s.donationAmount&&s.donationAmount>0&&e.jsxs("tr",{className:"bg-white",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-3 text-black",children:"Donation Amount"}),e.jsxs("td",{className:"border border-gray-300 px-4 py-3 text-right text-black",children:["â‚¹",s.donationAmount]}),e.jsxs("td",{className:"border border-gray-300 px-4 py-3 text-right text-black",children:["â‚¹",s.donationAmount]})]}),s.platformFee&&s.platformFee>0&&e.jsxs("tr",{className:"bg-white",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-3 text-black",children:"Platform Fee"}),e.jsxs("td",{className:"border border-gray-300 px-4 py-3 text-right text-black",children:["â‚¹",s.platformFee]}),e.jsxs("td",{className:"border border-gray-300 px-4 py-3 text-right text-black",children:["â‚¹",s.platformFee]})]})]})]})}),e.jsx("div",{className:"flex justify-end mb-8",children:e.jsxs("div",{className:"w-64",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-200",children:[e.jsx("span",{className:"font-medium text-black",children:"Subtotal:"}),e.jsxs("span",{className:"text-black",children:["â‚¹",s.totalAmount||n.amount]})]}),e.jsxs("div",{className:"flex justify-between py-3 text-lg font-bold",children:[e.jsx("span",{className:"text-black",children:"Total:"}),e.jsxs("span",{className:"text-black",children:["â‚¹",s.totalAmount||n.amount]})]})]})}),m.completedAt&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-2",children:"Payment Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-700",children:"Transaction ID:"}),e.jsx("span",{className:"font-mono ml-2 text-black",children:m.transactionNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-700",children:"Payment Date:"}),e.jsx("span",{className:"ml-2 text-black",children:j(new Date(m.completedAt),"MMM dd, yyyy HH:mm")})]}),m.paymentMethod&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-700",children:"Payment Method:"}),e.jsx("span",{className:"ml-2 text-black",children:m.paymentMethod})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-700",children:"Amount Paid:"}),e.jsxs("span",{className:"ml-2 font-medium text-black",children:["â‚¹",m.amount]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-4 border-t text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Thank you for your registration!"}),e.jsxs("p",{children:["This invoice was generated on ",j(new Date,"MMM dd, yyyy HH:mm")]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-4 print:hidden",children:[e.jsxs("button",{onClick:i,className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-guild-600 hover:bg-guild-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),e.jsxs("button",{onClick:g,className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Print Invoice"]})]})]})]})})},ue=({qrCode:t})=>{const[l,a]=x.useState(!0),[c,n]=x.useState(null),[m,s]=x.useState(null);return x.useEffect(()=>{t?(async()=>{try{if(a(!0),n(null),!t)throw new Error("No QR code data provided");const i=await(await T(async()=>{const{default:g}=await import("./browser-DoRDP8Sf.js").then(y=>y.b);return{default:g}},__vite__mapDeps([0,1]))).default.toDataURL(t,{width:128,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});s(i),a(!1)}catch(d){console.error("Error generating ticket QR code:",d),n(d instanceof Error?d.message:"Failed to generate QR code"),a(!1)}})():(n("No QR code data available"),a(!1))},[t]),l?e.jsx("div",{className:"w-32 h-32 mx-auto mb-3 bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-guild-600 mx-auto mb-1"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Loading..."})]})}):c?e.jsx("div",{className:"w-32 h-32 mx-auto mb-3 bg-red-50 border border-red-200 flex items-center justify-center",children:e.jsx("div",{className:"text-center p-2",children:e.jsx("div",{className:"text-xs text-red-600",children:"QR Error"})})}):m?e.jsx("img",{src:m,alt:"QR Code",className:"w-32 h-32 mx-auto mb-3"}):null},_e=({isOpen:t,onClose:l,ticketData:a,isLoading:c=!1})=>{if(!t)return null;const n=a?.registration,m=a?.user,s=a?.organization,r=n?.event,d=async()=>{try{const g=(await T(async()=>{const{default:N}=await import("./html2canvas.esm-B0tyYwQk.js");return{default:N}},[])).default,y=document.getElementById("ticket-content");if(!y)return;const u=await g(y,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"}),f=document.createElement("a");f.href=u.toDataURL("image/png"),f.download=`ticket-${r.title.replace(/[^a-zA-Z0-9]/g,"-")}-${n.id}.png`,document.body.appendChild(f),f.click(),document.body.removeChild(f)}catch(g){console.error("Error generating ticket image:",g),alert("Failed to download ticket. Please try again.")}},i=()=>{const g=window.open("","_blank");g&&(g.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Event Ticket - ${r.title}</title>
            <style>
              * { margin: 0; padding: 0; box-sizing: border-box; }
              body {
                font-family: 'Arial', sans-serif;
                background: #f5f5f5;
                padding: 20px;
              }
              .ticket {
                width: 800px;
                margin: 0 auto;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 20px;
                overflow: hidden;
                box-shadow: 0 20px 40px rgba(0,0,0,0.1);
                position: relative;
              }
              .ticket::before {
                content: '';
                position: absolute;
                width: 40px;
                height: 40px;
                background: #f5f5f5;
                border-radius: 50%;
                left: -20px;
                top: 50%;
                transform: translateY(-50%);
              }
              .ticket::after {
                content: '';
                position: absolute;
                width: 40px;
                height: 40px;
                background: #f5f5f5;
                border-radius: 50%;
                right: -20px;
                top: 50%;
                transform: translateY(-50%);
              }
              .ticket-content {
                padding: 40px;
                color: white;
                position: relative;
              }
              .ticket-header {
                text-align: center;
                margin-bottom: 30px;
                border-bottom: 2px dashed rgba(255,255,255,0.3);
                padding-bottom: 20px;
              }
              .ticket-title {
                font-size: 32px;
                font-weight: bold;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
              }
              .organization-name {
                font-size: 18px;
                opacity: 0.9;
                margin-bottom: 20px;
              }
              .ticket-body {
                display: grid;
                grid-template-columns: 1fr auto;
                gap: 40px;
                align-items: center;
              }
              .event-details {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
              }
              .detail-item {
                margin-bottom: 15px;
              }
              .detail-label {
                font-size: 14px;
                opacity: 0.8;
                margin-bottom: 5px;
              }
              .detail-value {
                font-size: 18px;
                font-weight: 600;
              }
              .qr-section {
                text-align: center;
                background: white;
                padding: 20px;
                border-radius: 15px;
                box-shadow: 0 10px 20px rgba(0,0,0,0.1);
              }
              .qr-code {
                width: 150px;
                height: 150px;
                margin-bottom: 10px;
              }
              .qr-text {
                color: #333;
                font-size: 12px;
                font-weight: 600;
              }
              .ticket-footer {
                margin-top: 30px;
                text-align: center;
                padding-top: 20px;
                border-top: 2px dashed rgba(255,255,255,0.3);
                font-size: 14px;
                opacity: 0.8;
              }
              @media print {
                body { margin: 0; padding: 10px; }
                .ticket { box-shadow: none; }
              }
            </style>
          </head>
          <body>
            <div class="ticket">
              <div class="ticket-content">
                <div class="ticket-header">
                  <div class="ticket-title">${r.title}</div>
                  <div class="organization-name">${s.name}</div>
                  ${r.category?`<div style="background: rgba(255,255,255,0.2); display: inline-block; padding: 5px 15px; border-radius: 20px; font-size: 12px; margin-top: 10px;">${r.category.name}</div>`:""}
                </div>
                
                <div class="ticket-body">
                  <div class="event-details">
                    <div class="detail-item">
                      <div class="detail-label">PARTICIPANT</div>
                      <div class="detail-value">${m.fullName}</div>
                    </div>
                    <div class="detail-item">
                      <div class="detail-label">EMAIL</div>
                      <div class="detail-value">${m.email}</div>
                    </div>
                    <div class="detail-item">
                      <div class="detail-label">EVENT DATE</div>
                      <div class="detail-value">${j(new Date(r.eventDate),"MMM dd, yyyy")}</div>
                    </div>
                    <div class="detail-item">
                      <div class="detail-label">TIME</div>
                      <div class="detail-value">${r.startTime&&r.endTime?`${r.startTime} - ${r.endTime}`:r.startTime||"TBD"}</div>
                    </div>
                    <div class="detail-item">
                      <div class="detail-label">VENUE</div>
                      <div class="detail-value">${r.eventMode==="VIRTUAL"?"Virtual Event":r.venue||"TBD"}</div>
                    </div>
                    <div class="detail-item">
                      <div class="detail-label">STATUS</div>
                      <div class="detail-value">${n.status}</div>
                    </div>
                  </div>
                  
                  ${n.qr?`
                  <div class="qr-section">
                    <canvas id="qr-canvas" class="qr-code"></canvas>
                    <div class="qr-text">SCAN FOR CHECK-IN</div>
                  </div>
                  `:""}
                </div>
                
                <div class="ticket-footer">
                  <div>Registration ID: ${n.id}</div>
                  <div>This ticket is valid for the specified event only</div>
                  <div>Generated on ${j(new Date,"MMM dd, yyyy HH:mm")}</div>
                </div>
              </div>
            </div>
            
            ${n.qr?`
            <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"><\/script>
            <script>
              // Generate QR code
              const qr = qrcode(0, 'M');
              qr.addData('${n.qr.qrCode}');
              qr.make();
              
              // Create canvas and draw QR code
              const canvas = document.getElementById('qr-canvas');
              const ctx = canvas.getContext('2d');
              const cellSize = 6;
              const moduleCount = qr.getModuleCount();
              canvas.width = moduleCount * cellSize;
              canvas.height = moduleCount * cellSize;
              
              for (let row = 0; row < moduleCount; row++) {
                for (let col = 0; col < moduleCount; col++) {
                  ctx.fillStyle = qr.isDark(row, col) ? '#000000' : '#FFFFFF';
                  ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);
                }
              }
            <\/script>
            `:""}
            
            <script>
              window.onload = function() {
                window.print();
                window.onafterprint = function() {
                  window.close();
                }
              }
            <\/script>
          </body>
        </html>
      `),g.document.close())};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:l}),e.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:p-6",children:[e.jsx("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block print:hidden",children:e.jsxs("button",{type:"button",className:"rounded-md bg-white dark:bg-gray-800 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-guild-500 focus:ring-offset-2",onClick:l,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(A,{className:"h-6 w-6"})]})}),c&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-guild-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Loading your ticket..."}),e.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-2",children:"Please wait while we prepare your event ticket"})]}),!c&&a&&e.jsx("div",{id:"ticket-content",className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"relative bg-gradient-to-r from-guild-500 to-purple-600 rounded-2xl overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"absolute w-8 h-8 bg-white rounded-full -left-4 top-1/2 transform -translate-y-1/2"}),e.jsx("div",{className:"absolute w-8 h-8 bg-white rounded-full -right-4 top-1/2 transform -translate-y-1/2"}),e.jsxs("div",{className:"p-8 text-white",children:[e.jsxs("div",{className:"text-center mb-6 border-b-2 border-dashed border-white/30 pb-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 text-shadow-lg",children:r.title}),e.jsx("p",{className:"text-lg opacity-90",children:s.name}),r.category&&e.jsx("span",{className:"inline-block mt-2 px-4 py-1 bg-white/20 rounded-full text-sm",children:r.category.name})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-center",children:[e.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm opacity-80",children:"PARTICIPANT"}),e.jsx("p",{className:"text-lg font-semibold",children:m.fullName})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm opacity-80",children:"EMAIL"}),e.jsx("p",{className:"text-lg font-semibold",children:m.email})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm opacity-80",children:"EVENT DATE"}),e.jsx("p",{className:"text-lg font-semibold",children:j(new Date(r.eventDate),"MMM dd, yyyy")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm opacity-80",children:"TIME"}),e.jsx("p",{className:"text-lg font-semibold",children:r.startTime&&r.endTime?`${r.startTime} - ${r.endTime}`:r.startTime||"TBD"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm opacity-80",children:"VENUE"}),e.jsx("p",{className:"text-lg font-semibold",children:r.eventMode==="VIRTUAL"?"Virtual Event":r.venue||"TBD"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm opacity-80",children:"STATUS"}),e.jsx("p",{className:"text-lg font-semibold",children:n.status})]}),n.mealPreference&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm opacity-80",children:"MEAL"}),e.jsx("p",{className:"text-lg font-semibold",children:n.mealPreference})]}),n.guests.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm opacity-80",children:"GUESTS"}),e.jsx("p",{className:"text-lg font-semibold",children:n.guests.length})]})]}),n.qr&&e.jsxs("div",{className:"text-center bg-white rounded-xl p-6 shadow-lg",children:[n.qr.qrImageUrl?e.jsx("img",{src:n.qr.qrImageUrl,alt:"QR Code",className:"w-32 h-32 mx-auto mb-3"}):n.qr.qrCode?e.jsx(ue,{qrCode:n.qr.qrCode}):e.jsx("div",{className:"w-32 h-32 mx-auto mb-3 bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 text-xs",children:"QR Code"})}),e.jsx("p",{className:"text-gray-800 text-sm font-semibold",children:"SCAN FOR CHECK-IN"})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-dashed border-white/30 text-center text-sm opacity-80",children:[e.jsxs("p",{children:["Registration ID: ",n.id]}),e.jsx("p",{className:"mt-1",children:"This ticket is valid for the specified event only"}),e.jsxs("p",{className:"mt-1",children:["Generated on ",j(new Date,"MMM dd, yyyy HH:mm")]})]})]})]})}),!c&&a&&e.jsxs("div",{className:"flex space-x-3 mt-6 print:hidden",children:[e.jsxs("button",{onClick:d,className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-guild-600 hover:bg-guild-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Download Ticket"]}),e.jsxs("button",{onClick:i,className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-guild-500",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Print Ticket"]})]})]})]})})};export{Fe as E,De as I,Ie as Q,Ae as R,_e as T,Te as a};
//# sourceMappingURL=TicketModal-BRzrLyTF.js.map
