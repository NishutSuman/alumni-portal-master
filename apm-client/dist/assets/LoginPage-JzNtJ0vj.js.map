{"version":3,"file":"LoginPage-JzNtJ0vj.js","sources":["../../src/pages/auth/LoginPage.tsx"],"sourcesContent":["// src/pages/auth/LoginPage.tsx\n// Multi-step login: Email -> Organization Selection -> Password\nimport React, { useState, useEffect } from 'react'\nimport { useAuth } from '@/hooks/useAuth'\nimport { Link, useLocation, useNavigate } from 'react-router-dom'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { selectIsDark } from '@/store/slices/themeSlice'\nimport { loginSuccess } from '@/store/slices/authSlice'\nimport ThemeToggle from '@/components/common/UI/ThemeToggle'\nimport { ArrowLeftIcon, BuildingOfficeIcon, ArrowPathIcon, CheckIcon, EnvelopeIcon, EyeIcon, EyeSlashIcon } from '@heroicons/react/24/outline'\nimport {\n  useRequestReactivationMutation,\n  useVerifyReactivationMutation,\n  useGetOrganizationsByEmailMutation,\n  useLazyGetAllOrganizationsQuery,\n  useLazyGetOrganizationByCodeQuery,\n  type Organization\n} from '@/store/api/authApi'\nimport { getApiBaseUrl, getOrganizationByCode } from '@/config/organizations'\nimport toast from 'react-hot-toast'\n\n// Helper to get organization logo URL (uses proxy for R2 files)\nconst getOrgLogoUrl = (org: Organization): string | null => {\n  // If logoProxyUrl is available, use it with the API base URL\n  if (org.logoProxyUrl) {\n    const baseUrl = getApiBaseUrl()\n    // Remove /api from baseUrl if present since logoProxyUrl starts with /api\n    const serverUrl = baseUrl.replace(/\\/api$/, '')\n    return `${serverUrl}${org.logoProxyUrl}`\n  }\n  // Fallback to direct URL if no proxy URL (should not happen with R2)\n  return org.logoUrl || null\n}\n\n// Login flow steps\ntype LoginStep = 'email' | 'organization' | 'password'\n\nconst LoginPage = () => {\n  // Form state\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [rememberMe, setRememberMe] = useState(false)\n\n  // Multi-step flow state\n  const [currentStep, setCurrentStep] = useState<LoginStep>('email')\n  const [organizations, setOrganizations] = useState<Organization[]>([])\n  const [selectedOrg, setSelectedOrg] = useState<Organization | null>(null)\n  const [isNewUser, setIsNewUser] = useState(false) // true if email not found in any org\n\n  // Loading states\n  const [isCheckingEmail, setIsCheckingEmail] = useState(false)\n\n  // Manual org code entry\n  const [manualOrgCode, setManualOrgCode] = useState('')\n  const [isCheckingOrgCode, setIsCheckingOrgCode] = useState(false)\n\n  // Password visibility toggle\n  const [showPassword, setShowPassword] = useState(false)\n\n  // Auth hook\n  const { login, isLoading, error } = useAuth()\n  const location = useLocation()\n  const navigate = useNavigate()\n  const dispatch = useDispatch()\n  const isDark = useSelector(selectIsDark)\n\n  // Reactivation state\n  const [showReactivation, setShowReactivation] = useState(false)\n  const [reactivationEmail, setReactivationEmail] = useState('')\n  const [otp, setOtp] = useState('')\n  const [otpSent, setOtpSent] = useState(false)\n\n  // API mutations\n  const [getOrganizationsByEmail] = useGetOrganizationsByEmailMutation()\n  const [getAllOrganizations] = useLazyGetAllOrganizationsQuery()\n  const [getOrganizationByCodeQuery] = useLazyGetOrganizationByCodeQuery()\n  const [requestReactivation, { isLoading: isRequestingOtp }] = useRequestReactivationMutation()\n  const [verifyReactivation, { isLoading: isVerifying }] = useVerifyReactivationMutation()\n\n  // Check for email verification success\n  useEffect(() => {\n    if (location.state?.emailVerified) {\n      toast.success(location.state.message || 'Email verified successfully! You can now sign in.')\n      if (location.state.email) {\n        setEmail(location.state.email)\n      }\n    }\n  }, [location.state])\n\n  // Step 1: Handle email submission - check which orgs have this email\n  const handleEmailSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!email.trim()) {\n      toast.error('Please enter your email address')\n      return\n    }\n\n    setIsCheckingEmail(true)\n\n    try {\n      // Check orgs for this email\n      const result = await getOrganizationsByEmail({ email: email.trim().toLowerCase() }).unwrap()\n\n      if (result.success && result.data.organizations.length > 0) {\n        // User exists in 1+ orgs - show those orgs\n        setOrganizations(result.data.organizations)\n        setIsNewUser(false)\n\n        // If only 1 org, auto-select it\n        if (result.data.organizations.length === 1) {\n          setSelectedOrg(result.data.organizations[0])\n          setCurrentStep('password')\n        } else {\n          setCurrentStep('organization')\n        }\n      } else {\n        // Email not found - fetch all orgs for new user registration\n        const allOrgsResult = await getAllOrganizations().unwrap()\n\n        if (allOrgsResult.success && allOrgsResult.data.organizations.length > 0) {\n          setOrganizations(allOrgsResult.data.organizations)\n          setIsNewUser(true)\n          setCurrentStep('organization')\n        } else {\n          toast.error('No organizations available. Please contact support.')\n        }\n      }\n    } catch (err) {\n      console.error('Error checking email:', err)\n      toast.error('Failed to check email. Please try again.')\n    } finally {\n      setIsCheckingEmail(false)\n    }\n  }\n\n  // Step 2: Handle organization selection\n  const handleOrgSelect = (org: Organization) => {\n    setSelectedOrg(org)\n\n    // CRITICAL: Save tenant code to localStorage for multi-tenant API calls\n    // This is read by apiSlice to set X-Tenant-Code header on all requests\n    localStorage.setItem('guild-org-code', org.tenantCode)\n\n    if (isNewUser) {\n      // Redirect to registration with selected org\n      navigate('/auth/register', {\n        state: {\n          email,\n          organizationId: org.id,\n          organizationName: org.name,\n          tenantCode: org.tenantCode\n        }\n      })\n    } else {\n      // Continue to password step\n      setCurrentStep('password')\n    }\n  }\n\n  // Handle manual org code entry (for developers and power users)\n  const handleManualOrgCode = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!manualOrgCode.trim()) {\n      toast.error('Please enter an organization code')\n      return\n    }\n\n    const code = manualOrgCode.trim().toUpperCase()\n    setIsCheckingOrgCode(true)\n\n    try {\n      // Check if it's LOCAL-DEV - set API URL first before making request\n      const localOrg = getOrganizationByCode(code)\n      if (localOrg) {\n        // Set the API URL for local dev before querying\n        localStorage.setItem('guild-api-url', localOrg.apiUrl)\n        localStorage.setItem('guild-org-code', localOrg.code)\n        localStorage.setItem('guild-org-name', localOrg.name)\n      }\n\n      // Always query the API to get the real organization ID\n      const result = await getOrganizationByCodeQuery(code).unwrap()\n\n      if (result.success && result.data.organization) {\n        const org = result.data.organization\n\n        // Save tenant code\n        localStorage.setItem('guild-org-code', org.tenantCode)\n\n        setSelectedOrg(org)\n\n        if (isNewUser) {\n          // Redirect to registration\n          navigate('/auth/register', {\n            state: {\n              email,\n              organizationId: org.id,\n              organizationName: org.name,\n              tenantCode: org.tenantCode\n            }\n          })\n        } else {\n          setCurrentStep('password')\n        }\n\n        toast.success(`Connected to ${org.name}`)\n      } else {\n        toast.error('Organization not found. Please check the code and try again.')\n      }\n    } catch (err) {\n      console.error('Error checking org code:', err)\n      toast.error('Invalid organization code. Please check and try again.')\n    } finally {\n      setIsCheckingOrgCode(false)\n    }\n  }\n\n  // Step 3: Handle final login submission\n  const handleLoginSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!selectedOrg) {\n      toast.error('Please select an organization first')\n      setCurrentStep('organization')\n      return\n    }\n\n    const result = await login({\n      email: email.trim().toLowerCase(),\n      password,\n      rememberMe,\n      organizationId: selectedOrg.id\n    })\n\n    if (result && result.success) {\n      // Login successful - navigation handled by auth hook\n    } else {\n      // Check if account is deactivated\n      if (result?.error?.includes('deactivated')) {\n        setReactivationEmail(email)\n        setShowReactivation(true)\n      }\n    }\n  }\n\n  // Go back to previous step\n  const handleBack = () => {\n    if (currentStep === 'password') {\n      // If there's only 1 org, go back to email step\n      if (organizations.length === 1) {\n        setCurrentStep('email')\n        setSelectedOrg(null)\n        setOrganizations([])\n      } else {\n        setCurrentStep('organization')\n      }\n      setPassword('')\n    } else if (currentStep === 'organization') {\n      setCurrentStep('email')\n      setSelectedOrg(null)\n      setOrganizations([])\n      setIsNewUser(false)\n    }\n  }\n\n  // Reset to email step\n  const handleStartOver = () => {\n    setCurrentStep('email')\n    setSelectedOrg(null)\n    setOrganizations([])\n    setPassword('')\n    setIsNewUser(false)\n    // Clear tenant code when starting over\n    localStorage.removeItem('guild-org-code')\n  }\n\n  // Handle reactivation request\n  const handleRequestReactivation = async (e: React.FormEvent) => {\n    e.preventDefault()\n    try {\n      await requestReactivation({ email: reactivationEmail }).unwrap()\n      setOtpSent(true)\n      toast.success('Reactivation code sent to your email!')\n    } catch (err: unknown) {\n      const error = err as { data?: { message?: string } }\n      toast.error(error.data?.message || 'Failed to send reactivation code')\n    }\n  }\n\n  // Handle OTP verification\n  const handleVerifyOtp = async (e: React.FormEvent) => {\n    e.preventDefault()\n    try {\n      const result = await verifyReactivation({\n        email: reactivationEmail,\n        otp,\n        organizationId: selectedOrg?.id\n      }).unwrap()\n\n      if (result.data?.tokens && result.data?.user) {\n        dispatch(loginSuccess({\n          user: result.data.user,\n          token: result.data.tokens.accessToken,\n          refreshToken: result.data.tokens.refreshToken\n        }))\n        toast.success('Account reactivated! Welcome back!')\n        navigate('/user/dashboard')\n      }\n    } catch (err: unknown) {\n      const error = err as { data?: { message?: string } }\n      toast.error(error.data?.message || 'Invalid or expired OTP')\n    }\n  }\n\n  // Common Navbar Component\n  const Navbar = () => (\n    <nav className=\"fixed top-0 left-0 right-0 z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg border-b border-gray-200 dark:border-gray-700\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex items-center justify-between h-16\">\n          <Link to=\"/\" className=\"flex items-center h-10\">\n            <img\n              src={isDark ? '/brand/guild-logo-white.png' : '/brand/guild-logo.png'}\n              alt=\"GUILD\"\n              className=\"h-full w-auto object-contain\"\n            />\n          </Link>\n          <ThemeToggle />\n        </div>\n      </div>\n    </nav>\n  )\n\n  // Reactivation Modal/Panel\n  if (showReactivation) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-blue-900/20 dark:to-purple-900/20\">\n        <Navbar />\n\n        <div className=\"min-h-screen flex items-center justify-center pt-16 px-4\">\n          <div className=\"max-w-md w-full\">\n            <button\n              onClick={() => {\n                setShowReactivation(false)\n                setOtpSent(false)\n                setOtp('')\n              }}\n              className=\"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-6 transition-colors group\"\n            >\n              <ArrowLeftIcon className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\n              <span>Back to Login</span>\n            </button>\n\n            <div className=\"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 md:p-10\">\n              <div className=\"text-center mb-8\">\n                <div className=\"flex justify-center mb-4\">\n                  <div className=\"p-4 bg-green-100 dark:bg-green-900/30 rounded-full\">\n                    <ArrowPathIcon className=\"w-10 h-10 text-green-600 dark:text-green-400\" />\n                  </div>\n                </div>\n                <h1 className=\"text-2xl md:text-3xl font-bold mb-2\">\n                  <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-blue-600\">\n                    Reactivate Account\n                  </span>\n                </h1>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  {otpSent ? 'Enter the code sent to your email' : 'We\\'ll send you a code to reactivate your account'}\n                </p>\n              </div>\n\n              {!otpSent ? (\n                <form onSubmit={handleRequestReactivation} className=\"space-y-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Email Address\n                    </label>\n                    <input\n                      type=\"email\"\n                      value={reactivationEmail}\n                      onChange={(e) => setReactivationEmail(e.target.value)}\n                      className=\"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all\"\n                      placeholder=\"Enter your email\"\n                      required\n                    />\n                  </div>\n\n                  <button\n                    type=\"submit\"\n                    disabled={isRequestingOtp}\n                    className=\"w-full py-4 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-xl font-semibold text-lg hover:shadow-xl hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100\"\n                  >\n                    {isRequestingOtp ? 'Sending Code...' : 'Send Reactivation Code'}\n                  </button>\n                </form>\n              ) : (\n                <form onSubmit={handleVerifyOtp} className=\"space-y-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Enter 6-Digit Code\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={otp}\n                      onChange={(e) => setOtp(e.target.value.replace(/\\D/g, '').slice(0, 6))}\n                      className=\"w-full px-4 py-4 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all text-center text-2xl tracking-widest font-mono\"\n                      placeholder=\"000000\"\n                      maxLength={6}\n                      required\n                    />\n                  </div>\n\n                  <button\n                    type=\"submit\"\n                    disabled={isVerifying || otp.length !== 6}\n                    className=\"w-full py-4 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-xl font-semibold text-lg hover:shadow-xl hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100\"\n                  >\n                    {isVerifying ? 'Verifying...' : 'Reactivate Account'}\n                  </button>\n\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setOtpSent(false)\n                      setOtp('')\n                    }}\n                    className=\"w-full py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors\"\n                  >\n                    Didn't receive code? Try again\n                  </button>\n                </form>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  // Step indicators\n  const StepIndicator = () => (\n    <div className=\"flex items-center justify-center mb-6 space-x-2\">\n      <div className={`w-3 h-3 rounded-full transition-all ${currentStep === 'email' ? 'bg-blue-600 scale-125' : 'bg-blue-600'}`} />\n      <div className={`w-8 h-0.5 ${currentStep !== 'email' ? 'bg-blue-600' : 'bg-gray-300 dark:bg-gray-600'}`} />\n      <div className={`w-3 h-3 rounded-full transition-all ${currentStep === 'organization' ? 'bg-blue-600 scale-125' : currentStep === 'password' ? 'bg-blue-600' : 'bg-gray-300 dark:bg-gray-600'}`} />\n      <div className={`w-8 h-0.5 ${currentStep === 'password' ? 'bg-blue-600' : 'bg-gray-300 dark:bg-gray-600'}`} />\n      <div className={`w-3 h-3 rounded-full transition-all ${currentStep === 'password' ? 'bg-blue-600 scale-125' : 'bg-gray-300 dark:bg-gray-600'}`} />\n    </div>\n  )\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-blue-900/20 dark:to-purple-900/20\">\n      <Navbar />\n\n      <div className=\"min-h-screen flex items-center justify-center pt-16 px-4\">\n        <div className=\"max-w-md w-full\">\n          {/* Back Button */}\n          <button\n            onClick={currentStep === 'email' ? () => navigate('/') : handleBack}\n            className=\"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-6 transition-colors group\"\n          >\n            <ArrowLeftIcon className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\n            <span>{currentStep === 'email' ? 'Back to Home' : 'Back'}</span>\n          </button>\n\n          <div className=\"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 md:p-10\">\n            {/* Step Indicator */}\n            <StepIndicator />\n\n            {/* STEP 1: Email Entry */}\n            {currentStep === 'email' && (\n              <>\n                <div className=\"text-center mb-8\">\n                  <div className=\"flex justify-center mb-4\">\n                    <div className=\"p-4 bg-blue-100 dark:bg-blue-900/30 rounded-full\">\n                      <EnvelopeIcon className=\"w-10 h-10 text-blue-600 dark:text-blue-400\" />\n                    </div>\n                  </div>\n                  <h1 className=\"text-2xl md:text-3xl font-bold mb-2\">\n                    <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600\">\n                      Welcome to GUILD\n                    </span>\n                  </h1>\n                  <p className=\"text-gray-600 dark:text-gray-400\">Enter your email to continue</p>\n                </div>\n\n                {/* Success message for email verification */}\n                {location.state?.emailVerified && (\n                  <div className=\"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-200 p-4 rounded-xl mb-6 border border-green-200 dark:border-green-800\">\n                    <div className=\"flex items-center\">\n                      <CheckIcon className=\"w-5 h-5 mr-2\" />\n                      {location.state.message || 'Email verified successfully! You can now sign in.'}\n                    </div>\n                  </div>\n                )}\n\n                <form onSubmit={handleEmailSubmit} className=\"space-y-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Email Address\n                    </label>\n                    <input\n                      type=\"email\"\n                      value={email}\n                      onChange={(e) => setEmail(e.target.value)}\n                      className=\"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                      placeholder=\"Enter your email\"\n                      required\n                      disabled={isCheckingEmail}\n                      autoFocus\n                    />\n                  </div>\n\n                  <button\n                    type=\"submit\"\n                    disabled={isCheckingEmail || !email.trim()}\n                    className=\"w-full py-4 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white rounded-xl font-semibold text-lg hover:shadow-xl hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100\"\n                  >\n                    {isCheckingEmail ? 'Checking...' : 'Continue'}\n                  </button>\n                </form>\n\n                <div className=\"mt-6 text-center\">\n                  <p className=\"text-gray-600 dark:text-gray-400\">\n                    New to GUILD?{' '}\n                    <Link\n                      to=\"/auth/register\"\n                      className=\"font-semibold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 transition-all\"\n                    >\n                      Create an Account\n                    </Link>\n                  </p>\n                </div>\n              </>\n            )}\n\n            {/* STEP 2: Organization Selection */}\n            {currentStep === 'organization' && (\n              <>\n                <div className=\"text-center mb-8\">\n                  <div className=\"flex justify-center mb-4\">\n                    <div className=\"p-4 bg-blue-100 dark:bg-blue-900/30 rounded-full\">\n                      <BuildingOfficeIcon className=\"w-10 h-10 text-blue-600 dark:text-blue-400\" />\n                    </div>\n                  </div>\n                  <h1 className=\"text-2xl md:text-3xl font-bold mb-2\">\n                    <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600\">\n                      {isNewUser ? 'Select Your Organization' : 'Select Organization'}\n                    </span>\n                  </h1>\n                  <p className=\"text-gray-600 dark:text-gray-400\">\n                    {isNewUser\n                      ? 'Choose an organization to register with'\n                      : 'Select the organization you want to sign in to'}\n                  </p>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-500 mt-2\">\n                    {email}\n                  </p>\n                </div>\n\n                <div className=\"space-y-3 max-h-[400px] overflow-y-auto\">\n                  {organizations.map((org) => {\n                    const logoUrl = getOrgLogoUrl(org)\n                    return (\n                      <button\n                        key={org.id}\n                        onClick={() => handleOrgSelect(org)}\n                        className={`w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all hover:border-blue-300 dark:hover:border-blue-600 hover:bg-gray-50 dark:hover:bg-gray-700/50 ${\n                          selectedOrg?.id === org.id\n                            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n                            : 'border-gray-200 dark:border-gray-700'\n                        }`}\n                      >\n                        <div className=\"flex items-center space-x-3\">\n                          {logoUrl ? (\n                            <img\n                              src={logoUrl}\n                              alt={org.name}\n                              className=\"w-12 h-12 rounded-lg object-cover\"\n                              onError={(e) => {\n                                // Hide broken image and show fallback\n                                (e.target as HTMLImageElement).style.display = 'none'\n                                const nextSibling = (e.target as HTMLImageElement).nextElementSibling\n                                if (nextSibling) nextSibling.classList.remove('hidden')\n                              }}\n                            />\n                          ) : null}\n                          <div className={`w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center ${logoUrl ? 'hidden' : ''}`}>\n                            <BuildingOfficeIcon className=\"w-6 h-6 text-white\" />\n                          </div>\n                          <div className=\"text-left\">\n                            <p className=\"font-semibold text-gray-900 dark:text-white\">{org.name}</p>\n                            <p className=\"text-sm text-gray-500 dark:text-gray-400\">{org.tenantCode}</p>\n                          </div>\n                        </div>\n                        <CheckIcon className={`w-6 h-6 ${selectedOrg?.id === org.id ? 'text-blue-500' : 'text-transparent'}`} />\n                      </button>\n                    )\n                  })}\n                </div>\n\n                {/* Manual Org Code Entry */}\n                <div className=\"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700\">\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-3 text-center\">\n                    Or enter organization code directly\n                  </p>\n                  <form onSubmit={handleManualOrgCode} className=\"flex space-x-2\">\n                    <input\n                      type=\"text\"\n                      value={manualOrgCode}\n                      onChange={(e) => setManualOrgCode(e.target.value.toUpperCase())}\n                      className=\"flex-1 px-4 py-2.5 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm uppercase\"\n                      placeholder=\"Enter organization code\"\n                      disabled={isCheckingOrgCode}\n                    />\n                    <button\n                      type=\"submit\"\n                      disabled={isCheckingOrgCode || !manualOrgCode.trim()}\n                      className=\"px-4 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-medium text-sm hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      {isCheckingOrgCode ? '...' : 'Go'}\n                    </button>\n                  </form>\n                </div>\n\n                {isNewUser && (\n                  <p className=\"mt-4 text-center text-sm text-gray-500 dark:text-gray-400\">\n                    Don't see your organization?{' '}\n                    <a href=\"mailto:support@guild.com\" className=\"text-blue-600 hover:underline\">\n                      Contact support\n                    </a>\n                  </p>\n                )}\n\n                <button\n                  onClick={handleStartOver}\n                  className=\"mt-4 w-full py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors text-sm\"\n                >\n                  Use a different email\n                </button>\n              </>\n            )}\n\n            {/* STEP 3: Password Entry */}\n            {currentStep === 'password' && selectedOrg && (\n              <>\n                <div className=\"text-center mb-8\">\n                  <div className=\"flex justify-center mb-4\">\n                    {(() => {\n                      const logoUrl = getOrgLogoUrl(selectedOrg)\n                      return logoUrl ? (\n                        <img\n                          src={logoUrl}\n                          alt={selectedOrg.name}\n                          className=\"w-16 h-16 rounded-xl object-cover shadow-lg\"\n                          onError={(e) => {\n                            // Hide broken image and show fallback\n                            (e.target as HTMLImageElement).style.display = 'none'\n                            const nextSibling = (e.target as HTMLImageElement).nextElementSibling\n                            if (nextSibling) nextSibling.classList.remove('hidden')\n                          }}\n                        />\n                      ) : null\n                    })()}\n                    <div className={`w-16 h-16 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg ${getOrgLogoUrl(selectedOrg) ? 'hidden' : ''}`}>\n                      <BuildingOfficeIcon className=\"w-8 h-8 text-white\" />\n                    </div>\n                  </div>\n                  <h1 className=\"text-2xl md:text-3xl font-bold mb-2\">\n                    <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600\">\n                      Welcome Back\n                    </span>\n                  </h1>\n                  <p className=\"text-gray-600 dark:text-gray-400\">{selectedOrg.name}</p>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-500 mt-1\">{email}</p>\n                </div>\n\n                {error && (\n                  <div className=\"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-200 p-4 rounded-xl mb-6 border border-red-200 dark:border-red-800\">\n                    <div>{error}</div>\n                    {error.includes('deactivated') && (\n                      <button\n                        onClick={() => {\n                          setReactivationEmail(email)\n                          setShowReactivation(true)\n                        }}\n                        className=\"mt-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline\"\n                      >\n                        Reactivate your account\n                      </button>\n                    )}\n                  </div>\n                )}\n\n                <form onSubmit={handleLoginSubmit} className=\"space-y-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Password\n                    </label>\n                    <div className=\"relative\">\n                      <input\n                        type={showPassword ? 'text' : 'password'}\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                        className=\"w-full px-4 py-3 pr-12 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        placeholder=\"Enter your password\"\n                        required\n                        disabled={isLoading}\n                        autoFocus\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowPassword(!showPassword)}\n                        className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none transition-colors\"\n                        tabIndex={-1}\n                      >\n                        {showPassword ? (\n                          <EyeSlashIcon className=\"w-5 h-5\" />\n                        ) : (\n                          <EyeIcon className=\"w-5 h-5\" />\n                        )}\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center justify-between\">\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        checked={rememberMe}\n                        onChange={(e) => setRememberMe(e.target.checked)}\n                        className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                        disabled={isLoading}\n                      />\n                      <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">Remember me</span>\n                    </label>\n                    <Link\n                      to=\"/auth/forgot-password\"\n                      state={{ email, organizationId: selectedOrg.id }}\n                      className=\"text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors\"\n                    >\n                      Forgot password?\n                    </Link>\n                  </div>\n\n                  <button\n                    type=\"submit\"\n                    disabled={isLoading}\n                    className=\"w-full py-4 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white rounded-xl font-semibold text-lg hover:shadow-xl hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100\"\n                  >\n                    {isLoading ? 'Signing in...' : 'Sign In'}\n                  </button>\n                </form>\n\n                {organizations.length > 1 && (\n                  <button\n                    onClick={() => setCurrentStep('organization')}\n                    className=\"mt-4 w-full py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors text-sm\"\n                  >\n                    Sign in to a different organization\n                  </button>\n                )}\n              </>\n            )}\n          </div>\n\n          {/* Company Credit */}\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n              Powered by{' '}\n              <span className=\"font-semibold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600\">\n                Digikite\n              </span>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default LoginPage\n"],"names":["getOrgLogoUrl","org","getApiBaseUrl","LoginPage","email","setEmail","useState","password","setPassword","rememberMe","setRememberMe","currentStep","setCurrentStep","organizations","setOrganizations","selectedOrg","setSelectedOrg","isNewUser","setIsNewUser","isCheckingEmail","setIsCheckingEmail","manualOrgCode","setManualOrgCode","isCheckingOrgCode","setIsCheckingOrgCode","showPassword","setShowPassword","login","isLoading","error","useAuth","location","useLocation","navigate","useNavigate","dispatch","useDispatch","isDark","useSelector","selectIsDark","showReactivation","setShowReactivation","reactivationEmail","setReactivationEmail","otp","setOtp","otpSent","setOtpSent","getOrganizationsByEmail","useGetOrganizationsByEmailMutation","getAllOrganizations","useLazyGetAllOrganizationsQuery","getOrganizationByCodeQuery","useLazyGetOrganizationByCodeQuery","requestReactivation","isRequestingOtp","useRequestReactivationMutation","verifyReactivation","isVerifying","useVerifyReactivationMutation","useEffect","toast","handleEmailSubmit","e","result","allOrgsResult","err","handleOrgSelect","handleManualOrgCode","code","localOrg","getOrganizationByCode","handleLoginSubmit","handleBack","handleStartOver","handleRequestReactivation","handleVerifyOtp","loginSuccess","Navbar","jsx","jsxs","Link","ThemeToggle","ArrowLeftIcon","ArrowPathIcon","StepIndicator","Fragment","EnvelopeIcon","CheckIcon","BuildingOfficeIcon","logoUrl","nextSibling","EyeSlashIcon","EyeIcon"],"mappings":"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"}