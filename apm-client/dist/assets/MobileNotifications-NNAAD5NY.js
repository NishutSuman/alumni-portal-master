import{j as e,m as T}from"./ui-DhYQrQWF.js";import{r as o,u as S}from"./router-BgvBx64T.js";import{u as x,a as U,b as G,c as P,d as _,e as H}from"./notificationApi-BtHj9JJF.js";import{L as V}from"./LoadingSpinner-r4aotE8K.js";import{F as m}from"./BellIcon-mqZjlE4W.js";import{F as W}from"./CheckIcon-B_tjaMlt.js";import{F as Q}from"./TrashIcon-CkjDT07c.js";import{F as Z}from"./CheckCircleIcon-CON4vt6K.js";import"./redux-CfKcOgfB.js";import"./vendor-c5ypKtDW.js";import"./index-CZ6-uofb.js";function B({title:a,titleId:r,...n},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":r},n),a?o.createElement("title",{id:r},a):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const u=o.forwardRef(B),oe=()=>{S();const[a,r]=o.useState("all"),{data:n,isLoading:i,error:g}=x({page:1,limit:50,unreadOnly:!1}),{data:d,isLoading:h,error:y}=x({page:1,limit:50,unreadOnly:!0}),{data:f}=U(),N=a==="all"?n:d,p=a==="all"?i:h,b=a==="all"?g:y,[k]=G(),[j]=P(),[w]=_(),[v,{isLoading:c}]=H(),l=N?.notifications||[],A=n?.notifications||[],C=d?.notifications||[],R=f?.count||0,E=A.length,F=C.length,M=async t=>{try{await k(t).unwrap()}catch(s){console.error("Failed to mark notification as read:",s)}},D=async()=>{try{await j().unwrap()}catch(t){console.error("Failed to mark all notifications as read:",t)}},L=async t=>{try{await w(t).unwrap()}catch(s){console.error("Failed to delete notification:",s)}},O=async()=>{if(confirm("Are you sure you want to delete all notifications? This action cannot be undone."))try{const t=await v().unwrap();console.log(`Successfully cleared ${t.deletedCount} notifications`)}catch(t){console.error("Failed to clear all notifications:",t);const s=t?.data?.message||"Failed to clear notifications";alert(`Error: ${s}`)}},I=t=>{switch(t){case"NEW_REGISTRATION":case"VERIFICATION_APPROVED":case"ROLE_UPDATED":return e.jsx(Z,{className:"h-5 w-5 text-green-500"});case"ACCOUNT_SUSPENDED":case"VERIFICATION_REJECTED":return e.jsx(u,{className:"h-5 w-5 text-red-500"});default:return e.jsx(m,{className:"h-5 w-5 text-blue-500"})}},$=t=>{switch(t){case"EMERGENCY":return"text-red-600 dark:text-red-400";case"HIGH":return"text-orange-600 dark:text-orange-400";case"NORMAL":return"text-blue-600 dark:text-blue-400";case"LOW":return"text-gray-600 dark:text-gray-400";default:return"text-gray-600 dark:text-gray-400"}};return p?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx(V,{})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20",children:e.jsxs("div",{className:"px-4 pt-4",children:[e.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>r("all"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${a==="all"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:["All (",E,")"]}),e.jsxs("button",{onClick:()=>r("unread"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${a==="unread"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:["Unread (",F,")"]})]}),l.length>0&&e.jsxs("div",{className:"flex justify-between mt-4 space-x-3",children:[R>0&&e.jsx("button",{onClick:D,className:"flex-1 px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 border border-blue-600 dark:border-blue-400 rounded-lg transition-colors",children:"Mark All Read"}),e.jsx("button",{onClick:O,disabled:c,className:"flex-1 px-4 py-2 text-sm font-medium text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 border border-red-600 dark:border-red-400 rounded-lg transition-colors disabled:opacity-50",children:c?"Clearing...":"Clear All"})]}),e.jsx("div",{className:"mt-4",children:b?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load notifications"})]}):l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(m,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No notifications"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a==="unread"?"No unread notifications":"No notifications yet"})]}):e.jsx("div",{className:"space-y-3",children:l.map(t=>e.jsx(T.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 ${t.isRead?"":"ring-2 ring-blue-500 ring-opacity-20"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:I(t.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:t.message}),e.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[e.jsx("time",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(t.createdAt).toLocaleString()}),e.jsx("span",{className:`text-xs font-medium ${$(t.priority)}`,children:t.priority})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!t.isRead&&e.jsx("button",{onClick:()=>M(t.id),className:"p-1.5 text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20 rounded-md transition-colors",title:"Mark as read",children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>L(t.id),className:"p-1.5 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded-md transition-colors",title:"Delete",children:e.jsx(Q,{className:"h-4 w-4"})})]})]})})]})},t.id))})})]})})};export{oe as default};
//# sourceMappingURL=MobileNotifications-NNAAD5NY.js.map
