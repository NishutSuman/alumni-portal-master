import{j as e,m as t}from"./ui-DXG44aSJ.js";import{u as L,b as P,e as $,r as n}from"./router-DFnE1L-t.js";import{u as T,z as l}from"./index-B-R1b6bD.js";import{F as g}from"./EnvelopeIcon-BhdVQxlI.js";import{F as h}from"./CheckCircleIcon-DCBCeWMH.js";import{F as E}from"./ArrowPathIcon-2g4qvb1M.js";import{F as S}from"./ClockIcon-DZUckIFe.js";import{F as Y}from"./ExclamationTriangleIcon-DCwPn2ZM.js";import"./redux-DEMpy3iB.js";import"./vendor-gH-7aFTg.js";const K=()=>{const c=L(),m=P(),[p]=$(),[i,u]=n.useState("pending"),[d,b]=n.useState(!1),[s,j]=n.useState(0),[a,v]=n.useState(!1),r=m.state?.email||p.get("email")||"user@example.com",x=p.get("token"),N=m.state?.fromLogin||!1,w=m.state?.emailSent||!1,{verifyEmail:k,resendVerificationEmail:R}=T();n.useEffect(()=>{x&&!a&&i==="pending"&&(v(!0),(async()=>{try{const y=l.loading("Verifying your email...",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white"}}),C=await k(x);l.dismiss(y),C.success?(u("success"),l.success("Email verified successfully!",{duration:3e3}),setTimeout(()=>{c("/auth/login",{state:{emailVerified:!0,email:r,message:"Email verified successfully! You can now sign in."}})},3e3)):(u("error"),l.error("Verification failed. Link may be invalid or expired."))}catch(y){console.error("Email verification error:",y),u("error"),l.error("Verification failed. Please try again.")}finally{v(!1)}})())},[x,a,i,k,c,r]),n.useEffect(()=>{if(s>0){const o=setTimeout(()=>j(s-1),1e3);return()=>clearTimeout(o)}},[s]);const V=async()=>{if(!(s>0)){b(!0);try{(await R(r)).success&&j(60)}catch(o){console.error("Resend verification error:",o)}finally{b(!1)}}},F=()=>{switch(i){case"success":return e.jsx(h,{className:"h-16 w-16 text-green-500"});case"error":return e.jsx(Y,{className:"h-16 w-16 text-red-500"});case"expired":return e.jsx(S,{className:"h-16 w-16 text-orange-500"});default:return e.jsx(g,{className:"h-16 w-16 text-blue-500"})}},f=(()=>{switch(i){case"success":return{title:"Email Verified Successfully!",description:"Your email has been verified. Redirecting to login page...",color:"text-green-600"};case"error":return{title:"Verification Failed",description:"The verification link is invalid or has expired. Please request a new one.",color:"text-red-600"};case"expired":return{title:"Verification Link Expired",description:"Your verification link has expired. Please request a new one.",color:"text-orange-600"};default:return{title:a?"Verifying Your Email...":"Verify Your Email Address",description:a?"Please wait while we verify your email address...":N&&w?`We've sent a new verification link to ${r}. Check your inbox and click the link to verify your account.`:`We've sent a verification link to ${r}. Check your inbox and click the link to verify your account.`,color:"text-blue-600"}}})();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-blue-900 dark:to-indigo-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mb-4",children:e.jsx(g,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Email Verification"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Complete your registration process"})]}),e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card p-8 text-center",children:[e.jsx(t.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"mb-6 relative",children:a?e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"h-16 w-16 text-blue-500"}),e.jsx("div",{className:"absolute inset-0 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin"})]}):F()}),N&&w&&e.jsx(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"New verification email sent automatically"})]})}),e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mb-8",children:[e.jsx("h3",{className:`text-xl font-semibold mb-2 ${f.color}`,children:f.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:f.description})]}),i==="pending"&&!a&&e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Didn't receive the email?"}),e.jsx("button",{onClick:V,disabled:d||s>0,className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600",children:d?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"animate-spin h-4 w-4 mr-2"}),"Sending..."]}):s>0?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Resend in ",s,"s"]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Resend Verification Email"]})})]}),a&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-200 border-t-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Verifying your email..."})]})}),i==="success"&&e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600",children:[e.jsx(h,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Redirecting..."})]}),e.jsx("button",{onClick:()=>c("/auth/login"),className:"w-full btn-guild",children:"Continue to Login"})]}),(i==="error"||i==="expired")&&e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-4",children:[e.jsx("button",{onClick:V,disabled:d,className:"w-full btn-guild",children:d?"Sending...":"Send New Verification Email"}),e.jsx("button",{onClick:()=>c("/auth/login"),className:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back to Login"})]})]}),e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-6 text-center",children:e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Need Help?"}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsx("p",{children:"• Check your spam/junk folder"}),e.jsxs("p",{children:["• Make sure ",r," is correct"]}),e.jsx("p",{children:"• Contact support if you continue having issues"})]}),e.jsx("button",{className:"mt-3 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Contact Support"})]})})]})})};export{K as default};
//# sourceMappingURL=VerifyEmailPage-BW_TFZD5.js.map
