import{j as e,a as k,L as w}from"./ui-DXG44aSJ.js";import{r as l}from"./router-DFnE1L-t.js";import{a as K,b as W,g as M,c as X,F as D,d as Z,e as ee,u as re,G as te}from"./GroupListCard-D0EPgqu9.js";import{z as A,u as se}from"./index-B-R1b6bD.js";import{L as z}from"./LoadingSpinner-B-lULuZT.js";import{F as T}from"./ChartBarIcon-CLsU3hA-.js";import{F}from"./UserGroupIcon-CnvKPj6V.js";import{F as V}from"./UsersIcon-Ct2fUG5g.js";import{F as ae}from"./EyeIcon-Bt_hkgUK.js";import{u as L}from"./index.esm-B0I9BSpA.js";import{F as R}from"./XMarkIcon-D1c1wIzV.js";import{F as B}from"./InformationCircleIcon-DNiszcBI.js";import{a as le}from"./alumniApi-B2p8SMmv.js";import{F as P}from"./MagnifyingGlassIcon-C2UCCqkW.js";import{F as U}from"./TrashIcon-mpSEd7uz.js";import{F as q}from"./ExclamationTriangleIcon-DCwPn2ZM.js";import{F as _}from"./PlusIcon-B6tiF6Nj.js";import"./redux-DEMpy3iB.js";import"./vendor-gH-7aFTg.js";import"./CogIcon-DfBHaluj.js";import"./ChevronUpIcon-OweSaa88.js";import"./UserIcon-rexTD0xK.js";function de({title:o,titleId:n,...t},s){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},t),o?l.createElement("title",{id:n},o):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const ie=l.forwardRef(de),ne={CELL:{label:"Cells",color:"purple",description:"Specialized working groups"},COMMITTEE:{label:"Committees",color:"blue",description:"Advisory and decision bodies"},OFFICE_BEARERS:{label:"Office Bearers",color:"green",description:"Executive leadership team"},ADVISORS:{label:"Advisors",color:"orange",description:"Advisory and guidance council"}},oe=({className:o="",showTitle:n=!0,compact:t=!1})=>{const{data:s,isLoading:m,isError:d,error:p}=K();if(m)return e.jsx("div",{className:`${o} flex items-center justify-center p-8`,children:e.jsx(z,{size:"lg"})});if(d||!s)return e.jsxs("div",{className:`${o} text-center p-8`,children:[e.jsx(T,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:p?.data?.message||"Failed to load group statistics"})]});const y=s.totalGroups>0?Math.round(s.activeGroups/s.totalGroups*100):0;return e.jsxs("div",{className:o,children:[n&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(T,{className:"w-7 h-7 mr-3 text-blue-600"}),"Group Statistics"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Overview of organization groups and membership"})]}),e.jsxs("div",{className:`grid gap-6 mb-8 ${t?"grid-cols-2 lg:grid-cols-4":"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"}`,children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(F,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Groups"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.totalGroups})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(ie,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Groups"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.activeGroups}),e.jsxs("p",{className:"text-sm text-green-600",children:[y,"% active"]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(V,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Members"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.totalMembers})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(T,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Avg Members"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.activeGroups>0?Math.round(s.totalMembers/s.activeGroups):0}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"per group"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Groups by Type"}),e.jsx("div",{className:"space-y-4",children:s.groupsByType.map(a=>{const x=ne[a.type];if(!x)return null;const j=s.totalGroups>0?Math.round(a.count/s.totalGroups*100):0,f=a.count>0?Math.round(a.activeCount/a.count*100):0;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`inline-block w-3 h-3 rounded-full mr-3 bg-${x.color}-500`}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:x.label}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-gray-900 dark:text-white",children:[a.activeCount,"/",a.count]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[f,"% active"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full bg-${x.color}-500`,style:{width:`${j}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[j,"% of total groups"]})]},a.type)})})]}),!t&&e.jsxs("div",{className:"mt-8 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{className:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-400 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/40 rounded-lg border border-blue-200 dark:border-blue-700 transition-colors",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"View All Groups"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-400 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/40 rounded-lg border border-blue-200 dark:border-blue-700 transition-colors",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Member Reports"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-400 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/40 rounded-lg border border-blue-200 dark:border-blue-700 transition-colors",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Export Statistics"]})]})]})]})},ce=({isOpen:o,onClose:n})=>{const[t,{isLoading:s}]=W(),{register:m,handleSubmit:d,watch:p,reset:y,formState:{errors:a}}=L({defaultValues:{name:"",type:"COMMITTEE",description:"",displayOrder:0}}),x=p("type"),j=M(x),f=[{value:"COMMITTEE",label:"Committee",description:"Advisory and decision-making bodies"},{value:"CELL",label:"Cell",description:"Specialized working groups"},{value:"OFFICE_BEARERS",label:"Office Bearers",description:"Executive leadership team"},{value:"ADVISORS",label:"Advisors",description:"Advisory and guidance council"}],u=()=>{y(),n()},v=async i=>{try{await t({name:i.name.trim(),type:i.type,description:i.description.trim(),displayOrder:i.displayOrder||void 0}).unwrap(),A.success("Group created successfully!"),u()}catch(b){console.error("Create group error:",b),A.error(b?.data?.message||"Failed to create group")}};return e.jsx(k,{appear:!0,show:o,as:l.Fragment,children:e.jsxs(w,{as:"div",className:"relative z-50",onClose:u,children:[e.jsx(k.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(k.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(w.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-6 w-6 text-blue-600 mr-3"}),e.jsx(w.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:"Create New Group"})]}),e.jsx("button",{onClick:u,className:"rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.jsx(R,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:d(v),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Name *"}),e.jsx("input",{type:"text",...m("name",{required:"Group name is required",minLength:{value:2,message:"Group name must be at least 2 characters"},maxLength:{value:100,message:"Group name cannot exceed 100 characters"}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter group name"}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Type *"}),e.jsx("select",{...m("type",{required:"Group type is required"}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:f.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))}),a.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.type.message}),e.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(B,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:f.find(i=>i.value===x)?.description}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Available Roles:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:j.map(i=>e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded",children:i.replace(/_/g," ")},i))})]})]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,...m("description",{maxLength:{value:1e3,message:"Description cannot exceed 1000 characters"}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Enter group description (optional)"}),a.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.description.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",min:"0",...m("displayOrder",{min:{value:0,message:"Display order must be a non-negative number"},valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"}),a.displayOrder&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.displayOrder.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Lower numbers appear first in listings"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 rounded-lg transition-colors flex items-center",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):"Create Group"})]})]})]})})})})]})})},me=({isOpen:o,onClose:n,group:t})=>{const[s,m]=l.useState(""),[d,p]=l.useState(null),[y,{isLoading:a}]=X(),{register:x,handleSubmit:j,watch:f,reset:u,setValue:v,formState:{errors:i}}=L({defaultValues:{userId:"",role:M(t.type)[0]}}),{data:b,isLoading:C}=le({search:s,limit:20,sortBy:"fullName",sortOrder:"asc"},{skip:s.length<2}),E=M(t.type),h=f("role");l.useEffect(()=>{o||(u(),m(""),p(null))},[o,u]);const G=r=>{p(r),v("userId",r.id),m(r.fullName)},O=async r=>{try{console.log("Adding member with data:",{groupId:t.id,groupIdLength:t.id.length,groupIdType:typeof t.id,isValidUUID:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t.id),data:{userId:r.userId,userIdLength:r.userId.length,userIdType:typeof r.userId,isValidUserUUID:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r.userId),role:r.role}});const g=await y({groupId:t.id,data:{userId:r.userId,role:r.role}}).unwrap();console.log("Add member success:",g),A.success(`${d?.fullName} added to ${t.name}`),n()}catch(g){console.error("Add member error:",g),console.error("Full error object:",JSON.stringify(g,null,2)),console.error("Error status:",g?.status),console.error("Error data:",g?.data);const N=g?.data?.message||g?.message||"Failed to add member";A.error(N)}},S=E.map(r=>({value:r,label:r.replace(/_/g," ").replace(/\b\w/g,g=>g.toUpperCase()),description:xe(r,t.type)}));return e.jsx(k,{appear:!0,show:o,as:l.Fragment,children:e.jsxs(w,{as:"div",className:"relative z-50",onClose:n,children:[e.jsx(k.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(k.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(w.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"h-6 w-6 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsxs(w.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:["Add Member to ",t.name]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.type.replace(/_/g," ").toLowerCase()})]})]}),e.jsx("button",{onClick:n,className:"rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.jsx(R,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:j(O),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Alumni *"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:s,onChange:r=>{m(r.target.value),r.target.value!==d?.fullName&&(p(null),v("userId",""))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Type to search alumni..."})]}),s.length>=2&&!d&&e.jsx("div",{className:"mt-2 max-h-60 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:C?e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"Searching..."}):b?.data?.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No alumni found"}):b?.data?.map(r=>e.jsx("button",{type:"button",onClick:()=>G(r),className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-600 border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-shrink-0",children:[r.profileImage?e.jsx("img",{src:`/api/users/profile-picture/${r.id}`,alt:r.fullName,className:"w-10 h-10 rounded-full object-cover",onError:g=>{const N=g.target;N.style.display="none";const I=N.parentElement?.querySelector(".fallback-avatar");I&&(I.style.display="flex")}}):null,e.jsx("div",{className:`fallback-avatar w-10 h-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center ${r.profileImage?"hidden":""}`,style:{display:r.profileImage?"none":"flex"},children:e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r.fullName.charAt(0)})})]}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.fullName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Batch ",r.batch," ",r.email&&`• ${r.email}`]})]})]})},r.id))}),d&&e.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-shrink-0",children:[d.profileImage?e.jsx("img",{src:`/api/users/profile-picture/${d.id}`,alt:d.fullName,className:"w-10 h-10 rounded-full object-cover",onError:r=>{const g=r.target;g.style.display="none";const N=g.parentElement?.querySelector(".fallback-avatar");N&&(N.style.display="flex")}}):null,e.jsx("div",{className:`fallback-avatar w-10 h-10 rounded-full bg-blue-200 dark:bg-blue-800 flex items-center justify-center ${d.profileImage?"hidden":""}`,style:{display:d.profileImage?"none":"flex"},children:e.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:d.fullName.charAt(0)})})]}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:d.fullName}),e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["Batch ",d.batch," ",d.email&&`• ${d.email}`]})]}),e.jsx("button",{type:"button",onClick:()=>{p(null),v("userId",""),m("")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200",children:e.jsx(R,{className:"h-5 w-5"})})]})}),i.userId&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"Please select a user"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assign Role *"}),e.jsx("select",{...x("role",{required:"Please select a role"}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:S.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))}),e.jsx("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(B,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:S.find(r=>r.value===h)?.description})})]})}),i.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.role.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a||!d,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 rounded-lg transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Member"]})})]})]})]})})})})]})})};function xe(o,n){return{CONVENER:"Leads the group and coordinates activities",CO_CONVENER:"Assists the convener and acts as deputy",STAKE_HOLDER:"Key contributor with significant involvement",PRESIDENT:"Chief executive officer of the organization",VICE_PRESIDENT:"Deputy to the president",SECRETARY:"Maintains records and handles correspondence",JOINT_SECRETARY:"Assists the secretary",TREASURER:"Manages finances and treasury",JOINT_TREASURER:"Assists the treasurer",CHIEF_ADVISOR:"Senior advisor providing strategic guidance",JOINT_ADVISOR:"Supporting advisor role"}[o]||"Group member role"}const ue=({isOpen:o,onClose:n,group:t})=>{const[s,m]=l.useState(!1),[d,{isLoading:p}]=Z(),[y,{isLoading:a}]=ee(),{register:x,handleSubmit:j,reset:f,formState:{errors:u,isDirty:v}}=L({defaultValues:{name:"",description:"",isActive:!0,displayOrder:0}});l.useEffect(()=>{t&&f({name:t.name,description:t.description||"",isActive:t.isActive,displayOrder:t.displayOrder})},[t,f]);const i=t?M(t.type):[],b=()=>{f(),m(!1),n()},C=async h=>{if(t)try{await d({groupId:t.id,data:{name:h.name.trim(),description:h.description.trim()||void 0,isActive:h.isActive,displayOrder:h.displayOrder}}).unwrap(),A.success("Group updated successfully!"),b()}catch(G){console.error("Update group error:",G),A.error(G?.data?.message||"Failed to update group")}},E=async()=>{if(t)try{await y(t.id).unwrap(),A.success("Group deleted successfully!"),b()}catch(h){console.error("Delete group error:",h),A.error(h?.data?.message||"Failed to delete group")}};return t?e.jsx(k,{appear:!0,show:o,as:l.Fragment,children:e.jsxs(w,{as:"div",className:"relative z-50",onClose:b,children:[e.jsx(k.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(k.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(w.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-6 w-6 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsxs(w.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:["Manage Group: ",t.name]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.type.replace(/_/g," ").toLowerCase()," • ",t.membersCount," members"]})]})]}),e.jsx("button",{onClick:b,className:"rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.jsx(R,{className:"h-6 w-6"})})]}),s?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center",children:e.jsx(q,{className:"w-8 h-8 text-red-600 dark:text-red-400"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Delete Group"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to delete "',e.jsx("strong",{children:t.name}),'"?']}),e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:["This action cannot be undone. All ",t.membersCount," group members will be removed."]})]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:E,disabled:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:bg-red-400 rounded-lg transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Delete Group"]})})]})]}):e.jsxs("form",{onSubmit:j(C),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Name *"}),e.jsx("input",{type:"text",...x("name",{required:"Group name is required",minLength:{value:2,message:"Group name must be at least 2 characters"},maxLength:{value:100,message:"Group name cannot exceed 100 characters"}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter group name"}),u.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Type"}),e.jsx("div",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:t.type.replace(/_/g," ")}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Group type cannot be changed after creation"}),e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Available Roles for this group type:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:i.map(h=>e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded",children:h.replace(/_/g," ")},h))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,...x("description",{maxLength:{value:1e3,message:"Description cannot exceed 1000 characters"}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Enter group description (optional)"}),u.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.description.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",min:"0",...x("displayOrder",{min:{value:0,message:"Display order must be a non-negative number"},valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),u.displayOrder&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.displayOrder.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Lower numbers appear first in listings"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"isActive",...x("isActive"),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active Group"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Inactive groups are hidden from public view"})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsxs("button",{type:"button",onClick:()=>m(!0),className:"px-4 py-2 text-sm font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 rounded-lg transition-colors flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Delete Group"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p||!v,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 rounded-lg transition-colors flex items-center",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):"Save Changes"})]})]})]})]})})})})]})}):null},Le=()=>{const{user:o}=se(),[n,t]=l.useState(""),[s,m]=l.useState("ALL"),[d,p]=l.useState(!1),[y,a]=l.useState("groups"),[x,j]=l.useState(!1),[f,u]=l.useState(!1),[v,i]=l.useState(!1),[b,C]=l.useState(null),{data:E,isLoading:h,isError:G,error:O}=re({search:n,type:s==="ALL"?void 0:s,isActive:d?void 0:!0,limit:50}),S=E?.groups||[],r=o?.role==="SUPER_ADMIN",g=[{value:"ALL",label:"All Groups"},{value:"CELL",label:"Cells"},{value:"COMMITTEE",label:"Committees"},{value:"OFFICE_BEARERS",label:"Office Bearers"},{value:"ADVISORS",label:"Advisors"}],N=c=>{console.log("View group details:",c)},I=c=>{C(c),i(!0)},$=()=>{j(!0)},J=c=>{C(c),u(!0)},Q=()=>{j(!1)},Y=()=>{u(!1),C(null)},H=()=>{i(!1),C(null)};return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(z,{size:"lg"})}):G?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(q,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Failed to Load Groups"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:O?.data?.message||"Something went wrong"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(F,{className:"w-8 h-8 mr-3 text-blue-600"}),"Groups Management"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage organization groups, committees, and member assignments"})]}),r&&e.jsxs("button",{onClick:$,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors shadow-sm",children:[e.jsx(_,{className:"w-5 h-5 mr-2"}),"Create Group"]})]})}),e.jsx("div",{className:"mb-8",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>a("groups"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${y==="groups"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"w-5 h-5 mr-2"}),"Groups (",S.length,")"]})}),e.jsx("button",{onClick:()=>a("statistics"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${y==="statistics"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"w-5 h-5 mr-2"}),"Statistics"]})})]})}),y==="groups"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search groups...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:n,onChange:c=>t(c.target.value)})]})}),e.jsx("div",{className:"sm:w-48",children:e.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:s,onChange:c=>m(c.target.value),children:g.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"showInactive",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:d,onChange:c=>p(c.target.checked)}),e.jsx("label",{htmlFor:"showInactive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Show inactive"})]})]})}),S.length>0?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:S.map(c=>e.jsx(te,{group:c,onView:N,onEdit:r?I:void 0,onAddMembers:r?J:void 0,showActions:r,showAccordion:r,showViewButton:!r,className:"h-full"},c.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"No Groups Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:n||s!=="ALL"||d?"Try adjusting your search or filters":"No groups are currently available"}),r&&!n&&s==="ALL"&&e.jsxs("button",{onClick:$,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-lg transition-colors",children:[e.jsx(_,{className:"w-5 h-5 mr-2"}),"Create Your First Group"]})]})]}),y==="statistics"&&e.jsx(oe,{}),e.jsx(ce,{isOpen:x,onClose:Q}),e.jsx(ue,{isOpen:v,onClose:H,group:b}),b&&e.jsx(me,{isOpen:f,onClose:Y,group:b})]})};export{Le as default};
//# sourceMappingURL=GroupsManagement-pvZj9b-G.js.map
