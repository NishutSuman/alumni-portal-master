{"version":3,"file":"ProfileMarquee-wSMmydlV.js","sources":["../../src/components/common/UI/Marquee.tsx","../../src/store/api/marqueeApi.ts","../../src/components/common/UI/ProfileMarquee.tsx"],"sourcesContent":["// src/components/common/UI/Marquee.tsx\nimport React, { useState } from 'react';\nimport { getApiUrl } from '@/utils/helpers';\n\nexport interface MarqueeImage {\n  id: string;\n  profileImage: string;\n  type?: 'real' | 'dummy';\n}\n\ninterface MarqueeProps {\n  images: MarqueeImage[];\n  speed?: 'slow' | 'medium' | 'fast';\n  pauseOnHover?: boolean;\n  className?: string;\n}\n\n// Fallback placeholder for failed images\nconst PLACEHOLDER_AVATAR = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDY0IDY0Ij48Y2lyY2xlIGN4PSIzMiIgY3k9IjMyIiByPSIzMiIgZmlsbD0iI2U1ZTdlYiIvPjxjaXJjbGUgY3g9IjMyIiBjeT0iMjQiIHI9IjEwIiBmaWxsPSIjOWNhM2FmIi8+PHBhdGggZD0iTTEyIDU2YzAtMTEuMDQ2IDguOTU0LTIwIDIwLTIwczIwIDguOTU0IDIwIDIwIiBmaWxsPSIjOWNhM2FmIi8+PC9zdmc+';\n\nconst Marquee: React.FC<MarqueeProps> = ({\n  images,\n  speed = 'medium',\n  pauseOnHover = true,\n  className = ''\n}) => {\n  const [isPaused, setIsPaused] = useState(false);\n  const [failedImages, setFailedImages] = useState<Set<string>>(new Set());\n\n  // Handle image load error\n  const handleImageError = (imageId: string) => {\n    setFailedImages(prev => new Set(prev).add(imageId));\n  };\n\n  // Get the image URL - use placeholder if image failed to load\n  const getImageSrc = (img: MarqueeImage): string => {\n    if (failedImages.has(img.id)) {\n      return PLACEHOLDER_AVATAR;\n    }\n    return getApiUrl(img.profileImage);\n  };\n\n  // Split images into two rows (15 each)\n  const row1Images = images.slice(0, 15);\n  const row2Images = images.slice(15, 30);\n\n  // Speed mapping - faster scroll with very long reset time\n  const speedMap = {\n    slow: '90s',     // 1.5 minutes - slower but smooth\n    medium: '60s',   // 1 minute - fast and smooth, no visible reset\n    fast: '40s'      // 40 seconds - very fast\n  };\n\n  const animationDuration = speedMap[speed];\n\n  // Triple duplication is optimal - fast speed, no visible duplicates, seamless loop\n  const duplicatedRow1 = [...row1Images, ...row1Images, ...row1Images];\n  const duplicatedRow2 = [...row2Images, ...row2Images, ...row2Images];\n\n  return (\n    <div className={`w-full overflow-hidden relative ${className}`}>\n      {/* Left Fade Effect */}\n      <div className=\"absolute left-0 top-0 bottom-0 w-16 sm:w-32 md:w-48 bg-gradient-to-r from-white dark:from-gray-800 to-transparent z-10 pointer-events-none\" />\n\n      {/* Right Fade Effect */}\n      <div className=\"absolute right-0 top-0 bottom-0 w-16 sm:w-32 md:w-48 bg-gradient-to-l from-white dark:from-gray-800 to-transparent z-10 pointer-events-none\" />\n\n      {/* Row 1 - Scroll Left to Right */}\n      <div\n        className=\"flex mb-6 pt-2\"\n        onMouseEnter={() => pauseOnHover && setIsPaused(true)}\n        onMouseLeave={() => pauseOnHover && setIsPaused(false)}\n      >\n        <div\n          className=\"flex gap-8 animate-marquee-ltr\"\n          style={{\n            animationDuration,\n            animationPlayState: isPaused ? 'paused' : 'running'\n          }}\n        >\n          {duplicatedRow1.map((img, index) => (\n            <div\n              key={`${img.id}-${index}`}\n              className=\"flex-shrink-0\"\n            >\n              <img\n                src={getImageSrc(img)}\n                alt=\"\"\n                className=\"w-16 h-16 rounded-full object-cover shadow-lg ring-2 ring-white dark:ring-gray-700 hover:scale-110 transition-transform duration-300\"\n                loading=\"lazy\"\n                onError={() => handleImageError(img.id)}\n              />\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Row 2 - Scroll Right to Left */}\n      <div\n        className=\"flex pb-2\"\n        onMouseEnter={() => pauseOnHover && setIsPaused(true)}\n        onMouseLeave={() => pauseOnHover && setIsPaused(false)}\n      >\n        <div\n          className=\"flex gap-8 animate-marquee-rtl\"\n          style={{\n            animationDuration,\n            animationPlayState: isPaused ? 'paused' : 'running'\n          }}\n        >\n          {duplicatedRow2.map((img, index) => (\n            <div\n              key={`${img.id}-${index}`}\n              className=\"flex-shrink-0\"\n            >\n              <img\n                src={getImageSrc(img)}\n                alt=\"\"\n                className=\"w-16 h-16 rounded-full object-cover shadow-lg ring-2 ring-white dark:ring-gray-700 hover:scale-110 transition-transform duration-300\"\n                loading=\"lazy\"\n                onError={() => handleImageError(img.id)}\n              />\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Add animation keyframes to global CSS */}\n      <style>{`\n        @keyframes marquee-ltr {\n          0% {\n            transform: translateX(0);\n          }\n          100% {\n            transform: translateX(-33.333333%);\n          }\n        }\n\n        @keyframes marquee-rtl {\n          0% {\n            transform: translateX(-33.333333%);\n          }\n          100% {\n            transform: translateX(0);\n          }\n        }\n\n        .animate-marquee-ltr {\n          animation: marquee-ltr linear infinite;\n        }\n\n        .animate-marquee-rtl {\n          animation: marquee-rtl linear infinite;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default Marquee;\n","// src/store/api/marqueeApi.ts\nimport { apiSlice } from './apiSlice';\n\nexport interface MarqueeProfile {\n  id: string;\n  type: 'real' | 'dummy';\n  profileImage: string;\n}\n\nexport const marqueeApi = apiSlice.injectEndpoints({\n  endpoints: (builder) => ({\n    // Get marquee profile pictures (public endpoint)\n    getMarqueeProfiles: builder.query<MarqueeProfile[], void>({\n      query: () => '/demo/marquee-profiles?v=3',\n      transformResponse: (response: any) => response.data,\n      // Cache for 7 days (same as backend)\n      keepUnusedDataFor: 604800, // 7 days in seconds\n    }),\n  }),\n  overrideExisting: false,\n});\n\nexport const {\n  useGetMarqueeProfilesQuery,\n} = marqueeApi;\n","// src/components/common/UI/ProfileMarquee.tsx\nimport React, { useMemo } from 'react';\nimport Marquee, { MarqueeImage } from './Marquee';\nimport { useGetMarqueeProfilesQuery } from '@/store/api/marqueeApi';\nimport { useSelector } from 'react-redux';\nimport type { RootState } from '@/store';\n\ninterface ProfileMarqueeProps {\n  speed?: 'slow' | 'medium' | 'fast';\n  className?: string;\n}\n\nconst ProfileMarquee: React.FC<ProfileMarqueeProps> = ({\n  speed = 'medium',\n  className = ''\n}) => {\n  const { data: marqueeImages, isLoading, error } = useGetMarqueeProfilesQuery();\n  const { user } = useSelector((state: RootState) => state.auth);\n\n  // Add logged-in user's picture if not already in the list\n  const finalImages = useMemo(() => {\n    if (!marqueeImages || marqueeImages.length === 0) return [];\n\n    // If no user logged in, return all images from backend\n    if (!user?.id || !user?.profileImage) {\n      return marqueeImages;\n    }\n\n    // Check if user's image already in the list\n    const hasUserImage = marqueeImages.some(img => img.id === user.id);\n\n    if (hasUserImage) {\n      return marqueeImages; // Already included\n    }\n\n    // Replace last dummy image with user's profile (if dummies exist)\n    const modifiedImages = [...marqueeImages];\n\n    // Find last dummy index manually (findLastIndex not available in older TS versions)\n    let lastDummyIndex = -1;\n    for (let i = modifiedImages.length - 1; i >= 0; i--) {\n      if (modifiedImages[i].type === 'dummy') {\n        lastDummyIndex = i;\n        break;\n      }\n    }\n\n    if (lastDummyIndex !== -1) {\n      // Use relative path - Marquee component will construct full URL via getApiUrl\n      modifiedImages[lastDummyIndex] = {\n        id: user.id,\n        type: 'real',\n        profileImage: `/api/users/profile-picture/${user.id}`\n      };\n    }\n\n    return modifiedImages;\n  }, [marqueeImages, user]);\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className={`w-full py-8 ${className}`}>\n        <div className=\"flex justify-center items-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\" />\n          <span className=\"ml-3 text-gray-600 dark:text-gray-400\">Loading alumni...</span>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state - log but still try to show something\n  if (error) {\n    console.error('Marquee error:', error);\n    // Don't return null immediately - check if we have cached data\n  }\n\n  // No images - show a placeholder message instead of nothing\n  if (!finalImages || finalImages.length === 0) {\n    // Only hide if there's no error (error might mean network issue)\n    if (!error) {\n      return null; // Don't show marquee if no images and no error\n    }\n    // If there's an error, show a subtle loading indicator\n    return (\n      <div className={`w-full py-4 ${className}`}>\n        <div className=\"flex justify-center items-center text-gray-400 dark:text-gray-600 text-sm\">\n          <span>Loading alumni profiles...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={className}>\n      <Marquee images={finalImages} speed={speed} />\n    </div>\n  );\n};\n\nexport default ProfileMarquee;\n"],"names":["PLACEHOLDER_AVATAR","Marquee","images","speed","pauseOnHover","className","isPaused","setIsPaused","useState","failedImages","setFailedImages","handleImageError","imageId","prev","getImageSrc","img","getApiUrl","row1Images","row2Images","animationDuration","duplicatedRow1","duplicatedRow2","jsxs","jsx","index","marqueeApi","apiSlice","builder","response","useGetMarqueeProfilesQuery","ProfileMarquee","marqueeImages","isLoading","error","user","useSelector","state","finalImages","useMemo","modifiedImages","lastDummyIndex","i"],"mappings":"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"}