{"version":3,"file":"PostImageDisplay-3tQBx3Ab.js","sources":["../../node_modules/@heroicons/react/24/outline/esm/ArchiveBoxIcon.js","../../src/store/api/postApi.ts","../../src/components/user/PostImageDisplay.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction ArchiveBoxIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArchiveBoxIcon);\nexport default ForwardRef;","import { apiSlice } from './apiSlice';\nimport { getApiUrl } from '@/utils/helpers';\nimport type {\n  Post,\n  CreatePostData,\n  UpdatePostData,\n  PostsResponse,\n  Comment,\n  CreateCommentData,\n  UpdateCommentData,\n  CommentsResponse,\n  LikeResponse,\n  PostLikesResponse,\n  ReactionType,\n  PostReactions,\n  ReactionResponse,\n} from '../../types/post';\n\n// Post API endpoints\nexport const postApi = apiSlice.injectEndpoints({\n  endpoints: (builder) => ({\n    // Get posts with pagination and filters\n    getPosts: builder.query<PostsResponse, {\n      page?: number;\n      limit?: number;\n      status?: string;\n      category?: string;\n      search?: string;\n      sortBy?: string;\n      sortOrder?: 'asc' | 'desc';\n      isPublished?: boolean;\n      isArchived?: boolean;\n      forceRefresh?: boolean; // New parameter to force cache bypass\n    }>({\n      query: (params) => {\n        const { forceRefresh, ...restParams } = params;\n        return {\n          url: '/posts',\n          params: {\n            ...restParams,\n            // Only add timestamp when explicitly forcing refresh\n            ...(forceRefresh && { _t: Date.now() }),\n          },\n        };\n      },\n      transformResponse: (response: any) => ({\n        posts: response.data,\n        pagination: response.pagination,\n      }),\n      providesTags: (result) => [\n        'Post',\n        ...(result?.posts?.map(({ id }) => ({ type: 'Post' as const, id })) ?? []),\n      ],\n      // Balanced caching for performance and real-time updates  \n      keepUnusedDataFor: 300, // Keep data for 5 minutes to persist across navigation\n    }),\n\n    // Get single post by ID\n    getPostById: builder.query<Post, string>({\n      query: (postId) => `/posts/${postId}`,\n      providesTags: (result, error, postId) => [{ type: 'Post', id: postId }],\n    }),\n\n    // Get pending posts (SUPER_ADMIN only)\n    getPendingPosts: builder.query<PostsResponse, {\n      page?: number;\n      limit?: number;\n    }>({\n      query: (params) => ({\n        url: '/posts/admin/pending',\n        params,\n      }),\n      transformResponse: (response: any) => ({\n        posts: response.data,\n        pagination: response.pagination,\n      }),\n      providesTags: ['PendingPost'],\n    }),\n\n    // Create new post\n    createPost: builder.mutation<Post, FormData>({\n      queryFn: async (formData, { getState }) => {\n        try {\n          const state = getState() as any;\n          const token = state.auth.token;\n          \n          console.log('ðŸš€ Custom queryFn for createPost:', {\n            isFormData: formData instanceof FormData,\n            hasToken: !!token\n          });\n          \n          const response = await fetch(getApiUrl('/api/posts'), {\n            method: 'POST',\n            headers: {\n              ...(token && { 'authorization': `Bearer ${token}` }),\n              // Don't set Content-Type - let browser handle it for FormData\n            },\n            body: formData,\n          });\n\n          if (!response.ok) {\n            const errorData = await response.json().catch(() => ({ message: 'Request failed' }));\n            throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n          }\n\n          const data = await response.json();\n          return { data: data.data || data };\n        } catch (error: any) {\n          console.error('createPost queryFn error:', error);\n          return { error: { status: 'FETCH_ERROR', error: error.message, data: { message: error.message } } };\n        }\n      },\n      invalidatesTags: ['Post', 'PendingPost'],\n    }),\n\n    // Update existing post\n    updatePost: builder.mutation<Post, { postId: string; formData: FormData }>({\n      queryFn: async ({ postId, formData }, { getState }) => {\n        try {\n          const state = getState() as any;\n          const token = state.auth.token;\n          \n          console.log('ðŸš€ Custom queryFn for updatePost:', {\n            postId,\n            isFormData: formData instanceof FormData,\n            hasToken: !!token\n          });\n          \n          const response = await fetch(getApiUrl(`/api/posts/${postId}`), {\n            method: 'PUT',\n            headers: {\n              ...(token && { 'authorization': `Bearer ${token}` }),\n              // Don't set Content-Type - let browser handle it for FormData\n            },\n            body: formData,\n          });\n\n          if (!response.ok) {\n            const errorData = await response.json().catch(() => ({ message: 'Request failed' }));\n            throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n          }\n\n          const data = await response.json();\n          return { data: data.data || data };\n        } catch (error: any) {\n          console.error('updatePost queryFn error:', error);\n          return { error: { status: 'FETCH_ERROR', error: error.message, data: { message: error.message } } };\n        }\n      },\n      invalidatesTags: (result, error, { postId }) => [\n        'Post',\n        { type: 'Post', id: postId },\n        'PendingPost',\n      ],\n    }),\n\n    // Archive/Unarchive post\n    archivePost: builder.mutation<void, { postId: string; isArchived?: boolean }>({\n      query: ({ postId, isArchived }) => ({\n        url: `/posts/${postId}/archive`,\n        method: 'PATCH',\n        body: isArchived !== undefined ? { isArchived } : {},\n      }),\n      invalidatesTags: (result, error, { postId }) => [\n        'Post',\n        { type: 'Post', id: postId },\n      ],\n    }),\n\n    // Approve post (SUPER_ADMIN only)\n    approvePost: builder.mutation<Post, { postId: string; approved: boolean; feedback?: string }>({\n      query: ({ postId, approved, feedback }) => ({\n        url: `/posts/${postId}/approve`,\n        method: 'PATCH',\n        body: {\n          action: approved ? 'approve' : 'reject',\n          reason: feedback || (approved ? 'Manual approval' : 'Manual rejection'),\n        },\n      }),\n      invalidatesTags: (result, error, { postId }) => [\n        'Post',\n        { type: 'Post', id: postId },\n        'PendingPost',\n      ],\n    }),\n\n    // Delete post (SUPER_ADMIN only)\n    deletePost: builder.mutation<void, string>({\n      query: (postId) => ({\n        url: `/posts/${postId}`,\n        method: 'DELETE',\n      }),\n      invalidatesTags: (result, error, postId) => [\n        'Post',\n        { type: 'Post', id: postId },\n        'PendingPost',\n      ],\n    }),\n\n    // Like/Unlike post\n    toggleLike: builder.mutation<LikeResponse, string>({\n      query: (postId) => ({\n        url: `/posts/${postId}/like`,\n        method: 'POST',\n      }),\n      // Optimistic update\n      onQueryStarted: async (postId, { dispatch, queryFulfilled }) => {\n        try {\n          const { data } = await queryFulfilled;\n          \n          // Update the post in cache\n          dispatch(\n            postApi.util.updateQueryData('getPostById', postId, (draft) => {\n              if (draft) {\n                draft.likeCount = data.likeCount;\n                draft.isLikedByUser = data.isLiked;\n              }\n            })\n          );\n\n          // Update post in posts list cache\n          dispatch(\n            postApi.util.updateQueryData('getPosts', {}, (draft) => {\n              const post = draft.posts?.find(p => p.id === postId);\n              if (post) {\n                post.likeCount = data.likeCount;\n                post.isLikedByUser = data.isLiked;\n              }\n            })\n          );\n        } catch {}\n      },\n    }),\n\n    // Get post likes\n    getPostLikes: builder.query<PostLikesResponse, {\n      postId: string;\n      page?: number;\n      limit?: number;\n    }>({\n      query: ({ postId, ...params }) => ({\n        url: `/posts/${postId}/likes`,\n        params,\n      }),\n      providesTags: (result, error, { postId }) => [{ type: 'PostLikes', id: postId }],\n    }),\n\n    // Check if user liked post\n    checkUserLike: builder.query<{ isLiked: boolean; likedAt: string | null }, string>({\n      query: (postId) => `/posts/${postId}/like/status`,\n      providesTags: (result, error, postId) => [{ type: 'UserLike', id: postId }],\n    }),\n\n    // ==========================================\n    // NEW REACTION ENDPOINTS\n    // ==========================================\n\n    // Toggle reaction on a post\n    toggleReaction: builder.mutation<ReactionResponse, { postId: string; reactionType: ReactionType }>({\n      query: ({ postId, reactionType }) => ({\n        url: `/posts/${postId}/reactions`,\n        method: 'POST',\n        body: { reactionType },\n      }),\n      // Optimistic update for instant UI feedback\n      onQueryStarted: async ({ postId }, { dispatch, queryFulfilled, getState }) => {\n        try {\n          const { data } = await queryFulfilled;\n          \n          // Update the post reactions in cache\n          dispatch(\n            postApi.util.updateQueryData('getPostReactions', postId, (draft) => {\n              if (draft) {\n                draft.reactions = data.reactions;\n                draft.userReactions = data.userReactions;\n                draft.totalReactions = data.totalReactions;\n                draft.likeCount = data.likeCount;\n                draft.isLiked = data.isLiked;\n              }\n            })\n          );\n\n          // Get all cached getPosts queries and update them\n          const state = getState() as any;\n          const postsCache = state.api.queries;\n          \n          // Update all getPosts cache entries\n          Object.keys(postsCache).forEach(key => {\n            if (key.startsWith('getPosts(')) {\n              try {\n                const cacheKey = JSON.parse(key.replace('getPosts(', '').replace(')', ''));\n                dispatch(\n                  postApi.util.updateQueryData('getPosts', cacheKey, (draft) => {\n                    const post = draft.posts?.find(p => p.id === postId);\n                    if (post) {\n                      // Update new reaction structure\n                      post.reactionCounts = data.reactions;\n                      post.totalReactions = data.totalReactions;\n                      post.userReactions = data.userReactions;\n                      // Legacy compatibility\n                      post.likeCount = data.likeCount;\n                      post.isLikedByUser = data.isLiked;\n                    }\n                  })\n                );\n              } catch (e) {\n                // Skip invalid cache keys\n              }\n            }\n          });\n\n          // Update single post cache\n          dispatch(\n            postApi.util.updateQueryData('getPostById', postId, (draft) => {\n              if (draft) {\n                // Update reaction structure\n                draft.reactionCounts = data.reactions;\n                draft.totalReactions = data.totalReactions;\n                draft.userReactions = data.userReactions;\n                // Legacy compatibility\n                draft.likeCount = data.likeCount;\n                draft.isLikedByUser = data.isLiked;\n              }\n            })\n          );\n        } catch (error) {\n          console.error('Error updating reaction cache:', error);\n        }\n      },\n      // Invalidate tags to trigger cache refresh for real-time updates\n      invalidatesTags: (result, error, { postId }) => [\n        'Post', // Invalidate all posts to ensure real-time updates\n        { type: 'PostReactions', id: postId },\n        { type: 'PostReactionUsers', id: postId }, // Invalidate modal data for real-time updates\n        { type: 'Post', id: postId },\n        'PendingPost', // Also invalidate pending posts if applicable\n      ],\n    }),\n\n    // Get post reactions with counts\n    getPostReactions: builder.query<PostReactions, string>({\n      query: (postId) => `/posts/${postId}/reactions`,\n      providesTags: (result, error, postId) => [{ type: 'PostReactions', id: postId }],\n    }),\n\n    // Get detailed reaction users for modal (LinkedIn-style)\n    getPostReactionUsers: builder.query<{\n      reactions: Array<{\n        id: string;\n        reactionType: ReactionType;\n        createdAt: string;\n        user: {\n          id: string;\n          fullName: string;\n          profileImage?: string;\n          batch?: string;\n          employmentStatus?: string;\n          currentCompany?: string;\n          currentPosition?: string;\n        };\n      }>;\n      reactionCounts: Record<string, number>;\n      pagination: {\n        page: number;\n        limit: number;\n        total: number;\n        pages: number;\n        hasNext: boolean;\n        hasPrev: boolean;\n      };\n    }, {\n      postId: string;\n      reactionType?: string;\n      page?: number;\n      limit?: number;\n    }>({\n      query: ({ postId, reactionType, page = 1, limit = 20 }) => ({\n        url: `/posts/${postId}/reactions/users`,\n        params: { reactionType, page, limit },\n      }),\n      transformResponse: (response: any) => response.data,\n      providesTags: (result, error, { postId }) => [{ type: 'PostReactionUsers', id: postId }],\n    }),\n\n    // Get post comments\n    getPostComments: builder.query<CommentsResponse, {\n      postId: string;\n      page?: number;\n      limit?: number;\n      sortOrder?: 'desc' | 'asc';\n    }>({\n      query: ({ postId, ...params }) => ({\n        url: `/posts/${postId}/comments`,\n        params,\n      }),\n      transformResponse: (response: any) => ({\n        comments: response.data,\n        pagination: response.pagination,\n      }),\n      providesTags: (result, error, { postId }) => [\n        { type: 'PostComments', id: postId },\n        ...(result?.comments?.map(({ id }) => ({ type: 'Comment' as const, id })) ?? []),\n      ],\n    }),\n\n    // Create comment\n    createComment: builder.mutation<Comment, {\n      postId: string;\n      content: string;\n      mentions?: string[];\n    }>({\n      query: ({ postId, ...body }) => ({\n        url: `/posts/${postId}/comments`,\n        method: 'POST',\n        body,\n      }),\n      invalidatesTags: (result, error, { postId }) => [\n        { type: 'PostComments', id: postId },\n        { type: 'Post', id: postId },\n      ],\n    }),\n\n    // Update comment\n    updateComment: builder.mutation<Comment, {\n      postId: string;\n      commentId: string;\n      content: string;\n    }>({\n      query: ({ postId, commentId, ...body }) => ({\n        url: `/posts/${postId}/comments/${commentId}`,\n        method: 'PUT',\n        body,\n      }),\n      invalidatesTags: (result, error, { postId, commentId }) => [\n        { type: 'PostComments', id: postId },\n        { type: 'Comment', id: commentId },\n      ],\n    }),\n\n    // Delete comment\n    deleteComment: builder.mutation<void, {\n      postId: string;\n      commentId: string;\n    }>({\n      query: ({ postId, commentId }) => ({\n        url: `/posts/${postId}/comments/${commentId}`,\n        method: 'DELETE',\n      }),\n      invalidatesTags: (result, error, { postId, commentId }) => [\n        { type: 'PostComments', id: postId },\n        { type: 'Comment', id: commentId },\n        { type: 'Post', id: postId },\n      ],\n    }),\n\n    // Create reply\n    createReply: builder.mutation<Comment, {\n      postId: string;\n      commentId: string;\n      content: string;\n      mentions?: string[];\n    }>({\n      query: ({ postId, commentId, ...body }) => ({\n        url: `/posts/${postId}/comments/${commentId}/replies`,\n        method: 'POST',\n        body,\n      }),\n      invalidatesTags: (result, error, { postId }) => [\n        { type: 'PostComments', id: postId },\n      ],\n    }),\n\n    // Toggle reaction on a comment\n    toggleCommentReaction: builder.mutation<ReactionResponse, {\n      postId: string;\n      commentId: string;\n      reactionType?: ReactionType;\n    }>({\n      query: ({ postId, commentId, ...body }) => ({\n        url: `/posts/${postId}/comments/${commentId}/reactions`,\n        method: 'POST',\n        body,\n      }),\n      invalidatesTags: (result, error, { postId, commentId }) => [\n        { type: 'PostComments', id: postId },\n        { type: 'Comment', id: commentId },\n        { type: 'CommentReactions', id: commentId },\n      ],\n    }),\n\n    // Get comment reactions with counts\n    getCommentReactions: builder.query<{\n      reactions: Record<ReactionType, number>;\n      totalReactions: number;\n      userReactions: ReactionType[];\n    }, {\n      postId: string;\n      commentId: string;\n    }>({\n      query: ({ postId, commentId }) => ({\n        url: `/posts/${postId}/comments/${commentId}/reactions`,\n      }),\n      transformResponse: (response: any) => response.data,\n      providesTags: (result, error, { commentId }) => [\n        { type: 'CommentReactions', id: commentId },\n      ],\n    }),\n\n    // Get detailed comment reaction users for modal (LinkedIn-style)\n    getCommentReactionUsers: builder.query<{\n      reactions: Array<{\n        id: string;\n        reactionType: ReactionType;\n        createdAt: string;\n        user: {\n          id: string;\n          fullName: string;\n          profileImage?: string;\n          batch?: number;\n          employmentStatus?: string;\n          workHistory: Array<{\n            companyName: string;\n            jobRole: string;\n          }>;\n        };\n      }>;\n      reactionCounts: Record<string, number>;\n      pagination: {\n        page: number;\n        limit: number;\n        total: number;\n        pages: number;\n        hasNext: boolean;\n        hasPrev: boolean;\n      };\n    }, {\n      postId: string;\n      commentId: string;\n      reactionType?: string;\n      page?: number;\n      limit?: number;\n    }>({\n      query: ({ postId, commentId, reactionType, page = 1, limit = 20 }) => ({\n        url: `/posts/${postId}/comments/${commentId}/reactions/users`,\n        params: { reactionType, page, limit },\n      }),\n      transformResponse: (response: any) => response.data,\n      providesTags: (result, error, { commentId }) => [{ type: 'CommentReactionUsers', id: commentId }],\n    }),\n\n  }),\n});\n\nexport const {\n  useGetPostsQuery,\n  useGetPostByIdQuery,\n  useGetPendingPostsQuery,\n  useCreatePostMutation,\n  useUpdatePostMutation,\n  useArchivePostMutation,\n  useApprovePostMutation,\n  useDeletePostMutation,\n  useToggleLikeMutation,\n  useGetPostLikesQuery,\n  useCheckUserLikeQuery,\n  // New reaction hooks\n  useToggleReactionMutation,\n  useGetPostReactionsQuery,\n  useGetPostReactionUsersQuery, // New hook for LinkedIn-style modal\n  // Comment hooks\n  useGetPostCommentsQuery,\n  useCreateCommentMutation,\n  useUpdateCommentMutation,\n  useDeleteCommentMutation,\n  useCreateReplyMutation,\n  // Comment reaction hooks\n  useToggleCommentReactionMutation,\n  useGetCommentReactionsQuery,\n  useGetCommentReactionUsersQuery,\n} = postApi;","import React, { useState, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  XMarkIcon,\n  PhotoIcon\n} from '@heroicons/react/24/outline';\nimport { getApiUrl } from '@/utils/helpers';\n\ninterface PostImageDisplayProps {\n  postId: string;\n  heroImage?: string | null;\n  images: string[];\n  title: string;\n}\n\nconst PostImageDisplay: React.FC<PostImageDisplayProps> = ({\n  postId,\n  heroImage,\n  images,\n  title\n}) => {\n  const [imageViewerOpen, setImageViewerOpen] = useState(false);\n  const [selectedImageIndex, setSelectedImageIndex] = useState(0);\n\n  // Combine hero image and additional images for the carousel\n  const allImages = [\n    ...(heroImage ? [getApiUrl(`/api/posts/${postId}/hero-image`)] : []),\n    ...images.map((_, index) => getApiUrl(`/api/posts/${postId}/images/${index}`))\n  ];\n\n  const openImageViewer = useCallback((index: number) => {\n    setSelectedImageIndex(index);\n    setImageViewerOpen(true);\n  }, []);\n\n  const closeImageViewer = useCallback(() => {\n    setImageViewerOpen(false);\n  }, []);\n\n  const navigateImage = useCallback((direction: 'prev' | 'next') => {\n    if (direction === 'prev') {\n      setSelectedImageIndex((prev) =>\n        prev === 0 ? allImages.length - 1 : prev - 1\n      );\n    } else {\n      setSelectedImageIndex((prev) =>\n        prev === allImages.length - 1 ? 0 : prev + 1\n      );\n    }\n  }, [allImages.length]);\n\n  // Keyboard navigation\n  const handleKeyDown = useCallback((e: KeyboardEvent) => {\n    if (!imageViewerOpen) return;\n\n    switch (e.key) {\n      case 'ArrowLeft':\n        navigateImage('prev');\n        break;\n      case 'ArrowRight':\n        navigateImage('next');\n        break;\n      case 'Escape':\n        closeImageViewer();\n        break;\n    }\n  }, [imageViewerOpen, navigateImage, closeImageViewer]);\n\n  React.useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [handleKeyDown]);\n\n  if (!heroImage && (!images || images.length === 0)) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className=\"mb-4 -mx-4\">\n        {/* Hero Image - Always displayed prominently */}\n        {heroImage && (\n          <div className=\"relative overflow-hidden bg-gray-100 dark:bg-gray-800 cursor-pointer\">\n            <img\n              src={getApiUrl(`/api/posts/${postId}/hero-image`)}\n              alt={title}\n              className=\"w-full h-auto object-contain max-h-80\"\n              style={{ minHeight: '200px' }}\n              onClick={() => openImageViewer(0)}\n              onLoad={(e) => {\n                const target = e.target as HTMLImageElement;\n                const aspectRatio = target.naturalWidth / target.naturalHeight;\n                if (aspectRatio > 2.5) {\n                  target.className = \"w-full h-64 object-cover cursor-pointer\";\n                } else if (aspectRatio < 0.6) {\n                  target.className = \"w-full h-auto object-contain max-h-96 mx-auto cursor-pointer\";\n                  target.parentElement!.style.display = 'flex';\n                  target.parentElement!.style.justifyContent = 'center';\n                } else {\n                  target.className = \"w-full h-auto object-contain max-h-80 cursor-pointer\";\n                }\n              }}\n            />\n\n            {/* Image counter overlay */}\n            {images.length > 0 && (\n              <div className=\"absolute top-3 right-3 bg-black bg-opacity-60 text-white px-2 py-1 rounded-full text-sm flex items-center space-x-1\">\n                <PhotoIcon className=\"h-4 w-4\" />\n                <span>{allImages.length}</span>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Additional Images Stack - Only if there are more images beyond hero */}\n        {images.length > 0 && (\n          <div className=\"px-4 mt-3\">\n            {!heroImage && (\n              /* If no hero image, show first additional image as main */\n              <div className=\"relative overflow-hidden bg-gray-100 dark:bg-gray-800 rounded-lg mb-3 cursor-pointer\">\n                <img\n                  src={getApiUrl(`/api/posts/${postId}/images/0`)}\n                  alt={`${title} - Image 1`}\n                  className=\"w-full h-auto object-contain max-h-80\"\n                  onClick={() => openImageViewer(0)}\n                  onLoad={(e) => {\n                    const target = e.target as HTMLImageElement;\n                    const aspectRatio = target.naturalWidth / target.naturalHeight;\n                    if (aspectRatio > 2.5) {\n                      target.className = \"w-full h-64 object-cover cursor-pointer\";\n                    } else if (aspectRatio < 0.6) {\n                      target.className = \"w-full h-auto object-contain max-h-96 mx-auto cursor-pointer\";\n                      target.parentElement!.style.display = 'flex';\n                      target.parentElement!.style.justifyContent = 'center';\n                    } else {\n                      target.className = \"w-full h-auto object-contain max-h-80 cursor-pointer\";\n                    }\n                  }}\n                />\n\n                {/* Image counter overlay */}\n                <div className=\"absolute top-3 right-3 bg-black bg-opacity-60 text-white px-2 py-1 rounded-full text-sm flex items-center space-x-1\">\n                  <PhotoIcon className=\"h-4 w-4\" />\n                  <span>{images.length}</span>\n                </div>\n              </div>\n            )}\n\n            {/* Image thumbnails/stack */}\n            {(heroImage ? images.length > 0 : images.length > 1) && (\n              <div className=\"flex space-x-2 overflow-x-auto pb-2\">\n                {(heroImage ? images : images.slice(1)).map((_, index) => {\n                  const imageIndex = heroImage ? index : index + 1;\n                  const carouselIndex = heroImage ? index + 1 : index + 1;\n\n                  return (\n                    <div\n                      key={imageIndex}\n                      className=\"relative flex-shrink-0 w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity\"\n                      onClick={() => openImageViewer(carouselIndex)}\n                    >\n                      <img\n                        src={getApiUrl(`/api/posts/${postId}/images/${imageIndex}`)}\n                        alt={`${title} - Image ${imageIndex + 1}`}\n                        className=\"w-full h-full object-cover\"\n                      />\n\n                      {/* Show count on last thumbnail if there are more images */}\n                      {index === 4 && (heroImage ? images.length > 5 : images.length > 6) && (\n                        <div className=\"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center\">\n                          <span className=\"text-white text-xs font-medium\">\n                            +{heroImage ? images.length - 5 : images.length - 6}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Full-screen Image Viewer Modal */}\n      <AnimatePresence>\n        {imageViewerOpen && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center\"\n            onClick={closeImageViewer}\n          >\n            <div className=\"relative w-full h-full flex items-center justify-center p-4\">\n              {/* Close button */}\n              <button\n                onClick={closeImageViewer}\n                className=\"absolute top-4 right-4 z-10 p-2 rounded-full bg-black bg-opacity-50 text-white hover:bg-opacity-70 transition-all\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n\n              {/* Image counter */}\n              <div className=\"absolute top-4 left-4 z-10 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm\">\n                {selectedImageIndex + 1} / {allImages.length}\n              </div>\n\n              {/* Previous button */}\n              {allImages.length > 1 && (\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    navigateImage('prev');\n                  }}\n                  className=\"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 p-3 rounded-full bg-black bg-opacity-50 text-white hover:bg-opacity-70 transition-all\"\n                >\n                  <ChevronLeftIcon className=\"h-6 w-6\" />\n                </button>\n              )}\n\n              {/* Next button */}\n              {allImages.length > 1 && (\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    navigateImage('next');\n                  }}\n                  className=\"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 p-3 rounded-full bg-black bg-opacity-50 text-white hover:bg-opacity-70 transition-all\"\n                >\n                  <ChevronRightIcon className=\"h-6 w-6\" />\n                </button>\n              )}\n\n              {/* Main image */}\n              <motion.img\n                key={selectedImageIndex}\n                initial={{ opacity: 0, scale: 0.9 }}\n                animate={{ opacity: 1, scale: 1 }}\n                exit={{ opacity: 0, scale: 0.9 }}\n                transition={{ duration: 0.2 }}\n                src={allImages[selectedImageIndex]}\n                alt={`${title} - Image ${selectedImageIndex + 1}`}\n                className=\"max-w-full max-h-full object-contain\"\n                onClick={(e) => e.stopPropagation()}\n              />\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n};\n\nexport default PostImageDisplay;\n"],"names":["ArchiveBoxIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","postApi","apiSlice","builder","params","forceRefresh","restParams","response","result","id","postId","error","formData","getState","token","getApiUrl","errorData","data","isArchived","approved","feedback","dispatch","queryFulfilled","draft","post","p","reactionType","postsCache","key","cacheKey","page","limit","body","commentId","useGetPostsQuery","useGetPendingPostsQuery","useCreatePostMutation","useUpdatePostMutation","useArchivePostMutation","useApprovePostMutation","useDeletePostMutation","useToggleLikeMutation","useToggleReactionMutation","useGetPostReactionUsersQuery","useGetPostCommentsQuery","useCreateCommentMutation","useUpdateCommentMutation","useDeleteCommentMutation","useCreateReplyMutation","useToggleCommentReactionMutation","useGetCommentReactionUsersQuery","PostImageDisplay","heroImage","images","imageViewerOpen","setImageViewerOpen","useState","selectedImageIndex","setSelectedImageIndex","allImages","_","index","openImageViewer","useCallback","closeImageViewer","navigateImage","direction","prev","handleKeyDown","e","React","jsxs","Fragment","jsx","target","aspectRatio","PhotoIcon","imageIndex","carouselIndex","AnimatePresence","motion","XMarkIcon","ChevronLeftIcon","ChevronRightIcon"],"mappings":"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","x_google_ignoreList":[0]}