import{j as e,A as X,m as P,L as Y,b as ke,q as Ne,z as Ce,a as W}from"./ui-BlmhFX_F.js";import{r as a,u as ee,L as B,b as me,O as ne}from"./router-DFnE1L-t.js";import{u as re,a as Fe,b as Se,z as M,g as Ee,c as Z,d as Ae,e as ue,s as xe,f as Re,h as Me}from"./index-P8gjH_om.js";import{C as H}from"./redux-VN59sPcb.js";import{u as De,a as Pe,b as Oe,c as ze,d as Le,e as $e}from"./notificationApi-B04YK__d.js";import{L as Ie}from"./LoadingSpinner-BR8iBbEe.js";import{F as ae}from"./BellIcon-BvkOfwNi.js";import{F as T}from"./XMarkIcon-D1c1wIzV.js";import{F as Ue}from"./CheckIcon-BVDXZInn.js";import{F as Be}from"./TrashIcon-mpSEd7uz.js";import{u as Ze,T as Te}from"./ThemeToggle-C6ZS02Ou.js";import{F as He}from"./KeyIcon-DApCHod3.js";import{F as oe}from"./ExclamationTriangleIcon-DCwPn2ZM.js";import{F as J}from"./EyeSlashIcon-DScm6DLE.js";import{F as Q}from"./EyeIcon-Bt_hkgUK.js";import{F as Ge}from"./CheckCircleIcon-DCBCeWMH.js";import{F}from"./UserCircleIcon-paQ8KrXl.js";import{F as Ve}from"./SunIcon-P8RkBziY.js";import{F as _e,a as he,b as S}from"./MoonIcon-w2c_a-rM.js";import{F as qe}from"./CogIcon-DfBHaluj.js";import{F as ge}from"./BuildingOfficeIcon-2E4mAkhi.js";import{F as te}from"./ArrowRightOnRectangleIcon-1n2irUT1.js";import{O as fe}from"./OrganizationLogo-BvDRnHtN.js";import{F as w}from"./ChatBubbleLeftRightIcon-sTRCG82n.js";import{F as ie}from"./CalendarIcon-CroBm0p_.js";import{F as We}from"./AcademicCapIcon-DzrCHr5U.js";import{F as E}from"./UsersIcon-Ct2fUG5g.js";import{F as Je}from"./ChartBarIcon-CLsU3hA-.js";import{F as Qe}from"./Cog6ToothIcon-boBm2kak.js";import{F as A}from"./UserGroupIcon-CnvKPj6V.js";import{F as R}from"./BuildingOffice2Icon-DJ0Rj8rD.js";import{F as C}from"./CalendarDaysIcon-BeQLJOHn.js";import{F as O}from"./HeartIcon-EqIDsd1l.js";import{F as z}from"./BanknotesIcon-CfbT5DdL.js";import{F as L}from"./PhotoIcon-n1eOvNeY.js";import{F as $}from"./LifebuoyIcon-nRHpAQH_.js";import{F as G}from"./CheckBadgeIcon-CarBykZO.js";import{F as Ke}from"./DocumentTextIcon-ImcgzK9h.js";import"./vendor-gH-7aFTg.js";function Ye({title:r,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),r?a.createElement("title",{id:t},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"}))}const pe=a.forwardRef(Ye);function Xe({title:r,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),r?a.createElement("title",{id:t},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const be=a.forwardRef(Xe);function er({title:r,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),r?a.createElement("title",{id:t},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const rr=a.forwardRef(er);function ar({title:r,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),r?a.createElement("title",{id:t},r):null,a.createElement("path",{d:"M11.7 2.805a.75.75 0 0 1 .6 0A60.65 60.65 0 0 1 22.83 8.72a.75.75 0 0 1-.231 1.337 49.948 49.948 0 0 0-9.902 3.912l-.003.002c-.114.06-.227.119-.34.18a.75.75 0 0 1-.707 0A50.88 50.88 0 0 0 7.5 12.173v-.224c0-.131.067-.248.172-.311a54.615 54.615 0 0 1 4.653-2.52.75.75 0 0 0-.65-1.352 56.123 56.123 0 0 0-4.78 2.589 1.858 1.858 0 0 0-.859 1.228 49.803 49.803 0 0 0-4.634-1.527.75.75 0 0 1-.231-1.337A60.653 60.653 0 0 1 11.7 2.805Z"}),a.createElement("path",{d:"M13.06 15.473a48.45 48.45 0 0 1 7.666-3.282c.134 1.414.22 2.843.255 4.284a.75.75 0 0 1-.46.711 47.87 47.87 0 0 0-8.105 4.342.75.75 0 0 1-.832 0 47.87 47.87 0 0 0-8.104-4.342.75.75 0 0 1-.461-.71c.035-1.442.121-2.87.255-4.286.921.304 1.83.634 2.726.99v1.27a1.5 1.5 0 0 0-.14 2.508c-.09.38-.222.753-.397 1.11.452.213.901.434 1.346.66a6.727 6.727 0 0 0 .551-1.607 1.5 1.5 0 0 0 .14-2.67v-.645a48.549 48.549 0 0 1 3.44 1.667 2.25 2.25 0 0 0 2.12 0Z"}),a.createElement("path",{d:"M4.462 19.462c.42-.419.753-.89 1-1.395.453.214.902.435 1.347.662a6.742 6.742 0 0 1-1.286 1.794.75.75 0 0 1-1.06-1.06Z"}))}const tr=a.forwardRef(ar);function sr({title:r,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),r?a.createElement("title",{id:t},r):null,a.createElement("path",{fillRule:"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z",clipRule:"evenodd"}))}const nr=a.forwardRef(sr);function or({title:r,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),r?a.createElement("title",{id:t},r):null,a.createElement("path",{fillRule:"evenodd",d:"M4.5 2.25a.75.75 0 0 0 0 1.5v16.5h-.75a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5h-.75V3.75a.75.75 0 0 0 0-1.5h-15ZM9 6a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm-.75 3.75A.75.75 0 0 1 9 9h1.5a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM9 12a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm3.75-5.25A.75.75 0 0 1 13.5 6H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM13.5 9a.75.75 0 0 0 0 1.5H15A.75.75 0 0 0 15 9h-1.5Zm-.75 3.75a.75.75 0 0 1 .75-.75H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM9 19.5v-2.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 9 19.5Z",clipRule:"evenodd"}))}const ir=a.forwardRef(or);function lr({title:r,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),r?a.createElement("title",{id:t},r):null,a.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const le=a.forwardRef(lr);function cr({title:r,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),r?a.createElement("title",{id:t},r):null,a.createElement("path",{d:"M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75ZM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 0 1-1.875-1.875V8.625ZM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 0 1 3 19.875v-6.75Z"}))}const dr=a.forwardRef(cr);function mr({title:r,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),r?a.createElement("title",{id:t},r):null,a.createElement("path",{d:"M4.913 2.658c2.075-.27 4.19-.408 6.337-.408 2.147 0 4.262.139 6.337.408 1.922.25 3.291 1.861 3.405 3.727a4.403 4.403 0 0 0-1.032-.211 50.89 50.89 0 0 0-8.42 0c-2.358.196-4.04 2.19-4.04 4.434v4.286a4.47 4.47 0 0 0 2.433 3.984L7.28 21.53A.75.75 0 0 1 6 21v-4.03a48.527 48.527 0 0 1-1.087-.128C2.905 16.58 1.5 14.833 1.5 12.862V6.638c0-1.97 1.405-3.718 3.413-3.979Z"}),a.createElement("path",{d:"M15.75 7.5c-1.376 0-2.739.057-4.086.169C10.124 7.797 9 9.103 9 10.609v4.285c0 1.507 1.128 2.814 2.67 2.94 1.243.102 2.5.157 3.768.165l2.782 2.781a.75.75 0 0 0 1.28-.53v-2.39l.33-.026c1.542-.125 2.67-1.433 2.67-2.94v-4.286c0-1.505-1.125-2.811-2.664-2.94A49.392 49.392 0 0 0 15.75 7.5Z"}))}const ce=a.forwardRef(mr);function ur({title:r,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),r?a.createElement("title",{id:t},r):null,a.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),a.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const K=a.forwardRef(ur);function xr({title:r,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),r?a.createElement("title",{id:t},r):null,a.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))}const de=a.forwardRef(xr),hr=()=>{const r=ee(),[t,s]=a.useState(!1),[n,g]=a.useState("all"),{data:f,isLoading:d,error:l}=De({page:1,limit:20,unreadOnly:n==="unread"}),{data:c}=Pe(),[x]=Oe(),[v]=ze(),[p]=Le(),[j,{isLoading:b}]=$e(),m=f?.notifications||[],u=c?.count||0,y=async i=>{try{const h=await x(i).unwrap();console.log("Mark as read success:",h)}catch(h){console.error("Failed to mark notification as read:",h),h?.data?.message,console.log("Detailed error:",JSON.stringify(h,null,2))}},o=async()=>{try{await v().unwrap()}catch(i){console.error("Failed to mark all notifications as read:",i)}},k=async()=>{if(confirm("Are you sure you want to delete all notifications? This action cannot be undone."))try{const i=await j().unwrap();console.log(`Successfully cleared ${i.deletedCount} notifications`)}catch(i){console.error("Failed to clear all notifications:",i),i?.data?.message,console.log("Detailed error:",JSON.stringify(i,null,2))}},D=async i=>{try{const h=await p(i).unwrap();console.log("Delete notification success:",h)}catch(h){console.error("Failed to delete notification:",h),h?.data?.message,console.log("Detailed error:",JSON.stringify(h,null,2))}},I=i=>{switch(i){case"ALUMNI_VERIFIED":return"âœ…";case"ALUMNI_REJECTED":return"âŒ";case"ROLE_UPDATED":return"ðŸ‘‘";default:return"ðŸ“¢"}},V=i=>{switch(i){case"EMERGENCY":return"text-red-600 dark:text-red-400";case"HIGH":return"text-orange-600 dark:text-orange-400";case"NORMAL":return"text-blue-600 dark:text-blue-400";case"LOW":return"text-gray-600 dark:text-gray-400";default:return"text-gray-600 dark:text-gray-400"}},U=window.innerWidth<768,_=()=>{U?r("/notifications"):s(!t)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:_,className:"relative p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors duration-200","aria-label":"Notifications",children:[u>0?e.jsx(nr,{className:"h-6 w-6 text-orange-500"}):e.jsx(ae,{className:"h-6 w-6"}),u>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white bg-red-500 rounded-full min-w-[1.25rem] h-5",children:u>99?"99+":u})]}),e.jsx(X,{children:t&&!U&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 sm:hidden",onClick:()=>s(!1)}),e.jsxs(P.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:"absolute right-0 top-full mt-2 w-80 sm:w-96 lg:w-[28rem] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50 max-h-[32rem] sm:max-h-[40rem] flex flex-col",style:{boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),e.jsx("button",{onClick:()=>s(!1),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:e.jsx(T,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>g("all"),className:`px-3 py-1 text-sm rounded-full transition-colors ${n==="all"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:"All"}),e.jsxs("button",{onClick:()=>g("unread"),className:`px-3 py-1 text-sm rounded-full transition-colors ${n==="unread"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:["Unread (",u,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[u>0&&e.jsx("button",{onClick:o,className:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:"Mark all read"}),m.length>0&&e.jsx("button",{onClick:k,disabled:b,className:"text-xs text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors disabled:opacity-50",children:b?"Clearing...":"Clear all"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:d?e.jsx("div",{className:"p-4 flex justify-center",children:e.jsx(Ie,{size:"sm"})}):l?e.jsx("div",{className:"p-4 text-center text-red-600 dark:text-red-400",children:"Failed to load notifications"}):m.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:n==="unread"?"No unread notifications":"No notifications"}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:m.map(i=>e.jsx(P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${i.isRead?"":"bg-blue-50 dark:bg-blue-900/10"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-2xl",children:I(i.type)})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`text-sm font-medium ${i.isRead?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:i.title}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:i.message}),e.jsx("p",{className:`mt-1 text-xs ${i.priority?V(i.priority):"text-gray-500 dark:text-gray-400"}`,children:new Date(i.createdAt).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!i.isRead&&e.jsx("button",{onClick:()=>y(i.id),className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Mark as read",children:e.jsx(Ue,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(i.id),className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Delete notification",children:e.jsx(Be,{className:"h-4 w-4"})})]})]})})]})},i.id))})}),m.length>0&&e.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:"View all notifications"}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[m.length," notification",m.length!==1?"s":""]})]})})]})]})})]})},ye=({isOpen:r,onClose:t})=>{const[s,n]=a.useState("password"),{logout:g}=re(),[f,d]=a.useState(""),[l,c]=a.useState(""),[x,v]=a.useState(""),[p,j]=a.useState(!1),[b,m]=a.useState(!1),[u,y]=a.useState(!1),[o,k]=a.useState(!1),[D,I]=a.useState(""),[V,{isLoading:U}]=Fe(),[_,{isLoading:i}]=Se(),h=()=>{d(""),c(""),v(""),j(!1),m(!1),y(!1)},we=async N=>{if(N.preventDefault(),l!==x){M.error("New passwords do not match");return}if(l.length<8){M.error("Password must be at least 8 characters");return}try{await V({currentPassword:f,newPassword:l,confirmPassword:x}).unwrap(),M.success("Password changed successfully"),h()}catch(q){const je=q;M.error(je.data?.message||"Failed to change password")}},ve=async()=>{if(!D){M.error("Please enter your password to confirm");return}try{await _({password:D}).unwrap(),M.success("Account deactivated successfully"),t(),g()}catch(N){const q=N;M.error(q.data?.message||"Failed to deactivate account")}},se=()=>{h(),k(!1),I(""),t()};return r?e.jsxs(Y,{open:r,onClose:se,className:"relative z-50",children:[e.jsx(ke,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(Ne,{className:"w-full max-w-lg overflow-hidden bg-white dark:bg-gray-800 rounded-2xl shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx(Ce,{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Settings"}),e.jsx("button",{onClick:se,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(T,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>n("password"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${s==="password"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(He,{className:"w-4 h-4 inline-block mr-2"}),"Change Password"]}),e.jsxs("button",{onClick:()=>n("account"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${s==="account"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(oe,{className:"w-4 h-4 inline-block mr-2"}),"Account"]})]}),e.jsxs("div",{className:"p-6",children:[s==="password"&&e.jsxs("form",{onSubmit:we,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",value:f,onChange:N=>d(N.target.value),className:"w-full px-4 py-2.5 pr-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current password",required:!0}),e.jsx("button",{type:"button",onClick:()=>j(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:p?e.jsx(J,{className:"w-5 h-5"}):e.jsx(Q,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:b?"text":"password",value:l,onChange:N=>c(N.target.value),className:"w-full px-4 py-2.5 pr-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password (min 8 characters)",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>m(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b?e.jsx(J,{className:"w-5 h-5"}):e.jsx(Q,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:x,onChange:N=>v(N.target.value),className:"w-full px-4 py-2.5 pr-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?e.jsx(J,{className:"w-5 h-5"}):e.jsx(Q,{className:"w-5 h-5"})})]}),x&&l!==x&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),e.jsx("button",{type:"submit",disabled:U||!f||!l||l!==x,className:"w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:U?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Changing Password..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Change Password"]})})]}),s==="account"&&e.jsx("div",{className:"space-y-6",children:o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("h3",{className:"font-medium text-red-800 dark:text-red-200",children:"Are you sure you want to deactivate?"}),e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-300",children:"Enter your password to confirm this action."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:D,onChange:N=>I(N.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter your password"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{k(!1),I("")},className:"flex-1 py-2.5 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ve,disabled:i||!D,className:"flex-1 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Deactivating...":"Confirm Deactivation"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("h3",{className:"font-medium text-yellow-800 dark:text-yellow-200 flex items-center",children:[e.jsx(oe,{className:"w-5 h-5 mr-2"}),"Deactivate Account"]}),e.jsx("p",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:"Deactivating your account will:"}),e.jsxs("ul",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Prevent you from logging in"}),e.jsx("li",{children:"Keep your posts and activities visible"}),e.jsx("li",{children:"Preserve all your data (nothing is deleted)"}),e.jsx("li",{children:"Allow you to reactivate anytime via email OTP"})]})]}),e.jsx("button",{onClick:()=>k(!0),className:"w-full py-2.5 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-600 dark:text-red-400 rounded-lg font-medium transition-colors",children:"Deactivate My Account"})]})})]})]})})]}):null},gr=({className:r=""})=>{const[t,s]=a.useState(!1),[n,g]=a.useState(!1),[f,d]=a.useState(!1),l=a.useRef(null),{user:c,logout:x}=re(),{theme:v,toggleTheme:p}=Ze();a.useEffect(()=>{const o=k=>{l.current&&!l.current.contains(k.target)&&s(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const j=()=>{p()},b=()=>{x(),s(!1)},m=()=>{s(!1),Ae()},u=()=>{s(!1),d(!0)},y=Ee();return e.jsxs("div",{className:`relative ${r}`,ref:l,children:[e.jsxs("button",{onClick:()=>s(!t),className:"flex items-center space-x-2 p-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors duration-200","aria-label":"User menu",children:[!n&&c?.id?e.jsx("img",{src:Z(`/api/users/profile-picture/${c.id}`),alt:c.fullName||"User",className:"h-8 w-8 rounded-full object-cover border-2 border-gray-300 dark:border-gray-600",onError:()=>g(!0)}):e.jsx(F,{className:"h-8 w-8"}),e.jsxs("div",{className:"hidden sm:block text-left",children:[e.jsx("p",{className:"text-sm font-medium",children:c?.fullName||"Admin User"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:c?.role?.toLowerCase().replace("_"," ")||"Admin"})]})]}),e.jsx(X,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>s(!1)}),e.jsxs(P.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:"absolute right-0 top-full mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[!n&&c?.id?e.jsx("img",{src:Z(`/api/users/profile-picture/${c.id}`),alt:c.fullName||"User",className:"h-10 w-10 rounded-full object-cover border-2 border-gray-300 dark:border-gray-600",onError:()=>g(!0)}):e.jsx(F,{className:"h-10 w-10 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:c?.fullName||"Admin User"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:c?.email||"admin@alumni.portal"}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 capitalize",children:c?.role?.toLowerCase().replace("_"," ")||"Admin"})]})]})}),e.jsxs("div",{className:"py-2",children:[e.jsxs(B,{to:"/profile",onClick:()=>s(!1),className:"w-full flex items-center px-4 py-3 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[e.jsx(F,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:"My Profile"})]}),e.jsxs("button",{onClick:j,className:"w-full flex items-center px-4 py-3 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[v.isDark?e.jsx(Ve,{className:"h-5 w-5 mr-3"}):e.jsx(_e,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:v.isDark?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:u,className:"w-full flex items-center px-4 py-3 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[e.jsx(qe,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:"Settings"})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2"}),y&&e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Current Organization"}),e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:y})]}),e.jsxs("button",{onClick:m,className:"w-full flex items-center px-4 py-3 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[e.jsx(ge,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:"Change Organization"})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2"}),e.jsxs("button",{onClick:b,className:"w-full flex items-center px-4 py-3 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-200",children:[e.jsx(te,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:"Logout"})]})]})]})]})}),e.jsx(ye,{isOpen:f,onClose:()=>d(!1)})]})},fr=({unreadNotifications:r=0})=>{const t=H(ue),[s,n]=a.useState(!1);return e.jsx("header",{className:"sticky top-0 z-40 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 lg:hidden",style:{paddingTop:"env(safe-area-inset-top, 0px)"},children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[e.jsx(B,{to:"/profile",className:"relative flex-shrink-0",children:!s&&t?.id?e.jsx("img",{src:Z(`/api/users/profile-picture/${t.id}`),alt:t.name||"User",className:"w-10 h-10 rounded-full object-cover border-2 border-purple-500 dark:border-purple-400",onError:()=>n(!0)}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-lg border-2 border-purple-500 dark:border-purple-400",children:t?.name?.charAt(0)||t?.fullName?.charAt(0)||"U"})}),e.jsxs(B,{to:"/notifications",className:"relative p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Notifications",children:[e.jsx(ae,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),r>0&&e.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:r>9?"9+":r})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(fe,{size:"lg"})})]})})})},pr=({userRole:r,onMoreClick:t})=>{const s=me(),g=(()=>{switch(r){case"SUPER_ADMIN":return[{name:"Users",path:"/admin/users",icon:E,iconSolid:de},{name:"Dashboard",path:"/admin/dashboard",icon:S,iconSolid:K},{name:"Organization",path:"/admin/organization",icon:ge,iconSolid:ir},{name:"Analytics",path:"/admin/dashboard",icon:Je,iconSolid:dr}];case"BATCH_ADMIN":return[{name:"Users",path:"/admin/users",icon:E,iconSolid:de},{name:"Dashboard",path:"/admin/dashboard",icon:S,iconSolid:K},{name:"Events",path:"/admin/events",icon:ie,iconSolid:le},{name:"Social",path:"/user/social",icon:w,iconSolid:ce}];case"USER":default:return[{name:"Social",path:"/user/social",icon:w,iconSolid:ce},{name:"Dashboard",path:"/user/dashboard",icon:S,iconSolid:K},{name:"Events",path:"/user/events",icon:ie,iconSolid:le},{name:"Directory",path:"/user/alumni",icon:We,iconSolid:tr}]}})(),f=d=>s.pathname===d||s.pathname.startsWith(d+"/");return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 lg:hidden",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:e.jsxs("div",{className:"grid grid-cols-5 h-16",children:[e.jsxs("button",{onClick:t,className:"flex flex-col items-center justify-center space-y-1 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-colors",children:[e.jsx(he,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-medium",children:"More"})]}),g.map(d=>{const l=f(d.path),c=l?d.iconSolid:d.icon;return e.jsxs(B,{to:d.path,className:`flex flex-col items-center justify-center space-y-1 transition-colors ${l?"text-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx(c,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-medium",children:d.name})]},d.name)})]})})},br=({isOpen:r,onClose:t,userRole:s,userName:n,userEmail:g,onLogout:f})=>{const d=ee(),l=H(xe),c=H(ue),[x,v]=a.useState(!1),[p,j]=a.useState(!1),b=()=>{t(),f()},m=o=>{d(o),t()},y=(()=>{switch(s){case"SUPER_ADMIN":return[{name:"Dashboard",path:"/admin/dashboard",icon:S},{name:"User Management",path:"/admin/users",icon:G},{name:"Alumni Directory",path:"/user/alumni",icon:E},{name:"Groups",path:"/admin/groups",icon:A},{name:"Organization",path:"/admin/organization",icon:R},{name:"Social",path:"/admin/social",icon:w},{name:"Posts Management",path:"/admin/posts",icon:be},{name:"Poll Management",path:"/admin/polls",icon:pe},{name:"Events",path:"/admin/events",icon:C},{name:"Event Management",path:"/admin/events-management",icon:C},{name:"Treasury",path:"/admin/treasury",icon:z},{name:"Merchandise",path:"/admin/merchandise",icon:rr},{name:"Communications",path:"/admin/communications",icon:w},{name:"Support",path:"/admin/support",icon:$},{name:"LifeLink",path:"/user/lifelink",icon:O},{name:"Gallery",path:"/user/gallery",icon:L},{name:"Reports",path:"/admin/reports",icon:Ke}];case"BATCH_ADMIN":return[{name:"Dashboard",path:"/admin/dashboard",icon:S},{name:"User Verification",path:"/admin/users",icon:G},{name:"Alumni Directory",path:"/user/alumni",icon:E},{name:"Groups",path:"/user/groups",icon:A},{name:"Organization",path:"/organization",icon:R},{name:"My Profile",path:"/user/profile",icon:F},{name:"Social",path:"/user/social",icon:w},{name:"Events",path:"/admin/events",icon:C},{name:"LifeLink",path:"/user/lifelink",icon:O},{name:"Treasury",path:"/user/treasury",icon:z},{name:"Gallery",path:"/user/gallery",icon:L},{name:"Support",path:"/user/support",icon:$}];case"USER":default:return[{name:"Dashboard",path:"/user/dashboard",icon:S},{name:"My Profile",path:"/user/profile",icon:F},{name:"Alumni Directory",path:"/user/alumni",icon:E},{name:"Groups",path:"/user/groups",icon:A},{name:"Organization",path:"/organization",icon:R},{name:"Events",path:"/user/events",icon:C},{name:"Social",path:"/user/social",icon:w},{name:"LifeLink",path:"/user/lifelink",icon:O},{name:"Treasury",path:"/user/treasury",icon:z},{name:"Gallery",path:"/user/gallery",icon:L},{name:"Support",path:"/user/support",icon:$}]}})();return e.jsxs(e.Fragment,{children:[e.jsx(W,{show:r,as:a.Fragment,children:e.jsxs(Y,{onClose:t,className:"relative z-50 lg:hidden",children:[e.jsx(W.Child,{as:a.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),e.jsx(W.Child,{as:a.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:e.jsxs(Y.Panel,{className:"fixed left-0 top-0 bottom-0 w-80 bg-white dark:bg-gray-900 shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:!x&&c?.id?e.jsx("img",{src:Z(`/api/users/profile-picture/${c.id}`),alt:n,className:"w-10 h-10 rounded-full object-cover border-2 border-purple-500 dark:border-purple-400",onError:()=>v(!0)}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-base border-2 border-purple-500 dark:border-purple-400",children:n?.charAt(0)?.toUpperCase()||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:n}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:g})]})]}),e.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex-shrink-0",children:e.jsx(T,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:e.jsx("div",{className:"space-y-1 px-2",children:y.map(o=>{const k=o.icon;return e.jsxs("button",{onClick:()=>m(o.path),className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsx(k,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium",children:o.name})]},o.path)})})}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-800 p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-6 px-3 py-2",children:[e.jsx(Te,{}),e.jsx("button",{onClick:()=>m("/notifications"),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Notifications",children:e.jsx(ae,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),e.jsx("button",{onClick:()=>j(!0),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Settings",children:e.jsx(Qe,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})})]}),e.jsxs("button",{onClick:b,className:"w-full flex items-center justify-center space-x-2 px-4 py-2.5 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"Logout"})]}),e.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center space-x-2 px-4 py-2.5 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"Close Menu"})]}),e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("img",{src:l?"/brand/guild-logo-white.png":"/brand/guild-logo.png",alt:"GUILD",className:"h-12 w-auto object-contain opacity-60"})})]})]})})]})}),e.jsx(ye,{isOpen:p,onClose:()=>j(!1)})]})},yr=r=>{const t=[{name:"Dashboard",href:r==="USER"?"/user/dashboard":"/admin/dashboard",icon:S,current:!1,description:"Overview and analytics"}];return r==="USER"?[...t,{name:"My Profile",href:"/user/profile",icon:F,current:!1,description:"View and edit your profile"},{name:"Alumni Directory",href:"/user/alumni",icon:E,current:!1,description:"Browse and connect with alumni"},{name:"Groups",href:"/user/groups",icon:A,current:!1,description:"Organization groups and committees"},{name:"Organization",href:"/organization",icon:R,current:!1,description:"View organization details"},{name:"Events",href:"/user/events",icon:C,current:!1,description:"Browse upcoming events"},{name:"Social",href:"/user/social",icon:w,current:!1,description:"Social feed and interactions"},{name:"LifeLink",href:"/user/lifelink",icon:O,current:!1,description:"Blood donation network and emergency requests"},{name:"Gallery",href:"/user/gallery",icon:L,current:!1,description:"Photo albums and memories"},{name:"Treasury",href:"/user/treasury",icon:z,current:!1,description:"View financial information"},{name:"Support",href:"/user/support",icon:$,current:!1,description:"Get help and support"}]:r==="BATCH_ADMIN"?[...t,{name:"User Verification",href:"/admin/users",icon:G,current:!1,description:"Verify alumni from your batch"},{name:"Alumni Directory",href:"/user/alumni",icon:E,current:!1,description:"Browse and connect with alumni"},{name:"Groups",href:"/user/groups",icon:A,current:!1,description:"Organization groups and committees"},{name:"Organization",href:"/organization",icon:R,current:!1,description:"View organization details"},{name:"My Profile",href:"/user/profile",icon:F,current:!1,description:"View and edit your profile"},{name:"Social",href:"/user/social",icon:w,current:!1,description:"Social feed and interactions"},{name:"Events",href:"/admin/events",icon:C,current:!1,description:"Browse and manage events"},{name:"LifeLink",href:"/user/lifelink",icon:O,current:!1,description:"Blood donation network and emergency requests"},{name:"Gallery",href:"/user/gallery",icon:L,current:!1,description:"Photo albums and memories"},{name:"Treasury",href:"/user/treasury",icon:z,current:!1,description:"View financial information"},{name:"Support",href:"/user/support",icon:$,current:!1,description:"Get help and support"}]:[...t,{name:"User Management",href:"/admin/users",icon:G,current:!1,description:"Approve and manage users"},{name:"Alumni Directory",href:"/user/alumni",icon:E,current:!1,description:"Browse and connect with alumni"},{name:"Groups",href:"/admin/groups",icon:A,current:!1,description:"Manage organization groups and committees"},{name:"Organization",href:"/admin/organization",icon:R,current:!1,description:"Organization settings"},{name:"Social",href:"/admin/social",icon:w,current:!1,description:"Social feed and interactions"},{name:"Posts Management",href:"/admin/posts",icon:be,current:!1,description:"Manage and moderate posts"},{name:"Poll Management",href:"/admin/polls",icon:pe,current:!1,description:"Create and manage polls"},{name:"Events",href:"/admin/events",icon:C,current:!1,description:"Browse and view all events"},{name:"Event Management",href:"/admin/events-management",icon:C,current:!1,description:"Create, edit, and manage events"},{name:"LifeLink",href:"/user/lifelink",icon:O,current:!1,description:"Blood donation network and emergency requests"},{name:"Gallery",href:"/admin/gallery",icon:L,current:!1,description:"Manage photo albums and memories"},{name:"Treasury",href:"/admin/treasury",icon:z,current:!1,description:"Financial management and treasury"},{name:"Support",href:"/admin/support",icon:$,current:!1,description:"Support ticket management"}]},wr=r=>r==="USER"?[{name:"Dashboard",href:"/user/dashboard",icon:S},{name:"Groups",href:"/user/groups",icon:A},{name:"Organization",href:"/organization",icon:R},{name:"Events",href:"/user/events",icon:C},{name:"Social",href:"/user/social",icon:w},{name:"Profile",href:"/profile",icon:F}]:r==="BATCH_ADMIN"?[{name:"Dashboard",href:"/admin/dashboard",icon:S},{name:"Users",href:"/admin/users",icon:E},{name:"Groups",href:"/user/groups",icon:A},{name:"Organization",href:"/organization",icon:R},{name:"Social",href:"/user/social",icon:w},{name:"Events",href:"/admin/events",icon:C},{name:"Profile",href:"/profile",icon:F}]:[{name:"Dashboard",href:"/admin/dashboard",icon:S},{name:"Users",href:"/admin/users",icon:E},{name:"Groups",href:"/admin/groups",icon:A},{name:"Social",href:"/admin/social",icon:w},{name:"Events",href:"/admin/events",icon:C},{name:"Organization",href:"/admin/organization",icon:R},{name:"Profile",href:"/profile",icon:F}],oa=()=>{const{user:r,logout:t}=re(),{isMobile:s}=Re(),n=me(),g=ee(),f=H(xe),[d,l]=a.useState(!1),[c,x]=a.useState(!1),[v,p]=a.useState(!1),{data:j}=Me(),b=j?.name||"Organization",m=yr(r?.role||"USER");wr(r?.role||"USER");const u=m.map(o=>o.href===n.pathname?{...o,current:!0}:o.href==="/admin/events"&&n.pathname==="/admin/events"?{...o,current:!0}:o.href==="/admin/events-management"&&n.pathname==="/admin/events-management"?{...o,current:!0}:n.pathname.startsWith(o.href)&&!(o.href==="/admin/events"&&n.pathname.startsWith("/admin/events-"))?{...o,current:!0}:{...o,current:!1});a.useEffect(()=>{s&&l(!1)},[n.pathname,s]);const y=async()=>{await t(),g("/auth/login")};return s?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(fr,{unreadNotifications:0}),e.jsx("main",{className:"pb-20 pt-2",children:e.jsx(ne,{})}),e.jsx(pr,{userRole:r?.role||"USER",onMoreClick:()=>p(!0)}),e.jsx(br,{isOpen:v,onClose:()=>p(!1),userRole:r?.role||"USER",userName:r?.name||r?.fullName||"User",userEmail:r?.email||"",onLogout:y})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[e.jsx(X,{children:d&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>l(!1)})}),e.jsxs(P.aside,{initial:!1,animate:{x:d||!s?0:-320},className:"fixed inset-y-0 left-0 z-50 w-80 bg-white dark:bg-gray-800 shadow-lg lg:sticky lg:top-0 lg:h-screen lg:z-0 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-center px-8 h-[80px] border-b border-gray-200 dark:border-gray-700 relative",children:[e.jsx("div",{className:"w-full h-14",children:e.jsx("img",{src:f?"/brand/guild-logo-white.png":"/brand/guild-logo.png",alt:"GUILD",className:"w-full h-full object-contain"})}),e.jsx("button",{onClick:()=>l(!1),className:"absolute right-6 lg:hidden p-2 rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(T,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:u.map(o=>{const k=o.icon;return e.jsxs(B,{to:o.href,className:`group flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors relative ${o.current?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-800":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[e.jsx(k,{className:"mr-3 h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:o.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:o.description})]}),o.current&&e.jsx(P.div,{layoutId:"activeNavItem",className:"absolute left-0 top-0 bottom-0 w-1 bg-blue-600 rounded-r-full"})]},o.name)})}),e.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:!c&&r?.id?e.jsx("img",{src:Z(`/api/users/profile-picture/${r.id}`),alt:r.fullName,className:"h-10 w-10 rounded-full object-cover border-2 border-gray-200 dark:border-gray-600",onError:()=>x(!0)}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:r?.fullName?.charAt(0)?.toUpperCase()||"U"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:r?.fullName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:r?.role==="SUPER_ADMIN"?"Super Admin":r?.role==="BATCH_ADMIN"?"Batch Admin":r?.email})]}),e.jsx("button",{onClick:y,className:"flex-shrink-0 p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Sign out",children:e.jsx(te,{className:"h-5 w-5"})})]}),r?.batch&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Batch ",r.batch," â€¢ ",r?.role==="BATCH_ADMIN"?"Admin":"Member"]})})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 sticky top-0 z-30",children:e.jsx("div",{className:"px-6 h-[80px] flex items-center",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>l(!0),className:"lg:hidden p-2 rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors mr-4",children:e.jsx(he,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(fe,{size:"lg",className:"flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:b}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r?.role==="SUPER_ADMIN"?"Super Admin Portal":r?.role==="BATCH_ADMIN"?"Batch Admin Portal":"Alumni Portal"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx("input",{type:"text",placeholder:"Search...",className:"w-64 px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx(hr,{}),e.jsx(gr,{})]})]})})}),e.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:e.jsx(ne,{})})]})]})};export{oa as default};
//# sourceMappingURL=AdminLayout-CaNSVcbg.js.map
